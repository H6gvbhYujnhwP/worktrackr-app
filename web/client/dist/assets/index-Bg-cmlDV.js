const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/initializeBookingSync-B7FPUOM4.js","assets/ticketToBookingConverter-CYGCWh5C.js"])))=>i.map(i=>d[i]);
function Jw(a,l){for(var i=0;i<l.length;i++){const c=l[i];if(typeof c!="string"&&!Array.isArray(c)){for(const o in c)if(o!=="default"&&!(o in a)){const u=Object.getOwnPropertyDescriptor(c,o);u&&Object.defineProperty(a,o,u.get?u:{enumerable:!0,get:()=>c[o]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function c(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function py(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Dm={exports:{}},ji={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function e1(){if(av)return ji;av=1;var a=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function i(c,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:a,type:c,key:h,ref:o!==void 0?o:null,props:u}}return ji.Fragment=l,ji.jsx=i,ji.jsxs=i,ji}var nv;function t1(){return nv||(nv=1,Dm.exports=e1()),Dm.exports}var e=t1(),Mm={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function s1(){if(lv)return Xe;lv=1;var a=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),j=Symbol.iterator;function b(M){return M===null||typeof M!="object"?null:(M=j&&M[j]||M["@@iterator"],typeof M=="function"?M:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,D={};function S(M,U,Q){this.props=M,this.context=U,this.refs=D,this.updater=Q||A}S.prototype.isReactComponent={},S.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},S.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function R(){}R.prototype=S.prototype;function k(M,U,Q){this.props=M,this.context=U,this.refs=D,this.updater=Q||A}var E=k.prototype=new R;E.constructor=k,T(E,S.prototype),E.isPureReactComponent=!0;var w=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function I(M,U,Q,H,ie,ye){return Q=ye.ref,{$$typeof:a,type:M,key:U,ref:Q!==void 0?Q:null,props:ye}}function W(M,U){return I(M.type,U,void 0,void 0,void 0,M.props)}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===a}function Y(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Q){return U[Q]})}var B=/\/+/g;function le(M,U){return typeof M=="object"&&M!==null&&M.key!=null?Y(""+M.key):U.toString(36)}function Z(){}function $(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Z,Z):(M.status="pending",M.then(function(U){M.status==="pending"&&(M.status="fulfilled",M.value=U)},function(U){M.status==="pending"&&(M.status="rejected",M.reason=U)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ee(M,U,Q,H,ie){var ye=typeof M;(ye==="undefined"||ye==="boolean")&&(M=null);var ge=!1;if(M===null)ge=!0;else switch(ye){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(M.$$typeof){case a:case l:ge=!0;break;case x:return ge=M._init,ee(ge(M._payload),U,Q,H,ie)}}if(ge)return ie=ie(M),ge=H===""?"."+le(M,0):H,w(ie)?(Q="",ge!=null&&(Q=ge.replace(B,"$&/")+"/"),ee(ie,U,Q,"",function(Fe){return Fe})):ie!=null&&(P(ie)&&(ie=W(ie,Q+(ie.key==null||M&&M.key===ie.key?"":(""+ie.key).replace(B,"$&/")+"/")+ge)),U.push(ie)),1;ge=0;var pe=H===""?".":H+":";if(w(M))for(var Ne=0;Ne<M.length;Ne++)H=M[Ne],ye=pe+le(H,Ne),ge+=ee(H,U,Q,ye,ie);else if(Ne=b(M),typeof Ne=="function")for(M=Ne.call(M),Ne=0;!(H=M.next()).done;)H=H.value,ye=pe+le(H,Ne++),ge+=ee(H,U,Q,ye,ie);else if(ye==="object"){if(typeof M.then=="function")return ee($(M),U,Q,H,ie);throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ge}function N(M,U,Q){if(M==null)return M;var H=[],ie=0;return ee(M,H,"","",function(ye){return U.call(Q,ye,ie++)}),H}function L(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(Q){(M._status===0||M._status===-1)&&(M._status=1,M._result=Q)},function(Q){(M._status===0||M._status===-1)&&(M._status=2,M._result=Q)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var v=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function O(){}return Xe.Children={map:N,forEach:function(M,U,Q){N(M,function(){U.apply(this,arguments)},Q)},count:function(M){var U=0;return N(M,function(){U++}),U},toArray:function(M){return N(M,function(U){return U})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Xe.Component=S,Xe.Fragment=i,Xe.Profiler=o,Xe.PureComponent=k,Xe.StrictMode=c,Xe.Suspense=g,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},Xe.cache=function(M){return function(){return M.apply(null,arguments)}},Xe.cloneElement=function(M,U,Q){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var H=T({},M.props),ie=M.key,ye=void 0;if(U!=null)for(ge in U.ref!==void 0&&(ye=void 0),U.key!==void 0&&(ie=""+U.key),U)!q.call(U,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&U.ref===void 0||(H[ge]=U[ge]);var ge=arguments.length-2;if(ge===1)H.children=Q;else if(1<ge){for(var pe=Array(ge),Ne=0;Ne<ge;Ne++)pe[Ne]=arguments[Ne+2];H.children=pe}return I(M.type,ie,void 0,void 0,ye,H)},Xe.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Xe.createElement=function(M,U,Q){var H,ie={},ye=null;if(U!=null)for(H in U.key!==void 0&&(ye=""+U.key),U)q.call(U,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(ie[H]=U[H]);var ge=arguments.length-2;if(ge===1)ie.children=Q;else if(1<ge){for(var pe=Array(ge),Ne=0;Ne<ge;Ne++)pe[Ne]=arguments[Ne+2];ie.children=pe}if(M&&M.defaultProps)for(H in ge=M.defaultProps,ge)ie[H]===void 0&&(ie[H]=ge[H]);return I(M,ye,void 0,void 0,null,ie)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(M){return{$$typeof:p,render:M}},Xe.isValidElement=P,Xe.lazy=function(M){return{$$typeof:x,_payload:{_status:-1,_result:M},_init:L}},Xe.memo=function(M,U){return{$$typeof:y,type:M,compare:U===void 0?null:U}},Xe.startTransition=function(M){var U=C.T,Q={};C.T=Q;try{var H=M(),ie=C.S;ie!==null&&ie(Q,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(O,v)}catch(ye){v(ye)}finally{C.T=U}},Xe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Xe.use=function(M){return C.H.use(M)},Xe.useActionState=function(M,U,Q){return C.H.useActionState(M,U,Q)},Xe.useCallback=function(M,U){return C.H.useCallback(M,U)},Xe.useContext=function(M){return C.H.useContext(M)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(M,U){return C.H.useDeferredValue(M,U)},Xe.useEffect=function(M,U,Q){var H=C.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(M,U)},Xe.useId=function(){return C.H.useId()},Xe.useImperativeHandle=function(M,U,Q){return C.H.useImperativeHandle(M,U,Q)},Xe.useInsertionEffect=function(M,U){return C.H.useInsertionEffect(M,U)},Xe.useLayoutEffect=function(M,U){return C.H.useLayoutEffect(M,U)},Xe.useMemo=function(M,U){return C.H.useMemo(M,U)},Xe.useOptimistic=function(M,U){return C.H.useOptimistic(M,U)},Xe.useReducer=function(M,U,Q){return C.H.useReducer(M,U,Q)},Xe.useRef=function(M){return C.H.useRef(M)},Xe.useState=function(M){return C.H.useState(M)},Xe.useSyncExternalStore=function(M,U,Q){return C.H.useSyncExternalStore(M,U,Q)},Xe.useTransition=function(){return C.H.useTransition()},Xe.version="19.1.1",Xe}var rv;function Th(){return rv||(rv=1,Mm.exports=s1()),Mm.exports}var f=Th();const As=py(f),gy=Jw({__proto__:null,default:As},[f]);var Rm={exports:{}},bi={},Om={exports:{}},zm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function a1(){return iv||(iv=1,(function(a){function l(N,L){var v=N.length;N.push(L);e:for(;0<v;){var O=v-1>>>1,M=N[O];if(0<o(M,L))N[O]=L,N[v]=M,v=O;else break e}}function i(N){return N.length===0?null:N[0]}function c(N){if(N.length===0)return null;var L=N[0],v=N.pop();if(v!==L){N[0]=v;e:for(var O=0,M=N.length,U=M>>>1;O<U;){var Q=2*(O+1)-1,H=N[Q],ie=Q+1,ye=N[ie];if(0>o(H,v))ie<M&&0>o(ye,H)?(N[O]=ye,N[ie]=v,O=ie):(N[O]=H,N[Q]=v,O=Q);else if(ie<M&&0>o(ye,v))N[O]=ye,N[ie]=v,O=ie;else break e}}return L}function o(N,L){var v=N.sortIndex-L.sortIndex;return v!==0?v:N.id-L.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();a.unstable_now=function(){return h.now()-p}}var g=[],y=[],x=1,j=null,b=3,A=!1,T=!1,D=!1,S=!1,R=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function w(N){for(var L=i(y);L!==null;){if(L.callback===null)c(y);else if(L.startTime<=N)c(y),L.sortIndex=L.expirationTime,l(g,L);else break;L=i(y)}}function C(N){if(D=!1,w(N),!T)if(i(g)!==null)T=!0,q||(q=!0,le());else{var L=i(y);L!==null&&ee(C,L.startTime-N)}}var q=!1,I=-1,W=5,P=-1;function Y(){return S?!0:!(a.unstable_now()-P<W)}function B(){if(S=!1,q){var N=a.unstable_now();P=N;var L=!0;try{e:{T=!1,D&&(D=!1,k(I),I=-1),A=!0;var v=b;try{t:{for(w(N),j=i(g);j!==null&&!(j.expirationTime>N&&Y());){var O=j.callback;if(typeof O=="function"){j.callback=null,b=j.priorityLevel;var M=O(j.expirationTime<=N);if(N=a.unstable_now(),typeof M=="function"){j.callback=M,w(N),L=!0;break t}j===i(g)&&c(g),w(N)}else c(g);j=i(g)}if(j!==null)L=!0;else{var U=i(y);U!==null&&ee(C,U.startTime-N),L=!1}}break e}finally{j=null,b=v,A=!1}L=void 0}}finally{L?le():q=!1}}}var le;if(typeof E=="function")le=function(){E(B)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,$=Z.port2;Z.port1.onmessage=B,le=function(){$.postMessage(null)}}else le=function(){R(B,0)};function ee(N,L){I=R(function(){N(a.unstable_now())},L)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(N){N.callback=null},a.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<N?Math.floor(1e3/N):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_next=function(N){switch(b){case 1:case 2:case 3:var L=3;break;default:L=b}var v=b;b=L;try{return N()}finally{b=v}},a.unstable_requestPaint=function(){S=!0},a.unstable_runWithPriority=function(N,L){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var v=b;b=N;try{return L()}finally{b=v}},a.unstable_scheduleCallback=function(N,L,v){var O=a.unstable_now();switch(typeof v=="object"&&v!==null?(v=v.delay,v=typeof v=="number"&&0<v?O+v:O):v=O,N){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=v+M,N={id:x++,callback:L,priorityLevel:N,startTime:v,expirationTime:M,sortIndex:-1},v>O?(N.sortIndex=v,l(y,N),i(g)===null&&N===i(y)&&(D?(k(I),I=-1):D=!0,ee(C,v-O))):(N.sortIndex=M,l(g,N),T||A||(T=!0,q||(q=!0,le()))),N},a.unstable_shouldYield=Y,a.unstable_wrapCallback=function(N){var L=b;return function(){var v=b;b=L;try{return N.apply(this,arguments)}finally{b=v}}}})(zm)),zm}var cv;function n1(){return cv||(cv=1,Om.exports=a1()),Om.exports}var Pm={exports:{}},cs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function l1(){if(ov)return cs;ov=1;var a=Th();function l(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var c={d:{f:i,r:function(){throw Error(l(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:j==null?null:""+j,children:g,containerInfo:y,implementation:x}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,cs.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(l(299));return u(g,y,null,x)},cs.flushSync=function(g){var y=h.T,x=c.p;try{if(h.T=null,c.p=2,g)return g()}finally{h.T=y,c.p=x,c.d.f()}},cs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,c.d.C(g,y))},cs.prefetchDNS=function(g){typeof g=="string"&&c.d.D(g)},cs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,j=p(x,y.crossOrigin),b=typeof y.integrity=="string"?y.integrity:void 0,A=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?c.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:j,integrity:b,fetchPriority:A}):x==="script"&&c.d.X(g,{crossOrigin:j,integrity:b,fetchPriority:A,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},cs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);c.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&c.d.M(g)},cs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,j=p(x,y.crossOrigin);c.d.L(g,x,{crossOrigin:j,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},cs.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);c.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else c.d.m(g)},cs.requestFormReset=function(g){c.d.r(g)},cs.unstable_batchedUpdates=function(g,y){return g(y)},cs.useFormState=function(g,y,x){return h.H.useFormState(g,y,x)},cs.useFormStatus=function(){return h.H.useHostTransitionStatus()},cs.version="19.1.1",cs}var dv;function vy(){if(dv)return Pm.exports;dv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}return a(),Pm.exports=l1(),Pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function r1(){if(uv)return bi;uv=1;var a=n1(),l=Th(),i=vy();function c(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(c(188))}function g(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(c(188));return s!==t?null:t}for(var n=t,r=s;;){var d=n.return;if(d===null)break;var m=d.alternate;if(m===null){if(r=d.return,r!==null){n=r;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===n)return p(d),t;if(m===r)return p(d),s;m=m.sibling}throw Error(c(188))}if(n.return!==r.return)n=d,r=m;else{for(var _=!1,z=d.child;z;){if(z===n){_=!0,n=d,r=m;break}if(z===r){_=!0,r=d,n=m;break}z=z.sibling}if(!_){for(z=m.child;z;){if(z===n){_=!0,n=m,r=d;break}if(z===r){_=!0,r=m,n=d;break}z=z.sibling}if(!_)throw Error(c(189))}}if(n.alternate!==r)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var x=Object.assign,j=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),E=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function le(t){return t===null||typeof t!="object"?null:(t=B&&t[B]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function $(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case S:return"Profiler";case D:return"StrictMode";case C:return"Suspense";case q:return"SuspenseList";case P:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case A:return"Portal";case E:return(t.displayName||"Context")+".Provider";case k:return(t._context.displayName||"Context")+".Consumer";case w:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return s=t.displayName||null,s!==null?s:$(t.type)||"Memo";case W:s=t._payload,t=t._init;try{return $(t(s))}catch{}}return null}var ee=Array.isArray,N=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,v={pending:!1,data:null,method:null,action:null},O=[],M=-1;function U(t){return{current:t}}function Q(t){0>M||(t.current=O[M],O[M]=null,M--)}function H(t,s){M++,O[M]=t.current,t.current=s}var ie=U(null),ye=U(null),ge=U(null),pe=U(null);function Ne(t,s){switch(H(ge,s),H(ye,t),H(ie,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Dg(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Dg(s),t=Mg(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(ie),H(ie,t)}function Fe(){Q(ie),Q(ye),Q(ge)}function De(t){t.memoizedState!==null&&H(pe,t);var s=ie.current,n=Mg(s,t.type);s!==n&&(H(ye,t),H(ie,n))}function Ge(t){ye.current===t&&(Q(ie),Q(ye)),pe.current===t&&(Q(pe),xi._currentValue=v)}var We=Object.prototype.hasOwnProperty,xt=a.unstable_scheduleCallback,G=a.unstable_cancelCallback,fe=a.unstable_shouldYield,Me=a.unstable_requestPaint,_e=a.unstable_now,rt=a.unstable_getCurrentPriorityLevel,at=a.unstable_ImmediatePriority,Gt=a.unstable_UserBlockingPriority,Ut=a.unstable_NormalPriority,Cr=a.unstable_LowPriority,Un=a.unstable_IdlePriority,qn=a.log,ca=a.unstable_setDisableYieldValue,ps=null,we=null;function St(t){if(typeof qn=="function"&&ca(t),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(ps,t)}catch{}}var Mt=Math.clz32?Math.clz32:X,Ys=Math.log,In=Math.LN2;function X(t){return t>>>=0,t===0?32:31-(Ys(t)/In|0)|0}var je=256,ve=4194304;function be(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Pe(t,s,n){var r=t.pendingLanes;if(r===0)return 0;var d=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var z=r&134217727;return z!==0?(r=z&~m,r!==0?d=be(r):(_&=z,_!==0?d=be(_):n||(n=z&~t,n!==0&&(d=be(n))))):(z=r&~m,z!==0?d=be(z):_!==0?d=be(_):n||(n=r&~t,n!==0&&(d=be(n)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,n=s&-s,m>=n||m===32&&(n&4194048)!==0)?s:d}function ze(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function us(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bn(){var t=je;return je<<=1,(je&4194048)===0&&(je=256),t}function Qs(){var t=ve;return ve<<=1,(ve&62914560)===0&&(ve=4194304),t}function Rt(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function Sr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Bb(t,s,n,r,d,m){var _=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var z=t.entanglements,V=t.expirationTimes,ne=t.hiddenUpdates;for(n=_&~n;0<n;){var ue=31-Mt(n),xe=1<<ue;z[ue]=0,V[ue]=-1;var re=ne[ue];if(re!==null)for(ne[ue]=null,ue=0;ue<re.length;ue++){var ce=re[ue];ce!==null&&(ce.lane&=-536870913)}n&=~xe}r!==0&&pf(t,r,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function pf(t,s,n){t.pendingLanes|=s,t.suspendedLanes&=~s;var r=31-Mt(s);t.entangledLanes|=s,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function gf(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var r=31-Mt(n),d=1<<r;d&s|t[r]&s&&(t[r]|=s),n&=~d}}function bd(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Nd(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function vf(){var t=L.p;return t!==0?t:(t=window.event,t===void 0?32:Zg(t.type))}function Fb(t,s){var n=L.p;try{return L.p=t,s()}finally{L.p=n}}var nn=Math.random().toString(36).slice(2),rs="__reactFiber$"+nn,gs="__reactProps$"+nn,jl="__reactContainer$"+nn,wd="__reactEvents$"+nn,$b="__reactListeners$"+nn,Hb="__reactHandles$"+nn,yf="__reactResources$"+nn,kr="__reactMarker$"+nn;function Cd(t){delete t[rs],delete t[gs],delete t[wd],delete t[$b],delete t[Hb]}function bl(t){var s=t[rs];if(s)return s;for(var n=t.parentNode;n;){if(s=n[jl]||n[rs]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=Pg(t);t!==null;){if(n=t[rs])return n;t=Pg(t)}return s}t=n,n=t.parentNode}return null}function Nl(t){if(t=t[rs]||t[jl]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function _r(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(c(33))}function wl(t){var s=t[yf];return s||(s=t[yf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Yt(t){t[kr]=!0}var jf=new Set,bf={};function Fn(t,s){Cl(t,s),Cl(t+"Capture",s)}function Cl(t,s){for(bf[t]=s,t=0;t<s.length;t++)jf.add(s[t])}var Vb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nf={},wf={};function Gb(t){return We.call(wf,t)?!0:We.call(Nf,t)?!1:Vb.test(t)?wf[t]=!0:(Nf[t]=!0,!1)}function Ki(t,s,n){if(Gb(s))if(n===null)t.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var r=s.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+n)}}function Ji(t,s,n){if(n===null)t.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+n)}}function Ma(t,s,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(s,n,""+r)}}var Sd,Cf;function Sl(t){if(Sd===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);Sd=s&&s[1]||"",Cf=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sd+t+Cf}var kd=!1;function _d(t,s){if(!t||kd)return"";kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(s){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ce){var re=ce}Reflect.construct(t,[],xe)}else{try{xe.call()}catch(ce){re=ce}t.call(xe.prototype)}}else{try{throw Error()}catch(ce){re=ce}(xe=t())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ce){if(ce&&re&&typeof ce.stack=="string")return[ce.stack,re.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=r.DetermineComponentFrameRoot(),_=m[0],z=m[1];if(_&&z){var V=_.split(`
`),ne=z.split(`
`);for(d=r=0;r<V.length&&!V[r].includes("DetermineComponentFrameRoot");)r++;for(;d<ne.length&&!ne[d].includes("DetermineComponentFrameRoot");)d++;if(r===V.length||d===ne.length)for(r=V.length-1,d=ne.length-1;1<=r&&0<=d&&V[r]!==ne[d];)d--;for(;1<=r&&0<=d;r--,d--)if(V[r]!==ne[d]){if(r!==1||d!==1)do if(r--,d--,0>d||V[r]!==ne[d]){var ue=`
`+V[r].replace(" at new "," at ");return t.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",t.displayName)),ue}while(1<=r&&0<=d);break}}}finally{kd=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Sl(n):""}function Yb(t){switch(t.tag){case 26:case 27:case 5:return Sl(t.type);case 16:return Sl("Lazy");case 13:return Sl("Suspense");case 19:return Sl("SuspenseList");case 0:case 15:return _d(t.type,!1);case 11:return _d(t.type.render,!1);case 1:return _d(t.type,!0);case 31:return Sl("Activity");default:return""}}function Sf(t){try{var s="";do s+=Yb(t),t=t.return;while(t);return s}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Os(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kf(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Qb(t){var s=kf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var d=n.get,m=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){r=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ec(t){t._valueTracker||(t._valueTracker=Qb(t))}function _f(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return t&&(r=kf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(s.setValue(t),!0):!1}function tc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Wb=/[\n"\\]/g;function zs(t){return t.replace(Wb,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Td(t,s,n,r,d,m,_,z){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Os(s)):t.value!==""+Os(s)&&(t.value=""+Os(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?Ed(t,_,Os(s)):n!=null?Ed(t,_,Os(n)):r!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?t.name=""+Os(z):t.removeAttribute("name")}function Tf(t,s,n,r,d,m,_,z){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||n!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;n=n!=null?""+Os(n):"",s=s!=null?""+Os(s):n,z||s===t.value||(t.value=s),t.defaultValue=s}r=r??d,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=z?t.checked:!!r,t.defaultChecked=!!r,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Ed(t,s,n){s==="number"&&tc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function kl(t,s,n,r){if(t=t.options,s){s={};for(var d=0;d<n.length;d++)s["$"+n[d]]=!0;for(n=0;n<t.length;n++)d=s.hasOwnProperty("$"+t[n].value),t[n].selected!==d&&(t[n].selected=d),d&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Os(n),s=null,d=0;d<t.length;d++){if(t[d].value===n){t[d].selected=!0,r&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function Ef(t,s,n){if(s!=null&&(s=""+Os(s),s!==t.value&&(t.value=s),n==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=n!=null?""+Os(n):""}function Af(t,s,n,r){if(s==null){if(r!=null){if(n!=null)throw Error(c(92));if(ee(r)){if(1<r.length)throw Error(c(93));r=r[0]}n=r}n==null&&(n=""),s=n}n=Os(s),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function _l(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var Xb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Df(t,s,n){var r=s.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":r?t.setProperty(s,n):typeof n!="number"||n===0||Xb.has(s)?s==="float"?t.cssFloat=n:t[s]=(""+n).trim():t[s]=n+"px"}function Mf(t,s,n){if(s!=null&&typeof s!="object")throw Error(c(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||s!=null&&s.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var d in s)r=s[d],s.hasOwnProperty(d)&&n[d]!==r&&Df(t,d,r)}else for(var m in s)s.hasOwnProperty(m)&&Df(t,m,s[m])}function Ad(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sc(t){return Kb.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Dd=null;function Md(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tl=null,El=null;function Rf(t){var s=Nl(t);if(s&&(t=s.stateNode)){var n=t[gs]||null;e:switch(t=s.stateNode,s.type){case"input":if(Td(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+zs(""+s)+'"][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==t&&r.form===t.form){var d=r[gs]||null;if(!d)throw Error(c(90));Td(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<n.length;s++)r=n[s],r.form===t.form&&_f(r)}break e;case"textarea":Ef(t,n.value,n.defaultValue);break e;case"select":s=n.value,s!=null&&kl(t,!!n.multiple,s,!1)}}}var Rd=!1;function Of(t,s,n){if(Rd)return t(s,n);Rd=!0;try{var r=t(s);return r}finally{if(Rd=!1,(Tl!==null||El!==null)&&(Bc(),Tl&&(s=Tl,t=El,El=Tl=null,Rf(s),t)))for(s=0;s<t.length;s++)Rf(t[s])}}function Tr(t,s){var n=t.stateNode;if(n===null)return null;var r=n[gs]||null;if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(c(231,s,typeof n));return n}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(Ra)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{Od=!1}var ln=null,zd=null,ac=null;function zf(){if(ac)return ac;var t,s=zd,n=s.length,r,d="value"in ln?ln.value:ln.textContent,m=d.length;for(t=0;t<n&&s[t]===d[t];t++);var _=n-t;for(r=1;r<=_&&s[n-r]===d[m-r];r++);return ac=d.slice(t,1<r?1-r:void 0)}function nc(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function lc(){return!0}function Pf(){return!1}function vs(t){function s(n,r,d,m,_){this._reactName=n,this._targetInst=d,this.type=r,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var z in t)t.hasOwnProperty(z)&&(n=t[z],this[z]=n?n(m):m[z]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?lc:Pf,this.isPropagationStopped=Pf,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),s}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=vs($n),Ar=x({},$n,{view:0,detail:0}),Jb=vs(Ar),Pd,Ld,Dr,ic=x({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(Pd=t.screenX-Dr.screenX,Ld=t.screenY-Dr.screenY):Ld=Pd=0,Dr=t),Pd)},movementY:function(t){return"movementY"in t?t.movementY:Ld}}),Lf=vs(ic),eN=x({},ic,{dataTransfer:0}),tN=vs(eN),sN=x({},Ar,{relatedTarget:0}),Ud=vs(sN),aN=x({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),nN=vs(aN),lN=x({},$n,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rN=vs(lN),iN=x({},$n,{data:0}),Uf=vs(iN),cN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uN(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=dN[t])?!!s[t]:!1}function qd(){return uN}var mN=x({},Ar,{key:function(t){if(t.key){var s=cN[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qd,charCode:function(t){return t.type==="keypress"?nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hN=vs(mN),fN=x({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qf=vs(fN),xN=x({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qd}),pN=vs(xN),gN=x({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),vN=vs(gN),yN=x({},ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jN=vs(yN),bN=x({},$n,{newState:0,oldState:0}),NN=vs(bN),wN=[9,13,27,32],Id=Ra&&"CompositionEvent"in window,Mr=null;Ra&&"documentMode"in document&&(Mr=document.documentMode);var CN=Ra&&"TextEvent"in window&&!Mr,If=Ra&&(!Id||Mr&&8<Mr&&11>=Mr),Bf=" ",Ff=!1;function $f(t,s){switch(t){case"keyup":return wN.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Al=!1;function SN(t,s){switch(t){case"compositionend":return Hf(s);case"keypress":return s.which!==32?null:(Ff=!0,Bf);case"textInput":return t=s.data,t===Bf&&Ff?null:t;default:return null}}function kN(t,s){if(Al)return t==="compositionend"||!Id&&$f(t,s)?(t=zf(),ac=zd=ln=null,Al=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return If&&s.locale!=="ko"?null:s.data;default:return null}}var _N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!_N[t.type]:s==="textarea"}function Gf(t,s,n,r){Tl?El?El.push(r):El=[r]:Tl=r,s=Yc(s,"onChange"),0<s.length&&(n=new rc("onChange","change",null,n,r),t.push({event:n,listeners:s}))}var Rr=null,Or=null;function TN(t){kg(t,0)}function cc(t){var s=_r(t);if(_f(s))return t}function Yf(t,s){if(t==="change")return s}var Qf=!1;if(Ra){var Bd;if(Ra){var Fd="oninput"in document;if(!Fd){var Wf=document.createElement("div");Wf.setAttribute("oninput","return;"),Fd=typeof Wf.oninput=="function"}Bd=Fd}else Bd=!1;Qf=Bd&&(!document.documentMode||9<document.documentMode)}function Xf(){Rr&&(Rr.detachEvent("onpropertychange",Zf),Or=Rr=null)}function Zf(t){if(t.propertyName==="value"&&cc(Or)){var s=[];Gf(s,Or,t,Md(t)),Of(TN,s)}}function EN(t,s,n){t==="focusin"?(Xf(),Rr=s,Or=n,Rr.attachEvent("onpropertychange",Zf)):t==="focusout"&&Xf()}function AN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(Or)}function DN(t,s){if(t==="click")return cc(s)}function MN(t,s){if(t==="input"||t==="change")return cc(s)}function RN(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ns=typeof Object.is=="function"?Object.is:RN;function zr(t,s){if(Ns(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var d=n[r];if(!We.call(s,d)||!Ns(t[d],s[d]))return!1}return!0}function Kf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jf(t,s){var n=Kf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=s&&r>=s)return{node:n,offset:s-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kf(n)}}function ex(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ex(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function tx(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=tc(t.document);s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=tc(t.document)}return s}function $d(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var ON=Ra&&"documentMode"in document&&11>=document.documentMode,Dl=null,Hd=null,Pr=null,Vd=!1;function sx(t,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vd||Dl==null||Dl!==tc(r)||(r=Dl,"selectionStart"in r&&$d(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pr&&zr(Pr,r)||(Pr=r,r=Yc(Hd,"onSelect"),0<r.length&&(s=new rc("onSelect","select",null,s,n),t.push({event:s,listeners:r}),s.target=Dl)))}function Hn(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var Ml={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionrun:Hn("Transition","TransitionRun"),transitionstart:Hn("Transition","TransitionStart"),transitioncancel:Hn("Transition","TransitionCancel"),transitionend:Hn("Transition","TransitionEnd")},Gd={},ax={};Ra&&(ax=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function Vn(t){if(Gd[t])return Gd[t];if(!Ml[t])return t;var s=Ml[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in ax)return Gd[t]=s[n];return t}var nx=Vn("animationend"),lx=Vn("animationiteration"),rx=Vn("animationstart"),zN=Vn("transitionrun"),PN=Vn("transitionstart"),LN=Vn("transitioncancel"),ix=Vn("transitionend"),cx=new Map,Yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yd.push("scrollEnd");function Ws(t,s){cx.set(t,s),Fn(s,[t])}var ox=new WeakMap;function Ps(t,s){if(typeof t=="object"&&t!==null){var n=ox.get(t);return n!==void 0?n:(s={value:t,source:s,stack:Sf(s)},ox.set(t,s),s)}return{value:t,source:s,stack:Sf(s)}}var Ls=[],Rl=0,Qd=0;function oc(){for(var t=Rl,s=Qd=Rl=0;s<t;){var n=Ls[s];Ls[s++]=null;var r=Ls[s];Ls[s++]=null;var d=Ls[s];Ls[s++]=null;var m=Ls[s];if(Ls[s++]=null,r!==null&&d!==null){var _=r.pending;_===null?d.next=d:(d.next=_.next,_.next=d),r.pending=d}m!==0&&dx(n,d,m)}}function dc(t,s,n,r){Ls[Rl++]=t,Ls[Rl++]=s,Ls[Rl++]=n,Ls[Rl++]=r,Qd|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Wd(t,s,n,r){return dc(t,s,n,r),uc(t)}function Ol(t,s){return dc(t,null,null,s),uc(t)}function dx(t,s,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var d=!1,m=t.return;m!==null;)m.childLanes|=n,r=m.alternate,r!==null&&(r.childLanes|=n),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&s!==null&&(d=31-Mt(n),t=m.hiddenUpdates,r=t[d],r===null?t[d]=[s]:r.push(s),s.lane=n|536870912),m):null}function uc(t){if(50<ii)throw ii=0,tm=null,Error(c(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var zl={};function UN(t,s,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(t,s,n,r){return new UN(t,s,n,r)}function Xd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oa(t,s){var n=t.alternate;return n===null?(n=ws(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ux(t,s){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,s=n.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function mc(t,s,n,r,d,m){var _=0;if(r=t,typeof t=="function")Xd(t)&&(_=1);else if(typeof t=="string")_=Iw(t,n,ie.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case P:return t=ws(31,n,s,d),t.elementType=P,t.lanes=m,t;case T:return Gn(n.children,d,m,s);case D:_=8,d|=24;break;case S:return t=ws(12,n,s,d|2),t.elementType=S,t.lanes=m,t;case C:return t=ws(13,n,s,d),t.elementType=C,t.lanes=m,t;case q:return t=ws(19,n,s,d),t.elementType=q,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case E:_=10;break e;case k:_=9;break e;case w:_=11;break e;case I:_=14;break e;case W:_=16,r=null;break e}_=29,n=Error(c(130,t===null?"null":typeof t,"")),r=null}return s=ws(_,n,s,d),s.elementType=t,s.type=r,s.lanes=m,s}function Gn(t,s,n,r){return t=ws(7,t,r,s),t.lanes=n,t}function Zd(t,s,n){return t=ws(6,t,null,s),t.lanes=n,t}function Kd(t,s,n){return s=ws(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Pl=[],Ll=0,hc=null,fc=0,Us=[],qs=0,Yn=null,za=1,Pa="";function Qn(t,s){Pl[Ll++]=fc,Pl[Ll++]=hc,hc=t,fc=s}function mx(t,s,n){Us[qs++]=za,Us[qs++]=Pa,Us[qs++]=Yn,Yn=t;var r=za;t=Pa;var d=32-Mt(r)-1;r&=~(1<<d),n+=1;var m=32-Mt(s)+d;if(30<m){var _=d-d%5;m=(r&(1<<_)-1).toString(32),r>>=_,d-=_,za=1<<32-Mt(s)+d|n<<d|r,Pa=m+t}else za=1<<m|n<<d|r,Pa=t}function Jd(t){t.return!==null&&(Qn(t,1),mx(t,1,0))}function eu(t){for(;t===hc;)hc=Pl[--Ll],Pl[Ll]=null,fc=Pl[--Ll],Pl[Ll]=null;for(;t===Yn;)Yn=Us[--qs],Us[qs]=null,Pa=Us[--qs],Us[qs]=null,za=Us[--qs],Us[qs]=null}var ms=null,At=null,ht=!1,Wn=null,oa=!1,tu=Error(c(519));function Xn(t){var s=Error(c(418,""));throw qr(Ps(s,t)),tu}function hx(t){var s=t.stateNode,n=t.type,r=t.memoizedProps;switch(s[rs]=t,s[gs]=r,n){case"dialog":lt("cancel",s),lt("close",s);break;case"iframe":case"object":case"embed":lt("load",s);break;case"video":case"audio":for(n=0;n<oi.length;n++)lt(oi[n],s);break;case"source":lt("error",s);break;case"img":case"image":case"link":lt("error",s),lt("load",s);break;case"details":lt("toggle",s);break;case"input":lt("invalid",s),Tf(s,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ec(s);break;case"select":lt("invalid",s);break;case"textarea":lt("invalid",s),Af(s,r.value,r.defaultValue,r.children),ec(s)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||s.textContent===""+n||r.suppressHydrationWarning===!0||Ag(s.textContent,n)?(r.popover!=null&&(lt("beforetoggle",s),lt("toggle",s)),r.onScroll!=null&&lt("scroll",s),r.onScrollEnd!=null&&lt("scrollend",s),r.onClick!=null&&(s.onclick=Qc),s=!0):s=!1,s||Xn(t)}function fx(t){for(ms=t.return;ms;)switch(ms.tag){case 5:case 13:oa=!1;return;case 27:case 3:oa=!0;return;default:ms=ms.return}}function Lr(t){if(t!==ms)return!1;if(!ht)return fx(t),ht=!0,!1;var s=t.tag,n;if((n=s!==3&&s!==27)&&((n=s===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||gm(t.type,t.memoizedProps)),n=!n),n&&At&&Xn(t),fx(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(s===0){At=Zs(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++;t=t.nextSibling}At=null}}else s===27?(s=At,Nn(t.type)?(t=bm,bm=null,At=t):At=s):At=ms?Zs(t.stateNode.nextSibling):null;return!0}function Ur(){At=ms=null,ht=!1}function xx(){var t=Wn;return t!==null&&(bs===null?bs=t:bs.push.apply(bs,t),Wn=null),t}function qr(t){Wn===null?Wn=[t]:Wn.push(t)}var su=U(null),Zn=null,La=null;function rn(t,s,n){H(su,s._currentValue),s._currentValue=n}function Ua(t){t._currentValue=su.current,Q(su)}function au(t,s,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===n)break;t=t.return}}function nu(t,s,n,r){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var z=m;m=d;for(var V=0;V<s.length;V++)if(z.context===s[V]){m.lanes|=n,z=m.alternate,z!==null&&(z.lanes|=n),au(m.return,n,t),r||(_=null);break e}m=z.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(c(341));_.lanes|=n,m=_.alternate,m!==null&&(m.lanes|=n),au(_,n,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ir(t,s,n,r){t=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(c(387));if(_=_.memoizedProps,_!==null){var z=d.type;Ns(d.pendingProps.value,_.value)||(t!==null?t.push(z):t=[z])}}else if(d===pe.current){if(_=d.alternate,_===null)throw Error(c(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(xi):t=[xi])}d=d.return}t!==null&&nu(s,t,n,r),s.flags|=262144}function xc(t){for(t=t.firstContext;t!==null;){if(!Ns(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Kn(t){Zn=t,La=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function is(t){return px(Zn,t)}function pc(t,s){return Zn===null&&Kn(t),px(t,s)}function px(t,s){var n=s._currentValue;if(s={context:s,memoizedValue:n,next:null},La===null){if(t===null)throw Error(c(308));La=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else La=La.next=s;return n}var qN=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){s.aborted=!0,t.forEach(function(n){return n()})}},IN=a.unstable_scheduleCallback,BN=a.unstable_NormalPriority,Bt={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lu(){return{controller:new qN,data:new Map,refCount:0}}function Br(t){t.refCount--,t.refCount===0&&IN(BN,function(){t.controller.abort()})}var Fr=null,ru=0,Ul=0,ql=null;function FN(t,s){if(Fr===null){var n=Fr=[];ru=0,Ul=cm(),ql={status:"pending",value:void 0,then:function(r){n.push(r)}}}return ru++,s.then(gx,gx),s}function gx(){if(--ru===0&&Fr!==null){ql!==null&&(ql.status="fulfilled");var t=Fr;Fr=null,Ul=0,ql=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function $N(t,s){var n=[],r={status:"pending",value:null,reason:null,then:function(d){n.push(d)}};return t.then(function(){r.status="fulfilled",r.value=s;for(var d=0;d<n.length;d++)(0,n[d])(s)},function(d){for(r.status="rejected",r.reason=d,d=0;d<n.length;d++)(0,n[d])(void 0)}),r}var vx=N.S;N.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&FN(t,s),vx!==null&&vx(t,s)};var Jn=U(null);function iu(){var t=Jn.current;return t!==null?t:wt.pooledCache}function gc(t,s){s===null?H(Jn,Jn.current):H(Jn,s.pool)}function yx(){var t=iu();return t===null?null:{parent:Bt._currentValue,pool:t}}var $r=Error(c(460)),jx=Error(c(474)),vc=Error(c(542)),cu={then:function(){}};function bx(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yc(){}function Nx(t,s,n){switch(n=t[n],n===void 0?t.push(s):n!==s&&(s.then(yc,yc),s=n),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Cx(t),t;default:if(typeof s.status=="string")s.then(yc,yc);else{if(t=wt,t!==null&&100<t.shellSuspendCounter)throw Error(c(482));t=s,t.status="pending",t.then(function(r){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=r}},function(r){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=r}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Cx(t),t}throw Hr=s,$r}}var Hr=null;function wx(){if(Hr===null)throw Error(c(459));var t=Hr;return Hr=null,t}function Cx(t){if(t===$r||t===vc)throw Error(c(483))}var cn=!1;function ou(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function du(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function on(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function dn(t,s,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(pt&2)!==0){var d=r.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),r.pending=s,s=uc(t),dx(t,null,n),s}return dc(t,r,s,n),uc(t)}function Vr(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194048)!==0)){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,gf(t,n)}}function uu(t,s){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var d=null,m=null;if(n=n.firstBaseUpdate,n!==null){do{var _={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,n=n.next}while(n!==null);m===null?d=m=s:m=m.next=s}else d=m=s;n={baseState:r.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}var mu=!1;function Gr(){if(mu){var t=ql;if(t!==null)throw t}}function Yr(t,s,n,r){mu=!1;var d=t.updateQueue;cn=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,z=d.shared.pending;if(z!==null){d.shared.pending=null;var V=z,ne=V.next;V.next=null,_===null?m=ne:_.next=ne,_=V;var ue=t.alternate;ue!==null&&(ue=ue.updateQueue,z=ue.lastBaseUpdate,z!==_&&(z===null?ue.firstBaseUpdate=ne:z.next=ne,ue.lastBaseUpdate=V))}if(m!==null){var xe=d.baseState;_=0,ue=ne=V=null,z=m;do{var re=z.lane&-536870913,ce=re!==z.lane;if(ce?(dt&re)===re:(r&re)===re){re!==0&&re===Ul&&(mu=!0),ue!==null&&(ue=ue.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var Ye=t,$e=z;re=s;var bt=n;switch($e.tag){case 1:if(Ye=$e.payload,typeof Ye=="function"){xe=Ye.call(bt,xe,re);break e}xe=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=$e.payload,re=typeof Ye=="function"?Ye.call(bt,xe,re):Ye,re==null)break e;xe=x({},xe,re);break e;case 2:cn=!0}}re=z.callback,re!==null&&(t.flags|=64,ce&&(t.flags|=8192),ce=d.callbacks,ce===null?d.callbacks=[re]:ce.push(re))}else ce={lane:re,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ue===null?(ne=ue=ce,V=xe):ue=ue.next=ce,_|=re;if(z=z.next,z===null){if(z=d.shared.pending,z===null)break;ce=z,z=ce.next,ce.next=null,d.lastBaseUpdate=ce,d.shared.pending=null}}while(!0);ue===null&&(V=xe),d.baseState=V,d.firstBaseUpdate=ne,d.lastBaseUpdate=ue,m===null&&(d.shared.lanes=0),vn|=_,t.lanes=_,t.memoizedState=xe}}function Sx(t,s){if(typeof t!="function")throw Error(c(191,t));t.call(s)}function kx(t,s){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Sx(n[t],s)}var Il=U(null),jc=U(0);function _x(t,s){t=Va,H(jc,t),H(Il,s),Va=t|s.baseLanes}function hu(){H(jc,Va),H(Il,Il.current)}function fu(){Va=jc.current,Q(Il),Q(jc)}var un=0,et=null,yt=null,qt=null,bc=!1,Bl=!1,el=!1,Nc=0,Qr=0,Fl=null,HN=0;function Ot(){throw Error(c(321))}function xu(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!Ns(t[n],s[n]))return!1;return!0}function pu(t,s,n,r,d,m){return un=m,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,N.H=t===null||t.memoizedState===null?dp:up,el=!1,m=n(r,d),el=!1,Bl&&(m=Ex(s,n,r,d)),Tx(t),m}function Tx(t){N.H=Tc;var s=yt!==null&&yt.next!==null;if(un=0,qt=yt=et=null,bc=!1,Qr=0,Fl=null,s)throw Error(c(300));t===null||Qt||(t=t.dependencies,t!==null&&xc(t)&&(Qt=!0))}function Ex(t,s,n,r){et=t;var d=0;do{if(Bl&&(Fl=null),Qr=0,Bl=!1,25<=d)throw Error(c(301));if(d+=1,qt=yt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}N.H=ZN,m=s(n,r)}while(Bl);return m}function VN(){var t=N.H,s=t.useState()[0];return s=typeof s.then=="function"?Wr(s):s,t=t.useState()[0],(yt!==null?yt.memoizedState:null)!==t&&(et.flags|=1024),s}function gu(){var t=Nc!==0;return Nc=0,t}function vu(t,s,n){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n}function yu(t){if(bc){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}bc=!1}un=0,qt=yt=et=null,Bl=!1,Qr=Nc=0,Fl=null}function ys(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?et.memoizedState=qt=t:qt=qt.next=t,qt}function It(){if(yt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var s=qt===null?et.memoizedState:qt.next;if(s!==null)qt=s,yt=t;else{if(t===null)throw et.alternate===null?Error(c(467)):Error(c(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},qt===null?et.memoizedState=qt=t:qt=qt.next=t}return qt}function ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wr(t){var s=Qr;return Qr+=1,Fl===null&&(Fl=[]),t=Nx(Fl,t,s),s=et,(qt===null?s.memoizedState:qt.next)===null&&(s=s.alternate,N.H=s===null||s.memoizedState===null?dp:up),t}function wc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wr(t);if(t.$$typeof===E)return is(t)}throw Error(c(438,String(t)))}function bu(t){var s=null,n=et.updateQueue;if(n!==null&&(s=n.memoCache),s==null){var r=et.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(s={data:r.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),n===null&&(n=ju(),et.updateQueue=n),n.memoCache=s,n=s.data[s.index],n===void 0)for(n=s.data[s.index]=Array(t),r=0;r<t;r++)n[r]=Y;return s.index++,n}function qa(t,s){return typeof s=="function"?s(t):s}function Cc(t){var s=It();return Nu(s,yt,t)}function Nu(t,s,n){var r=t.queue;if(r===null)throw Error(c(311));r.lastRenderedReducer=n;var d=t.baseQueue,m=r.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}s.baseQueue=d=m,r.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{s=d.next;var z=_=null,V=null,ne=s,ue=!1;do{var xe=ne.lane&-536870913;if(xe!==ne.lane?(dt&xe)===xe:(un&xe)===xe){var re=ne.revertLane;if(re===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),xe===Ul&&(ue=!0);else if((un&re)===re){ne=ne.next,re===Ul&&(ue=!0);continue}else xe={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},V===null?(z=V=xe,_=m):V=V.next=xe,et.lanes|=re,vn|=re;xe=ne.action,el&&n(m,xe),m=ne.hasEagerState?ne.eagerState:n(m,xe)}else re={lane:xe,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},V===null?(z=V=re,_=m):V=V.next=re,et.lanes|=xe,vn|=xe;ne=ne.next}while(ne!==null&&ne!==s);if(V===null?_=m:V.next=z,!Ns(m,t.memoizedState)&&(Qt=!0,ue&&(n=ql,n!==null)))throw n;t.memoizedState=m,t.baseState=_,t.baseQueue=V,r.lastRenderedState=m}return d===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function wu(t){var s=It(),n=s.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=t;var r=n.dispatch,d=n.pending,m=s.memoizedState;if(d!==null){n.pending=null;var _=d=d.next;do m=t(m,_.action),_=_.next;while(_!==d);Ns(m,s.memoizedState)||(Qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),n.lastRenderedState=m}return[m,r]}function Ax(t,s,n){var r=et,d=It(),m=ht;if(m){if(n===void 0)throw Error(c(407));n=n()}else n=s();var _=!Ns((yt||d).memoizedState,n);_&&(d.memoizedState=n,Qt=!0),d=d.queue;var z=Rx.bind(null,r,d,t);if(Xr(2048,8,z,[t]),d.getSnapshot!==s||_||qt!==null&&qt.memoizedState.tag&1){if(r.flags|=2048,$l(9,Sc(),Mx.bind(null,r,d,n,s),null),wt===null)throw Error(c(349));m||(un&124)!==0||Dx(r,s,n)}return n}function Dx(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=et.updateQueue,s===null?(s=ju(),et.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function Mx(t,s,n,r){s.value=n,s.getSnapshot=r,Ox(s)&&zx(t)}function Rx(t,s,n){return n(function(){Ox(s)&&zx(t)})}function Ox(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!Ns(t,n)}catch{return!0}}function zx(t){var s=Ol(t,2);s!==null&&Ts(s,t,2)}function Cu(t){var s=ys();if(typeof t=="function"){var n=t;if(t=n(),el){St(!0);try{n()}finally{St(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:t},s}function Px(t,s,n,r){return t.baseState=n,Nu(t,yt,typeof r=="function"?r:qa)}function GN(t,s,n,r,d){if(_c(t))throw Error(c(485));if(t=s.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};N.T!==null?n(!0):m.isTransition=!1,r(m),n=s.pending,n===null?(m.next=s.pending=m,Lx(s,m)):(m.next=n.next,s.pending=n.next=m)}}function Lx(t,s){var n=s.action,r=s.payload,d=t.state;if(s.isTransition){var m=N.T,_={};N.T=_;try{var z=n(d,r),V=N.S;V!==null&&V(_,z),Ux(t,s,z)}catch(ne){Su(t,s,ne)}finally{N.T=m}}else try{m=n(d,r),Ux(t,s,m)}catch(ne){Su(t,s,ne)}}function Ux(t,s,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){qx(t,s,r)},function(r){return Su(t,s,r)}):qx(t,s,n)}function qx(t,s,n){s.status="fulfilled",s.value=n,Ix(s),t.state=n,s=t.pending,s!==null&&(n=s.next,n===s?t.pending=null:(n=n.next,s.next=n,Lx(t,n)))}function Su(t,s,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do s.status="rejected",s.reason=n,Ix(s),s=s.next;while(s!==r)}t.action=null}function Ix(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Bx(t,s){return s}function Fx(t,s){if(ht){var n=wt.formState;if(n!==null){e:{var r=et;if(ht){if(At){t:{for(var d=At,m=oa;d.nodeType!==8;){if(!m){d=null;break t}if(d=Zs(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){At=Zs(d.nextSibling),r=d.data==="F!";break e}}Xn(r)}r=!1}r&&(s=n[0])}}return n=ys(),n.memoizedState=n.baseState=s,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bx,lastRenderedState:s},n.queue=r,n=ip.bind(null,et,r),r.dispatch=n,r=Cu(!1),m=Au.bind(null,et,!1,r.queue),r=ys(),d={state:s,dispatch:null,action:t,pending:null},r.queue=d,n=GN.bind(null,et,d,m,n),d.dispatch=n,r.memoizedState=t,[s,n,!1]}function $x(t){var s=It();return Hx(s,yt,t)}function Hx(t,s,n){if(s=Nu(t,s,Bx)[0],t=Cc(qa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var r=Wr(s)}catch(_){throw _===$r?vc:_}else r=s;s=It();var d=s.queue,m=d.dispatch;return n!==s.memoizedState&&(et.flags|=2048,$l(9,Sc(),YN.bind(null,d,n),null)),[r,m,t]}function YN(t,s){t.action=s}function Vx(t){var s=It(),n=yt;if(n!==null)return Hx(s,n,t);It(),s=s.memoizedState,n=It();var r=n.queue.dispatch;return n.memoizedState=t,[s,r,!1]}function $l(t,s,n,r){return t={tag:t,create:n,deps:r,inst:s,next:null},s=et.updateQueue,s===null&&(s=ju(),et.updateQueue=s),n=s.lastEffect,n===null?s.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,s.lastEffect=t),t}function Sc(){return{destroy:void 0,resource:void 0}}function Gx(){return It().memoizedState}function kc(t,s,n,r){var d=ys();r=r===void 0?null:r,et.flags|=t,d.memoizedState=$l(1|s,Sc(),n,r)}function Xr(t,s,n,r){var d=It();r=r===void 0?null:r;var m=d.memoizedState.inst;yt!==null&&r!==null&&xu(r,yt.memoizedState.deps)?d.memoizedState=$l(s,m,n,r):(et.flags|=t,d.memoizedState=$l(1|s,m,n,r))}function Yx(t,s){kc(8390656,8,t,s)}function Qx(t,s){Xr(2048,8,t,s)}function Wx(t,s){return Xr(4,2,t,s)}function Xx(t,s){return Xr(4,4,t,s)}function Zx(t,s){if(typeof s=="function"){t=t();var n=s(t);return function(){typeof n=="function"?n():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Kx(t,s,n){n=n!=null?n.concat([t]):null,Xr(4,4,Zx.bind(null,s,t),n)}function ku(){}function Jx(t,s){var n=It();s=s===void 0?null:s;var r=n.memoizedState;return s!==null&&xu(s,r[1])?r[0]:(n.memoizedState=[t,s],t)}function ep(t,s){var n=It();s=s===void 0?null:s;var r=n.memoizedState;if(s!==null&&xu(s,r[1]))return r[0];if(r=t(),el){St(!0);try{t()}finally{St(!1)}}return n.memoizedState=[r,s],r}function _u(t,s,n){return n===void 0||(un&1073741824)!==0?t.memoizedState=s:(t.memoizedState=n,t=ag(),et.lanes|=t,vn|=t,n)}function tp(t,s,n,r){return Ns(n,s)?n:Il.current!==null?(t=_u(t,n,r),Ns(t,s)||(Qt=!0),t):(un&42)===0?(Qt=!0,t.memoizedState=n):(t=ag(),et.lanes|=t,vn|=t,s)}function sp(t,s,n,r,d){var m=L.p;L.p=m!==0&&8>m?m:8;var _=N.T,z={};N.T=z,Au(t,!1,s,n);try{var V=d(),ne=N.S;if(ne!==null&&ne(z,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ue=$N(V,r);Zr(t,s,ue,_s(t))}else Zr(t,s,r,_s(t))}catch(xe){Zr(t,s,{then:function(){},status:"rejected",reason:xe},_s())}finally{L.p=m,N.T=_}}function QN(){}function Tu(t,s,n,r){if(t.tag!==5)throw Error(c(476));var d=ap(t).queue;sp(t,d,s,v,n===null?QN:function(){return np(t),n(r)})}function ap(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:v},next:null};var n={};return s.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:n},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function np(t){var s=ap(t).next.queue;Zr(t,s,{},_s())}function Eu(){return is(xi)}function lp(){return It().memoizedState}function rp(){return It().memoizedState}function WN(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var n=_s();t=on(n);var r=dn(s,t,n);r!==null&&(Ts(r,s,n),Vr(r,s,n)),s={cache:lu()},t.payload=s;return}s=s.return}}function XN(t,s,n){var r=_s();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},_c(t)?cp(s,n):(n=Wd(t,s,n,r),n!==null&&(Ts(n,t,r),op(n,s,r)))}function ip(t,s,n){var r=_s();Zr(t,s,n,r)}function Zr(t,s,n,r){var d={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(_c(t))cp(s,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,z=m(_,n);if(d.hasEagerState=!0,d.eagerState=z,Ns(z,_))return dc(t,s,d,0),wt===null&&oc(),!1}catch{}finally{}if(n=Wd(t,s,d,r),n!==null)return Ts(n,t,r),op(n,s,r),!0}return!1}function Au(t,s,n,r){if(r={lane:2,revertLane:cm(),action:r,hasEagerState:!1,eagerState:null,next:null},_c(t)){if(s)throw Error(c(479))}else s=Wd(t,n,r,2),s!==null&&Ts(s,t,2)}function _c(t){var s=t.alternate;return t===et||s!==null&&s===et}function cp(t,s){Bl=bc=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function op(t,s,n){if((n&4194048)!==0){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,gf(t,n)}}var Tc={readContext:is,use:wc,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},dp={readContext:is,use:wc,useCallback:function(t,s){return ys().memoizedState=[t,s===void 0?null:s],t},useContext:is,useEffect:Yx,useImperativeHandle:function(t,s,n){n=n!=null?n.concat([t]):null,kc(4194308,4,Zx.bind(null,s,t),n)},useLayoutEffect:function(t,s){return kc(4194308,4,t,s)},useInsertionEffect:function(t,s){kc(4,2,t,s)},useMemo:function(t,s){var n=ys();s=s===void 0?null:s;var r=t();if(el){St(!0);try{t()}finally{St(!1)}}return n.memoizedState=[r,s],r},useReducer:function(t,s,n){var r=ys();if(n!==void 0){var d=n(s);if(el){St(!0);try{n(s)}finally{St(!1)}}}else d=s;return r.memoizedState=r.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},r.queue=t,t=t.dispatch=XN.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var s=ys();return t={current:t},s.memoizedState=t},useState:function(t){t=Cu(t);var s=t.queue,n=ip.bind(null,et,s);return s.dispatch=n,[t.memoizedState,n]},useDebugValue:ku,useDeferredValue:function(t,s){var n=ys();return _u(n,t,s)},useTransition:function(){var t=Cu(!1);return t=sp.bind(null,et,t.queue,!0,!1),ys().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,n){var r=et,d=ys();if(ht){if(n===void 0)throw Error(c(407));n=n()}else{if(n=s(),wt===null)throw Error(c(349));(dt&124)!==0||Dx(r,s,n)}d.memoizedState=n;var m={value:n,getSnapshot:s};return d.queue=m,Yx(Rx.bind(null,r,m,t),[t]),r.flags|=2048,$l(9,Sc(),Mx.bind(null,r,m,n,s),null),n},useId:function(){var t=ys(),s=wt.identifierPrefix;if(ht){var n=Pa,r=za;n=(r&~(1<<32-Mt(r)-1)).toString(32)+n,s=""+s+"R"+n,n=Nc++,0<n&&(s+="H"+n.toString(32)),s+=""}else n=HN++,s=""+s+"r"+n.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:Eu,useFormState:Fx,useActionState:Fx,useOptimistic:function(t){var s=ys();s.memoizedState=s.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=n,s=Au.bind(null,et,!0,n),n.dispatch=s,[t,s]},useMemoCache:bu,useCacheRefresh:function(){return ys().memoizedState=WN.bind(null,et)}},up={readContext:is,use:wc,useCallback:Jx,useContext:is,useEffect:Qx,useImperativeHandle:Kx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:ep,useReducer:Cc,useRef:Gx,useState:function(){return Cc(qa)},useDebugValue:ku,useDeferredValue:function(t,s){var n=It();return tp(n,yt.memoizedState,t,s)},useTransition:function(){var t=Cc(qa)[0],s=It().memoizedState;return[typeof t=="boolean"?t:Wr(t),s]},useSyncExternalStore:Ax,useId:lp,useHostTransitionStatus:Eu,useFormState:$x,useActionState:$x,useOptimistic:function(t,s){var n=It();return Px(n,yt,t,s)},useMemoCache:bu,useCacheRefresh:rp},ZN={readContext:is,use:wc,useCallback:Jx,useContext:is,useEffect:Qx,useImperativeHandle:Kx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:ep,useReducer:wu,useRef:Gx,useState:function(){return wu(qa)},useDebugValue:ku,useDeferredValue:function(t,s){var n=It();return yt===null?_u(n,t,s):tp(n,yt.memoizedState,t,s)},useTransition:function(){var t=wu(qa)[0],s=It().memoizedState;return[typeof t=="boolean"?t:Wr(t),s]},useSyncExternalStore:Ax,useId:lp,useHostTransitionStatus:Eu,useFormState:Vx,useActionState:Vx,useOptimistic:function(t,s){var n=It();return yt!==null?Px(n,yt,t,s):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:bu,useCacheRefresh:rp},Hl=null,Kr=0;function Ec(t){var s=Kr;return Kr+=1,Hl===null&&(Hl=[]),Nx(Hl,t,s)}function Jr(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Ac(t,s){throw s.$$typeof===j?Error(c(525)):(t=Object.prototype.toString.call(s),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function mp(t){var s=t._init;return s(t._payload)}function hp(t){function s(te,K){if(t){var ae=te.deletions;ae===null?(te.deletions=[K],te.flags|=16):ae.push(K)}}function n(te,K){if(!t)return null;for(;K!==null;)s(te,K),K=K.sibling;return null}function r(te){for(var K=new Map;te!==null;)te.key!==null?K.set(te.key,te):K.set(te.index,te),te=te.sibling;return K}function d(te,K){return te=Oa(te,K),te.index=0,te.sibling=null,te}function m(te,K,ae){return te.index=ae,t?(ae=te.alternate,ae!==null?(ae=ae.index,ae<K?(te.flags|=67108866,K):ae):(te.flags|=67108866,K)):(te.flags|=1048576,K)}function _(te){return t&&te.alternate===null&&(te.flags|=67108866),te}function z(te,K,ae,he){return K===null||K.tag!==6?(K=Zd(ae,te.mode,he),K.return=te,K):(K=d(K,ae),K.return=te,K)}function V(te,K,ae,he){var Te=ae.type;return Te===T?ue(te,K,ae.props.children,he,ae.key):K!==null&&(K.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===W&&mp(Te)===K.type)?(K=d(K,ae.props),Jr(K,ae),K.return=te,K):(K=mc(ae.type,ae.key,ae.props,null,te.mode,he),Jr(K,ae),K.return=te,K)}function ne(te,K,ae,he){return K===null||K.tag!==4||K.stateNode.containerInfo!==ae.containerInfo||K.stateNode.implementation!==ae.implementation?(K=Kd(ae,te.mode,he),K.return=te,K):(K=d(K,ae.children||[]),K.return=te,K)}function ue(te,K,ae,he,Te){return K===null||K.tag!==7?(K=Gn(ae,te.mode,he,Te),K.return=te,K):(K=d(K,ae),K.return=te,K)}function xe(te,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Zd(""+K,te.mode,ae),K.return=te,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return ae=mc(K.type,K.key,K.props,null,te.mode,ae),Jr(ae,K),ae.return=te,ae;case A:return K=Kd(K,te.mode,ae),K.return=te,K;case W:var he=K._init;return K=he(K._payload),xe(te,K,ae)}if(ee(K)||le(K))return K=Gn(K,te.mode,ae,null),K.return=te,K;if(typeof K.then=="function")return xe(te,Ec(K),ae);if(K.$$typeof===E)return xe(te,pc(te,K),ae);Ac(te,K)}return null}function re(te,K,ae,he){var Te=K!==null?K.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Te!==null?null:z(te,K,""+ae,he);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:return ae.key===Te?V(te,K,ae,he):null;case A:return ae.key===Te?ne(te,K,ae,he):null;case W:return Te=ae._init,ae=Te(ae._payload),re(te,K,ae,he)}if(ee(ae)||le(ae))return Te!==null?null:ue(te,K,ae,he,null);if(typeof ae.then=="function")return re(te,K,Ec(ae),he);if(ae.$$typeof===E)return re(te,K,pc(te,ae),he);Ac(te,ae)}return null}function ce(te,K,ae,he,Te){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return te=te.get(ae)||null,z(K,te,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case b:return te=te.get(he.key===null?ae:he.key)||null,V(K,te,he,Te);case A:return te=te.get(he.key===null?ae:he.key)||null,ne(K,te,he,Te);case W:var st=he._init;return he=st(he._payload),ce(te,K,ae,he,Te)}if(ee(he)||le(he))return te=te.get(ae)||null,ue(K,te,he,Te,null);if(typeof he.then=="function")return ce(te,K,ae,Ec(he),Te);if(he.$$typeof===E)return ce(te,K,ae,pc(K,he),Te);Ac(K,he)}return null}function Ye(te,K,ae,he){for(var Te=null,st=null,Oe=K,Ve=K=0,Xt=null;Oe!==null&&Ve<ae.length;Ve++){Oe.index>Ve?(Xt=Oe,Oe=null):Xt=Oe.sibling;var ut=re(te,Oe,ae[Ve],he);if(ut===null){Oe===null&&(Oe=Xt);break}t&&Oe&&ut.alternate===null&&s(te,Oe),K=m(ut,K,Ve),st===null?Te=ut:st.sibling=ut,st=ut,Oe=Xt}if(Ve===ae.length)return n(te,Oe),ht&&Qn(te,Ve),Te;if(Oe===null){for(;Ve<ae.length;Ve++)Oe=xe(te,ae[Ve],he),Oe!==null&&(K=m(Oe,K,Ve),st===null?Te=Oe:st.sibling=Oe,st=Oe);return ht&&Qn(te,Ve),Te}for(Oe=r(Oe);Ve<ae.length;Ve++)Xt=ce(Oe,te,Ve,ae[Ve],he),Xt!==null&&(t&&Xt.alternate!==null&&Oe.delete(Xt.key===null?Ve:Xt.key),K=m(Xt,K,Ve),st===null?Te=Xt:st.sibling=Xt,st=Xt);return t&&Oe.forEach(function(_n){return s(te,_n)}),ht&&Qn(te,Ve),Te}function $e(te,K,ae,he){if(ae==null)throw Error(c(151));for(var Te=null,st=null,Oe=K,Ve=K=0,Xt=null,ut=ae.next();Oe!==null&&!ut.done;Ve++,ut=ae.next()){Oe.index>Ve?(Xt=Oe,Oe=null):Xt=Oe.sibling;var _n=re(te,Oe,ut.value,he);if(_n===null){Oe===null&&(Oe=Xt);break}t&&Oe&&_n.alternate===null&&s(te,Oe),K=m(_n,K,Ve),st===null?Te=_n:st.sibling=_n,st=_n,Oe=Xt}if(ut.done)return n(te,Oe),ht&&Qn(te,Ve),Te;if(Oe===null){for(;!ut.done;Ve++,ut=ae.next())ut=xe(te,ut.value,he),ut!==null&&(K=m(ut,K,Ve),st===null?Te=ut:st.sibling=ut,st=ut);return ht&&Qn(te,Ve),Te}for(Oe=r(Oe);!ut.done;Ve++,ut=ae.next())ut=ce(Oe,te,Ve,ut.value,he),ut!==null&&(t&&ut.alternate!==null&&Oe.delete(ut.key===null?Ve:ut.key),K=m(ut,K,Ve),st===null?Te=ut:st.sibling=ut,st=ut);return t&&Oe.forEach(function(Kw){return s(te,Kw)}),ht&&Qn(te,Ve),Te}function bt(te,K,ae,he){if(typeof ae=="object"&&ae!==null&&ae.type===T&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:e:{for(var Te=ae.key;K!==null;){if(K.key===Te){if(Te=ae.type,Te===T){if(K.tag===7){n(te,K.sibling),he=d(K,ae.props.children),he.return=te,te=he;break e}}else if(K.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===W&&mp(Te)===K.type){n(te,K.sibling),he=d(K,ae.props),Jr(he,ae),he.return=te,te=he;break e}n(te,K);break}else s(te,K);K=K.sibling}ae.type===T?(he=Gn(ae.props.children,te.mode,he,ae.key),he.return=te,te=he):(he=mc(ae.type,ae.key,ae.props,null,te.mode,he),Jr(he,ae),he.return=te,te=he)}return _(te);case A:e:{for(Te=ae.key;K!==null;){if(K.key===Te)if(K.tag===4&&K.stateNode.containerInfo===ae.containerInfo&&K.stateNode.implementation===ae.implementation){n(te,K.sibling),he=d(K,ae.children||[]),he.return=te,te=he;break e}else{n(te,K);break}else s(te,K);K=K.sibling}he=Kd(ae,te.mode,he),he.return=te,te=he}return _(te);case W:return Te=ae._init,ae=Te(ae._payload),bt(te,K,ae,he)}if(ee(ae))return Ye(te,K,ae,he);if(le(ae)){if(Te=le(ae),typeof Te!="function")throw Error(c(150));return ae=Te.call(ae),$e(te,K,ae,he)}if(typeof ae.then=="function")return bt(te,K,Ec(ae),he);if(ae.$$typeof===E)return bt(te,K,pc(te,ae),he);Ac(te,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,K!==null&&K.tag===6?(n(te,K.sibling),he=d(K,ae),he.return=te,te=he):(n(te,K),he=Zd(ae,te.mode,he),he.return=te,te=he),_(te)):n(te,K)}return function(te,K,ae,he){try{Kr=0;var Te=bt(te,K,ae,he);return Hl=null,Te}catch(Oe){if(Oe===$r||Oe===vc)throw Oe;var st=ws(29,Oe,null,te.mode);return st.lanes=he,st.return=te,st}finally{}}}var Vl=hp(!0),fp=hp(!1),Is=U(null),da=null;function mn(t){var s=t.alternate;H(Ft,Ft.current&1),H(Is,t),da===null&&(s===null||Il.current!==null||s.memoizedState!==null)&&(da=t)}function xp(t){if(t.tag===22){if(H(Ft,Ft.current),H(Is,t),da===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(da=t)}}else hn()}function hn(){H(Ft,Ft.current),H(Is,Is.current)}function Ia(t){Q(Is),da===t&&(da=null),Q(Ft)}var Ft=U(0);function Dc(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||jm(n)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Du(t,s,n,r){s=t.memoizedState,n=n(r,s),n=n==null?s:x({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mu={enqueueSetState:function(t,s,n){t=t._reactInternals;var r=_s(),d=on(r);d.payload=s,n!=null&&(d.callback=n),s=dn(t,d,r),s!==null&&(Ts(s,t,r),Vr(s,t,r))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var r=_s(),d=on(r);d.tag=1,d.payload=s,n!=null&&(d.callback=n),s=dn(t,d,r),s!==null&&(Ts(s,t,r),Vr(s,t,r))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=_s(),r=on(n);r.tag=2,s!=null&&(r.callback=s),s=dn(t,r,n),s!==null&&(Ts(s,t,n),Vr(s,t,n))}};function pp(t,s,n,r,d,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,m,_):s.prototype&&s.prototype.isPureReactComponent?!zr(n,r)||!zr(d,m):!0}function gp(t,s,n,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==t&&Mu.enqueueReplaceState(s,s.state,null)}function tl(t,s){var n=s;if("ref"in s){n={};for(var r in s)r!=="ref"&&(n[r]=s[r])}if(t=t.defaultProps){n===s&&(n=x({},n));for(var d in t)n[d]===void 0&&(n[d]=t[d])}return n}var Mc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function vp(t){Mc(t)}function yp(t){console.error(t)}function jp(t){Mc(t)}function Rc(t,s){try{var n=t.onUncaughtError;n(s.value,{componentStack:s.stack})}catch(r){setTimeout(function(){throw r})}}function bp(t,s,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Ru(t,s,n){return n=on(n),n.tag=3,n.payload={element:null},n.callback=function(){Rc(t,s)},n}function Np(t){return t=on(t),t.tag=3,t}function wp(t,s,n,r){var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var m=r.value;t.payload=function(){return d(m)},t.callback=function(){bp(s,n,r)}}var _=n.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){bp(s,n,r),typeof d!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var z=r.stack;this.componentDidCatch(r.value,{componentStack:z!==null?z:""})})}function KN(t,s,n,r,d){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(s=n.alternate,s!==null&&Ir(s,n,d,!0),n=Is.current,n!==null){switch(n.tag){case 13:return da===null?am():n.alternate===null&&Dt===0&&(Dt=3),n.flags&=-257,n.flags|=65536,n.lanes=d,r===cu?n.flags|=16384:(s=n.updateQueue,s===null?n.updateQueue=new Set([r]):s.add(r),lm(t,r,d)),!1;case 22:return n.flags|=65536,r===cu?n.flags|=16384:(s=n.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=s):(n=s.retryQueue,n===null?s.retryQueue=new Set([r]):n.add(r)),lm(t,r,d)),!1}throw Error(c(435,n.tag))}return lm(t,r,d),am(),!1}if(ht)return s=Is.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,r!==tu&&(t=Error(c(422),{cause:r}),qr(Ps(t,n)))):(r!==tu&&(s=Error(c(423),{cause:r}),qr(Ps(s,n))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,r=Ps(r,n),d=Ru(t.stateNode,r,d),uu(t,d),Dt!==4&&(Dt=2)),!1;var m=Error(c(520),{cause:r});if(m=Ps(m,n),ri===null?ri=[m]:ri.push(m),Dt!==4&&(Dt=2),s===null)return!0;r=Ps(r,n),n=s;do{switch(n.tag){case 3:return n.flags|=65536,t=d&-d,n.lanes|=t,t=Ru(n.stateNode,r,t),uu(n,t),!1;case 1:if(s=n.type,m=n.stateNode,(n.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(yn===null||!yn.has(m))))return n.flags|=65536,d&=-d,n.lanes|=d,d=Np(d),wp(d,t,n,r),uu(n,d),!1}n=n.return}while(n!==null);return!1}var Cp=Error(c(461)),Qt=!1;function Kt(t,s,n,r){s.child=t===null?fp(s,null,n,r):Vl(s,t.child,n,r)}function Sp(t,s,n,r,d){n=n.render;var m=s.ref;if("ref"in r){var _={};for(var z in r)z!=="ref"&&(_[z]=r[z])}else _=r;return Kn(s),r=pu(t,s,n,_,m,d),z=gu(),t!==null&&!Qt?(vu(t,s,d),Ba(t,s,d)):(ht&&z&&Jd(s),s.flags|=1,Kt(t,s,r,d),s.child)}function kp(t,s,n,r,d){if(t===null){var m=n.type;return typeof m=="function"&&!Xd(m)&&m.defaultProps===void 0&&n.compare===null?(s.tag=15,s.type=m,_p(t,s,m,r,d)):(t=mc(n.type,null,r,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Bu(t,d)){var _=m.memoizedProps;if(n=n.compare,n=n!==null?n:zr,n(_,r)&&t.ref===s.ref)return Ba(t,s,d)}return s.flags|=1,t=Oa(m,r),t.ref=s.ref,t.return=s,s.child=t}function _p(t,s,n,r,d){if(t!==null){var m=t.memoizedProps;if(zr(m,r)&&t.ref===s.ref)if(Qt=!1,s.pendingProps=r=m,Bu(t,d))(t.flags&131072)!==0&&(Qt=!0);else return s.lanes=t.lanes,Ba(t,s,d)}return Ou(t,s,n,r,d)}function Tp(t,s,n){var r=s.pendingProps,d=r.children,m=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if((s.flags&128)!==0){if(r=m!==null?m.baseLanes|n:n,t!==null){for(d=s.child=t.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;s.childLanes=m&~r}else s.childLanes=0,s.child=null;return Ep(t,s,r,n)}if((n&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&gc(s,m!==null?m.cachePool:null),m!==null?_x(s,m):hu(),xp(s);else return s.lanes=s.childLanes=536870912,Ep(t,s,m!==null?m.baseLanes|n:n,n)}else m!==null?(gc(s,m.cachePool),_x(s,m),hn(),s.memoizedState=null):(t!==null&&gc(s,null),hu(),hn());return Kt(t,s,d,n),s.child}function Ep(t,s,n,r){var d=iu();return d=d===null?null:{parent:Bt._currentValue,pool:d},s.memoizedState={baseLanes:n,cachePool:d},t!==null&&gc(s,null),hu(),xp(s),t!==null&&Ir(t,s,r,!0),null}function Oc(t,s){var n=s.ref;if(n===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(t===null||t.ref!==n)&&(s.flags|=4194816)}}function Ou(t,s,n,r,d){return Kn(s),n=pu(t,s,n,r,void 0,d),r=gu(),t!==null&&!Qt?(vu(t,s,d),Ba(t,s,d)):(ht&&r&&Jd(s),s.flags|=1,Kt(t,s,n,d),s.child)}function Ap(t,s,n,r,d,m){return Kn(s),s.updateQueue=null,n=Ex(s,r,n,d),Tx(t),r=gu(),t!==null&&!Qt?(vu(t,s,m),Ba(t,s,m)):(ht&&r&&Jd(s),s.flags|=1,Kt(t,s,n,m),s.child)}function Dp(t,s,n,r,d){if(Kn(s),s.stateNode===null){var m=zl,_=n.contextType;typeof _=="object"&&_!==null&&(m=is(_)),m=new n(r,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Mu,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=r,m.state=s.memoizedState,m.refs={},ou(s),_=n.contextType,m.context=typeof _=="object"&&_!==null?is(_):zl,m.state=s.memoizedState,_=n.getDerivedStateFromProps,typeof _=="function"&&(Du(s,n,_,r),m.state=s.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Mu.enqueueReplaceState(m,m.state,null),Yr(s,r,m,d),Gr(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),r=!0}else if(t===null){m=s.stateNode;var z=s.memoizedProps,V=tl(n,z);m.props=V;var ne=m.context,ue=n.contextType;_=zl,typeof ue=="object"&&ue!==null&&(_=is(ue));var xe=n.getDerivedStateFromProps;ue=typeof xe=="function"||typeof m.getSnapshotBeforeUpdate=="function",z=s.pendingProps!==z,ue||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(z||ne!==_)&&gp(s,m,r,_),cn=!1;var re=s.memoizedState;m.state=re,Yr(s,r,m,d),Gr(),ne=s.memoizedState,z||re!==ne||cn?(typeof xe=="function"&&(Du(s,n,xe,r),ne=s.memoizedState),(V=cn||pp(s,n,V,r,re,ne,_))?(ue||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=ne),m.props=r,m.state=ne,m.context=_,r=V):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{m=s.stateNode,du(t,s),_=s.memoizedProps,ue=tl(n,_),m.props=ue,xe=s.pendingProps,re=m.context,ne=n.contextType,V=zl,typeof ne=="object"&&ne!==null&&(V=is(ne)),z=n.getDerivedStateFromProps,(ne=typeof z=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==xe||re!==V)&&gp(s,m,r,V),cn=!1,re=s.memoizedState,m.state=re,Yr(s,r,m,d),Gr();var ce=s.memoizedState;_!==xe||re!==ce||cn||t!==null&&t.dependencies!==null&&xc(t.dependencies)?(typeof z=="function"&&(Du(s,n,z,r),ce=s.memoizedState),(ue=cn||pp(s,n,ue,r,re,ce,V)||t!==null&&t.dependencies!==null&&xc(t.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(r,ce,V),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(r,ce,V)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=ce),m.props=r,m.state=ce,m.context=V,r=ue):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(s.flags|=1024),r=!1)}return m=r,Oc(t,s),r=(s.flags&128)!==0,m||r?(m=s.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&r?(s.child=Vl(s,t.child,null,d),s.child=Vl(s,null,n,d)):Kt(t,s,n,d),s.memoizedState=m.state,t=s.child):t=Ba(t,s,d),t}function Mp(t,s,n,r){return Ur(),s.flags|=256,Kt(t,s,n,r),s.child}var zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pu(t){return{baseLanes:t,cachePool:yx()}}function Lu(t,s,n){return t=t!==null?t.childLanes&~n:0,s&&(t|=Bs),t}function Rp(t,s,n){var r=s.pendingProps,d=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(Ft.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(ht){if(d?mn(s):hn(),ht){var z=At,V;if(V=z){e:{for(V=z,z=oa;V.nodeType!==8;){if(!z){z=null;break e}if(V=Zs(V.nextSibling),V===null){z=null;break e}}z=V}z!==null?(s.memoizedState={dehydrated:z,treeContext:Yn!==null?{id:za,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},V=ws(18,null,null,0),V.stateNode=z,V.return=s,s.child=V,ms=s,At=null,V=!0):V=!1}V||Xn(s)}if(z=s.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return jm(z)?s.lanes=32:s.lanes=536870912,null;Ia(s)}return z=r.children,r=r.fallback,d?(hn(),d=s.mode,z=zc({mode:"hidden",children:z},d),r=Gn(r,d,n,null),z.return=s,r.return=s,z.sibling=r,s.child=z,d=s.child,d.memoizedState=Pu(n),d.childLanes=Lu(t,_,n),s.memoizedState=zu,r):(mn(s),Uu(s,z))}if(V=t.memoizedState,V!==null&&(z=V.dehydrated,z!==null)){if(m)s.flags&256?(mn(s),s.flags&=-257,s=qu(t,s,n)):s.memoizedState!==null?(hn(),s.child=t.child,s.flags|=128,s=null):(hn(),d=r.fallback,z=s.mode,r=zc({mode:"visible",children:r.children},z),d=Gn(d,z,n,null),d.flags|=2,r.return=s,d.return=s,r.sibling=d,s.child=r,Vl(s,t.child,null,n),r=s.child,r.memoizedState=Pu(n),r.childLanes=Lu(t,_,n),s.memoizedState=zu,s=d);else if(mn(s),jm(z)){if(_=z.nextSibling&&z.nextSibling.dataset,_)var ne=_.dgst;_=ne,r=Error(c(419)),r.stack="",r.digest=_,qr({value:r,source:null,stack:null}),s=qu(t,s,n)}else if(Qt||Ir(t,s,n,!1),_=(n&t.childLanes)!==0,Qt||_){if(_=wt,_!==null&&(r=n&-n,r=(r&42)!==0?1:bd(r),r=(r&(_.suspendedLanes|n))!==0?0:r,r!==0&&r!==V.retryLane))throw V.retryLane=r,Ol(t,r),Ts(_,t,r),Cp;z.data==="$?"||am(),s=qu(t,s,n)}else z.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=V.treeContext,At=Zs(z.nextSibling),ms=s,ht=!0,Wn=null,oa=!1,t!==null&&(Us[qs++]=za,Us[qs++]=Pa,Us[qs++]=Yn,za=t.id,Pa=t.overflow,Yn=s),s=Uu(s,r.children),s.flags|=4096);return s}return d?(hn(),d=r.fallback,z=s.mode,V=t.child,ne=V.sibling,r=Oa(V,{mode:"hidden",children:r.children}),r.subtreeFlags=V.subtreeFlags&65011712,ne!==null?d=Oa(ne,d):(d=Gn(d,z,n,null),d.flags|=2),d.return=s,r.return=s,r.sibling=d,s.child=r,r=d,d=s.child,z=t.child.memoizedState,z===null?z=Pu(n):(V=z.cachePool,V!==null?(ne=Bt._currentValue,V=V.parent!==ne?{parent:ne,pool:ne}:V):V=yx(),z={baseLanes:z.baseLanes|n,cachePool:V}),d.memoizedState=z,d.childLanes=Lu(t,_,n),s.memoizedState=zu,r):(mn(s),n=t.child,t=n.sibling,n=Oa(n,{mode:"visible",children:r.children}),n.return=s,n.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=n,s.memoizedState=null,n)}function Uu(t,s){return s=zc({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function zc(t,s){return t=ws(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function qu(t,s,n){return Vl(s,t.child,null,n),t=Uu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Op(t,s,n){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),au(t.return,s,n)}function Iu(t,s,n,r,d){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=r,m.tail=n,m.tailMode=d)}function zp(t,s,n){var r=s.pendingProps,d=r.revealOrder,m=r.tail;if(Kt(t,s,r.children,n),r=Ft.current,(r&2)!==0)r=r&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,s);else if(t.tag===19)Op(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(H(Ft,r),d){case"forwards":for(n=s.child,d=null;n!==null;)t=n.alternate,t!==null&&Dc(t)===null&&(d=n),n=n.sibling;n=d,n===null?(d=s.child,s.child=null):(d=n.sibling,n.sibling=null),Iu(s,!1,d,n,m);break;case"backwards":for(n=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Dc(t)===null){s.child=d;break}t=d.sibling,d.sibling=n,n=d,d=t}Iu(s,!0,n,null,m);break;case"together":Iu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ba(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),vn|=s.lanes,(n&s.childLanes)===0)if(t!==null){if(Ir(t,s,n,!1),(n&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(c(153));if(s.child!==null){for(t=s.child,n=Oa(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=Oa(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function Bu(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&xc(t)))}function JN(t,s,n){switch(s.tag){case 3:Ne(s,s.stateNode.containerInfo),rn(s,Bt,t.memoizedState.cache),Ur();break;case 27:case 5:De(s);break;case 4:Ne(s,s.stateNode.containerInfo);break;case 10:rn(s,s.type,s.memoizedProps.value);break;case 13:var r=s.memoizedState;if(r!==null)return r.dehydrated!==null?(mn(s),s.flags|=128,null):(n&s.child.childLanes)!==0?Rp(t,s,n):(mn(s),t=Ba(t,s,n),t!==null?t.sibling:null);mn(s);break;case 19:var d=(t.flags&128)!==0;if(r=(n&s.childLanes)!==0,r||(Ir(t,s,n,!1),r=(n&s.childLanes)!==0),d){if(r)return zp(t,s,n);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),H(Ft,Ft.current),r)break;return null;case 22:case 23:return s.lanes=0,Tp(t,s,n);case 24:rn(s,Bt,t.memoizedState.cache)}return Ba(t,s,n)}function Pp(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps)Qt=!0;else{if(!Bu(t,n)&&(s.flags&128)===0)return Qt=!1,JN(t,s,n);Qt=(t.flags&131072)!==0}else Qt=!1,ht&&(s.flags&1048576)!==0&&mx(s,fc,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var r=s.elementType,d=r._init;if(r=d(r._payload),s.type=r,typeof r=="function")Xd(r)?(t=tl(r,t),s.tag=1,s=Dp(null,s,r,t,n)):(s.tag=0,s=Ou(null,s,r,t,n));else{if(r!=null){if(d=r.$$typeof,d===w){s.tag=11,s=Sp(null,s,r,t,n);break e}else if(d===I){s.tag=14,s=kp(null,s,r,t,n);break e}}throw s=$(r)||r,Error(c(306,s,""))}}return s;case 0:return Ou(t,s,s.type,s.pendingProps,n);case 1:return r=s.type,d=tl(r,s.pendingProps),Dp(t,s,r,d,n);case 3:e:{if(Ne(s,s.stateNode.containerInfo),t===null)throw Error(c(387));r=s.pendingProps;var m=s.memoizedState;d=m.element,du(t,s),Yr(s,r,null,n);var _=s.memoizedState;if(r=_.cache,rn(s,Bt,r),r!==m.cache&&nu(s,[Bt],n,!0),Gr(),r=_.element,m.isDehydrated)if(m={element:r,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Mp(t,s,r,n);break e}else if(r!==d){d=Ps(Error(c(424)),s),qr(d),s=Mp(t,s,r,n);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(At=Zs(t.firstChild),ms=s,ht=!0,Wn=null,oa=!0,n=fp(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ur(),r===d){s=Ba(t,s,n);break e}Kt(t,s,r,n)}s=s.child}return s;case 26:return Oc(t,s),t===null?(n=Ig(s.type,null,s.pendingProps,null))?s.memoizedState=n:ht||(n=s.type,t=s.pendingProps,r=Wc(ge.current).createElement(n),r[rs]=s,r[gs]=t,es(r,n,t),Yt(r),s.stateNode=r):s.memoizedState=Ig(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return De(s),t===null&&ht&&(r=s.stateNode=Lg(s.type,s.pendingProps,ge.current),ms=s,oa=!0,d=At,Nn(s.type)?(bm=d,At=Zs(r.firstChild)):At=d),Kt(t,s,s.pendingProps.children,n),Oc(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&ht&&((d=r=At)&&(r=_w(r,s.type,s.pendingProps,oa),r!==null?(s.stateNode=r,ms=s,At=Zs(r.firstChild),oa=!1,d=!0):d=!1),d||Xn(s)),De(s),d=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,r=m.children,gm(d,m)?r=null:_!==null&&gm(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=pu(t,s,VN,null,null,n),xi._currentValue=d),Oc(t,s),Kt(t,s,r,n),s.child;case 6:return t===null&&ht&&((t=n=At)&&(n=Tw(n,s.pendingProps,oa),n!==null?(s.stateNode=n,ms=s,At=null,t=!0):t=!1),t||Xn(s)),null;case 13:return Rp(t,s,n);case 4:return Ne(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=Vl(s,null,r,n):Kt(t,s,r,n),s.child;case 11:return Sp(t,s,s.type,s.pendingProps,n);case 7:return Kt(t,s,s.pendingProps,n),s.child;case 8:return Kt(t,s,s.pendingProps.children,n),s.child;case 12:return Kt(t,s,s.pendingProps.children,n),s.child;case 10:return r=s.pendingProps,rn(s,s.type,r.value),Kt(t,s,r.children,n),s.child;case 9:return d=s.type._context,r=s.pendingProps.children,Kn(s),d=is(d),r=r(d),s.flags|=1,Kt(t,s,r,n),s.child;case 14:return kp(t,s,s.type,s.pendingProps,n);case 15:return _p(t,s,s.type,s.pendingProps,n);case 19:return zp(t,s,n);case 31:return r=s.pendingProps,n=s.mode,r={mode:r.mode,children:r.children},t===null?(n=zc(r,n),n.ref=s.ref,s.child=n,n.return=s,s=n):(n=Oa(t.child,r),n.ref=s.ref,s.child=n,n.return=s,s=n),s;case 22:return Tp(t,s,n);case 24:return Kn(s),r=is(Bt),t===null?(d=iu(),d===null&&(d=wt,m=lu(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=n),d=m),s.memoizedState={parent:r,cache:d},ou(s),rn(s,Bt,d)):((t.lanes&n)!==0&&(du(t,s),Yr(s,null,null,n),Gr()),d=t.memoizedState,m=s.memoizedState,d.parent!==r?(d={parent:r,cache:r},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),rn(s,Bt,r)):(r=m.cache,rn(s,Bt,r),r!==d.cache&&nu(s,[Bt],n,!0))),Kt(t,s,s.pendingProps.children,n),s.child;case 29:throw s.pendingProps}throw Error(c(156,s.tag))}function Fa(t){t.flags|=4}function Lp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Vg(s)){if(s=Is.current,s!==null&&((dt&4194048)===dt?da!==null:(dt&62914560)!==dt&&(dt&536870912)===0||s!==da))throw Hr=cu,jx;t.flags|=8192}}function Pc(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Qs():536870912,t.lanes|=s,Wl|=s)}function ei(t,s){if(!ht)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tt(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(s)for(var d=t.child;d!==null;)n|=d.lanes|d.childLanes,r|=d.subtreeFlags&65011712,r|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)n|=d.lanes|d.childLanes,r|=d.subtreeFlags,r|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=r,t.childLanes=n,s}function ew(t,s,n){var r=s.pendingProps;switch(eu(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return n=s.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Ua(Bt),Fe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lr(s)?Fa(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xx())),Tt(s),null;case 26:return n=s.memoizedState,t===null?(Fa(s),n!==null?(Tt(s),Lp(s,n)):(Tt(s),s.flags&=-16777217)):n?n!==t.memoizedState?(Fa(s),Tt(s),Lp(s,n)):(Tt(s),s.flags&=-16777217):(t.memoizedProps!==r&&Fa(s),Tt(s),s.flags&=-16777217),null;case 27:Ge(s),n=ge.current;var d=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==r&&Fa(s);else{if(!r){if(s.stateNode===null)throw Error(c(166));return Tt(s),null}t=ie.current,Lr(s)?hx(s):(t=Lg(d,r,n),s.stateNode=t,Fa(s))}return Tt(s),null;case 5:if(Ge(s),n=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==r&&Fa(s);else{if(!r){if(s.stateNode===null)throw Error(c(166));return Tt(s),null}if(t=ie.current,Lr(s))hx(s);else{switch(d=Wc(ge.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?d.createElement("select",{is:r.is}):d.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?d.createElement(n,{is:r.is}):d.createElement(n)}}t[rs]=s,t[gs]=r;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=t;e:switch(es(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Fa(s)}}return Tt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==r&&Fa(s);else{if(typeof r!="string"&&s.stateNode===null)throw Error(c(166));if(t=ge.current,Lr(s)){if(t=s.stateNode,n=s.memoizedProps,r=null,d=ms,d!==null)switch(d.tag){case 27:case 5:r=d.memoizedProps}t[rs]=s,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||Ag(t.nodeValue,n)),t||Xn(s)}else t=Wc(t).createTextNode(r),t[rs]=s,s.stateNode=t}return Tt(s),null;case 13:if(r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Lr(s),r!==null&&r.dehydrated!==null){if(t===null){if(!d)throw Error(c(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));d[rs]=s}else Ur(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),d=!1}else d=xx(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ia(s),s):(Ia(s),null)}if(Ia(s),(s.flags&128)!==0)return s.lanes=n,s;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=s.child,d=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(d=r.alternate.memoizedState.cachePool.pool);var m=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),m!==d&&(r.flags|=2048)}return n!==t&&n&&(s.child.flags|=8192),Pc(s,s.updateQueue),Tt(s),null;case 4:return Fe(),t===null&&mm(s.stateNode.containerInfo),Tt(s),null;case 10:return Ua(s.type),Tt(s),null;case 19:if(Q(Ft),d=s.memoizedState,d===null)return Tt(s),null;if(r=(s.flags&128)!==0,m=d.rendering,m===null)if(r)ei(d,!1);else{if(Dt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Dc(t),m!==null){for(s.flags|=128,ei(d,!1),t=m.updateQueue,s.updateQueue=t,Pc(s,t),s.subtreeFlags=0,t=n,n=s.child;n!==null;)ux(n,t),n=n.sibling;return H(Ft,Ft.current&1|2),s.child}t=t.sibling}d.tail!==null&&_e()>qc&&(s.flags|=128,r=!0,ei(d,!1),s.lanes=4194304)}else{if(!r)if(t=Dc(m),t!==null){if(s.flags|=128,r=!0,t=t.updateQueue,s.updateQueue=t,Pc(s,t),ei(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!ht)return Tt(s),null}else 2*_e()-d.renderingStartTime>qc&&n!==536870912&&(s.flags|=128,r=!0,ei(d,!1),s.lanes=4194304);d.isBackwards?(m.sibling=s.child,s.child=m):(t=d.last,t!==null?t.sibling=m:s.child=m,d.last=m)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=_e(),s.sibling=null,t=Ft.current,H(Ft,r?t&1|2:t&1),s):(Tt(s),null);case 22:case 23:return Ia(s),fu(),r=s.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(s.flags|=8192):r&&(s.flags|=8192),r?(n&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),n=s.updateQueue,n!==null&&Pc(s,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048),t!==null&&Q(Jn),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),s.memoizedState.cache!==n&&(s.flags|=2048),Ua(Bt),Tt(s),null;case 25:return null;case 30:return null}throw Error(c(156,s.tag))}function tw(t,s){switch(eu(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ua(Bt),Fe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Ge(s),null;case 13:if(Ia(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(c(340));Ur()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Q(Ft),null;case 4:return Fe(),null;case 10:return Ua(s.type),null;case 22:case 23:return Ia(s),fu(),t!==null&&Q(Jn),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Ua(Bt),null;case 25:return null;default:return null}}function Up(t,s){switch(eu(s),s.tag){case 3:Ua(Bt),Fe();break;case 26:case 27:case 5:Ge(s);break;case 4:Fe();break;case 13:Ia(s);break;case 19:Q(Ft);break;case 10:Ua(s.type);break;case 22:case 23:Ia(s),fu(),t!==null&&Q(Jn);break;case 24:Ua(Bt)}}function ti(t,s){try{var n=s.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var d=r.next;n=d;do{if((n.tag&t)===t){r=void 0;var m=n.create,_=n.inst;r=m(),_.destroy=r}n=n.next}while(n!==d)}}catch(z){Nt(s,s.return,z)}}function fn(t,s,n){try{var r=s.updateQueue,d=r!==null?r.lastEffect:null;if(d!==null){var m=d.next;r=m;do{if((r.tag&t)===t){var _=r.inst,z=_.destroy;if(z!==void 0){_.destroy=void 0,d=s;var V=n,ne=z;try{ne()}catch(ue){Nt(d,V,ue)}}}r=r.next}while(r!==m)}}catch(ue){Nt(s,s.return,ue)}}function qp(t){var s=t.updateQueue;if(s!==null){var n=t.stateNode;try{kx(s,n)}catch(r){Nt(t,t.return,r)}}}function Ip(t,s,n){n.props=tl(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){Nt(t,s,r)}}function si(t,s){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(d){Nt(t,s,d)}}function ua(t,s){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(d){Nt(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(d){Nt(t,s,d)}else n.current=null}function Bp(t){var s=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(d){Nt(t,t.return,d)}}function Fu(t,s,n){try{var r=t.stateNode;Nw(r,t.type,n,s),r[gs]=s}catch(d){Nt(t,t.return,d)}}function Fp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Nn(t.type)||t.tag===4}function $u(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Nn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hu(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,s):(s=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,s.appendChild(t),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Qc));else if(r!==4&&(r===27&&Nn(t.type)&&(n=t.stateNode,s=null),t=t.child,t!==null))for(Hu(t,s,n),t=t.sibling;t!==null;)Hu(t,s,n),t=t.sibling}function Lc(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(r!==4&&(r===27&&Nn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Lc(t,s,n),t=t.sibling;t!==null;)Lc(t,s,n),t=t.sibling}function $p(t){var s=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);es(s,r,n),s[rs]=t,s[gs]=n}catch(m){Nt(t,t.return,m)}}var $a=!1,zt=!1,Vu=!1,Hp=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function sw(t,s){if(t=t.containerInfo,xm=to,t=tx(t),$d(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var d=r.anchorOffset,m=r.focusNode;r=r.focusOffset;try{n.nodeType,m.nodeType}catch{n=null;break e}var _=0,z=-1,V=-1,ne=0,ue=0,xe=t,re=null;t:for(;;){for(var ce;xe!==n||d!==0&&xe.nodeType!==3||(z=_+d),xe!==m||r!==0&&xe.nodeType!==3||(V=_+r),xe.nodeType===3&&(_+=xe.nodeValue.length),(ce=xe.firstChild)!==null;)re=xe,xe=ce;for(;;){if(xe===t)break t;if(re===n&&++ne===d&&(z=_),re===m&&++ue===r&&(V=_),(ce=xe.nextSibling)!==null)break;xe=re,re=xe.parentNode}xe=ce}n=z===-1||V===-1?null:{start:z,end:V}}else n=null}n=n||{start:0,end:0}}else n=null;for(pm={focusedElem:t,selectionRange:n},to=!1,Wt=s;Wt!==null;)if(s=Wt,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,Wt=t;else for(;Wt!==null;){switch(s=Wt,m=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,n=s,d=m.memoizedProps,m=m.memoizedState,r=n.stateNode;try{var Ye=tl(n.type,d,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(Ye,m),r.__reactInternalSnapshotBeforeUpdate=t}catch($e){Nt(n,n.return,$e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,n=t.nodeType,n===9)ym(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ym(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(c(163))}if(t=s.sibling,t!==null){t.return=s.return,Wt=t;break}Wt=s.return}}function Vp(t,s,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:xn(t,n),r&4&&ti(5,n);break;case 1:if(xn(t,n),r&4)if(t=n.stateNode,s===null)try{t.componentDidMount()}catch(_){Nt(n,n.return,_)}else{var d=tl(n.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Nt(n,n.return,_)}}r&64&&qp(n),r&512&&si(n,n.return);break;case 3:if(xn(t,n),r&64&&(t=n.updateQueue,t!==null)){if(s=null,n.child!==null)switch(n.child.tag){case 27:case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}try{kx(t,s)}catch(_){Nt(n,n.return,_)}}break;case 27:s===null&&r&4&&$p(n);case 26:case 5:xn(t,n),s===null&&r&4&&Bp(n),r&512&&si(n,n.return);break;case 12:xn(t,n);break;case 13:xn(t,n),r&4&&Qp(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=uw.bind(null,n),Ew(t,n))));break;case 22:if(r=n.memoizedState!==null||$a,!r){s=s!==null&&s.memoizedState!==null||zt,d=$a;var m=zt;$a=r,(zt=s)&&!m?pn(t,n,(n.subtreeFlags&8772)!==0):xn(t,n),$a=d,zt=m}break;case 30:break;default:xn(t,n)}}function Gp(t){var s=t.alternate;s!==null&&(t.alternate=null,Gp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Cd(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var kt=null,js=!1;function Ha(t,s,n){for(n=n.child;n!==null;)Yp(t,s,n),n=n.sibling}function Yp(t,s,n){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(ps,n)}catch{}switch(n.tag){case 26:zt||ua(n,s),Ha(t,s,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:zt||ua(n,s);var r=kt,d=js;Nn(n.type)&&(kt=n.stateNode,js=!1),Ha(t,s,n),ui(n.stateNode),kt=r,js=d;break;case 5:zt||ua(n,s);case 6:if(r=kt,d=js,kt=null,Ha(t,s,n),kt=r,js=d,kt!==null)if(js)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(n.stateNode)}catch(m){Nt(n,s,m)}else try{kt.removeChild(n.stateNode)}catch(m){Nt(n,s,m)}break;case 18:kt!==null&&(js?(t=kt,zg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),yi(t)):zg(kt,n.stateNode));break;case 4:r=kt,d=js,kt=n.stateNode.containerInfo,js=!0,Ha(t,s,n),kt=r,js=d;break;case 0:case 11:case 14:case 15:zt||fn(2,n,s),zt||fn(4,n,s),Ha(t,s,n);break;case 1:zt||(ua(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"&&Ip(n,s,r)),Ha(t,s,n);break;case 21:Ha(t,s,n);break;case 22:zt=(r=zt)||n.memoizedState!==null,Ha(t,s,n),zt=r;break;default:Ha(t,s,n)}}function Qp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{yi(t)}catch(n){Nt(s,s.return,n)}}function aw(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Hp),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Hp),s;default:throw Error(c(435,t.tag))}}function Gu(t,s){var n=aw(t);s.forEach(function(r){var d=mw.bind(null,t,r);n.has(r)||(n.add(r),r.then(d,d))})}function Cs(t,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var d=n[r],m=t,_=s,z=_;e:for(;z!==null;){switch(z.tag){case 27:if(Nn(z.type)){kt=z.stateNode,js=!1;break e}break;case 5:kt=z.stateNode,js=!1;break e;case 3:case 4:kt=z.stateNode.containerInfo,js=!0;break e}z=z.return}if(kt===null)throw Error(c(160));Yp(m,_,d),kt=null,js=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Wp(s,t),s=s.sibling}var Xs=null;function Wp(t,s){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cs(s,t),Ss(t),r&4&&(fn(3,t,t.return),ti(3,t),fn(5,t,t.return));break;case 1:Cs(s,t),Ss(t),r&512&&(zt||n===null||ua(n,n.return)),r&64&&$a&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var d=Xs;if(Cs(s,t),Ss(t),r&512&&(zt||n===null||ua(n,n.return)),r&4){var m=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,d=d.ownerDocument||d;t:switch(r){case"title":m=d.getElementsByTagName("title")[0],(!m||m[kr]||m[rs]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(r),d.head.insertBefore(m,d.querySelector("head > title"))),es(m,r,n),m[rs]=t,Yt(m),r=m;break e;case"link":var _=$g("link","href",d).get(r+(n.href||""));if(_){for(var z=0;z<_.length;z++)if(m=_[z],m.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&m.getAttribute("rel")===(n.rel==null?null:n.rel)&&m.getAttribute("title")===(n.title==null?null:n.title)&&m.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){_.splice(z,1);break t}}m=d.createElement(r),es(m,r,n),d.head.appendChild(m);break;case"meta":if(_=$g("meta","content",d).get(r+(n.content||""))){for(z=0;z<_.length;z++)if(m=_[z],m.getAttribute("content")===(n.content==null?null:""+n.content)&&m.getAttribute("name")===(n.name==null?null:n.name)&&m.getAttribute("property")===(n.property==null?null:n.property)&&m.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&m.getAttribute("charset")===(n.charSet==null?null:n.charSet)){_.splice(z,1);break t}}m=d.createElement(r),es(m,r,n),d.head.appendChild(m);break;default:throw Error(c(468,r))}m[rs]=t,Yt(m),r=m}t.stateNode=r}else Hg(d,t.type,t.stateNode);else t.stateNode=Fg(d,r,t.memoizedProps);else m!==r?(m===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):m.count--,r===null?Hg(d,t.type,t.stateNode):Fg(d,r,t.memoizedProps)):r===null&&t.stateNode!==null&&Fu(t,t.memoizedProps,n.memoizedProps)}break;case 27:Cs(s,t),Ss(t),r&512&&(zt||n===null||ua(n,n.return)),n!==null&&r&4&&Fu(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Cs(s,t),Ss(t),r&512&&(zt||n===null||ua(n,n.return)),t.flags&32){d=t.stateNode;try{_l(d,"")}catch(ce){Nt(t,t.return,ce)}}r&4&&t.stateNode!=null&&(d=t.memoizedProps,Fu(t,d,n!==null?n.memoizedProps:d)),r&1024&&(Vu=!0);break;case 6:if(Cs(s,t),Ss(t),r&4){if(t.stateNode===null)throw Error(c(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(ce){Nt(t,t.return,ce)}}break;case 3:if(Kc=null,d=Xs,Xs=Xc(s.containerInfo),Cs(s,t),Xs=d,Ss(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yi(s.containerInfo)}catch(ce){Nt(t,t.return,ce)}Vu&&(Vu=!1,Xp(t));break;case 4:r=Xs,Xs=Xc(t.stateNode.containerInfo),Cs(s,t),Ss(t),Xs=r;break;case 12:Cs(s,t),Ss(t);break;case 13:Cs(s,t),Ss(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ku=_e()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Gu(t,r)));break;case 22:d=t.memoizedState!==null;var V=n!==null&&n.memoizedState!==null,ne=$a,ue=zt;if($a=ne||d,zt=ue||V,Cs(s,t),zt=ue,$a=ne,Ss(t),r&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(n===null||V||$a||zt||sl(t)),n=null,s=t;;){if(s.tag===5||s.tag===26){if(n===null){V=n=s;try{if(m=V.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{z=V.stateNode;var xe=V.memoizedProps.style,re=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;z.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ce){Nt(V,V.return,ce)}}}else if(s.tag===6){if(n===null){V=s;try{V.stateNode.nodeValue=d?"":V.memoizedProps}catch(ce){Nt(V,V.return,ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;n===s&&(n=null),s=s.return}n===s&&(n=null),s.sibling.return=s.return,s=s.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Gu(t,n))));break;case 19:Cs(s,t),Ss(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Gu(t,r)));break;case 30:break;case 21:break;default:Cs(s,t),Ss(t)}}function Ss(t){var s=t.flags;if(s&2){try{for(var n,r=t.return;r!==null;){if(Fp(r)){n=r;break}r=r.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var d=n.stateNode,m=$u(t);Lc(t,m,d);break;case 5:var _=n.stateNode;n.flags&32&&(_l(_,""),n.flags&=-33);var z=$u(t);Lc(t,z,_);break;case 3:case 4:var V=n.stateNode.containerInfo,ne=$u(t);Hu(t,ne,V);break;default:throw Error(c(161))}}catch(ue){Nt(t,t.return,ue)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Xp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Xp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function xn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Vp(t,s.alternate,s),s=s.sibling}function sl(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:fn(4,s,s.return),sl(s);break;case 1:ua(s,s.return);var n=s.stateNode;typeof n.componentWillUnmount=="function"&&Ip(s,s.return,n),sl(s);break;case 27:ui(s.stateNode);case 26:case 5:ua(s,s.return),sl(s);break;case 22:s.memoizedState===null&&sl(s);break;case 30:sl(s);break;default:sl(s)}t=t.sibling}}function pn(t,s,n){for(n=n&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var r=s.alternate,d=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:pn(d,m,n),ti(4,m);break;case 1:if(pn(d,m,n),r=m,d=r.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ne){Nt(r,r.return,ne)}if(r=m,d=r.updateQueue,d!==null){var z=r.stateNode;try{var V=d.shared.hiddenCallbacks;if(V!==null)for(d.shared.hiddenCallbacks=null,d=0;d<V.length;d++)Sx(V[d],z)}catch(ne){Nt(r,r.return,ne)}}n&&_&64&&qp(m),si(m,m.return);break;case 27:$p(m);case 26:case 5:pn(d,m,n),n&&r===null&&_&4&&Bp(m),si(m,m.return);break;case 12:pn(d,m,n);break;case 13:pn(d,m,n),n&&_&4&&Qp(d,m);break;case 22:m.memoizedState===null&&pn(d,m,n),si(m,m.return);break;case 30:break;default:pn(d,m,n)}s=s.sibling}}function Yu(t,s){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Br(n))}function Qu(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Br(t))}function ma(t,s,n,r){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Zp(t,s,n,r),s=s.sibling}function Zp(t,s,n,r){var d=s.flags;switch(s.tag){case 0:case 11:case 15:ma(t,s,n,r),d&2048&&ti(9,s);break;case 1:ma(t,s,n,r);break;case 3:ma(t,s,n,r),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Br(t)));break;case 12:if(d&2048){ma(t,s,n,r),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,z=m.onPostCommit;typeof z=="function"&&z(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){Nt(s,s.return,V)}}else ma(t,s,n,r);break;case 13:ma(t,s,n,r);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?ma(t,s,n,r):ai(t,s):m._visibility&2?ma(t,s,n,r):(m._visibility|=2,Gl(t,s,n,r,(s.subtreeFlags&10256)!==0)),d&2048&&Yu(_,s);break;case 24:ma(t,s,n,r),d&2048&&Qu(s.alternate,s);break;default:ma(t,s,n,r)}}function Gl(t,s,n,r,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=t,_=s,z=n,V=r,ne=_.flags;switch(_.tag){case 0:case 11:case 15:Gl(m,_,z,V,d),ti(8,_);break;case 23:break;case 22:var ue=_.stateNode;_.memoizedState!==null?ue._visibility&2?Gl(m,_,z,V,d):ai(m,_):(ue._visibility|=2,Gl(m,_,z,V,d)),d&&ne&2048&&Yu(_.alternate,_);break;case 24:Gl(m,_,z,V,d),d&&ne&2048&&Qu(_.alternate,_);break;default:Gl(m,_,z,V,d)}s=s.sibling}}function ai(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var n=t,r=s,d=r.flags;switch(r.tag){case 22:ai(n,r),d&2048&&Yu(r.alternate,r);break;case 24:ai(n,r),d&2048&&Qu(r.alternate,r);break;default:ai(n,r)}s=s.sibling}}var ni=8192;function Yl(t){if(t.subtreeFlags&ni)for(t=t.child;t!==null;)Kp(t),t=t.sibling}function Kp(t){switch(t.tag){case 26:Yl(t),t.flags&ni&&t.memoizedState!==null&&Fw(Xs,t.memoizedState,t.memoizedProps);break;case 5:Yl(t);break;case 3:case 4:var s=Xs;Xs=Xc(t.stateNode.containerInfo),Yl(t),Xs=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=ni,ni=16777216,Yl(t),ni=s):Yl(t));break;default:Yl(t)}}function Jp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function li(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];Wt=r,tg(r,t)}Jp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)eg(t),t=t.sibling}function eg(t){switch(t.tag){case 0:case 11:case 15:li(t),t.flags&2048&&fn(9,t,t.return);break;case 3:li(t);break;case 12:li(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Uc(t)):li(t);break;default:li(t)}}function Uc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];Wt=r,tg(r,t)}Jp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:fn(8,s,s.return),Uc(s);break;case 22:n=s.stateNode,n._visibility&2&&(n._visibility&=-3,Uc(s));break;default:Uc(s)}t=t.sibling}}function tg(t,s){for(;Wt!==null;){var n=Wt;switch(n.tag){case 0:case 11:case 15:fn(8,n,s);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Br(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Wt=r;else e:for(n=t;Wt!==null;){r=Wt;var d=r.sibling,m=r.return;if(Gp(r),r===n){Wt=null;break e}if(d!==null){d.return=m,Wt=d;break e}Wt=m}}}var nw={getCacheForType:function(t){var s=is(Bt),n=s.data.get(t);return n===void 0&&(n=t(),s.data.set(t,n)),n}},lw=typeof WeakMap=="function"?WeakMap:Map,pt=0,wt=null,nt=null,dt=0,gt=0,ks=null,gn=!1,Ql=!1,Wu=!1,Va=0,Dt=0,vn=0,al=0,Xu=0,Bs=0,Wl=0,ri=null,bs=null,Zu=!1,Ku=0,qc=1/0,Ic=null,yn=null,Jt=0,jn=null,Xl=null,Zl=0,Ju=0,em=null,sg=null,ii=0,tm=null;function _s(){if((pt&2)!==0&&dt!==0)return dt&-dt;if(N.T!==null){var t=Ul;return t!==0?t:cm()}return vf()}function ag(){Bs===0&&(Bs=(dt&536870912)===0||ht?Bn():536870912);var t=Is.current;return t!==null&&(t.flags|=32),Bs}function Ts(t,s,n){(t===wt&&(gt===2||gt===9)||t.cancelPendingCommit!==null)&&(Kl(t,0),bn(t,dt,Bs,!1)),Sr(t,n),((pt&2)===0||t!==wt)&&(t===wt&&((pt&2)===0&&(al|=n),Dt===4&&bn(t,dt,Bs,!1)),ha(t))}function ng(t,s,n){if((pt&6)!==0)throw Error(c(327));var r=!n&&(s&124)===0&&(s&t.expiredLanes)===0||ze(t,s),d=r?cw(t,s):nm(t,s,!0),m=r;do{if(d===0){Ql&&!r&&bn(t,s,0,!1);break}else{if(n=t.current.alternate,m&&!rw(n)){d=nm(t,s,!1),m=!1;continue}if(d===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var z=t;d=ri;var V=z.current.memoizedState.isDehydrated;if(V&&(Kl(z,_).flags|=256),_=nm(z,_,!1),_!==2){if(Wu&&!V){z.errorRecoveryDisabledLanes|=m,al|=m,d=4;break e}m=bs,bs=d,m!==null&&(bs===null?bs=m:bs.push.apply(bs,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){Kl(t,0),bn(t,s,0,!0);break}e:{switch(r=t,m=d,m){case 0:case 1:throw Error(c(345));case 4:if((s&4194048)!==s)break;case 6:bn(r,s,Bs,!gn);break e;case 2:bs=null;break;case 3:case 5:break;default:throw Error(c(329))}if((s&62914560)===s&&(d=Ku+300-_e(),10<d)){if(bn(r,s,Bs,!gn),Pe(r,0,!0)!==0)break e;r.timeoutHandle=Rg(lg.bind(null,r,n,bs,Ic,Zu,s,Bs,al,Wl,gn,m,2,-0,0),d);break e}lg(r,n,bs,Ic,Zu,s,Bs,al,Wl,gn,m,0,-0,0)}}break}while(!0);ha(t)}function lg(t,s,n,r,d,m,_,z,V,ne,ue,xe,re,ce){if(t.timeoutHandle=-1,xe=s.subtreeFlags,(xe&8192||(xe&16785408)===16785408)&&(fi={stylesheets:null,count:0,unsuspend:Bw},Kp(s),xe=$w(),xe!==null)){t.cancelPendingCommit=xe(mg.bind(null,t,s,m,n,r,d,_,z,V,ue,1,re,ce)),bn(t,m,_,!ne);return}mg(t,s,m,n,r,d,_,z,V)}function rw(t){for(var s=t;;){var n=s.tag;if((n===0||n===11||n===15)&&s.flags&16384&&(n=s.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var d=n[r],m=d.getSnapshot;d=d.value;try{if(!Ns(m(),d))return!1}catch{return!1}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bn(t,s,n,r){s&=~Xu,s&=~al,t.suspendedLanes|=s,t.pingedLanes&=~s,r&&(t.warmLanes|=s),r=t.expirationTimes;for(var d=s;0<d;){var m=31-Mt(d),_=1<<m;r[m]=-1,d&=~_}n!==0&&pf(t,n,s)}function Bc(){return(pt&6)===0?(ci(0),!1):!0}function sm(){if(nt!==null){if(gt===0)var t=nt.return;else t=nt,La=Zn=null,yu(t),Hl=null,Kr=0,t=nt;for(;t!==null;)Up(t.alternate,t),t=t.return;nt=null}}function Kl(t,s){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Cw(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),sm(),wt=t,nt=n=Oa(t.current,null),dt=s,gt=0,ks=null,gn=!1,Ql=ze(t,s),Wu=!1,Wl=Bs=Xu=al=vn=Dt=0,bs=ri=null,Zu=!1,(s&8)!==0&&(s|=s&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=s;0<r;){var d=31-Mt(r),m=1<<d;s|=t[d],r&=~m}return Va=s,oc(),n}function rg(t,s){et=null,N.H=Tc,s===$r||s===vc?(s=wx(),gt=3):s===jx?(s=wx(),gt=4):gt=s===Cp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ks=s,nt===null&&(Dt=1,Rc(t,Ps(s,t.current)))}function ig(){var t=N.H;return N.H=Tc,t===null?Tc:t}function cg(){var t=N.A;return N.A=nw,t}function am(){Dt=4,gn||(dt&4194048)!==dt&&Is.current!==null||(Ql=!0),(vn&134217727)===0&&(al&134217727)===0||wt===null||bn(wt,dt,Bs,!1)}function nm(t,s,n){var r=pt;pt|=2;var d=ig(),m=cg();(wt!==t||dt!==s)&&(Ic=null,Kl(t,s)),s=!1;var _=Dt;e:do try{if(gt!==0&&nt!==null){var z=nt,V=ks;switch(gt){case 8:sm(),_=6;break e;case 3:case 2:case 9:case 6:Is.current===null&&(s=!0);var ne=gt;if(gt=0,ks=null,Jl(t,z,V,ne),n&&Ql){_=0;break e}break;default:ne=gt,gt=0,ks=null,Jl(t,z,V,ne)}}iw(),_=Dt;break}catch(ue){rg(t,ue)}while(!0);return s&&t.shellSuspendCounter++,La=Zn=null,pt=r,N.H=d,N.A=m,nt===null&&(wt=null,dt=0,oc()),_}function iw(){for(;nt!==null;)og(nt)}function cw(t,s){var n=pt;pt|=2;var r=ig(),d=cg();wt!==t||dt!==s?(Ic=null,qc=_e()+500,Kl(t,s)):Ql=ze(t,s);e:do try{if(gt!==0&&nt!==null){s=nt;var m=ks;t:switch(gt){case 1:gt=0,ks=null,Jl(t,s,m,1);break;case 2:case 9:if(bx(m)){gt=0,ks=null,dg(s);break}s=function(){gt!==2&&gt!==9||wt!==t||(gt=7),ha(t)},m.then(s,s);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:bx(m)?(gt=0,ks=null,dg(s)):(gt=0,ks=null,Jl(t,s,m,7));break;case 5:var _=null;switch(nt.tag){case 26:_=nt.memoizedState;case 5:case 27:var z=nt;if(!_||Vg(_)){gt=0,ks=null;var V=z.sibling;if(V!==null)nt=V;else{var ne=z.return;ne!==null?(nt=ne,Fc(ne)):nt=null}break t}}gt=0,ks=null,Jl(t,s,m,5);break;case 6:gt=0,ks=null,Jl(t,s,m,6);break;case 8:sm(),Dt=6;break e;default:throw Error(c(462))}}ow();break}catch(ue){rg(t,ue)}while(!0);return La=Zn=null,N.H=r,N.A=d,pt=n,nt!==null?0:(wt=null,dt=0,oc(),Dt)}function ow(){for(;nt!==null&&!fe();)og(nt)}function og(t){var s=Pp(t.alternate,t,Va);t.memoizedProps=t.pendingProps,s===null?Fc(t):nt=s}function dg(t){var s=t,n=s.alternate;switch(s.tag){case 15:case 0:s=Ap(n,s,s.pendingProps,s.type,void 0,dt);break;case 11:s=Ap(n,s,s.pendingProps,s.type.render,s.ref,dt);break;case 5:yu(s);default:Up(n,s),s=nt=ux(s,Va),s=Pp(n,s,Va)}t.memoizedProps=t.pendingProps,s===null?Fc(t):nt=s}function Jl(t,s,n,r){La=Zn=null,yu(s),Hl=null,Kr=0;var d=s.return;try{if(KN(t,d,s,n,dt)){Dt=1,Rc(t,Ps(n,t.current)),nt=null;return}}catch(m){if(d!==null)throw nt=d,m;Dt=1,Rc(t,Ps(n,t.current)),nt=null;return}s.flags&32768?(ht||r===1?t=!0:Ql||(dt&536870912)!==0?t=!1:(gn=t=!0,(r===2||r===9||r===3||r===6)&&(r=Is.current,r!==null&&r.tag===13&&(r.flags|=16384))),ug(s,t)):Fc(s)}function Fc(t){var s=t;do{if((s.flags&32768)!==0){ug(s,gn);return}t=s.return;var n=ew(s.alternate,s,Va);if(n!==null){nt=n;return}if(s=s.sibling,s!==null){nt=s;return}nt=s=t}while(s!==null);Dt===0&&(Dt=5)}function ug(t,s){do{var n=tw(t.alternate,t);if(n!==null){n.flags&=32767,nt=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!s&&(t=t.sibling,t!==null)){nt=t;return}nt=t=n}while(t!==null);Dt=6,nt=null}function mg(t,s,n,r,d,m,_,z,V){t.cancelPendingCommit=null;do $c();while(Jt!==0);if((pt&6)!==0)throw Error(c(327));if(s!==null){if(s===t.current)throw Error(c(177));if(m=s.lanes|s.childLanes,m|=Qd,Bb(t,n,m,_,z,V),t===wt&&(nt=wt=null,dt=0),Xl=s,jn=t,Zl=n,Ju=m,em=d,sg=r,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,hw(Ut,function(){return gg(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||r){r=N.T,N.T=null,d=L.p,L.p=2,_=pt,pt|=4;try{sw(t,s,n)}finally{pt=_,L.p=d,N.T=r}}Jt=1,hg(),fg(),xg()}}function hg(){if(Jt===1){Jt=0;var t=jn,s=Xl,n=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||n){n=N.T,N.T=null;var r=L.p;L.p=2;var d=pt;pt|=4;try{Wp(s,t);var m=pm,_=tx(t.containerInfo),z=m.focusedElem,V=m.selectionRange;if(_!==z&&z&&z.ownerDocument&&ex(z.ownerDocument.documentElement,z)){if(V!==null&&$d(z)){var ne=V.start,ue=V.end;if(ue===void 0&&(ue=ne),"selectionStart"in z)z.selectionStart=ne,z.selectionEnd=Math.min(ue,z.value.length);else{var xe=z.ownerDocument||document,re=xe&&xe.defaultView||window;if(re.getSelection){var ce=re.getSelection(),Ye=z.textContent.length,$e=Math.min(V.start,Ye),bt=V.end===void 0?$e:Math.min(V.end,Ye);!ce.extend&&$e>bt&&(_=bt,bt=$e,$e=_);var te=Jf(z,$e),K=Jf(z,bt);if(te&&K&&(ce.rangeCount!==1||ce.anchorNode!==te.node||ce.anchorOffset!==te.offset||ce.focusNode!==K.node||ce.focusOffset!==K.offset)){var ae=xe.createRange();ae.setStart(te.node,te.offset),ce.removeAllRanges(),$e>bt?(ce.addRange(ae),ce.extend(K.node,K.offset)):(ae.setEnd(K.node,K.offset),ce.addRange(ae))}}}}for(xe=[],ce=z;ce=ce.parentNode;)ce.nodeType===1&&xe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<xe.length;z++){var he=xe[z];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}to=!!xm,pm=xm=null}finally{pt=d,L.p=r,N.T=n}}t.current=s,Jt=2}}function fg(){if(Jt===2){Jt=0;var t=jn,s=Xl,n=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||n){n=N.T,N.T=null;var r=L.p;L.p=2;var d=pt;pt|=4;try{Vp(t,s.alternate,s)}finally{pt=d,L.p=r,N.T=n}}Jt=3}}function xg(){if(Jt===4||Jt===3){Jt=0,Me();var t=jn,s=Xl,n=Zl,r=sg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Jt=5:(Jt=0,Xl=jn=null,pg(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(yn=null),Nd(n),s=s.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(ps,s,void 0,(s.current.flags&128)===128)}catch{}if(r!==null){s=N.T,d=L.p,L.p=2,N.T=null;try{for(var m=t.onRecoverableError,_=0;_<r.length;_++){var z=r[_];m(z.value,{componentStack:z.stack})}}finally{N.T=s,L.p=d}}(Zl&3)!==0&&$c(),ha(t),d=t.pendingLanes,(n&4194090)!==0&&(d&42)!==0?t===tm?ii++:(ii=0,tm=t):ii=0,ci(0)}}function pg(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Br(s)))}function $c(t){return hg(),fg(),xg(),gg()}function gg(){if(Jt!==5)return!1;var t=jn,s=Ju;Ju=0;var n=Nd(Zl),r=N.T,d=L.p;try{L.p=32>n?32:n,N.T=null,n=em,em=null;var m=jn,_=Zl;if(Jt=0,Xl=jn=null,Zl=0,(pt&6)!==0)throw Error(c(331));var z=pt;if(pt|=4,eg(m.current),Zp(m,m.current,_,n),pt=z,ci(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(ps,m)}catch{}return!0}finally{L.p=d,N.T=r,pg(t,s)}}function vg(t,s,n){s=Ps(n,s),s=Ru(t.stateNode,s,2),t=dn(t,s,2),t!==null&&(Sr(t,2),ha(t))}function Nt(t,s,n){if(t.tag===3)vg(t,t,n);else for(;s!==null;){if(s.tag===3){vg(s,t,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){t=Ps(n,t),n=Np(2),r=dn(s,n,2),r!==null&&(wp(n,r,s,t),Sr(r,2),ha(r));break}}s=s.return}}function lm(t,s,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lw;var d=new Set;r.set(s,d)}else d=r.get(s),d===void 0&&(d=new Set,r.set(s,d));d.has(n)||(Wu=!0,d.add(n),t=dw.bind(null,t,s,n),s.then(t,t))}function dw(t,s,n){var r=t.pingCache;r!==null&&r.delete(s),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,wt===t&&(dt&n)===n&&(Dt===4||Dt===3&&(dt&62914560)===dt&&300>_e()-Ku?(pt&2)===0&&Kl(t,0):Xu|=n,Wl===dt&&(Wl=0)),ha(t)}function yg(t,s){s===0&&(s=Qs()),t=Ol(t,s),t!==null&&(Sr(t,s),ha(t))}function uw(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),yg(t,n)}function mw(t,s){var n=0;switch(t.tag){case 13:var r=t.stateNode,d=t.memoizedState;d!==null&&(n=d.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(c(314))}r!==null&&r.delete(s),yg(t,n)}function hw(t,s){return xt(t,s)}var Hc=null,er=null,rm=!1,Vc=!1,im=!1,nl=0;function ha(t){t!==er&&t.next===null&&(er===null?Hc=er=t:er=er.next=t),Vc=!0,rm||(rm=!0,xw())}function ci(t,s){if(!im&&Vc){im=!0;do for(var n=!1,r=Hc;r!==null;){if(t!==0){var d=r.pendingLanes;if(d===0)var m=0;else{var _=r.suspendedLanes,z=r.pingedLanes;m=(1<<31-Mt(42|t)+1)-1,m&=d&~(_&~z),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(n=!0,wg(r,m))}else m=dt,m=Pe(r,r===wt?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(m&3)===0||ze(r,m)||(n=!0,wg(r,m));r=r.next}while(n);im=!1}}function fw(){jg()}function jg(){Vc=rm=!1;var t=0;nl!==0&&(ww()&&(t=nl),nl=0);for(var s=_e(),n=null,r=Hc;r!==null;){var d=r.next,m=bg(r,s);m===0?(r.next=null,n===null?Hc=d:n.next=d,d===null&&(er=n)):(n=r,(t!==0||(m&3)!==0)&&(Vc=!0)),r=d}ci(t)}function bg(t,s){for(var n=t.suspendedLanes,r=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-Mt(m),z=1<<_,V=d[_];V===-1?((z&n)===0||(z&r)!==0)&&(d[_]=us(z,s)):V<=s&&(t.expiredLanes|=z),m&=~z}if(s=wt,n=dt,n=Pe(t,t===s?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===s&&(gt===2||gt===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&G(r),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||ze(t,n)){if(s=n&-n,s===t.callbackPriority)return s;switch(r!==null&&G(r),Nd(n)){case 2:case 8:n=Gt;break;case 32:n=Ut;break;case 268435456:n=Un;break;default:n=Ut}return r=Ng.bind(null,t),n=xt(n,r),t.callbackPriority=s,t.callbackNode=n,s}return r!==null&&r!==null&&G(r),t.callbackPriority=2,t.callbackNode=null,2}function Ng(t,s){if(Jt!==0&&Jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if($c()&&t.callbackNode!==n)return null;var r=dt;return r=Pe(t,t===wt?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(ng(t,r,s),bg(t,_e()),t.callbackNode!=null&&t.callbackNode===n?Ng.bind(null,t):null)}function wg(t,s){if($c())return null;ng(t,s,!0)}function xw(){Sw(function(){(pt&6)!==0?xt(at,fw):jg()})}function cm(){return nl===0&&(nl=Bn()),nl}function Cg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:sc(""+t)}function Sg(t,s){var n=s.ownerDocument.createElement("input");return n.name=s.name,n.value=s.value,t.id&&n.setAttribute("form",t.id),s.parentNode.insertBefore(n,s),t=new FormData(t),n.parentNode.removeChild(n),t}function pw(t,s,n,r,d){if(s==="submit"&&n&&n.stateNode===d){var m=Cg((d[gs]||null).action),_=r.submitter;_&&(s=(s=_[gs]||null)?Cg(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var z=new rc("action","action",null,r,d);t.push({event:z,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(nl!==0){var V=_?Sg(d,_):new FormData(d);Tu(n,{pending:!0,data:V,method:d.method,action:m},null,V)}}else typeof m=="function"&&(z.preventDefault(),V=_?Sg(d,_):new FormData(d),Tu(n,{pending:!0,data:V,method:d.method,action:m},m,V))},currentTarget:d}]})}}for(var om=0;om<Yd.length;om++){var dm=Yd[om],gw=dm.toLowerCase(),vw=dm[0].toUpperCase()+dm.slice(1);Ws(gw,"on"+vw)}Ws(nx,"onAnimationEnd"),Ws(lx,"onAnimationIteration"),Ws(rx,"onAnimationStart"),Ws("dblclick","onDoubleClick"),Ws("focusin","onFocus"),Ws("focusout","onBlur"),Ws(zN,"onTransitionRun"),Ws(PN,"onTransitionStart"),Ws(LN,"onTransitionCancel"),Ws(ix,"onTransitionEnd"),Cl("onMouseEnter",["mouseout","mouseover"]),Cl("onMouseLeave",["mouseout","mouseover"]),Cl("onPointerEnter",["pointerout","pointerover"]),Cl("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oi));function kg(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],d=r.event;r=r.listeners;e:{var m=void 0;if(s)for(var _=r.length-1;0<=_;_--){var z=r[_],V=z.instance,ne=z.currentTarget;if(z=z.listener,V!==m&&d.isPropagationStopped())break e;m=z,d.currentTarget=ne;try{m(d)}catch(ue){Mc(ue)}d.currentTarget=null,m=V}else for(_=0;_<r.length;_++){if(z=r[_],V=z.instance,ne=z.currentTarget,z=z.listener,V!==m&&d.isPropagationStopped())break e;m=z,d.currentTarget=ne;try{m(d)}catch(ue){Mc(ue)}d.currentTarget=null,m=V}}}}function lt(t,s){var n=s[wd];n===void 0&&(n=s[wd]=new Set);var r=t+"__bubble";n.has(r)||(_g(s,t,2,!1),n.add(r))}function um(t,s,n){var r=0;s&&(r|=4),_g(n,t,r,s)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function mm(t){if(!t[Gc]){t[Gc]=!0,jf.forEach(function(n){n!=="selectionchange"&&(yw.has(n)||um(n,!1,t),um(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Gc]||(s[Gc]=!0,um("selectionchange",!1,s))}}function _g(t,s,n,r){switch(Zg(s)){case 2:var d=Gw;break;case 8:d=Yw;break;default:d=km}n=d.bind(null,s,n,t),d=void 0,!Od||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),r?d!==void 0?t.addEventListener(s,n,{capture:!0,passive:d}):t.addEventListener(s,n,!0):d!==void 0?t.addEventListener(s,n,{passive:d}):t.addEventListener(s,n,!1)}function hm(t,s,n,r,d){var m=r;if((s&1)===0&&(s&2)===0&&r!==null)e:for(;;){if(r===null)return;var _=r.tag;if(_===3||_===4){var z=r.stateNode.containerInfo;if(z===d)break;if(_===4)for(_=r.return;_!==null;){var V=_.tag;if((V===3||V===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;z!==null;){if(_=bl(z),_===null)return;if(V=_.tag,V===5||V===6||V===26||V===27){r=m=_;continue e}z=z.parentNode}}r=r.return}Of(function(){var ne=m,ue=Md(n),xe=[];e:{var re=cx.get(t);if(re!==void 0){var ce=rc,Ye=t;switch(t){case"keypress":if(nc(n)===0)break e;case"keydown":case"keyup":ce=hN;break;case"focusin":Ye="focus",ce=Ud;break;case"focusout":Ye="blur",ce=Ud;break;case"beforeblur":case"afterblur":ce=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=tN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=pN;break;case nx:case lx:case rx:ce=nN;break;case ix:ce=vN;break;case"scroll":case"scrollend":ce=Jb;break;case"wheel":ce=jN;break;case"copy":case"cut":case"paste":ce=rN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=qf;break;case"toggle":case"beforetoggle":ce=NN}var $e=(s&4)!==0,bt=!$e&&(t==="scroll"||t==="scrollend"),te=$e?re!==null?re+"Capture":null:re;$e=[];for(var K=ne,ae;K!==null;){var he=K;if(ae=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ae===null||te===null||(he=Tr(K,te),he!=null&&$e.push(di(K,he,ae))),bt)break;K=K.return}0<$e.length&&(re=new ce(re,Ye,null,n,ue),xe.push({event:re,listeners:$e}))}}if((s&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",re&&n!==Dd&&(Ye=n.relatedTarget||n.fromElement)&&(bl(Ye)||Ye[jl]))break e;if((ce||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,ce?(Ye=n.relatedTarget||n.toElement,ce=ne,Ye=Ye?bl(Ye):null,Ye!==null&&(bt=u(Ye),$e=Ye.tag,Ye!==bt||$e!==5&&$e!==27&&$e!==6)&&(Ye=null)):(ce=null,Ye=ne),ce!==Ye)){if($e=Lf,he="onMouseLeave",te="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&($e=qf,he="onPointerLeave",te="onPointerEnter",K="pointer"),bt=ce==null?re:_r(ce),ae=Ye==null?re:_r(Ye),re=new $e(he,K+"leave",ce,n,ue),re.target=bt,re.relatedTarget=ae,he=null,bl(ue)===ne&&($e=new $e(te,K+"enter",Ye,n,ue),$e.target=ae,$e.relatedTarget=bt,he=$e),bt=he,ce&&Ye)t:{for($e=ce,te=Ye,K=0,ae=$e;ae;ae=tr(ae))K++;for(ae=0,he=te;he;he=tr(he))ae++;for(;0<K-ae;)$e=tr($e),K--;for(;0<ae-K;)te=tr(te),ae--;for(;K--;){if($e===te||te!==null&&$e===te.alternate)break t;$e=tr($e),te=tr(te)}$e=null}else $e=null;ce!==null&&Tg(xe,re,ce,$e,!1),Ye!==null&&bt!==null&&Tg(xe,bt,Ye,$e,!0)}}e:{if(re=ne?_r(ne):window,ce=re.nodeName&&re.nodeName.toLowerCase(),ce==="select"||ce==="input"&&re.type==="file")var Te=Yf;else if(Vf(re))if(Qf)Te=MN;else{Te=AN;var st=EN}else ce=re.nodeName,!ce||ce.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&Ad(ne.elementType)&&(Te=Yf):Te=DN;if(Te&&(Te=Te(t,ne))){Gf(xe,Te,n,ue);break e}st&&st(t,re,ne),t==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&Ed(re,"number",re.value)}switch(st=ne?_r(ne):window,t){case"focusin":(Vf(st)||st.contentEditable==="true")&&(Dl=st,Hd=ne,Pr=null);break;case"focusout":Pr=Hd=Dl=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,sx(xe,n,ue);break;case"selectionchange":if(ON)break;case"keydown":case"keyup":sx(xe,n,ue)}var Oe;if(Id)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Al?$f(t,n)&&(Ve="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Ve="onCompositionStart");Ve&&(If&&n.locale!=="ko"&&(Al||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Al&&(Oe=zf()):(ln=ue,zd="value"in ln?ln.value:ln.textContent,Al=!0)),st=Yc(ne,Ve),0<st.length&&(Ve=new Uf(Ve,t,null,n,ue),xe.push({event:Ve,listeners:st}),Oe?Ve.data=Oe:(Oe=Hf(n),Oe!==null&&(Ve.data=Oe)))),(Oe=CN?SN(t,n):kN(t,n))&&(Ve=Yc(ne,"onBeforeInput"),0<Ve.length&&(st=new Uf("onBeforeInput","beforeinput",null,n,ue),xe.push({event:st,listeners:Ve}),st.data=Oe)),pw(xe,t,ne,n,ue)}kg(xe,s)})}function di(t,s,n){return{instance:t,listener:s,currentTarget:n}}function Yc(t,s){for(var n=s+"Capture",r=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Tr(t,n),d!=null&&r.unshift(di(t,d,m)),d=Tr(t,s),d!=null&&r.push(di(t,d,m))),t.tag===3)return r;t=t.return}return[]}function tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Tg(t,s,n,r,d){for(var m=s._reactName,_=[];n!==null&&n!==r;){var z=n,V=z.alternate,ne=z.stateNode;if(z=z.tag,V!==null&&V===r)break;z!==5&&z!==26&&z!==27||ne===null||(V=ne,d?(ne=Tr(n,m),ne!=null&&_.unshift(di(n,ne,V))):d||(ne=Tr(n,m),ne!=null&&_.push(di(n,ne,V)))),n=n.return}_.length!==0&&t.push({event:s,listeners:_})}var jw=/\r\n?/g,bw=/\u0000|\uFFFD/g;function Eg(t){return(typeof t=="string"?t:""+t).replace(jw,`
`).replace(bw,"")}function Ag(t,s){return s=Eg(s),Eg(t)===s}function Qc(){}function jt(t,s,n,r,d,m){switch(n){case"children":typeof r=="string"?s==="body"||s==="textarea"&&r===""||_l(t,r):(typeof r=="number"||typeof r=="bigint")&&s!=="body"&&_l(t,""+r);break;case"className":Ji(t,"class",r);break;case"tabIndex":Ji(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ji(t,n,r);break;case"style":Mf(t,r,m);break;case"data":if(s!=="object"){Ji(t,"data",r);break}case"src":case"href":if(r===""&&(s!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=sc(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(n==="formAction"?(s!=="input"&&jt(t,s,"name",d.name,d,null),jt(t,s,"formEncType",d.formEncType,d,null),jt(t,s,"formMethod",d.formMethod,d,null),jt(t,s,"formTarget",d.formTarget,d,null)):(jt(t,s,"encType",d.encType,d,null),jt(t,s,"method",d.method,d,null),jt(t,s,"target",d.target,d,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=sc(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=Qc);break;case"onScroll":r!=null&&lt("scroll",t);break;case"onScrollEnd":r!=null&&lt("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(c(61));if(n=r.__html,n!=null){if(d.children!=null)throw Error(c(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=sc(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":lt("beforetoggle",t),lt("toggle",t),Ki(t,"popover",r);break;case"xlinkActuate":Ma(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ma(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ma(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ma(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ma(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ma(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ki(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Zb.get(n)||n,Ki(t,n,r))}}function fm(t,s,n,r,d,m){switch(n){case"style":Mf(t,r,m);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(c(61));if(n=r.__html,n!=null){if(d.children!=null)throw Error(c(60));t.innerHTML=n}}break;case"children":typeof r=="string"?_l(t,r):(typeof r=="number"||typeof r=="bigint")&&_l(t,""+r);break;case"onScroll":r!=null&&lt("scroll",t);break;case"onScrollEnd":r!=null&&lt("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bf.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(d=n.endsWith("Capture"),s=n.slice(2,d?n.length-7:void 0),m=t[gs]||null,m=m!=null?m[n]:null,typeof m=="function"&&t.removeEventListener(s,m,d),typeof r=="function")){typeof m!="function"&&m!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(s,r,d);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):Ki(t,n,r)}}}function es(t,s,n){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",t),lt("load",t);var r=!1,d=!1,m;for(m in n)if(n.hasOwnProperty(m)){var _=n[m];if(_!=null)switch(m){case"src":r=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,s));default:jt(t,s,m,_,n,null)}}d&&jt(t,s,"srcSet",n.srcSet,n,null),r&&jt(t,s,"src",n.src,n,null);return;case"input":lt("invalid",t);var z=m=_=d=null,V=null,ne=null;for(r in n)if(n.hasOwnProperty(r)){var ue=n[r];if(ue!=null)switch(r){case"name":d=ue;break;case"type":_=ue;break;case"checked":V=ue;break;case"defaultChecked":ne=ue;break;case"value":m=ue;break;case"defaultValue":z=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(c(137,s));break;default:jt(t,s,r,ue,n,null)}}Tf(t,m,z,V,ne,_,d,!1),ec(t);return;case"select":lt("invalid",t),r=_=m=null;for(d in n)if(n.hasOwnProperty(d)&&(z=n[d],z!=null))switch(d){case"value":m=z;break;case"defaultValue":_=z;break;case"multiple":r=z;default:jt(t,s,d,z,n,null)}s=m,n=_,t.multiple=!!r,s!=null?kl(t,!!r,s,!1):n!=null&&kl(t,!!r,n,!0);return;case"textarea":lt("invalid",t),m=d=r=null;for(_ in n)if(n.hasOwnProperty(_)&&(z=n[_],z!=null))switch(_){case"value":r=z;break;case"defaultValue":d=z;break;case"children":m=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(c(91));break;default:jt(t,s,_,z,n,null)}Af(t,r,d,m),ec(t);return;case"option":for(V in n)if(n.hasOwnProperty(V)&&(r=n[V],r!=null))switch(V){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:jt(t,s,V,r,n,null)}return;case"dialog":lt("beforetoggle",t),lt("toggle",t),lt("cancel",t),lt("close",t);break;case"iframe":case"object":lt("load",t);break;case"video":case"audio":for(r=0;r<oi.length;r++)lt(oi[r],t);break;case"image":lt("error",t),lt("load",t);break;case"details":lt("toggle",t);break;case"embed":case"source":case"link":lt("error",t),lt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in n)if(n.hasOwnProperty(ne)&&(r=n[ne],r!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,s));default:jt(t,s,ne,r,n,null)}return;default:if(Ad(s)){for(ue in n)n.hasOwnProperty(ue)&&(r=n[ue],r!==void 0&&fm(t,s,ue,r,n,void 0));return}}for(z in n)n.hasOwnProperty(z)&&(r=n[z],r!=null&&jt(t,s,z,r,n,null))}function Nw(t,s,n,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,z=null,V=null,ne=null,ue=null;for(ce in n){var xe=n[ce];if(n.hasOwnProperty(ce)&&xe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":V=xe;default:r.hasOwnProperty(ce)||jt(t,s,ce,null,r,xe)}}for(var re in r){var ce=r[re];if(xe=n[re],r.hasOwnProperty(re)&&(ce!=null||xe!=null))switch(re){case"type":m=ce;break;case"name":d=ce;break;case"checked":ne=ce;break;case"defaultChecked":ue=ce;break;case"value":_=ce;break;case"defaultValue":z=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(c(137,s));break;default:ce!==xe&&jt(t,s,re,ce,r,xe)}}Td(t,_,z,V,ne,ue,m,d);return;case"select":ce=_=z=re=null;for(m in n)if(V=n[m],n.hasOwnProperty(m)&&V!=null)switch(m){case"value":break;case"multiple":ce=V;default:r.hasOwnProperty(m)||jt(t,s,m,null,r,V)}for(d in r)if(m=r[d],V=n[d],r.hasOwnProperty(d)&&(m!=null||V!=null))switch(d){case"value":re=m;break;case"defaultValue":z=m;break;case"multiple":_=m;default:m!==V&&jt(t,s,d,m,r,V)}s=z,n=_,r=ce,re!=null?kl(t,!!n,re,!1):!!r!=!!n&&(s!=null?kl(t,!!n,s,!0):kl(t,!!n,n?[]:"",!1));return;case"textarea":ce=re=null;for(z in n)if(d=n[z],n.hasOwnProperty(z)&&d!=null&&!r.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:jt(t,s,z,null,r,d)}for(_ in r)if(d=r[_],m=n[_],r.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":re=d;break;case"defaultValue":ce=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(c(91));break;default:d!==m&&jt(t,s,_,d,r,m)}Ef(t,re,ce);return;case"option":for(var Ye in n)if(re=n[Ye],n.hasOwnProperty(Ye)&&re!=null&&!r.hasOwnProperty(Ye))switch(Ye){case"selected":t.selected=!1;break;default:jt(t,s,Ye,null,r,re)}for(V in r)if(re=r[V],ce=n[V],r.hasOwnProperty(V)&&re!==ce&&(re!=null||ce!=null))switch(V){case"selected":t.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:jt(t,s,V,re,r,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in n)re=n[$e],n.hasOwnProperty($e)&&re!=null&&!r.hasOwnProperty($e)&&jt(t,s,$e,null,r,re);for(ne in r)if(re=r[ne],ce=n[ne],r.hasOwnProperty(ne)&&re!==ce&&(re!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(c(137,s));break;default:jt(t,s,ne,re,r,ce)}return;default:if(Ad(s)){for(var bt in n)re=n[bt],n.hasOwnProperty(bt)&&re!==void 0&&!r.hasOwnProperty(bt)&&fm(t,s,bt,void 0,r,re);for(ue in r)re=r[ue],ce=n[ue],!r.hasOwnProperty(ue)||re===ce||re===void 0&&ce===void 0||fm(t,s,ue,re,r,ce);return}}for(var te in n)re=n[te],n.hasOwnProperty(te)&&re!=null&&!r.hasOwnProperty(te)&&jt(t,s,te,null,r,re);for(xe in r)re=r[xe],ce=n[xe],!r.hasOwnProperty(xe)||re===ce||re==null&&ce==null||jt(t,s,xe,re,r,ce)}var xm=null,pm=null;function Wc(t){return t.nodeType===9?t:t.ownerDocument}function Dg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mg(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function gm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var vm=null;function ww(){var t=window.event;return t&&t.type==="popstate"?t===vm?!1:(vm=t,!0):(vm=null,!1)}var Rg=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,Og=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof Og<"u"?function(t){return Og.resolve(null).then(t).catch(kw)}:Rg;function kw(t){setTimeout(function(){throw t})}function Nn(t){return t==="head"}function zg(t,s){var n=s,r=0,d=0;do{var m=n.nextSibling;if(t.removeChild(n),m&&m.nodeType===8)if(n=m.data,n==="/$"){if(0<r&&8>r){n=r;var _=t.ownerDocument;if(n&1&&ui(_.documentElement),n&2&&ui(_.body),n&4)for(n=_.head,ui(n),_=n.firstChild;_;){var z=_.nextSibling,V=_.nodeName;_[kr]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&_.rel.toLowerCase()==="stylesheet"||n.removeChild(_),_=z}}if(d===0){t.removeChild(m),yi(s);return}d--}else n==="$"||n==="$?"||n==="$!"?d++:r=n.charCodeAt(0)-48;else r=0;n=m}while(n);yi(s)}function ym(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var n=s;switch(s=s.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ym(n),Cd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function _w(t,s,n,r){for(;t.nodeType===1;){var d=n;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[kr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Zs(t.nextSibling),t===null)break}return null}function Tw(t,s,n){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Zs(t.nextSibling),t===null))return null;return t}function jm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Ew(t,s){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")s();else{var r=function(){s(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Zs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var bm=null;function Pg(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}function Lg(t,s,n){switch(s=Wc(n),t){case"html":if(t=s.documentElement,!t)throw Error(c(452));return t;case"head":if(t=s.head,!t)throw Error(c(453));return t;case"body":if(t=s.body,!t)throw Error(c(454));return t;default:throw Error(c(451))}}function ui(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Cd(t)}var Fs=new Map,Ug=new Set;function Xc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ga=L.d;L.d={f:Aw,r:Dw,D:Mw,C:Rw,L:Ow,m:zw,X:Lw,S:Pw,M:Uw};function Aw(){var t=Ga.f(),s=Bc();return t||s}function Dw(t){var s=Nl(t);s!==null&&s.tag===5&&s.type==="form"?np(s):Ga.r(t)}var sr=typeof document>"u"?null:document;function qg(t,s,n){var r=sr;if(r&&typeof s=="string"&&s){var d=zs(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof n=="string"&&(d+='[crossorigin="'+n+'"]'),Ug.has(d)||(Ug.add(d),t={rel:t,crossOrigin:n,href:s},r.querySelector(d)===null&&(s=r.createElement("link"),es(s,"link",t),Yt(s),r.head.appendChild(s)))}}function Mw(t){Ga.D(t),qg("dns-prefetch",t,null)}function Rw(t,s){Ga.C(t,s),qg("preconnect",t,s)}function Ow(t,s,n){Ga.L(t,s,n);var r=sr;if(r&&t&&s){var d='link[rel="preload"][as="'+zs(s)+'"]';s==="image"&&n&&n.imageSrcSet?(d+='[imagesrcset="'+zs(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(d+='[imagesizes="'+zs(n.imageSizes)+'"]')):d+='[href="'+zs(t)+'"]';var m=d;switch(s){case"style":m=ar(t);break;case"script":m=nr(t)}Fs.has(m)||(t=x({rel:"preload",href:s==="image"&&n&&n.imageSrcSet?void 0:t,as:s},n),Fs.set(m,t),r.querySelector(d)!==null||s==="style"&&r.querySelector(mi(m))||s==="script"&&r.querySelector(hi(m))||(s=r.createElement("link"),es(s,"link",t),Yt(s),r.head.appendChild(s)))}}function zw(t,s){Ga.m(t,s);var n=sr;if(n&&t){var r=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+zs(r)+'"][href="'+zs(t)+'"]',m=d;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=nr(t)}if(!Fs.has(m)&&(t=x({rel:"modulepreload",href:t},s),Fs.set(m,t),n.querySelector(d)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(hi(m)))return}r=n.createElement("link"),es(r,"link",t),Yt(r),n.head.appendChild(r)}}}function Pw(t,s,n){Ga.S(t,s,n);var r=sr;if(r&&t){var d=wl(r).hoistableStyles,m=ar(t);s=s||"default";var _=d.get(m);if(!_){var z={loading:0,preload:null};if(_=r.querySelector(mi(m)))z.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":s},n),(n=Fs.get(m))&&Nm(t,n);var V=_=r.createElement("link");Yt(V),es(V,"link",t),V._p=new Promise(function(ne,ue){V.onload=ne,V.onerror=ue}),V.addEventListener("load",function(){z.loading|=1}),V.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Zc(_,s,r)}_={type:"stylesheet",instance:_,count:1,state:z},d.set(m,_)}}}function Lw(t,s){Ga.X(t,s);var n=sr;if(n&&t){var r=wl(n).hoistableScripts,d=nr(t),m=r.get(d);m||(m=n.querySelector(hi(d)),m||(t=x({src:t,async:!0},s),(s=Fs.get(d))&&wm(t,s),m=n.createElement("script"),Yt(m),es(m,"link",t),n.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(d,m))}}function Uw(t,s){Ga.M(t,s);var n=sr;if(n&&t){var r=wl(n).hoistableScripts,d=nr(t),m=r.get(d);m||(m=n.querySelector(hi(d)),m||(t=x({src:t,async:!0,type:"module"},s),(s=Fs.get(d))&&wm(t,s),m=n.createElement("script"),Yt(m),es(m,"link",t),n.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(d,m))}}function Ig(t,s,n,r){var d=(d=ge.current)?Xc(d):null;if(!d)throw Error(c(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(s=ar(n.href),n=wl(d).hoistableStyles,r=n.get(s),r||(r={type:"style",instance:null,count:0,state:null},n.set(s,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=ar(n.href);var m=wl(d).hoistableStyles,_=m.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=d.querySelector(mi(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Fs.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fs.set(t,n),m||qw(d,t,n,_.state))),s&&r===null)throw Error(c(528,""));return _}if(s&&r!==null)throw Error(c(529,""));return null;case"script":return s=n.async,n=n.src,typeof n=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=nr(n),n=wl(d).hoistableScripts,r=n.get(s),r||(r={type:"script",instance:null,count:0,state:null},n.set(s,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,t))}}function ar(t){return'href="'+zs(t)+'"'}function mi(t){return'link[rel="stylesheet"]['+t+"]"}function Bg(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function qw(t,s,n,r){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?r.loading=1:(s=t.createElement("link"),r.preload=s,s.addEventListener("load",function(){return r.loading|=1}),s.addEventListener("error",function(){return r.loading|=2}),es(s,"link",n),Yt(s),t.head.appendChild(s))}function nr(t){return'[src="'+zs(t)+'"]'}function hi(t){return"script[async]"+t}function Fg(t,s,n){if(s.count++,s.instance===null)switch(s.type){case"style":var r=t.querySelector('style[data-href~="'+zs(n.href)+'"]');if(r)return s.instance=r,Yt(r),r;var d=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),Yt(r),es(r,"style",d),Zc(r,n.precedence,t),s.instance=r;case"stylesheet":d=ar(n.href);var m=t.querySelector(mi(d));if(m)return s.state.loading|=4,s.instance=m,Yt(m),m;r=Bg(n),(d=Fs.get(d))&&Nm(r,d),m=(t.ownerDocument||t).createElement("link"),Yt(m);var _=m;return _._p=new Promise(function(z,V){_.onload=z,_.onerror=V}),es(m,"link",r),s.state.loading|=4,Zc(m,n.precedence,t),s.instance=m;case"script":return m=nr(n.src),(d=t.querySelector(hi(m)))?(s.instance=d,Yt(d),d):(r=n,(d=Fs.get(m))&&(r=x({},n),wm(r,d)),t=t.ownerDocument||t,d=t.createElement("script"),Yt(d),es(d,"link",r),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(c(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(r=s.instance,s.state.loading|=4,Zc(r,n.precedence,t));return s.instance}function Zc(t,s,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=r.length?r[r.length-1]:null,m=d,_=0;_<r.length;_++){var z=r[_];if(z.dataset.precedence===s)m=z;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=n.nodeType===9?n.head:n,s.insertBefore(t,s.firstChild))}function Nm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function wm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Kc=null;function $g(t,s,n){if(Kc===null){var r=new Map,d=Kc=new Map;d.set(n,r)}else d=Kc,r=d.get(n),r||(r=new Map,d.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),d=0;d<n.length;d++){var m=n[d];if(!(m[kr]||m[rs]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var z=r.get(_);z?z.push(m):r.set(_,[m])}}return r}function Hg(t,s,n){t=t.ownerDocument||t,t.head.insertBefore(n,s==="title"?t.querySelector("head > title"):null)}function Iw(t,s,n){if(n===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Vg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var fi=null;function Bw(){}function Fw(t,s,n){if(fi===null)throw Error(c(475));var r=fi;if(s.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=ar(n.href),m=t.querySelector(mi(d));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=Jc.bind(r),t.then(r,r)),s.state.loading|=4,s.instance=m,Yt(m);return}m=t.ownerDocument||t,n=Bg(n),(d=Fs.get(d))&&Nm(n,d),m=m.createElement("link"),Yt(m);var _=m;_._p=new Promise(function(z,V){_.onload=z,_.onerror=V}),es(m,"link",n),s.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(r.count++,s=Jc.bind(r),t.addEventListener("load",s),t.addEventListener("error",s))}}function $w(){if(fi===null)throw Error(c(475));var t=fi;return t.stylesheets&&t.count===0&&Cm(t,t.stylesheets),0<t.count?function(s){var n=setTimeout(function(){if(t.stylesheets&&Cm(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Jc(){if(this.count--,this.count===0){if(this.stylesheets)Cm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var eo=null;function Cm(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,eo=new Map,s.forEach(Hw,t),eo=null,Jc.call(t))}function Hw(t,s){if(!(s.state.loading&4)){var n=eo.get(t);if(n)var r=n.get(null);else{n=new Map,eo.set(t,n);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(n.set(_.dataset.precedence,_),r=_)}r&&n.set(null,r)}d=s.instance,_=d.getAttribute("data-precedence"),m=n.get(_)||r,m===r&&n.set(null,d),n.set(_,d),this.count++,r=Jc.bind(this),d.addEventListener("load",r),d.addEventListener("error",r),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var xi={$$typeof:E,Provider:null,Consumer:null,_currentValue:v,_currentValue2:v,_threadCount:0};function Vw(t,s,n,r,d,m,_,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.hiddenUpdates=Rt(null),this.identifierPrefix=r,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Gg(t,s,n,r,d,m,_,z,V,ne,ue,xe){return t=new Vw(t,s,n,_,z,V,ne,xe),s=1,m===!0&&(s|=24),m=ws(3,null,null,s),t.current=m,m.stateNode=t,s=lu(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:r,isDehydrated:n,cache:s},ou(m),t}function Yg(t){return t?(t=zl,t):zl}function Qg(t,s,n,r,d,m){d=Yg(d),r.context===null?r.context=d:r.pendingContext=d,r=on(s),r.payload={element:n},m=m===void 0?null:m,m!==null&&(r.callback=m),n=dn(t,r,s),n!==null&&(Ts(n,t,s),Vr(n,t,s))}function Wg(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function Sm(t,s){Wg(t,s),(t=t.alternate)&&Wg(t,s)}function Xg(t){if(t.tag===13){var s=Ol(t,67108864);s!==null&&Ts(s,t,67108864),Sm(t,67108864)}}var to=!0;function Gw(t,s,n,r){var d=N.T;N.T=null;var m=L.p;try{L.p=2,km(t,s,n,r)}finally{L.p=m,N.T=d}}function Yw(t,s,n,r){var d=N.T;N.T=null;var m=L.p;try{L.p=8,km(t,s,n,r)}finally{L.p=m,N.T=d}}function km(t,s,n,r){if(to){var d=_m(r);if(d===null)hm(t,s,r,so,n),Kg(t,r);else if(Ww(d,t,s,n,r))r.stopPropagation();else if(Kg(t,r),s&4&&-1<Qw.indexOf(t)){for(;d!==null;){var m=Nl(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=be(m.pendingLanes);if(_!==0){var z=m;for(z.pendingLanes|=2,z.entangledLanes|=2;_;){var V=1<<31-Mt(_);z.entanglements[1]|=V,_&=~V}ha(m),(pt&6)===0&&(qc=_e()+500,ci(0))}}break;case 13:z=Ol(m,2),z!==null&&Ts(z,m,2),Bc(),Sm(m,2)}if(m=_m(r),m===null&&hm(t,s,r,so,n),m===d)break;d=m}d!==null&&r.stopPropagation()}else hm(t,s,r,null,n)}}function _m(t){return t=Md(t),Tm(t)}var so=null;function Tm(t){if(so=null,t=bl(t),t!==null){var s=u(t);if(s===null)t=null;else{var n=s.tag;if(n===13){if(t=h(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return so=t,null}function Zg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case at:return 2;case Gt:return 8;case Ut:case Cr:return 32;case Un:return 268435456;default:return 32}default:return 32}}var Em=!1,wn=null,Cn=null,Sn=null,pi=new Map,gi=new Map,kn=[],Qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kg(t,s){switch(t){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":pi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(s.pointerId)}}function vi(t,s,n,r,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Nl(s),s!==null&&Xg(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function Ww(t,s,n,r,d){switch(s){case"focusin":return wn=vi(wn,t,s,n,r,d),!0;case"dragenter":return Cn=vi(Cn,t,s,n,r,d),!0;case"mouseover":return Sn=vi(Sn,t,s,n,r,d),!0;case"pointerover":var m=d.pointerId;return pi.set(m,vi(pi.get(m)||null,t,s,n,r,d)),!0;case"gotpointercapture":return m=d.pointerId,gi.set(m,vi(gi.get(m)||null,t,s,n,r,d)),!0}return!1}function Jg(t){var s=bl(t.target);if(s!==null){var n=u(s);if(n!==null){if(s=n.tag,s===13){if(s=h(n),s!==null){t.blockedOn=s,Fb(t.priority,function(){if(n.tag===13){var r=_s();r=bd(r);var d=Ol(n,r);d!==null&&Ts(d,n,r),Sm(n,r)}});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ao(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=_m(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dd=r,n.target.dispatchEvent(r),Dd=null}else return s=Nl(n),s!==null&&Xg(s),t.blockedOn=n,!1;s.shift()}return!0}function ev(t,s,n){ao(t)&&n.delete(s)}function Xw(){Em=!1,wn!==null&&ao(wn)&&(wn=null),Cn!==null&&ao(Cn)&&(Cn=null),Sn!==null&&ao(Sn)&&(Sn=null),pi.forEach(ev),gi.forEach(ev)}function no(t,s){t.blockedOn===s&&(t.blockedOn=null,Em||(Em=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Xw)))}var lo=null;function tv(t){lo!==t&&(lo=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){lo===t&&(lo=null);for(var s=0;s<t.length;s+=3){var n=t[s],r=t[s+1],d=t[s+2];if(typeof r!="function"){if(Tm(r||n)===null)continue;break}var m=Nl(n);m!==null&&(t.splice(s,3),s-=3,Tu(m,{pending:!0,data:d,method:n.method,action:r},r,d))}}))}function yi(t){function s(V){return no(V,t)}wn!==null&&no(wn,t),Cn!==null&&no(Cn,t),Sn!==null&&no(Sn,t),pi.forEach(s),gi.forEach(s);for(var n=0;n<kn.length;n++){var r=kn[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)Jg(n),n.blockedOn===null&&kn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var d=n[r],m=n[r+1],_=d[gs]||null;if(typeof m=="function")_||tv(n);else if(_){var z=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[gs]||null)z=_.formAction;else if(Tm(d)!==null)continue}else z=_.action;typeof z=="function"?n[r+1]=z:(n.splice(r,3),r-=3),tv(n)}}}function Am(t){this._internalRoot=t}ro.prototype.render=Am.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(c(409));var n=s.current,r=_s();Qg(n,r,t,s,null,null)},ro.prototype.unmount=Am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Qg(t.current,2,null,t,null,null),Bc(),s[jl]=null}};function ro(t){this._internalRoot=t}ro.prototype.unstable_scheduleHydration=function(t){if(t){var s=vf();t={blockedOn:null,target:t,priority:s};for(var n=0;n<kn.length&&s!==0&&s<kn[n].priority;n++);kn.splice(n,0,t),n===0&&Jg(t)}};var sv=l.version;if(sv!=="19.1.1")throw Error(c(527,sv,"19.1.1"));L.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=g(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Zw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!io.isDisabled&&io.supportsFiber)try{ps=io.inject(Zw),we=io}catch{}}return bi.createRoot=function(t,s){if(!o(t))throw Error(c(299));var n=!1,r="",d=vp,m=yp,_=jp,z=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(z=s.unstable_transitionCallbacks)),s=Gg(t,1,!1,null,null,n,r,d,m,_,z,null),t[jl]=s.current,mm(t),new Am(s)},bi.hydrateRoot=function(t,s,n){if(!o(t))throw Error(c(299));var r=!1,d="",m=vp,_=yp,z=jp,V=null,ne=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(_=n.onCaughtError),n.onRecoverableError!==void 0&&(z=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(V=n.unstable_transitionCallbacks),n.formState!==void 0&&(ne=n.formState)),s=Gg(t,1,!0,s,n??null,r,d,m,_,z,V,ne),s.context=Yg(null),n=s.current,r=_s(),r=bd(r),d=on(r),d.callback=null,dn(n,d,r),n=r,s.current.lanes=n,Sr(s,n),ha(s),t[jl]=s.current,mm(t),new ro(s)},bi.version="19.1.1",bi}var mv;function i1(){if(mv)return Rm.exports;mv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}return a(),Rm.exports=r1(),Rm.exports}var c1=i1();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hv="popstate";function o1(a={}){function l(c,o){let{pathname:u,search:h,hash:p}=c.location;return ah("",{pathname:u,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(c,o){return typeof o=="string"?o:Mi(o)}return u1(l,i,null,a)}function _t(a,l){if(a===!1||a===null||typeof a>"u")throw new Error(l)}function Gs(a,l){if(!a){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function d1(){return Math.random().toString(36).substring(2,10)}function fv(a,l){return{usr:a.state,key:a.key,idx:l}}function ah(a,l,i=null,c){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof l=="string"?fr(l):l,state:i,key:l&&l.key||c||d1()}}function Mi({pathname:a="/",search:l="",hash:i=""}){return l&&l!=="?"&&(a+=l.charAt(0)==="?"?l:"?"+l),i&&i!=="#"&&(a+=i.charAt(0)==="#"?i:"#"+i),a}function fr(a){let l={};if(a){let i=a.indexOf("#");i>=0&&(l.hash=a.substring(i),a=a.substring(0,i));let c=a.indexOf("?");c>=0&&(l.search=a.substring(c),a=a.substring(0,c)),a&&(l.pathname=a)}return l}function u1(a,l,i,c={}){let{window:o=document.defaultView,v5Compat:u=!1}=c,h=o.history,p="POP",g=null,y=x();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function x(){return(h.state||{idx:null}).idx}function j(){p="POP";let S=x(),R=S==null?null:S-y;y=S,g&&g({action:p,location:D.location,delta:R})}function b(S,R){p="PUSH";let k=ah(D.location,S,R);y=x()+1;let E=fv(k,y),w=D.createHref(k);try{h.pushState(E,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(w)}u&&g&&g({action:p,location:D.location,delta:1})}function A(S,R){p="REPLACE";let k=ah(D.location,S,R);y=x();let E=fv(k,y),w=D.createHref(k);h.replaceState(E,"",w),u&&g&&g({action:p,location:D.location,delta:0})}function T(S){return m1(S)}let D={get action(){return p},get location(){return a(o,h)},listen(S){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(hv,j),g=S,()=>{o.removeEventListener(hv,j),g=null}},createHref(S){return l(o,S)},createURL:T,encodeLocation(S){let R=T(S);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:A,go(S){return h.go(S)}};return D}function m1(a,l=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),_t(i,"No window.location.(origin|href) available to create URL");let c=typeof a=="string"?a:Mi(a);return c=c.replace(/ $/,"%20"),!l&&c.startsWith("//")&&(c=i+c),new URL(c,i)}function yy(a,l,i="/"){return h1(a,l,i,!1)}function h1(a,l,i,c){let o=typeof l=="string"?fr(l):l,u=Za(o.pathname||"/",i);if(u==null)return null;let h=jy(a);f1(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=S1(u);p=w1(h[g],y,c)}return p}function jy(a,l=[],i=[],c="",o=!1){let u=(h,p,g=o,y)=>{let x={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(c)&&g)return;_t(x.relativePath.startsWith(c),`Absolute route path "${x.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(c.length)}let j=Xa([c,x.relativePath]),b=i.concat(x);h.children&&h.children.length>0&&(_t(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${j}".`),jy(h.children,l,b,j,g)),!(h.path==null&&!h.index)&&l.push({path:j,score:b1(j,h.index),routesMeta:b})};return a.forEach((h,p)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))u(h,p);else for(let y of by(h.path))u(h,p,!0,y)}),l}function by(a){let l=a.split("/");if(l.length===0)return[];let[i,...c]=l,o=i.endsWith("?"),u=i.replace(/\?$/,"");if(c.length===0)return o?[u,""]:[u];let h=by(c.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...h),p.map(g=>a.startsWith("/")&&g===""?"/":g)}function f1(a){a.sort((l,i)=>l.score!==i.score?i.score-l.score:N1(l.routesMeta.map(c=>c.childrenIndex),i.routesMeta.map(c=>c.childrenIndex)))}var x1=/^:[\w-]+$/,p1=3,g1=2,v1=1,y1=10,j1=-2,xv=a=>a==="*";function b1(a,l){let i=a.split("/"),c=i.length;return i.some(xv)&&(c+=j1),l&&(c+=g1),i.filter(o=>!xv(o)).reduce((o,u)=>o+(x1.test(u)?p1:u===""?v1:y1),c)}function N1(a,l){return a.length===l.length&&a.slice(0,-1).every((c,o)=>c===l[o])?a[a.length-1]-l[l.length-1]:0}function w1(a,l,i=!1){let{routesMeta:c}=a,o={},u="/",h=[];for(let p=0;p<c.length;++p){let g=c[p],y=p===c.length-1,x=u==="/"?l:l.slice(u.length)||"/",j=To({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),b=g.route;if(!j&&y&&i&&!c[c.length-1].route.index&&(j=To({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!j)return null;Object.assign(o,j.params),h.push({params:o,pathname:Xa([u,j.pathname]),pathnameBase:E1(Xa([u,j.pathnameBase])),route:b}),j.pathnameBase!=="/"&&(u=Xa([u,j.pathnameBase]))}return h}function To(a,l){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[i,c]=C1(a.path,a.caseSensitive,a.end),o=l.match(i);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:c.reduce((y,{paramName:x,isOptional:j},b)=>{if(x==="*"){let T=p[b]||"";h=u.slice(0,u.length-T.length).replace(/(.)\/+$/,"$1")}const A=p[b];return j&&!A?y[x]=void 0:y[x]=(A||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:a}}function C1(a,l=!1,i=!0){Gs(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let c=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(c.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(c.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,l?void 0:"i"),c]}function S1(a){try{return a.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return Gs(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),a}}function Za(a,l){if(l==="/")return a;if(!a.toLowerCase().startsWith(l.toLowerCase()))return null;let i=l.endsWith("/")?l.length-1:l.length,c=a.charAt(i);return c&&c!=="/"?null:a.slice(i)||"/"}function k1(a,l="/"){let{pathname:i,search:c="",hash:o=""}=typeof a=="string"?fr(a):a;return{pathname:i?i.startsWith("/")?i:_1(i,l):l,search:A1(c),hash:D1(o)}}function _1(a,l){let i=l.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function Lm(a,l,i,c){return`Cannot include a '${a}' character in a manually specified \`to.${l}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function T1(a){return a.filter((l,i)=>i===0||l.route.path&&l.route.path.length>0)}function Eh(a){let l=T1(a);return l.map((i,c)=>c===l.length-1?i.pathname:i.pathnameBase)}function Ah(a,l,i,c=!1){let o;typeof a=="string"?o=fr(a):(o={...a},_t(!o.pathname||!o.pathname.includes("?"),Lm("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),Lm("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),Lm("#","search","hash",o)));let u=a===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=i;else{let j=l.length-1;if(!c&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),j-=1;o.pathname=b.join("/")}p=j>=0?l[j]:"/"}let g=k1(o,p),y=h&&h!=="/"&&h.endsWith("/"),x=(u||h===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Xa=a=>a.join("/").replace(/\/\/+/g,"/"),E1=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),A1=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,D1=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function M1(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var Ny=["POST","PUT","PATCH","DELETE"];new Set(Ny);var R1=["GET",...Ny];new Set(R1);var xr=f.createContext(null);xr.displayName="DataRouter";var Qo=f.createContext(null);Qo.displayName="DataRouterState";f.createContext(!1);var wy=f.createContext({isTransitioning:!1});wy.displayName="ViewTransition";var O1=f.createContext(new Map);O1.displayName="Fetchers";var z1=f.createContext(null);z1.displayName="Await";var la=f.createContext(null);la.displayName="Navigation";var Bi=f.createContext(null);Bi.displayName="Location";var ra=f.createContext({outlet:null,matches:[],isDataRoute:!1});ra.displayName="Route";var Dh=f.createContext(null);Dh.displayName="RouteError";function P1(a,{relative:l}={}){_t(pr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:c}=f.useContext(la),{hash:o,pathname:u,search:h}=Fi(a,{relative:l}),p=u;return i!=="/"&&(p=u==="/"?i:Xa([i,u])),c.createHref({pathname:p,search:h,hash:o})}function pr(){return f.useContext(Bi)!=null}function _a(){return _t(pr(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(Bi).location}var Cy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sy(a){f.useContext(la).static||f.useLayoutEffect(a)}function Lt(){let{isDataRoute:a}=f.useContext(ra);return a?W1():L1()}function L1(){_t(pr(),"useNavigate() may be used only in the context of a <Router> component.");let a=f.useContext(xr),{basename:l,navigator:i}=f.useContext(la),{matches:c}=f.useContext(ra),{pathname:o}=_a(),u=JSON.stringify(Eh(c)),h=f.useRef(!1);return Sy(()=>{h.current=!0}),f.useCallback((g,y={})=>{if(Gs(h.current,Cy),!h.current)return;if(typeof g=="number"){i.go(g);return}let x=Ah(g,JSON.parse(u),o,y.relative==="path");a==null&&l!=="/"&&(x.pathname=x.pathname==="/"?l:Xa([l,x.pathname])),(y.replace?i.replace:i.push)(x,y.state,y)},[l,i,u,o,a])}f.createContext(null);function Wo(){let{matches:a}=f.useContext(ra),l=a[a.length-1];return l?l.params:{}}function Fi(a,{relative:l}={}){let{matches:i}=f.useContext(ra),{pathname:c}=_a(),o=JSON.stringify(Eh(i));return f.useMemo(()=>Ah(a,JSON.parse(o),c,l==="path"),[a,o,c,l])}function U1(a,l){return ky(a,l)}function ky(a,l,i,c,o){var k;_t(pr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=f.useContext(la),{matches:h}=f.useContext(ra),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",j=p&&p.route;{let E=j&&j.path||"";_y(y,!j||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let b=_a(),A;if(l){let E=typeof l=="string"?fr(l):l;_t(x==="/"||((k=E.pathname)==null?void 0:k.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${E.pathname}" was given in the \`location\` prop.`),A=E}else A=b;let T=A.pathname||"/",D=T;if(x!=="/"){let E=x.replace(/^\//,"").split("/");D="/"+T.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=yy(a,{pathname:D});Gs(j||S!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Gs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=$1(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},g,E.params),pathname:Xa([x,u.encodeLocation?u.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?x:Xa([x,u.encodeLocation?u.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),h,i,c,o);return l&&R?f.createElement(Bi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},R):R}function q1(){let a=Q1(),l=M1(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),i=a instanceof Error?a.stack:null,c="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:c},u={padding:"2px 4px",backgroundColor:c},h=null;return console.error("Error handled by React Router default ErrorBoundary:",a),h=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:u},"ErrorBoundary")," or"," ",f.createElement("code",{style:u},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},l),i?f.createElement("pre",{style:o},i):null,h)}var I1=f.createElement(q1,null),B1=class extends f.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,l){return l.location!==a.location||l.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:l.error,location:l.location,revalidation:a.revalidation||l.revalidation}}componentDidCatch(a,l){this.props.unstable_onError?this.props.unstable_onError(a,l):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?f.createElement(ra.Provider,{value:this.props.routeContext},f.createElement(Dh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F1({routeContext:a,match:l,children:i}){let c=f.useContext(xr);return c&&c.static&&c.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=l.route.id),f.createElement(ra.Provider,{value:a},i)}function $1(a,l=[],i=null,c=null,o=null){if(a==null){if(!i)return null;if(i.errors)a=i.matches;else if(l.length===0&&!i.initialized&&i.matches.length>0)a=i.matches;else return null}let u=a,h=i==null?void 0:i.errors;if(h!=null){let y=u.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);_t(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let p=!1,g=-1;if(i)for(let y=0;y<u.length;y++){let x=u[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:j,errors:b}=i,A=x.route.loader&&!j.hasOwnProperty(x.route.id)&&(!b||b[x.route.id]===void 0);if(x.route.lazy||A){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((y,x,j)=>{let b,A=!1,T=null,D=null;i&&(b=h&&x.route.id?h[x.route.id]:void 0,T=x.route.errorElement||I1,p&&(g<0&&j===0?(_y("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,D=null):g===j&&(A=!0,D=x.route.hydrateFallbackElement||null)));let S=l.concat(u.slice(0,j+1)),R=()=>{let k;return b?k=T:A?k=D:x.route.Component?k=f.createElement(x.route.Component,null):x.route.element?k=x.route.element:k=y,f.createElement(F1,{match:x,routeContext:{outlet:y,matches:S,isDataRoute:i!=null},children:k})};return i&&(x.route.ErrorBoundary||x.route.errorElement||j===0)?f.createElement(B1,{location:i.location,revalidation:i.revalidation,component:T,error:b,children:R(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:c}):R()},null)}function Mh(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H1(a){let l=f.useContext(xr);return _t(l,Mh(a)),l}function V1(a){let l=f.useContext(Qo);return _t(l,Mh(a)),l}function G1(a){let l=f.useContext(ra);return _t(l,Mh(a)),l}function Rh(a){let l=G1(a),i=l.matches[l.matches.length-1];return _t(i.route.id,`${a} can only be used on routes that contain a unique "id"`),i.route.id}function Y1(){return Rh("useRouteId")}function Q1(){var c;let a=f.useContext(Dh),l=V1("useRouteError"),i=Rh("useRouteError");return a!==void 0?a:(c=l.errors)==null?void 0:c[i]}function W1(){let{router:a}=H1("useNavigate"),l=Rh("useNavigate"),i=f.useRef(!1);return Sy(()=>{i.current=!0}),f.useCallback(async(o,u={})=>{Gs(i.current,Cy),i.current&&(typeof o=="number"?a.navigate(o):await a.navigate(o,{fromRouteId:l,...u}))},[a,l])}var pv={};function _y(a,l,i){!l&&!pv[a]&&(pv[a]=!0,Gs(!1,i))}f.memo(X1);function X1({routes:a,future:l,state:i,unstable_onError:c}){return ky(a,void 0,i,c,l)}function Ri({to:a,replace:l,state:i,relative:c}){_t(pr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=f.useContext(la);Gs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=f.useContext(ra),{pathname:h}=_a(),p=Lt(),g=Ah(a,Eh(u),h,c==="path"),y=JSON.stringify(g);return f.useEffect(()=>{p(JSON.parse(y),{replace:l,state:i,relative:c})},[p,y,c,l,i]),null}function Et(a){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z1({basename:a="/",children:l=null,location:i,navigationType:c="POP",navigator:o,static:u=!1}){_t(!pr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=a.replace(/^\/*/,"/"),p=f.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof i=="string"&&(i=fr(i));let{pathname:g="/",search:y="",hash:x="",state:j=null,key:b="default"}=i,A=f.useMemo(()=>{let T=Za(g,h);return T==null?null:{location:{pathname:T,search:y,hash:x,state:j,key:b},navigationType:c}},[h,g,y,x,j,b,c]);return Gs(A!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:f.createElement(la.Provider,{value:p},f.createElement(Bi.Provider,{children:l,value:A}))}function Ty({children:a,location:l}){return U1(nh(a),l)}function nh(a,l=[]){let i=[];return f.Children.forEach(a,(c,o)=>{if(!f.isValidElement(c))return;let u=[...l,o];if(c.type===f.Fragment){i.push.apply(i,nh(c.props.children,u));return}_t(c.type===Et,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!c.props.index||!c.props.children,"An index route cannot have child routes.");let h={id:c.props.id||u.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(h.children=nh(c.props.children,u)),i.push(h)}),i}var No="get",wo="application/x-www-form-urlencoded";function Xo(a){return a!=null&&typeof a.tagName=="string"}function K1(a){return Xo(a)&&a.tagName.toLowerCase()==="button"}function J1(a){return Xo(a)&&a.tagName.toLowerCase()==="form"}function e2(a){return Xo(a)&&a.tagName.toLowerCase()==="input"}function t2(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function s2(a,l){return a.button===0&&(!l||l==="_self")&&!t2(a)}function lh(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((l,i)=>{let c=a[i];return l.concat(Array.isArray(c)?c.map(o=>[i,o]):[[i,c]])},[]))}function a2(a,l){let i=lh(a);return l&&l.forEach((c,o)=>{i.has(o)||l.getAll(o).forEach(u=>{i.append(o,u)})}),i}var co=null;function n2(){if(co===null)try{new FormData(document.createElement("form"),0),co=!1}catch{co=!0}return co}var l2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Um(a){return a!=null&&!l2.has(a)?(Gs(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wo}"`),null):a}function r2(a,l){let i,c,o,u,h;if(J1(a)){let p=a.getAttribute("action");c=p?Za(p,l):null,i=a.getAttribute("method")||No,o=Um(a.getAttribute("enctype"))||wo,u=new FormData(a)}else if(K1(a)||e2(a)&&(a.type==="submit"||a.type==="image")){let p=a.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=a.getAttribute("formaction")||p.getAttribute("action");if(c=g?Za(g,l):null,i=a.getAttribute("formmethod")||p.getAttribute("method")||No,o=Um(a.getAttribute("formenctype"))||Um(p.getAttribute("enctype"))||wo,u=new FormData(p,a),!n2()){let{name:y,type:x,value:j}=a;if(x==="image"){let b=y?`${y}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else y&&u.append(y,j)}}else{if(Xo(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=No,c=null,o=wo,h=a}return u&&o==="text/plain"&&(h=u,u=void 0),{action:c,method:i.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oh(a,l){if(a===!1||a===null||typeof a>"u")throw new Error(l)}function i2(a,l,i){let c=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return c.pathname==="/"?c.pathname=`_root.${i}`:l&&Za(c.pathname,l)==="/"?c.pathname=`${l.replace(/\/$/,"")}/_root.${i}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${i}`,c}async function c2(a,l){if(a.id in l)return l[a.id];try{let i=await import(a.module);return l[a.id]=i,i}catch(i){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o2(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function d2(a,l,i){let c=await Promise.all(a.map(async o=>{let u=l.routes[o.route.id];if(u){let h=await c2(u,i);return h.links?h.links():[]}return[]}));return f2(c.flat(1).filter(o2).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function gv(a,l,i,c,o,u){let h=(g,y)=>i[y]?g.route.id!==i[y].route.id:!0,p=(g,y)=>{var x;return i[y].pathname!==g.pathname||((x=i[y].route.path)==null?void 0:x.endsWith("*"))&&i[y].params["*"]!==g.params["*"]};return u==="assets"?l.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?l.filter((g,y)=>{var j;let x=c.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((j=i[0])==null?void 0:j.params)||{},nextUrl:new URL(a,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function u2(a,l,{includeHydrateFallback:i}={}){return m2(a.map(c=>{let o=l.routes[c.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function m2(a){return[...new Set(a)]}function h2(a){let l={},i=Object.keys(a).sort();for(let c of i)l[c]=a[c];return l}function f2(a,l){let i=new Set;return new Set(l),a.reduce((c,o)=>{let u=JSON.stringify(h2(o));return i.has(u)||(i.add(u),c.push({key:u,link:o})),c},[])}function Ey(){let a=f.useContext(xr);return Oh(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function x2(){let a=f.useContext(Qo);return Oh(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var zh=f.createContext(void 0);zh.displayName="FrameworkContext";function Ay(){let a=f.useContext(zh);return Oh(a,"You must render this element inside a <HydratedRouter> element"),a}function p2(a,l){let i=f.useContext(zh),[c,o]=f.useState(!1),[u,h]=f.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:j}=l,b=f.useRef(null);f.useEffect(()=>{if(a==="render"&&h(!0),a==="viewport"){let D=R=>{R.forEach(k=>{h(k.isIntersecting)})},S=new IntersectionObserver(D,{threshold:.5});return b.current&&S.observe(b.current),()=>{S.disconnect()}}},[a]),f.useEffect(()=>{if(c){let D=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(D)}}},[c]);let A=()=>{o(!0)},T=()=>{o(!1),h(!1)};return i?a!=="intent"?[u,b,{}]:[u,b,{onFocus:Ni(p,A),onBlur:Ni(g,T),onMouseEnter:Ni(y,A),onMouseLeave:Ni(x,T),onTouchStart:Ni(j,A)}]:[!1,b,{}]}function Ni(a,l){return i=>{a&&a(i),i.defaultPrevented||l(i)}}function g2({page:a,...l}){let{router:i}=Ey(),c=f.useMemo(()=>yy(i.routes,a,i.basename),[i.routes,a,i.basename]);return c?f.createElement(y2,{page:a,matches:c,...l}):null}function v2(a){let{manifest:l,routeModules:i}=Ay(),[c,o]=f.useState([]);return f.useEffect(()=>{let u=!1;return d2(a,l,i).then(h=>{u||o(h)}),()=>{u=!0}},[a,l,i]),c}function y2({page:a,matches:l,...i}){let c=_a(),{manifest:o,routeModules:u}=Ay(),{basename:h}=Ey(),{loaderData:p,matches:g}=x2(),y=f.useMemo(()=>gv(a,l,g,o,c,"data"),[a,l,g,o,c]),x=f.useMemo(()=>gv(a,l,g,o,c,"assets"),[a,l,g,o,c]),j=f.useMemo(()=>{if(a===c.pathname+c.search+c.hash)return[];let T=new Set,D=!1;if(l.forEach(R=>{var E;let k=o.routes[R.route.id];!k||!k.hasLoader||(!y.some(w=>w.route.id===R.route.id)&&R.route.id in p&&((E=u[R.route.id])!=null&&E.shouldRevalidate)||k.hasClientLoader?D=!0:T.add(R.route.id))}),T.size===0)return[];let S=i2(a,h,"data");return D&&T.size>0&&S.searchParams.set("_routes",l.filter(R=>T.has(R.route.id)).map(R=>R.route.id).join(",")),[S.pathname+S.search]},[h,p,c,o,y,l,a,u]),b=f.useMemo(()=>u2(x,o),[x,o]),A=v2(x);return f.createElement(f.Fragment,null,j.map(T=>f.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...i})),b.map(T=>f.createElement("link",{key:T,rel:"modulepreload",href:T,...i})),A.map(({key:T,link:D})=>f.createElement("link",{key:T,nonce:i.nonce,...D})))}function j2(...a){return l=>{a.forEach(i=>{typeof i=="function"?i(l):i!=null&&(i.current=l)})}}var Dy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dy&&(window.__reactRouterVersion="7.9.1")}catch{}function b2({basename:a,children:l,window:i}){let c=f.useRef();c.current==null&&(c.current=o1({window:i,v5Compat:!0}));let o=c.current,[u,h]=f.useState({action:o.action,location:o.location}),p=f.useCallback(g=>{f.startTransition(()=>h(g))},[h]);return f.useLayoutEffect(()=>o.listen(p),[o,p]),f.createElement(Z1,{basename:a,children:l,location:u.location,navigationType:u.action,navigator:o})}var My=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cl=f.forwardRef(function({onClick:l,discover:i="render",prefetch:c="none",relative:o,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:x,viewTransition:j,...b},A){let{basename:T}=f.useContext(la),D=typeof y=="string"&&My.test(y),S,R=!1;if(typeof y=="string"&&D&&(S=y,Dy))try{let P=new URL(window.location.href),Y=y.startsWith("//")?new URL(P.protocol+y):new URL(y),B=Za(Y.pathname,T);Y.origin===P.origin&&B!=null?y=B+Y.search+Y.hash:R=!0}catch{Gs(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=P1(y,{relative:o}),[E,w,C]=p2(c,b),q=S2(y,{replace:h,state:p,target:g,preventScrollReset:x,relative:o,viewTransition:j});function I(P){l&&l(P),P.defaultPrevented||q(P)}let W=f.createElement("a",{...b,...C,href:S||k,onClick:R||u?l:I,ref:j2(A,w),target:g,"data-discover":!D&&i==="render"?"true":void 0});return E&&!D?f.createElement(f.Fragment,null,W,f.createElement(g2,{page:k})):W});cl.displayName="Link";var N2=f.forwardRef(function({"aria-current":l="page",caseSensitive:i=!1,className:c="",end:o=!1,style:u,to:h,viewTransition:p,children:g,...y},x){let j=Fi(h,{relative:y.relative}),b=_a(),A=f.useContext(Qo),{navigator:T,basename:D}=f.useContext(la),S=A!=null&&A2(j)&&p===!0,R=T.encodeLocation?T.encodeLocation(j).pathname:j.pathname,k=b.pathname,E=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(k=k.toLowerCase(),E=E?E.toLowerCase():null,R=R.toLowerCase()),E&&D&&(E=Za(E,D)||E);const w=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let C=k===R||!o&&k.startsWith(R)&&k.charAt(w)==="/",q=E!=null&&(E===R||!o&&E.startsWith(R)&&E.charAt(R.length)==="/"),I={isActive:C,isPending:q,isTransitioning:S},W=C?l:void 0,P;typeof c=="function"?P=c(I):P=[c,C?"active":null,q?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let Y=typeof u=="function"?u(I):u;return f.createElement(cl,{...y,"aria-current":W,className:P,ref:x,style:Y,to:h,viewTransition:p},typeof g=="function"?g(I):g)});N2.displayName="NavLink";var w2=f.forwardRef(({discover:a="render",fetcherKey:l,navigate:i,reloadDocument:c,replace:o,state:u,method:h=No,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:j,...b},A)=>{let T=T2(),D=E2(p,{relative:y}),S=h.toLowerCase()==="get"?"get":"post",R=typeof p=="string"&&My.test(p),k=E=>{if(g&&g(E),E.defaultPrevented)return;E.preventDefault();let w=E.nativeEvent.submitter,C=(w==null?void 0:w.getAttribute("formmethod"))||h;T(w||E.currentTarget,{fetcherKey:l,method:C,navigate:i,replace:o,state:u,relative:y,preventScrollReset:x,viewTransition:j})};return f.createElement("form",{ref:A,method:S,action:D,onSubmit:c?g:k,...b,"data-discover":!R&&a==="render"?"true":void 0})});w2.displayName="Form";function C2(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ry(a){let l=f.useContext(xr);return _t(l,C2(a)),l}function S2(a,{target:l,replace:i,state:c,preventScrollReset:o,relative:u,viewTransition:h}={}){let p=Lt(),g=_a(),y=Fi(a,{relative:u});return f.useCallback(x=>{if(s2(x,l)){x.preventDefault();let j=i!==void 0?i:Mi(g)===Mi(y);p(a,{replace:j,state:c,preventScrollReset:o,relative:u,viewTransition:h})}},[g,p,y,i,c,l,a,o,u,h])}function Ph(a){Gs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let l=f.useRef(lh(a)),i=f.useRef(!1),c=_a(),o=f.useMemo(()=>a2(c.search,i.current?null:l.current),[c.search]),u=Lt(),h=f.useCallback((p,g)=>{const y=lh(typeof p=="function"?p(new URLSearchParams(o)):p);i.current=!0,u("?"+y,g)},[u,o]);return[o,h]}var k2=0,_2=()=>`__${String(++k2)}__`;function T2(){let{router:a}=Ry("useSubmit"),{basename:l}=f.useContext(la),i=Y1();return f.useCallback(async(c,o={})=>{let{action:u,method:h,encType:p,formData:g,body:y}=r2(c,l);if(o.navigate===!1){let x=o.fetcherKey||_2();await a.fetch(x,i,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await a.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[a,l,i])}function E2(a,{relative:l}={}){let{basename:i}=f.useContext(la),c=f.useContext(ra);_t(c,"useFormAction must be used inside a RouteContext");let[o]=c.matches.slice(-1),u={...Fi(a||".",{relative:l})},h=_a();if(a==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(j=>j).forEach(j=>p.append("index",j));let x=p.toString();u.search=x?`?${x}`:""}}return(!a||a===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:Xa([i,u.pathname])),Mi(u)}function A2(a,{relative:l}={}){let i=f.useContext(wy);_t(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Ry("useViewTransitionState"),o=Fi(a,{relative:l});if(!i.isTransitioning)return!1;let u=Za(i.currentLocation.pathname,c)||i.currentLocation.pathname,h=Za(i.nextLocation.pathname,c)||i.nextLocation.pathname;return To(o.pathname,h)!=null||To(o.pathname,u)!=null}var $i=vy();const D2=py($i);function vv(a,l){if(typeof a=="function")return a(l);a!=null&&(a.current=l)}function Zo(...a){return l=>{let i=!1;const c=a.map(o=>{const u=vv(o,l);return!i&&typeof u=="function"&&(i=!0),u});if(i)return()=>{for(let o=0;o<c.length;o++){const u=c[o];typeof u=="function"?u():vv(a[o],null)}}}}function ft(...a){return f.useCallback(Zo(...a),a)}function ul(a){const l=M2(a),i=f.forwardRef((c,o)=>{const{children:u,...h}=c,p=f.Children.toArray(u),g=p.find(O2);if(g){const y=g.props.children,x=p.map(j=>j===g?f.Children.count(y)>1?f.Children.only(null):f.isValidElement(y)?y.props.children:null:j);return e.jsx(l,{...h,ref:o,children:f.isValidElement(y)?f.cloneElement(y,void 0,x):null})}return e.jsx(l,{...h,ref:o,children:u})});return i.displayName=`${a}.Slot`,i}var Ko=ul("Slot");function M2(a){const l=f.forwardRef((i,c)=>{const{children:o,...u}=i;if(f.isValidElement(o)){const h=P2(o),p=z2(u,o.props);return o.type!==f.Fragment&&(p.ref=c?Zo(c,h):h),f.cloneElement(o,p)}return f.Children.count(o)>1?f.Children.only(null):null});return l.displayName=`${a}.SlotClone`,l}var R2=Symbol("radix.slottable");function O2(a){return f.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===R2}function z2(a,l){const i={...l};for(const c in l){const o=a[c],u=l[c];/^on[A-Z]/.test(c)?o&&u?i[c]=(...p)=>{const g=u(...p);return o(...p),g}:o&&(i[c]=o):c==="style"?i[c]={...o,...u}:c==="className"&&(i[c]=[o,u].filter(Boolean).join(" "))}return{...a,...i}}function P2(a){var c,o;let l=(c=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:c.get,i=l&&"isReactWarning"in l&&l.isReactWarning;return i?a.ref:(l=(o=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:o.get,i=l&&"isReactWarning"in l&&l.isReactWarning,i?a.props.ref:a.props.ref||a.ref)}function Oy(a){var l,i,c="";if(typeof a=="string"||typeof a=="number")c+=a;else if(typeof a=="object")if(Array.isArray(a)){var o=a.length;for(l=0;l<o;l++)a[l]&&(i=Oy(a[l]))&&(c&&(c+=" "),c+=i)}else for(i in a)a[i]&&(c&&(c+=" "),c+=i);return c}function zy(){for(var a,l,i=0,c="",o=arguments.length;i<o;i++)(a=arguments[i])&&(l=Oy(a))&&(c&&(c+=" "),c+=l);return c}const yv=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,jv=zy,gr=(a,l)=>i=>{var c;if((l==null?void 0:l.variants)==null)return jv(a,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:o,defaultVariants:u}=l,h=Object.keys(o).map(y=>{const x=i==null?void 0:i[y],j=u==null?void 0:u[y];if(x===null)return null;const b=yv(x)||yv(j);return o[y][b]}),p=i&&Object.entries(i).reduce((y,x)=>{let[j,b]=x;return b===void 0||(y[j]=b),y},{}),g=l==null||(c=l.compoundVariants)===null||c===void 0?void 0:c.reduce((y,x)=>{let{class:j,className:b,...A}=x;return Object.entries(A).every(T=>{let[D,S]=T;return Array.isArray(S)?S.includes({...u,...p}[D]):{...u,...p}[D]===S})?[...y,j,b]:y},[]);return jv(a,h,g,i==null?void 0:i.class,i==null?void 0:i.className)},Lh="-",L2=a=>{const l=q2(a),{conflictingClassGroups:i,conflictingClassGroupModifiers:c}=a;return{getClassGroupId:h=>{const p=h.split(Lh);return p[0]===""&&p.length!==1&&p.shift(),Py(p,l)||U2(h)},getConflictingClassGroupIds:(h,p)=>{const g=i[h]||[];return p&&c[h]?[...g,...c[h]]:g}}},Py=(a,l)=>{var h;if(a.length===0)return l.classGroupId;const i=a[0],c=l.nextPart.get(i),o=c?Py(a.slice(1),c):void 0;if(o)return o;if(l.validators.length===0)return;const u=a.join(Lh);return(h=l.validators.find(({validator:p})=>p(u)))==null?void 0:h.classGroupId},bv=/^\[(.+)\]$/,U2=a=>{if(bv.test(a)){const l=bv.exec(a)[1],i=l==null?void 0:l.substring(0,l.indexOf(":"));if(i)return"arbitrary.."+i}},q2=a=>{const{theme:l,classGroups:i}=a,c={nextPart:new Map,validators:[]};for(const o in i)rh(i[o],c,o,l);return c},rh=(a,l,i,c)=>{a.forEach(o=>{if(typeof o=="string"){const u=o===""?l:Nv(l,o);u.classGroupId=i;return}if(typeof o=="function"){if(I2(o)){rh(o(c),l,i,c);return}l.validators.push({validator:o,classGroupId:i});return}Object.entries(o).forEach(([u,h])=>{rh(h,Nv(l,u),i,c)})})},Nv=(a,l)=>{let i=a;return l.split(Lh).forEach(c=>{i.nextPart.has(c)||i.nextPart.set(c,{nextPart:new Map,validators:[]}),i=i.nextPart.get(c)}),i},I2=a=>a.isThemeGetter,B2=a=>{if(a<1)return{get:()=>{},set:()=>{}};let l=0,i=new Map,c=new Map;const o=(u,h)=>{i.set(u,h),l++,l>a&&(l=0,c=i,i=new Map)};return{get(u){let h=i.get(u);if(h!==void 0)return h;if((h=c.get(u))!==void 0)return o(u,h),h},set(u,h){i.has(u)?i.set(u,h):o(u,h)}}},ih="!",ch=":",F2=ch.length,$2=a=>{const{prefix:l,experimentalParseClassName:i}=a;let c=o=>{const u=[];let h=0,p=0,g=0,y;for(let T=0;T<o.length;T++){let D=o[T];if(h===0&&p===0){if(D===ch){u.push(o.slice(g,T)),g=T+F2;continue}if(D==="/"){y=T;continue}}D==="["?h++:D==="]"?h--:D==="("?p++:D===")"&&p--}const x=u.length===0?o:o.substring(g),j=H2(x),b=j!==x,A=y&&y>g?y-g:void 0;return{modifiers:u,hasImportantModifier:b,baseClassName:j,maybePostfixModifierPosition:A}};if(l){const o=l+ch,u=c;c=h=>h.startsWith(o)?u(h.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:h,maybePostfixModifierPosition:void 0}}if(i){const o=c;c=u=>i({className:u,parseClassName:o})}return c},H2=a=>a.endsWith(ih)?a.substring(0,a.length-1):a.startsWith(ih)?a.substring(1):a,V2=a=>{const l=Object.fromEntries(a.orderSensitiveModifiers.map(c=>[c,!0]));return c=>{if(c.length<=1)return c;const o=[];let u=[];return c.forEach(h=>{h[0]==="["||l[h]?(o.push(...u.sort(),h),u=[]):u.push(h)}),o.push(...u.sort()),o}},G2=a=>({cache:B2(a.cacheSize),parseClassName:$2(a),sortModifiers:V2(a),...L2(a)}),Y2=/\s+/,Q2=(a,l)=>{const{parseClassName:i,getClassGroupId:c,getConflictingClassGroupIds:o,sortModifiers:u}=l,h=[],p=a.trim().split(Y2);let g="";for(let y=p.length-1;y>=0;y-=1){const x=p[y],{isExternal:j,modifiers:b,hasImportantModifier:A,baseClassName:T,maybePostfixModifierPosition:D}=i(x);if(j){g=x+(g.length>0?" "+g:g);continue}let S=!!D,R=c(S?T.substring(0,D):T);if(!R){if(!S){g=x+(g.length>0?" "+g:g);continue}if(R=c(T),!R){g=x+(g.length>0?" "+g:g);continue}S=!1}const k=u(b).join(":"),E=A?k+ih:k,w=E+R;if(h.includes(w))continue;h.push(w);const C=o(R,S);for(let q=0;q<C.length;++q){const I=C[q];h.push(E+I)}g=x+(g.length>0?" "+g:g)}return g};function W2(){let a=0,l,i,c="";for(;a<arguments.length;)(l=arguments[a++])&&(i=Ly(l))&&(c&&(c+=" "),c+=i);return c}const Ly=a=>{if(typeof a=="string")return a;let l,i="";for(let c=0;c<a.length;c++)a[c]&&(l=Ly(a[c]))&&(i&&(i+=" "),i+=l);return i};function X2(a,...l){let i,c,o,u=h;function h(g){const y=l.reduce((x,j)=>j(x),a());return i=G2(y),c=i.cache.get,o=i.cache.set,u=p,p(g)}function p(g){const y=c(g);if(y)return y;const x=Q2(g,i);return o(g,x),x}return function(){return u(W2.apply(null,arguments))}}const $t=a=>{const l=i=>i[a]||[];return l.isThemeGetter=!0,l},Uy=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,qy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Z2=/^\d+\/\d+$/,K2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lr=a=>Z2.test(a),tt=a=>!!a&&!Number.isNaN(Number(a)),Tn=a=>!!a&&Number.isInteger(Number(a)),qm=a=>a.endsWith("%")&&tt(a.slice(0,-1)),Ya=a=>K2.test(a),aC=()=>!0,nC=a=>J2.test(a)&&!eC.test(a),Iy=()=>!1,lC=a=>tC.test(a),rC=a=>sC.test(a),iC=a=>!Ee(a)&&!Ae(a),cC=a=>vr(a,$y,Iy),Ee=a=>Uy.test(a),ll=a=>vr(a,Hy,nC),Im=a=>vr(a,hC,tt),wv=a=>vr(a,By,Iy),oC=a=>vr(a,Fy,rC),oo=a=>vr(a,Vy,lC),Ae=a=>qy.test(a),wi=a=>yr(a,Hy),dC=a=>yr(a,fC),Cv=a=>yr(a,By),uC=a=>yr(a,$y),mC=a=>yr(a,Fy),uo=a=>yr(a,Vy,!0),vr=(a,l,i)=>{const c=Uy.exec(a);return c?c[1]?l(c[1]):i(c[2]):!1},yr=(a,l,i=!1)=>{const c=qy.exec(a);return c?c[1]?l(c[1]):i:!1},By=a=>a==="position"||a==="percentage",Fy=a=>a==="image"||a==="url",$y=a=>a==="length"||a==="size"||a==="bg-size",Hy=a=>a==="length",hC=a=>a==="number",fC=a=>a==="family-name",Vy=a=>a==="shadow",xC=()=>{const a=$t("color"),l=$t("font"),i=$t("text"),c=$t("font-weight"),o=$t("tracking"),u=$t("leading"),h=$t("breakpoint"),p=$t("container"),g=$t("spacing"),y=$t("radius"),x=$t("shadow"),j=$t("inset-shadow"),b=$t("text-shadow"),A=$t("drop-shadow"),T=$t("blur"),D=$t("perspective"),S=$t("aspect"),R=$t("ease"),k=$t("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...w(),Ae,Ee],q=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],W=()=>[Ae,Ee,g],P=()=>[lr,"full","auto",...W()],Y=()=>[Tn,"none","subgrid",Ae,Ee],B=()=>["auto",{span:["full",Tn,Ae,Ee]},Tn,Ae,Ee],le=()=>[Tn,"auto",Ae,Ee],Z=()=>["auto","min","max","fr",Ae,Ee],$=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ee=()=>["start","end","center","stretch","center-safe","end-safe"],N=()=>["auto",...W()],L=()=>[lr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...W()],v=()=>[a,Ae,Ee],O=()=>[...w(),Cv,wv,{position:[Ae,Ee]}],M=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",uC,cC,{size:[Ae,Ee]}],Q=()=>[qm,wi,ll],H=()=>["","none","full",y,Ae,Ee],ie=()=>["",tt,wi,ll],ye=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pe=()=>[tt,qm,Cv,wv],Ne=()=>["","none",T,Ae,Ee],Fe=()=>["none",tt,Ae,Ee],De=()=>["none",tt,Ae,Ee],Ge=()=>[tt,Ae,Ee],We=()=>[lr,"full",...W()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ya],breakpoint:[Ya],color:[aC],container:[Ya],"drop-shadow":[Ya],ease:["in","out","in-out"],font:[iC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ya],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ya],shadow:[Ya],spacing:["px",tt],text:[Ya],"text-shadow":[Ya],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",lr,Ee,Ae,S]}],container:["container"],columns:[{columns:[tt,Ee,Ae,p]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Tn,"auto",Ae,Ee]}],basis:[{basis:[lr,"full","auto",p,...W()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,lr,"auto","initial","none",Ee]}],grow:[{grow:["",tt,Ae,Ee]}],shrink:[{shrink:["",tt,Ae,Ee]}],order:[{order:[Tn,"first","last","none",Ae,Ee]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:W()}],"gap-x":[{"gap-x":W()}],"gap-y":[{"gap-y":W()}],"justify-content":[{justify:[...$(),"normal"]}],"justify-items":[{"justify-items":[...ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...ee()]}],"align-content":[{content:["normal",...$()]}],"align-items":[{items:[...ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":$()}],"place-items":[{"place-items":[...ee(),"baseline"]}],"place-self":[{"place-self":["auto",...ee()]}],p:[{p:W()}],px:[{px:W()}],py:[{py:W()}],ps:[{ps:W()}],pe:[{pe:W()}],pt:[{pt:W()}],pr:[{pr:W()}],pb:[{pb:W()}],pl:[{pl:W()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":W()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":W()}],"space-y-reverse":["space-y-reverse"],size:[{size:L()}],w:[{w:[p,"screen",...L()]}],"min-w":[{"min-w":[p,"screen","none",...L()]}],"max-w":[{"max-w":[p,"screen","none","prose",{screen:[h]},...L()]}],h:[{h:["screen","lh",...L()]}],"min-h":[{"min-h":["screen","lh","none",...L()]}],"max-h":[{"max-h":["screen","lh",...L()]}],"font-size":[{text:["base",i,wi,ll]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[c,Ae,Im]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qm,Ee]}],"font-family":[{font:[dC,Ee,l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Ae,Ee]}],"line-clamp":[{"line-clamp":[tt,"none",Ae,Im]}],leading:[{leading:[u,...W()]}],"list-image":[{"list-image":["none",Ae,Ee]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:v()}],"text-color":[{text:v()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ye(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",Ae,ll]}],"text-decoration-color":[{decoration:v()}],"underline-offset":[{"underline-offset":[tt,"auto",Ae,Ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:O()}],"bg-repeat":[{bg:M()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Tn,Ae,Ee],radial:["",Ae,Ee],conic:[Tn,Ae,Ee]},mC,oC]}],"bg-color":[{bg:v()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:v()}],"gradient-via":[{via:v()}],"gradient-to":[{to:v()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ye(),"hidden","none"]}],"divide-style":[{divide:[...ye(),"hidden","none"]}],"border-color":[{border:v()}],"border-color-x":[{"border-x":v()}],"border-color-y":[{"border-y":v()}],"border-color-s":[{"border-s":v()}],"border-color-e":[{"border-e":v()}],"border-color-t":[{"border-t":v()}],"border-color-r":[{"border-r":v()}],"border-color-b":[{"border-b":v()}],"border-color-l":[{"border-l":v()}],"divide-color":[{divide:v()}],"outline-style":[{outline:[...ye(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,Ae,Ee]}],"outline-w":[{outline:["",tt,wi,ll]}],"outline-color":[{outline:v()}],shadow:[{shadow:["","none",x,uo,oo]}],"shadow-color":[{shadow:v()}],"inset-shadow":[{"inset-shadow":["none",j,uo,oo]}],"inset-shadow-color":[{"inset-shadow":v()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:v()}],"ring-offset-w":[{"ring-offset":[tt,ll]}],"ring-offset-color":[{"ring-offset":v()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":v()}],"text-shadow":[{"text-shadow":["none",b,uo,oo]}],"text-shadow-color":[{"text-shadow":v()}],opacity:[{opacity:[tt,Ae,Ee]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":pe()}],"mask-image-linear-from-color":[{"mask-linear-from":v()}],"mask-image-linear-to-color":[{"mask-linear-to":v()}],"mask-image-t-from-pos":[{"mask-t-from":pe()}],"mask-image-t-to-pos":[{"mask-t-to":pe()}],"mask-image-t-from-color":[{"mask-t-from":v()}],"mask-image-t-to-color":[{"mask-t-to":v()}],"mask-image-r-from-pos":[{"mask-r-from":pe()}],"mask-image-r-to-pos":[{"mask-r-to":pe()}],"mask-image-r-from-color":[{"mask-r-from":v()}],"mask-image-r-to-color":[{"mask-r-to":v()}],"mask-image-b-from-pos":[{"mask-b-from":pe()}],"mask-image-b-to-pos":[{"mask-b-to":pe()}],"mask-image-b-from-color":[{"mask-b-from":v()}],"mask-image-b-to-color":[{"mask-b-to":v()}],"mask-image-l-from-pos":[{"mask-l-from":pe()}],"mask-image-l-to-pos":[{"mask-l-to":pe()}],"mask-image-l-from-color":[{"mask-l-from":v()}],"mask-image-l-to-color":[{"mask-l-to":v()}],"mask-image-x-from-pos":[{"mask-x-from":pe()}],"mask-image-x-to-pos":[{"mask-x-to":pe()}],"mask-image-x-from-color":[{"mask-x-from":v()}],"mask-image-x-to-color":[{"mask-x-to":v()}],"mask-image-y-from-pos":[{"mask-y-from":pe()}],"mask-image-y-to-pos":[{"mask-y-to":pe()}],"mask-image-y-from-color":[{"mask-y-from":v()}],"mask-image-y-to-color":[{"mask-y-to":v()}],"mask-image-radial":[{"mask-radial":[Ae,Ee]}],"mask-image-radial-from-pos":[{"mask-radial-from":pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":pe()}],"mask-image-radial-from-color":[{"mask-radial-from":v()}],"mask-image-radial-to-color":[{"mask-radial-to":v()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":pe()}],"mask-image-conic-from-color":[{"mask-conic-from":v()}],"mask-image-conic-to-color":[{"mask-conic-to":v()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:O()}],"mask-repeat":[{mask:M()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ae,Ee]}],filter:[{filter:["","none",Ae,Ee]}],blur:[{blur:Ne()}],brightness:[{brightness:[tt,Ae,Ee]}],contrast:[{contrast:[tt,Ae,Ee]}],"drop-shadow":[{"drop-shadow":["","none",A,uo,oo]}],"drop-shadow-color":[{"drop-shadow":v()}],grayscale:[{grayscale:["",tt,Ae,Ee]}],"hue-rotate":[{"hue-rotate":[tt,Ae,Ee]}],invert:[{invert:["",tt,Ae,Ee]}],saturate:[{saturate:[tt,Ae,Ee]}],sepia:[{sepia:["",tt,Ae,Ee]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Ee]}],"backdrop-blur":[{"backdrop-blur":Ne()}],"backdrop-brightness":[{"backdrop-brightness":[tt,Ae,Ee]}],"backdrop-contrast":[{"backdrop-contrast":[tt,Ae,Ee]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,Ae,Ee]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,Ae,Ee]}],"backdrop-invert":[{"backdrop-invert":["",tt,Ae,Ee]}],"backdrop-opacity":[{"backdrop-opacity":[tt,Ae,Ee]}],"backdrop-saturate":[{"backdrop-saturate":[tt,Ae,Ee]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,Ae,Ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":W()}],"border-spacing-x":[{"border-spacing-x":W()}],"border-spacing-y":[{"border-spacing-y":W()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Ee]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",Ae,Ee]}],ease:[{ease:["linear","initial",R,Ae,Ee]}],delay:[{delay:[tt,Ae,Ee]}],animate:[{animate:["none",k,Ae,Ee]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,Ae,Ee]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:Fe()}],"rotate-x":[{"rotate-x":Fe()}],"rotate-y":[{"rotate-y":Fe()}],"rotate-z":[{"rotate-z":Fe()}],scale:[{scale:De()}],"scale-x":[{"scale-x":De()}],"scale-y":[{"scale-y":De()}],"scale-z":[{"scale-z":De()}],"scale-3d":["scale-3d"],skew:[{skew:Ge()}],"skew-x":[{"skew-x":Ge()}],"skew-y":[{"skew-y":Ge()}],transform:[{transform:[Ae,Ee,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:v()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:v()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Ee]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Ee]}],fill:[{fill:["none",...v()]}],"stroke-w":[{stroke:[tt,wi,ll,Im]}],stroke:[{stroke:["none",...v()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},pC=X2(xC);function Be(...a){return pC(zy(a))}const gC=gr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function mt({className:a,variant:l,size:i,asChild:c=!1,...o}){const u=c?Ko:"button";return e.jsx(u,{"data-slot":"button",className:Be(gC({variant:l,size:i,className:a})),...o})}function ts({className:a,...l}){return e.jsx("div",{"data-slot":"card",className:Be("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...l})}function ss({className:a,...l}){return e.jsx("div",{"data-slot":"card-header",className:Be("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...l})}function as({className:a,...l}){return e.jsx("div",{"data-slot":"card-title",className:Be("leading-none font-semibold",a),...l})}function $s({className:a,...l}){return e.jsx("div",{"data-slot":"card-description",className:Be("text-muted-foreground text-sm",a),...l})}function ns({className:a,...l}){return e.jsx("div",{"data-slot":"card-content",className:Be("px-6",a),...l})}const vC=gr("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function pa({className:a,variant:l,asChild:i=!1,...c}){const o=i?Ko:"span";return e.jsx(o,{"data-slot":"badge",className:Be(vC({variant:l}),a),...c})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jC=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,i,c)=>c?c.toUpperCase():i.toLowerCase()),Sv=a=>{const l=jC(a);return l.charAt(0).toUpperCase()+l.slice(1)},Gy=(...a)=>a.filter((l,i,c)=>!!l&&l.trim()!==""&&c.indexOf(l)===i).join(" ").trim(),bC=a=>{for(const l in a)if(l.startsWith("aria-")||l==="role"||l==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=f.forwardRef(({color:a="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:u,iconNode:h,...p},g)=>f.createElement("svg",{ref:g,...NC,width:l,height:l,stroke:a,strokeWidth:c?Number(i)*24/Number(l):i,className:Gy("lucide",o),...!u&&!bC(p)&&{"aria-hidden":"true"},...p},[...h.map(([y,x])=>f.createElement(y,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(a,l)=>{const i=f.forwardRef(({className:c,...o},u)=>f.createElement(wC,{ref:u,iconNode:l,className:Gy(`lucide-${yC(Sv(a))}`,`lucide-${a}`,c),...o}));return i.displayName=Sv(a),i};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mn=Se("arrow-left",CC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kC=Se("arrow-right",SC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Ci=Se("arrow-up-down",_C);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],EC=Se("badge-check",TC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],Yy=Se("ban",AC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],MC=Se("bell",DC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ea=Se("building-2",RC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Co=Se("building",OC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ht=Se("calendar",zC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jr=Se("check",PC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Oi=Se("chevron-down",LC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qy=Se("chevron-left",UC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oh=Se("chevron-right",qC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],BC=Se("chevron-up",IC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ja=Se("circle-alert",FC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ze=Se("circle-check-big",$C);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],VC=Se("circle-user",HC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wy=Se("circle-x",GC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],QC=Se("clipboard",YC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],an=Se("clock",WC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],kv=Se("coins",XC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Uh=Se("copy",ZC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],qh=Se("credit-card",KC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Xy=Se("crown",JC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Hi=Se("dollar-sign",eS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],zi=Se("download",tS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],aS=Se("ellipsis-vertical",sS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],dh=Se("external-link",nS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vi=Se("eye",lS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],iS=Se("file-image",rS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],oS=Se("file-spreadsheet",cS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ct=Se("file-text",dS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],mS=Se("flag",uS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fS=Se("funnel",hS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],pS=Se("git-merge",xS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],vS=Se("grip-vertical",gS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],jS=Se("house",yS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],uh=Se("image",bS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ih=Se("info",NS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],_v=Se("key",wS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Si=Se("link",CS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Zy=Se("list",SS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ka=Se("loader-circle",kS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],TS=Se("loader",_S);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Pi=Se("log-out",ES);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ms=Se("mail",AS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],MS=Se("map-pin",DS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],OS=Se("menu",RS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Tv=Se("message-square",zS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],LS=Se("mic",PS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M5 12h14",key:"1ays0h"}]],qS=Se("minus",US);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],BS=Se("package",IS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Eo=Se("paperclip",FS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Ky=Se("pause",$S);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ao=Se("phone",HS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],GS=Se("play",VS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Je=Se("plus",YS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],WS=Se("printer",QS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ev=Se("refresh-cw",XS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Hs=Se("save",ZS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ca=Se("search",KS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Jy=Se("send",JS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ba=Se("settings",ek);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],sk=Se("shield-alert",tk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nk=Se("shield-check",ak);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ol=Se("shield",lk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ik=Se("sparkles",rk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Av=Se("square-check-big",ck);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],fs=Se("square-pen",ok);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],dl=Se("star",dk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ai=Se("tag",uk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],e0=Se("target",mk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],mr=Se("ticket",hk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ls=Se("trash-2",fk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Dv=Se("trending-up",xk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],os=Se("triangle-alert",pk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],vk=Se("truck",gk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],jk=Se("upload",yk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nk=Se("user-cog",bk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],t0=Se("user-plus",wk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pt=Se("user",Ck);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hs=Se("users",Sk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Do=Se("workflow",kk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],or=Se("wrench",_k);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],it=Se("x",Tk);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Mo=Se("zap",Ek),ml="/assets/worktrackr_icon_only-CtByhzFW.png";function Ak(){const[a,l]=f.useState(""),[i,c]=f.useState(null),o=Lt(),u=async(h,p="GET",g=null)=>{l("Testing "+h+"...");try{const y={method:p,headers:{"Content-Type":"application/json"},credentials:"include",body:g?JSON.stringify(g):void 0},x=await fetch(h,y),b=(x.headers.get("content-type")||"").includes("application/json"),A=b?await x.json():await x.text();x.ok?l(` ${h} - Success:
${b?JSON.stringify(A,null,2):A}`):l(` ${h} - Error:
${b?JSON.stringify(A,null,2):A}`)}catch(y){l(` ${h} - Network Error: ${y.message}`)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("nav",{className:"border-b bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"logo-container",children:[e.jsx("img",{src:ml,alt:"WorkTrackr Cloud",className:"w-12 h-12"}),e.jsxs("div",{className:"logo-text",children:["Work",e.jsx("span",{className:"trackr",children:"Trackr"})," CLOUD"]})]}),e.jsxs("div",{className:"flex space-x-2 sm:space-x-4",children:[e.jsx(mt,{variant:"outline",size:"sm",className:"sm:size-default",onClick:()=>o("/login"),children:"Login"}),e.jsx(mt,{size:"sm",className:"sm:size-default worktrackr-bg-black hover:bg-gray-800",onClick:()=>o("/pricing"),"aria-label":"Start free trial",children:"Get Started"})]})]})})}),e.jsx("section",{className:"py-20 px-4 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-6",children:["Custom Workflows. ",e.jsx("span",{className:"worktrackr-yellow",children:"Zero Hassle."})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"The complete workflow and ticketing system designed for IT support providers, maintenance teams, and service organizations."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 sm:space-x-4",children:[e.jsx(mt,{size:"lg",className:"worktrackr-bg-black hover:bg-gray-800",onClick:()=>o("/pricing"),children:"Start Free Trial"}),e.jsx(mt,{size:"lg",variant:"outline",children:"View Demo"})]})]})}),e.jsx("section",{className:"py-16 px-4 bg-gray-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Everything you need to manage workflows"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(mr,{className:"w-8 h-8 worktrackr-yellow mb-2"}),e.jsx(as,{children:"Smart Ticketing"})]}),e.jsx(ns,{children:e.jsx("p",{className:"text-gray-600",children:"Create, assign, and track tickets with automated workflows and SLA monitoring."})})]}),e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(hs,{className:"w-8 h-8 worktrackr-yellow mb-2"}),e.jsx(as,{children:"Multi-Tenant"})]}),e.jsx(ns,{children:e.jsx("p",{className:"text-gray-600",children:"Partner accounts can manage multiple customer organizations with white-label branding."})})]}),e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(Do,{className:"w-8 h-8 worktrackr-yellow mb-2"}),e.jsx(as,{children:"Custom Workflows"})]}),e.jsx(ns,{children:e.jsx("p",{className:"text-gray-600",children:"Build automated workflows with triggers, actions, and escalation rules."})})]}),e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(qh,{className:"w-8 h-8 worktrackr-yellow mb-2"}),e.jsx(as,{children:"Billing Ready"})]}),e.jsx(ns,{children:e.jsx("p",{className:"text-gray-600",children:"Integrated Stripe billing with subscription management and customer portals."})})]})]})]})}),e.jsx("section",{className:"py-16 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center mb-4",children:"Simple, transparent pricing"}),e.jsx("p",{className:"text-center text-gray-600 mb-12",children:"7-day free trial on all plans"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-6 max-w-6xl mx-auto",children:[e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Starter"}),e.jsx($s,{children:"Perfect for small teams"}),e.jsxs("div",{className:"text-3xl font-bold",children:["49",e.jsx("span",{className:"text-lg font-normal text-gray-600",children:"/month"})]})]}),e.jsxs(ns,{children:[e.jsxs("ul",{className:"space-y-3 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"1 user included"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Advanced ticketing"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Email notifications"]}),e.jsx("li",{className:"flex items-center text-sm text-gray-600",children:"+ 15/month per additional user"})]}),e.jsx(mt,{className:"w-full",variant:"outline",onClick:()=>o("/pricing"),children:"Choose Plan"})]})]}),e.jsxs(ts,{className:"border-2 worktrackr-border-yellow relative",children:[e.jsxs(pa,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 worktrackr-bg-yellow text-black",children:[e.jsx(dl,{className:"w-3 h-3 mr-1"}),"Most Popular"]}),e.jsxs(ss,{children:[e.jsx(as,{children:"Pro"}),e.jsx($s,{children:"For growing organizations"}),e.jsxs("div",{className:"text-3xl font-bold",children:["99",e.jsx("span",{className:"text-lg font-normal text-gray-600",children:"/month"})]})]}),e.jsxs(ns,{children:[e.jsxs("ul",{className:"space-y-3 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"5 users included"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Workflow builder"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Reports & inspections"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Approvals"]}),e.jsx("li",{className:"flex items-center text-sm text-gray-600",children:"+ 15/month per additional user"})]}),e.jsx(mt,{className:"w-full worktrackr-bg-yellow text-black hover:bg-yellow-400",onClick:()=>o("/pricing"),children:"Choose Plan"})]})]}),e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Enterprise"}),e.jsx($s,{children:"For large organizations"}),e.jsxs("div",{className:"text-3xl font-bold",children:["299",e.jsx("span",{className:"text-lg font-normal text-gray-600",children:"/month"})]})]}),e.jsxs(ns,{children:[e.jsxs("ul",{className:"space-y-3 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"50 users included"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Advanced workflows"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"API access"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"White-labeling"]}),e.jsx("li",{className:"flex items-center text-sm text-gray-600",children:"+ 15/month per additional user"})]}),e.jsx(mt,{className:"w-full worktrackr-bg-black hover:bg-gray-800",onClick:()=>o("/pricing"),children:"Choose Plan"})]})]})]})]})}),e.jsx("section",{className:"py-16 px-4 bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:" API Testing"}),e.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Test the WorkTrackr Cloud API endpoints"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[e.jsx(mt,{onClick:()=>u("/health","GET"),variant:"outline",children:"Health Check"}),e.jsx(mt,{onClick:()=>u("/api/auth/register","POST",{email:"test@example.com",name:"Test User",password:"password123",organizationName:"Test Org"}),variant:"outline",children:"Test Registration"}),e.jsx(mt,{onClick:()=>u("/api/tickets","GET"),variant:"outline",children:"List Tickets"})]}),a&&e.jsxs(ts,{children:[e.jsx(ss,{children:e.jsx(as,{children:"API Response"})}),e.jsx(ns,{children:e.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto whitespace-pre-wrap",children:a})})]})]})}),e.jsx("footer",{className:"bg-black text-white py-12",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"logo-container mb-4",children:[e.jsx("img",{src:ml,alt:"WorkTrackr Cloud",className:"w-8 h-8"}),e.jsxs("div",{className:"text-lg font-bold text-white",children:["Work",e.jsx("span",{className:"worktrackr-yellow",children:"Trackr"})," CLOUD"]})]}),e.jsx("p",{className:"text-gray-400",children:"Custom workflows. Zero hassle."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:"Features"}),e.jsx("li",{children:"Pricing"}),e.jsx("li",{children:"API"}),e.jsx("li",{children:"Documentation"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:"About"}),e.jsx("li",{children:"Blog"}),e.jsx("li",{children:"Careers"}),e.jsx("li",{children:"Contact"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:"Help Center"}),e.jsx("li",{children:"Community"}),e.jsx("li",{children:"Status"}),e.jsx("li",{children:"Security"})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:e.jsx("p",{children:" 2025 WorkTrackr Cloud. All rights reserved."})})]})})]})}const Dk="price_1SSdcs63WhEcHhBQvXxeVFrW",Mk="price_1SSddh63WhEcHhBQ2COGf6hV",Rk="price_1SSdeU63WhEcHhBQUyZiZKsJ";function Ok(){const a=Lt(),l=(i,c)=>{localStorage.setItem("selectedPriceId",String(i)),localStorage.setItem("selectedPlanName",String(c)),a("/signup")};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("section",{className:"py-16 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3",children:"Choose your plan"}),e.jsx("p",{className:"text-gray-600",children:"All plans include a 7-day free trial. Cancel anytime."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-6 max-w-6xl mx-auto",children:[e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Starter"}),e.jsx($s,{children:"Perfect for small teams"}),e.jsxs("div",{className:"text-3xl font-bold",children:["49",e.jsx("span",{className:"text-lg font-normal text-gray-600",children:"/month"})]})]}),e.jsxs(ns,{children:[e.jsxs("ul",{className:"space-y-3 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"1 user included"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Advanced ticketing"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Email notifications"]}),e.jsx("li",{className:"flex items-center text-sm text-gray-600",children:"+ 15/month per additional user"})]}),e.jsx(mt,{className:"w-full",variant:"outline",onClick:()=>l(Dk,"Starter"),children:"Choose Starter"})]})]}),e.jsxs(ts,{className:"border-2 worktrackr-border-yellow relative",children:[e.jsxs(pa,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 worktrackr-bg-yellow text-black",children:[e.jsx(dl,{className:"w-3 h-3 mr-1"}),"Most Popular"]}),e.jsxs(ss,{children:[e.jsx(as,{children:"Pro"}),e.jsx($s,{children:"For growing organizations"}),e.jsxs("div",{className:"text-3xl font-bold",children:["99",e.jsx("span",{className:"text-lg font-normal text-gray-600",children:"/month"})]})]}),e.jsxs(ns,{children:[e.jsxs("ul",{className:"space-y-3 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"5 users included"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Workflow builder"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Reports & inspections"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Approvals"]}),e.jsx("li",{className:"flex items-center text-sm text-gray-600",children:"+ 15/month per additional user"})]}),e.jsx(mt,{className:"w-full worktrackr-bg-yellow text-black hover:bg-yellow-400",onClick:()=>l(Mk,"Pro"),children:"Choose Pro"})]})]}),e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Enterprise"}),e.jsx($s,{children:"For large organizations"}),e.jsxs("div",{className:"text-3xl font-bold",children:["299",e.jsx("span",{className:"text-lg font-normal text-gray-600",children:"/month"})]})]}),e.jsxs(ns,{children:[e.jsxs("ul",{className:"space-y-3 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"50 users included"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"Advanced workflows"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"API access"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 worktrackr-yellow mr-2"}),"White-labeling"]}),e.jsx("li",{className:"flex items-center text-sm text-gray-600",children:"+ 15/month per additional user"})]}),e.jsx(mt,{className:"w-full worktrackr-bg-black hover:bg-gray-800",onClick:()=>l(Rk,"Enterprise"),children:"Choose Enterprise"})]})]})]}),e.jsxs("div",{className:"text-center mt-10",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Not sure which plan is right for you?"}),e.jsx(mt,{variant:"outline",onClick:()=>a("/"),children:"Back to Home"})]})]})})})}const zk=gr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function F({className:a,variant:l,size:i,asChild:c=!1,...o}){const u=c?Ko:"button";return e.jsx(u,{"data-slot":"button",className:Be(zk({variant:l,size:i,className:a})),...o})}function de({className:a,...l}){return e.jsx("div",{"data-slot":"card",className:Be("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...l})}function Ce({className:a,...l}){return e.jsx("div",{"data-slot":"card-header",className:Be("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...l})}function ke({className:a,...l}){return e.jsx("div",{"data-slot":"card-title",className:Be("leading-none font-semibold",a),...l})}function Ke({className:a,...l}){return e.jsx("div",{"data-slot":"card-description",className:Be("text-muted-foreground text-sm",a),...l})}function me({className:a,...l}){return e.jsx("div",{"data-slot":"card-content",className:Be("px-6",a),...l})}function se({className:a,type:l,...i}){return e.jsx("input",{type:l,"data-slot":"input",className:Be("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}var Pk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qe=Pk.reduce((a,l)=>{const i=ul(`Primitive.${l}`),c=f.forwardRef((o,u)=>{const{asChild:h,...p}=o,g=h?i:l;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...p,ref:u})});return c.displayName=`Primitive.${l}`,{...a,[l]:c}},{});function s0(a,l){a&&$i.flushSync(()=>a.dispatchEvent(l))}var Lk="Label",a0=f.forwardRef((a,l)=>e.jsx(Qe.label,{...a,ref:l,onMouseDown:i=>{var o;i.target.closest("button, input, select, textarea")||((o=a.onMouseDown)==null||o.call(a,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));a0.displayName=Lk;var n0=a0;function J({className:a,...l}){return e.jsx(n0,{"data-slot":"label",className:Be("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...l})}const Uk=gr("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ta({className:a,variant:l,...i}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Be(Uk({variant:l}),a),...i})}function sa({className:a,...l}){return e.jsx("div",{"data-slot":"alert-description",className:Be("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...l})}const qk={price_1SSdcs63WhEcHhBQvXxeVFrW:{name:"Starter Plan",amount:"49",suffix:"/month"},price_1SSddh63WhEcHhBQ2COGf6hV:{name:"Pro Plan",amount:"99",suffix:"/month"},price_1SSdeU63WhEcHhBQUyZiZKsJ:{name:"Enterprise Plan",amount:"299",suffix:"/month"}};function Mv(a){return(a||"").toLowerCase().trim().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,60)}function Ik(){const a=Lt(),[l]=Ph(),[i,c]=f.useState({full_name:"",email:"",password:"",company_name:""}),[o,u]=f.useState(""),[h,p]=f.useState(!1),[g,y]=f.useState({}),[x,j]=f.useState(null),[b,A]=f.useState("");f.useEffect(()=>{const k=l.get("price"),E=localStorage.getItem("selectedPriceId")||"";A(k||E||"")},[l]);const T=f.useMemo(()=>b?qk[b]||{name:"Selected plan",amount:"",suffix:""}:null,[b]),D=k=>{const{name:E,value:w}=k.target;c(C=>({...C,[E]:w})),E==="company_name"&&u(Mv(w)),g[E]&&y(C=>({...C,[E]:null})),j(null)},S=()=>{const k={};return b||(k.price="Please choose a plan on the pricing page first."),i.full_name.trim()||(k.full_name="Full name is required."),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(k.email="Enter a valid email."):k.email="Email is required.",(!i.password||i.password.length<8)&&(k.password="Password must be at least 8 characters."),i.company_name.trim()||(k.company_name="Company name is required."),k},R=async k=>{k.preventDefault(),j(null),y({});const E=S();if(Object.keys(E).length){y(E);return}try{p(!0),localStorage.setItem("selectedPriceId",b);const C={price_1SSdcs63WhEcHhBQvXxeVFrW:"starter",price_1SSddh63WhEcHhBQ2COGf6hV:"pro",price_1SSdeU63WhEcHhBQUyZiZKsJ:"enterprise"}[b]||"starter",q=await fetch("/api/auth/signup/trial",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({full_name:i.full_name.trim(),email:i.email.trim().toLowerCase(),password:i.password,org_slug:Mv(i.company_name),plan:C})}),I=await q.json().catch(()=>({}));if(!q.ok||!(I!=null&&I.success)){let W="Failed to create account. Please try again.";I!=null&&I.error&&(W=I.error),j(W);return}console.log(" Trial account created successfully"),a("/app/dashboard")}catch(w){j(w.message||"Network error")}finally{p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("nav",{className:"border-b bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"logo-container cursor-pointer",onClick:()=>a("/"),children:[e.jsx("img",{src:ml,alt:"WorkTrackr Cloud",className:"w-10 h-10"}),e.jsxs("div",{className:"logo-text",children:["Work",e.jsx("span",{className:"trackr",children:"Trackr"})," CLOUD"]})]}),e.jsxs("div",{className:"text-sm",children:["Already have an account?"," ",e.jsx("button",{className:"underline hover:opacity-80",onClick:()=>a("/login"),children:"Sign in"})]})]})})}),e.jsxs("section",{className:"py-10 px-4 text-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold",children:["Start Your ",e.jsx("span",{className:"worktrackr-yellow",children:"Free Trial"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"14-day free trial  No credit card required"})]}),e.jsx("section",{className:"px-4 pb-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs(de,{className:"shadow-lg",children:[e.jsxs(Ce,{className:"text-center",children:[e.jsx(ke,{className:"text-2xl",children:"Create your account"}),e.jsx(Ke,{children:"Start your free 14-day trial instantly"})]}),e.jsxs(me,{children:[b?e.jsxs("div",{className:"mb-6 flex items-center justify-between rounded-md border p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(EC,{className:"w-5 h-5 worktrackr-yellow"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(T==null?void 0:T.name)||"Selected plan"}),((T==null?void 0:T.amount)||(T==null?void 0:T.suffix))&&e.jsxs("div",{className:"text-sm text-gray-600",children:[T==null?void 0:T.amount,T!=null&&T.suffix?e.jsx("span",{className:"text-gray-500",children:T.suffix}):null]})]})]}),e.jsx("button",{type:"button",className:"text-sm underline",onClick:()=>a("/pricing"),children:"Change plan"})]}):e.jsx(ta,{className:"mb-6 border-red-200 bg-red-50",children:e.jsxs(sa,{className:"text-red-800",children:["No plan selected. Please choose a plan on the"," ",e.jsx("button",{type:"button",className:"underline",onClick:()=>a("/pricing"),children:"pricing page"}),"."]})}),x&&e.jsx(ta,{className:"mb-6 border-red-200 bg-red-50",children:e.jsx(sa,{className:"text-red-800",children:x})}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"full_name",children:"Full Name *"}),e.jsx(se,{id:"full_name",name:"full_name",value:i.full_name,onChange:D,placeholder:"Enter your full name",className:g.full_name?"border-red-500":""}),g.full_name&&e.jsx("p",{className:"text-sm text-red-600",children:g.full_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"email",children:"Email Address *"}),e.jsx(se,{id:"email",name:"email",type:"email",value:i.email,onChange:D,placeholder:"you@company.com",className:g.email?"border-red-500":""}),g.email&&e.jsx("p",{className:"text-sm text-red-600",children:g.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"password",children:"Password *"}),e.jsx(se,{id:"password",name:"password",type:"password",value:i.password,onChange:D,placeholder:"Minimum 8 characters",className:g.password?"border-red-500":""}),g.password&&e.jsx("p",{className:"text-sm text-red-600",children:g.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"company_name",children:"Company Name *"}),e.jsx(se,{id:"company_name",name:"company_name",value:i.company_name,onChange:D,placeholder:"Your Company Ltd",className:g.company_name?"border-red-500":""}),g.company_name?e.jsx("p",{className:"text-sm text-red-600",children:g.company_name}):o?e.jsxs("p",{className:"text-xs text-gray-500",children:["Organization ID: ",e.jsx("span",{className:"font-mono text-gray-700",children:o})]}):e.jsx("p",{className:"text-xs text-gray-500",children:"Enter your company name (ID will be auto-generated)"})]}),e.jsx(F,{type:"submit",className:"w-full worktrackr-bg-black hover:bg-gray-800 text-white",disabled:h||!b,size:"lg",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Ka,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating account"]}):"Start Free Trial"}),e.jsx("div",{className:"text-center text-xs text-gray-500",children:"By creating an account you agree to our Terms & Privacy Policy"})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs(F,{variant:"ghost",onClick:()=>a("/"),className:"flex items-center",children:[e.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ze,{className:"w-8 h-8 worktrackr-yellow mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Secure & Private"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ze,{className:"w-8 h-8 worktrackr-yellow mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Trusted by Teams"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ze,{className:"w-8 h-8 worktrackr-yellow mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Quick Setup"})]})]})]})})]})}const l0=f.createContext(null),gl=()=>{const a=f.useContext(l0);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a};function Bk({children:a}){const[l,i]=f.useState(void 0),[c,o]=f.useState(void 0);f.useEffect(()=>{let g=!1;return(async()=>{try{const x=await(await fetch("/api/auth/session",{credentials:"include"})).json();g||(i((x==null?void 0:x.user)??null),o((x==null?void 0:x.membership)??null))}catch{g||(i(null),o(null))}})(),()=>{g=!0}},[]);const p={user:l,membership:c,setUser:i,setMembership:o,login:async(g,y)=>{try{const x=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,password:y})}),j=await x.json();if(x.ok){if(j.requires_mfa)return{success:!1,requires_mfa:!0,challenge_id:j.challenge_id,message:j.message};i(j.user),o(j.membership);try{const b=await fetch("/api/auth/session",{credentials:"include"});if(b.ok){const A=await b.json();i((A==null?void 0:A.user)??null),o((A==null?void 0:A.membership)??null)}}catch(b){console.warn("Session refetch failed:",b)}return{success:!0,user:j.user}}else return{success:!1,error:j.error||"Login failed"}}catch(x){return console.error("Login error:",x),{success:!1,error:"Network error"}}},logout:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(g){console.error("Logout error:",g)}finally{i(null),o(null)}},loading:l===void 0||c===void 0};return e.jsx(l0.Provider,{value:p,children:a})}function va({className:a,type:l,...i}){return e.jsx("input",{type:l,"data-slot":"input",className:Be("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}function Di({className:a,...l}){return e.jsx(n0,{"data-slot":"label",className:Be("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...l})}const Fk=gr("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function $k({className:a,variant:l,...i}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Be(Fk({variant:l}),a),...i})}function Hk({className:a,...l}){return e.jsx("div",{"data-slot":"alert-description",className:Be("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...l})}function Vk(){const a=Lt(),[l]=Ph(),i=l.get("next")||"/app/dashboard",{login:c}=gl(),[o,u]=f.useState({email:"",password:""}),[h,p]=f.useState(!1),[g,y]=f.useState(""),[x,j]=f.useState(!1),[b,A]=f.useState(""),[T,D]=f.useState(""),[S,R]=f.useState(0);function k(C){const{name:q,value:I}=C.target;u(W=>({...W,[q]:I})),g&&y(null)}async function E(C){C.preventDefault(),p(!0),y(null);try{if(x){const q=await fetch("/api/auth/mfa/verify",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge_id:b,code:T})}),I=await q.json();q.ok?a(i,{replace:!0}):y(I.error||"Invalid MFA code")}else{const q=await c(o.email.trim().toLowerCase(),o.password);q.success?a(i,{replace:!0}):q.requires_mfa?(j(!0),A(q.challenge_id),y(null)):y(q.error||"Login failed")}}catch(q){y(q.message||"Network error")}finally{p(!1)}}const w=async()=>{if(!(S>0))try{if(p(!0),(await fetch("/api/auth/mfa/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:b})})).ok){R(60);const q=setInterval(()=>{R(I=>I<=1?(clearInterval(q),0):I-1)},1e3)}}catch{y("Failed to resend code")}finally{p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("nav",{className:"border-b bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"logo-container cursor-pointer",onClick:()=>a("/"),children:[e.jsx("img",{src:ml,alt:"WorkTrackr Cloud",className:"w-12 h-12"}),e.jsxs("div",{className:"logo-text",children:["Work",e.jsx("span",{className:"trackr",children:"Trackr"})," CLOUD"]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(mt,{variant:"ghost",onClick:()=>a("/"),className:"flex items-center text-sm",children:[e.jsx(Mn,{className:"w-4 h-4 mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to "}),"Home"]})})]})})}),e.jsx("section",{className:"py-12 px-4",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(ts,{className:"shadow-lg",children:[e.jsxs(ss,{className:"text-center",children:[e.jsx(as,{className:"text-2xl",children:x?"Enter verification code":"Welcome back"}),e.jsx($s,{children:x?"We sent a 6-digit code to your email address":"Sign in to access your dashboard"})]}),e.jsxs(ns,{children:[g&&e.jsx($k,{className:"mb-6 border-red-200 bg-red-50",children:e.jsx(Hk,{className:"text-red-800",children:g})}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Di,{htmlFor:"mfaCode",children:"Verification Code"}),e.jsx(va,{id:"mfaCode",name:"mfaCode",type:"text",maxLength:"6",autoComplete:"one-time-code",value:T,onChange:C=>D(C.target.value.replace(/\D/g,"")),placeholder:"000000",className:"text-center text-2xl tracking-widest",required:!0}),e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Enter the 6-digit code sent to ",o.email]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:w,disabled:S>0,className:"text-sm text-indigo-600 hover:text-indigo-500 disabled:text-gray-400",children:S>0?`Resend code in ${S}s`:"Resend code"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Di,{htmlFor:"email",children:"Email"}),e.jsx(va,{id:"email",name:"email",type:"email",autoComplete:"email",value:o.email,onChange:k,placeholder:"you@company.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Di,{htmlFor:"password",children:"Password"}),e.jsx("button",{type:"button",onClick:()=>a("/forgot-password"),className:"text-sm text-indigo-600 hover:text-indigo-500",children:"Forgot password?"})]}),e.jsx(va,{id:"password",name:"password",type:"password",autoComplete:"current-password",value:o.password,onChange:k,placeholder:"",required:!0})]})]}),e.jsx(mt,{type:"submit",className:"w-full worktrackr-bg-black hover:bg-gray-800",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(Ka,{className:"w-4 h-4 mr-2 animate-spin"}),x?"Verifying":"Signing in"]}):x?"Verify Code":"Sign In"}),e.jsxs("p",{className:"text-center text-sm text-gray-500 mt-3",children:["New here?"," ",e.jsx("button",{className:"underline",type:"button",onClick:()=>a("/signup"),children:"Create an account"})]})]})]})]})})})]})}function Gk(){const a=Lt(),[l,i]=f.useState("Completing signup");return f.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("session_id");async function u(){if(!o){i("No Stripe session found. Please contact support.");return}try{const h=await fetch(`/api/auth/signup/complete?session_id=${encodeURIComponent(o)}`,{method:"POST",credentials:"include"}),p=await h.json().catch(()=>({}));if(!h.ok)throw new Error((p==null?void 0:p.error)||"Failed to complete signup");i("All set! Redirecting to your dashboard"),setTimeout(()=>a("/app/dashboard"),2e3)}catch(h){i(`There was a problem completing signup: ${h.message}`)}}u()},[a]),e.jsxs("main",{style:{maxWidth:600,margin:"4rem auto",padding:20,textAlign:"center"},children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Welcome to WorkTrackr Cloud"}),e.jsx("p",{className:"text-gray-600",children:l})]})}function Yk(){const[a,l]=f.useState(""),[i,c]=f.useState(!1),[o,u]=f.useState(!1),[h,p]=f.useState(""),g=async y=>{y.preventDefault(),c(!0),p("");try{const x=await fetch("/api/auth/password/forgot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),j=await x.json();x.ok?u(!0):p(j.error||"Failed to send reset email")}catch{p("Network error. Please try again.")}finally{c(!1)}};return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Check your email"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"If that email exists in our system, we've sent a password reset link to:"}),e.jsx("p",{className:"mt-1 text-center text-sm font-medium text-gray-900",children:a})]}),e.jsx("div",{className:"rounded-md bg-blue-50 p-4",children:e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("p",{children:e.jsx("strong",{children:"Didn't receive the email?"})}),e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Check your spam/junk folder"}),e.jsx("li",{children:"Make sure you entered the correct email address"}),e.jsx("li",{children:"The link expires in 1 hour"})]})]})}),e.jsx("div",{className:"text-center",children:e.jsx(cl,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Back to login"})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Forgot your password?"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:a,onChange:y=>l(y.target.value)})]}),h&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-sm text-red-700",children:h})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Sending...":"Send reset link"})}),e.jsx("div",{className:"text-center",children:e.jsx(cl,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Back to login"})})]})]})})}function Qk(){const[a]=Ph(),l=Lt(),i=a.get("token"),[c,o]=f.useState(""),[u,h]=f.useState(""),[p,g]=f.useState(!1),[y,x]=f.useState(""),[j,b]=f.useState(!1);f.useEffect(()=>{i||x("Invalid reset link. Please request a new password reset.")},[i]);const A=async T=>{if(T.preventDefault(),x(""),c.length<8){x("Password must be at least 8 characters long");return}if(c!==u){x("Passwords do not match");return}g(!0);try{const D=await fetch("/api/auth/password/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,new_password:c})}),S=await D.json();D.ok?(b(!0),setTimeout(()=>{l("/login")},3e3)):x(S.error||"Failed to reset password")}catch{x("Network error. Please try again.")}finally{g(!1)}};return i?j?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Password Reset Successful"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been successfully reset. You can now log in with your new password."}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Redirecting to login page in 3 seconds..."}),e.jsx("div",{className:"mt-6",children:e.jsx(cl,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Go to login page"})})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:A,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"mt-1 appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Enter new password",value:c,onChange:T=>o(T.target.value)}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm new password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"mt-1 appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirm new password",value:u,onChange:T=>h(T.target.value)})]})]}),y&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-sm text-red-700",children:y})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Resetting...":"Reset password"})}),e.jsx("div",{className:"text-center",children:e.jsx(cl,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Back to login"})})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Invalid Reset Link"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"This password reset link is invalid or has expired."}),e.jsx("div",{className:"mt-6",children:e.jsx(cl,{to:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Request a new password reset"})})]})})})}function Wk(){const[a,l]=f.useState(""),[i,c]=f.useState(""),[o,u]=f.useState(""),[h,p]=f.useState(!1),g=Lt(),y=async x=>{var j;x.preventDefault(),u(""),p(!0);try{const b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,password:i})}),A=await b.json();b.ok?(j=(await(await fetch("/api/auth/session",{credentials:"include"})).json()).user)!=null&&j.is_master_admin?g("/admin87476463/dashboard"):(u("Access denied. Master admin privileges required."),await fetch("/api/auth/logout",{method:"POST",credentials:"include"})):u(A.error||"Invalid credentials")}catch(b){console.error("Login error:",b),u("An error occurred during login")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4",children:e.jsxs(ts,{className:"w-full max-w-md border-gray-700 bg-gray-800/50 backdrop-blur",children:[e.jsxs(ss,{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ml,alt:"WorkTrackr",className:"w-16 h-16"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-red-600 rounded-full p-1",children:e.jsx(ol,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx(as,{className:"text-2xl font-bold text-white",children:"Master Admin"}),e.jsx($s,{className:"text-gray-400",children:"Restricted access - Authorized personnel only"})]})]}),e.jsxs(ns,{children:[e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o&&e.jsx("div",{className:"bg-red-900/20 border border-red-600 text-red-400 px-4 py-3 rounded",children:o}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Di,{htmlFor:"email",className:"text-gray-300",children:"Email"}),e.jsx(va,{id:"email",type:"email",value:a,onChange:x=>l(x.target.value),required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",placeholder:"admin@example.com",autoComplete:"email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Di,{htmlFor:"password",className:"text-gray-300",children:"Password"}),e.jsx(va,{id:"password",type:"password",value:i,onChange:x=>c(x.target.value),required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400",placeholder:"",autoComplete:"current-password"})]}),e.jsx(mt,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white",disabled:h,children:h?"Authenticating...":"Access Admin Panel"})]}),e.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:e.jsx("p",{children:" Unauthorized access attempts are logged and monitored"})})]})]})})}function Xk(a,l){const i=f.createContext(l),c=u=>{const{children:h,...p}=u,g=f.useMemo(()=>p,Object.values(p));return e.jsx(i.Provider,{value:g,children:h})};c.displayName=a+"Provider";function o(u){const h=f.useContext(i);if(h)return h;if(l!==void 0)return l;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[c,o]}function Ta(a,l=[]){let i=[];function c(u,h){const p=f.createContext(h),g=i.length;i=[...i,h];const y=j=>{var R;const{scope:b,children:A,...T}=j,D=((R=b==null?void 0:b[a])==null?void 0:R[g])||p,S=f.useMemo(()=>T,Object.values(T));return e.jsx(D.Provider,{value:S,children:A})};y.displayName=u+"Provider";function x(j,b){var D;const A=((D=b==null?void 0:b[a])==null?void 0:D[g])||p,T=f.useContext(A);if(T)return T;if(h!==void 0)return h;throw new Error(`\`${j}\` must be used within \`${u}\``)}return[y,x]}const o=()=>{const u=i.map(h=>f.createContext(h));return function(p){const g=(p==null?void 0:p[a])||u;return f.useMemo(()=>({[`__scope${a}`]:{...p,[a]:g}}),[p,g])}};return o.scopeName=a,[c,Zk(o,...l)]}function Zk(...a){const l=a[0];if(a.length===1)return l;const i=()=>{const c=a.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(u){const h=c.reduce((p,{useScope:g,scopeName:y})=>{const j=g(u)[`__scope${y}`];return{...p,...j}},{});return f.useMemo(()=>({[`__scope${l.scopeName}`]:h}),[h])}};return i.scopeName=l.scopeName,i}function Re(a,l,{checkForDefaultPrevented:i=!0}={}){return function(o){if(a==null||a(o),i===!1||!o.defaultPrevented)return l==null?void 0:l(o)}}var ds=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},Kk=gy[" useInsertionEffect ".trim().toString()]||ds;function Rn({prop:a,defaultProp:l,onChange:i=()=>{},caller:c}){const[o,u,h]=Jk({defaultProp:l,onChange:i}),p=a!==void 0,g=p?a:o;{const x=f.useRef(a!==void 0);f.useEffect(()=>{const j=x.current;j!==p&&console.warn(`${c} is changing from ${j?"controlled":"uncontrolled"} to ${p?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=p},[p,c])}const y=f.useCallback(x=>{var j;if(p){const b=e4(x)?x(a):x;b!==a&&((j=h.current)==null||j.call(h,b))}else u(x)},[p,a,u,h]);return[g,y]}function Jk({defaultProp:a,onChange:l}){const[i,c]=f.useState(a),o=f.useRef(i),u=f.useRef(l);return Kk(()=>{u.current=l},[l]),f.useEffect(()=>{var h;o.current!==i&&((h=u.current)==null||h.call(u,i),o.current=i)},[i,o]),[i,c,u]}function e4(a){return typeof a=="function"}function Bh(a){const l=f.useRef({value:a,previous:a});return f.useMemo(()=>(l.current.value!==a&&(l.current.previous=l.current.value,l.current.value=a),l.current.previous),[a])}function Fh(a){const[l,i]=f.useState(void 0);return ds(()=>{if(a){i({width:a.offsetWidth,height:a.offsetHeight});const c=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const u=o[0];let h,p;if("borderBoxSize"in u){const g=u.borderBoxSize,y=Array.isArray(g)?g[0]:g;h=y.inlineSize,p=y.blockSize}else h=a.offsetWidth,p=a.offsetHeight;i({width:h,height:p})});return c.observe(a,{box:"border-box"}),()=>c.unobserve(a)}else i(void 0)},[a]),l}function t4(a,l){return f.useReducer((i,c)=>l[i][c]??i,a)}var Ea=a=>{const{present:l,children:i}=a,c=s4(l),o=typeof i=="function"?i({present:c.isPresent}):f.Children.only(i),u=ft(c.ref,a4(o));return typeof i=="function"||c.isPresent?f.cloneElement(o,{ref:u}):null};Ea.displayName="Presence";function s4(a){const[l,i]=f.useState(),c=f.useRef(null),o=f.useRef(a),u=f.useRef("none"),h=a?"mounted":"unmounted",[p,g]=t4(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const y=mo(c.current);u.current=p==="mounted"?y:"none"},[p]),ds(()=>{const y=c.current,x=o.current;if(x!==a){const b=u.current,A=mo(y);a?g("MOUNT"):A==="none"||(y==null?void 0:y.display)==="none"?g("UNMOUNT"):g(x&&b!==A?"ANIMATION_OUT":"UNMOUNT"),o.current=a}},[a,g]),ds(()=>{if(l){let y;const x=l.ownerDocument.defaultView??window,j=A=>{const D=mo(c.current).includes(CSS.escape(A.animationName));if(A.target===l&&D&&(g("ANIMATION_END"),!o.current)){const S=l.style.animationFillMode;l.style.animationFillMode="forwards",y=x.setTimeout(()=>{l.style.animationFillMode==="forwards"&&(l.style.animationFillMode=S)})}},b=A=>{A.target===l&&(u.current=mo(c.current))};return l.addEventListener("animationstart",b),l.addEventListener("animationcancel",j),l.addEventListener("animationend",j),()=>{x.clearTimeout(y),l.removeEventListener("animationstart",b),l.removeEventListener("animationcancel",j),l.removeEventListener("animationend",j)}}else g("ANIMATION_END")},[l,g]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:f.useCallback(y=>{c.current=y?getComputedStyle(y):null,i(y)},[])}}function mo(a){return(a==null?void 0:a.animationName)||"none"}function a4(a){var c,o;let l=(c=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:c.get,i=l&&"isReactWarning"in l&&l.isReactWarning;return i?a.ref:(l=(o=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:o.get,i=l&&"isReactWarning"in l&&l.isReactWarning,i?a.props.ref:a.props.ref||a.ref)}var Jo="Checkbox",[n4,F6]=Ta(Jo),[l4,$h]=n4(Jo);function r4(a){const{__scopeCheckbox:l,checked:i,children:c,defaultChecked:o,disabled:u,form:h,name:p,onCheckedChange:g,required:y,value:x="on",internal_do_not_use_render:j}=a,[b,A]=Rn({prop:i,defaultProp:o??!1,onChange:g,caller:Jo}),[T,D]=f.useState(null),[S,R]=f.useState(null),k=f.useRef(!1),E=T?!!h||!!T.closest("form"):!0,w={checked:b,disabled:u,setChecked:A,control:T,setControl:D,name:p,form:h,value:x,hasConsumerStoppedPropagationRef:k,required:y,defaultChecked:Dn(o)?!1:o,isFormControl:E,bubbleInput:S,setBubbleInput:R};return e.jsx(l4,{scope:l,...w,children:i4(j)?j(w):c})}var r0="CheckboxTrigger",i0=f.forwardRef(({__scopeCheckbox:a,onKeyDown:l,onClick:i,...c},o)=>{const{control:u,value:h,disabled:p,checked:g,required:y,setControl:x,setChecked:j,hasConsumerStoppedPropagationRef:b,isFormControl:A,bubbleInput:T}=$h(r0,a),D=ft(o,x),S=f.useRef(g);return f.useEffect(()=>{const R=u==null?void 0:u.form;if(R){const k=()=>j(S.current);return R.addEventListener("reset",k),()=>R.removeEventListener("reset",k)}},[u,j]),e.jsx(Qe.button,{type:"button",role:"checkbox","aria-checked":Dn(g)?"mixed":g,"aria-required":y,"data-state":u0(g),"data-disabled":p?"":void 0,disabled:p,value:h,...c,ref:D,onKeyDown:Re(l,R=>{R.key==="Enter"&&R.preventDefault()}),onClick:Re(i,R=>{j(k=>Dn(k)?!0:!k),T&&A&&(b.current=R.isPropagationStopped(),b.current||R.stopPropagation())})})});i0.displayName=r0;var Hh=f.forwardRef((a,l)=>{const{__scopeCheckbox:i,name:c,checked:o,defaultChecked:u,required:h,disabled:p,value:g,onCheckedChange:y,form:x,...j}=a;return e.jsx(r4,{__scopeCheckbox:i,checked:o,defaultChecked:u,disabled:p,required:h,onCheckedChange:y,name:c,form:x,value:g,internal_do_not_use_render:({isFormControl:b})=>e.jsxs(e.Fragment,{children:[e.jsx(i0,{...j,ref:l,__scopeCheckbox:i}),b&&e.jsx(d0,{__scopeCheckbox:i})]})})});Hh.displayName=Jo;var c0="CheckboxIndicator",Vh=f.forwardRef((a,l)=>{const{__scopeCheckbox:i,forceMount:c,...o}=a,u=$h(c0,i);return e.jsx(Ea,{present:c||Dn(u.checked)||u.checked===!0,children:e.jsx(Qe.span,{"data-state":u0(u.checked),"data-disabled":u.disabled?"":void 0,...o,ref:l,style:{pointerEvents:"none",...a.style}})})});Vh.displayName=c0;var o0="CheckboxBubbleInput",d0=f.forwardRef(({__scopeCheckbox:a,...l},i)=>{const{control:c,hasConsumerStoppedPropagationRef:o,checked:u,defaultChecked:h,required:p,disabled:g,name:y,value:x,form:j,bubbleInput:b,setBubbleInput:A}=$h(o0,a),T=ft(i,A),D=Bh(u),S=Fh(c);f.useEffect(()=>{const k=b;if(!k)return;const E=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(E,"checked").set,q=!o.current;if(D!==u&&C){const I=new Event("click",{bubbles:q});k.indeterminate=Dn(u),C.call(k,Dn(u)?!1:u),k.dispatchEvent(I)}},[b,D,u,o]);const R=f.useRef(Dn(u)?!1:u);return e.jsx(Qe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??R.current,required:p,disabled:g,name:y,value:x,form:j,...l,tabIndex:-1,ref:T,style:{...l.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});d0.displayName=o0;function i4(a){return typeof a=="function"}function Dn(a){return a==="indeterminate"}function u0(a){return Dn(a)?"indeterminate":a?"checked":"unchecked"}function Rv({className:a,...l}){return e.jsx(Hh,{"data-slot":"checkbox",className:Be("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:e.jsx(Vh,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(jr,{className:"size-3.5"})})})}function c4({className:a,...l}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:Be("w-full caption-bottom text-sm",a),...l})})}function o4({className:a,...l}){return e.jsx("thead",{"data-slot":"table-header",className:Be("[&_tr]:border-b",a),...l})}function d4({className:a,...l}){return e.jsx("tbody",{"data-slot":"table-body",className:Be("[&_tr:last-child]:border-0",a),...l})}function Bm({className:a,...l}){return e.jsx("tr",{"data-slot":"table-row",className:Be("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...l})}function Qa({className:a,...l}){return e.jsx("th",{"data-slot":"table-head",className:Be("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})}function fa({className:a,...l}){return e.jsx("td",{"data-slot":"table-cell",className:Be("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})}function u4(){const[a,l]=f.useState([]),[i,c]=f.useState(!0),[o,u]=f.useState(""),[h,p]=f.useState([]),[g,y]=f.useState(null),[x,j]=f.useState(!1),b=Lt();f.useEffect(()=>{A(),T()},[]);const A=async()=>{var P;try{const B=await(await fetch("/api/auth/session",{credentials:"include"})).json();if(!((P=B.user)!=null&&P.is_master_admin)){b("/admin87476463");return}y(B.user)}catch(Y){console.error("Access check failed:",Y),b("/admin87476463")}},T=async()=>{try{c(!0);const P=await fetch("/api/admin/users",{credentials:"include"});if(P.ok){const Y=await P.json();l(Y.items||[])}else console.error("Failed to fetch users")}catch(P){console.error("Error fetching users:",P)}finally{c(!1)}},D=async()=>{try{c(!0);const P=await fetch(`/api/admin/users?query=${encodeURIComponent(o)}`,{credentials:"include"});if(P.ok){const Y=await P.json();l(Y.items||[])}}catch(P){console.error("Search error:",P)}finally{c(!1)}},S=async P=>{if(confirm("Are you sure you want to suspend this user?"))try{(await fetch(`/api/admin/users/${P}/suspend`,{method:"POST",credentials:"include"})).ok&&(await T(),alert("User suspended successfully"))}catch(Y){console.error("Suspend error:",Y),alert("Failed to suspend user")}},R=async P=>{try{(await fetch(`/api/admin/users/${P}/unsuspend`,{method:"POST",credentials:"include"})).ok&&(await T(),alert("User unsuspended successfully"))}catch(Y){console.error("Unsuspend error:",Y),alert("Failed to unsuspend user")}},k=()=>{h.length===a.length?p([]):p(a.map(P=>P.id))},E=P=>{p(Y=>Y.includes(P)?Y.filter(B=>B!==P):[...Y,P])},w=async()=>{if(h.length===0){alert("Please select users to delete");return}const P=`Are you sure you want to PERMANENTLY DELETE ${h.length} user(s)? This action cannot be undone and will remove all associated data.`;if(confirm(P))try{j(!0);const Y=h.map($=>fetch(`/api/admin/users/${$}/hard-delete`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmation:"DELETE"})})),B=await Promise.all(Y),le=B.filter($=>$.ok).length,Z=B.length-le;le>0?(alert(`Successfully deleted ${le} user(s)${Z>0?`, ${Z} failed`:""}`),p([]),await T()):alert("Failed to delete users")}catch(Y){console.error("Bulk delete error:",Y),alert("An error occurred during bulk delete")}finally{j(!1)}},C=async()=>{try{const P=await fetch("/api/admin/users/export",{credentials:"include"});if(P.ok){const Y=await P.blob(),B=window.URL.createObjectURL(Y),le=document.createElement("a");le.href=B,le.download=`worktrackr-users-${Date.now()}.csv`,document.body.appendChild(le),le.click(),window.URL.revokeObjectURL(B),document.body.removeChild(le)}}catch(P){console.error("Export error:",P),alert("Failed to export users")}},q=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),b("/admin87476463")}catch(P){console.error("Logout error:",P)}},I=P=>P?new Date(P).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",W=P=>P.is_suspended?e.jsx(pa,{variant:"destructive",children:"Suspended"}):P.status==="active"?e.jsx(pa,{variant:"success",className:"bg-green-600",children:"Active"}):e.jsx(pa,{variant:"secondary",children:P.status});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:ml,alt:"WorkTrackr",className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"WorkTrackr Admin"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Master Admin Panel"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:g==null?void 0:g.name}),e.jsx("p",{className:"text-xs text-gray-500",children:g==null?void 0:g.email})]}),e.jsxs(mt,{variant:"outline",size:"sm",onClick:q,children:[e.jsx(Pi,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(ts,{children:[e.jsx(ss,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(as,{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"w-5 h-5"}),e.jsx("span",{children:"User Management"})]}),e.jsx($s,{children:"Manage users, roles, and permissions"})]}),e.jsxs("div",{className:"flex space-x-2",children:[h.length>0&&e.jsxs(mt,{onClick:w,variant:"destructive",disabled:x,children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Delete Selected (",h.length,")"]}),e.jsxs(mt,{onClick:C,variant:"outline",children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]})}),e.jsxs(ns,{children:[e.jsxs("div",{className:"flex space-x-2 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(va,{placeholder:"Search email or ID...",value:o,onChange:P=>u(P.target.value),onKeyPress:P=>P.key==="Enter"&&D()})}),e.jsxs(mt,{onClick:D,children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Search"]})]}),i?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading users..."})}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(c4,{children:[e.jsx(o4,{children:e.jsxs(Bm,{children:[e.jsx(Qa,{className:"w-12",children:e.jsx(Rv,{checked:h.length===a.length&&a.length>0,onCheckedChange:k})}),e.jsx(Qa,{children:"Email"}),e.jsx(Qa,{children:"Name"}),e.jsx(Qa,{children:"Role"}),e.jsx(Qa,{children:"Organization"}),e.jsx(Qa,{children:"Plan"}),e.jsx(Qa,{children:"Status"}),e.jsx(Qa,{children:"Created"}),e.jsx(Qa,{children:"Actions"})]})}),e.jsx(d4,{children:a.length===0?e.jsx(Bm,{children:e.jsx(fa,{colSpan:9,className:"text-center text-gray-500",children:"No users found"})}):a.map(P=>{var Y,B,le;return e.jsxs(Bm,{children:[e.jsx(fa,{children:e.jsx(Rv,{checked:h.includes(P.id),onCheckedChange:()=>E(P.id)})}),e.jsx(fa,{className:"font-medium",children:P.email}),e.jsx(fa,{children:P.name}),e.jsx(fa,{children:e.jsx(pa,{variant:"outline",children:((Y=P.membership)==null?void 0:Y.role)||"N/A"})}),e.jsx(fa,{children:((B=P.organisation)==null?void 0:B.name)||"N/A"}),e.jsx(fa,{children:e.jsx(pa,{children:((le=P.organisation)==null?void 0:le.plan)||"N/A"})}),e.jsx(fa,{children:W(P)}),e.jsx(fa,{children:I(P.created_at)}),e.jsx(fa,{children:e.jsxs("div",{className:"flex space-x-2",children:[P.is_suspended?e.jsx(mt,{size:"sm",variant:"outline",onClick:()=>R(P.id),children:e.jsx(Ze,{className:"w-4 h-4"})}):e.jsx(mt,{size:"sm",variant:"outline",onClick:()=>S(P.id),children:e.jsx(Yy,{className:"w-4 h-4"})}),e.jsx(mt,{size:"sm",variant:"outline",onClick:()=>b(`/admin87476463/users/${P.id}`),children:e.jsx(Vi,{className:"w-4 h-4"})})]})})]},P.id)})})]})})]})]})})]})}function Ov({className:a,...l}){return e.jsx("textarea",{"data-slot":"textarea",className:Be("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...l})}function m4(){const{userId:a}=Wo(),l=Lt(),[i,c]=f.useState(!0),[o,u]=f.useState(!1),[h,p]=f.useState(""),[g,y]=f.useState(""),[x,j]=f.useState(null),[b,A]=f.useState({name:"",email:"",admin_notes:"",newPassword:""}),[T,D]=f.useState(!1),[S,R]=f.useState(""),[k,E]=f.useState(""),[w,C]=f.useState(""),[q,I]=f.useState(!1);f.useEffect(()=>{W()},[a]);const W=async()=>{try{c(!0);const v=await fetch(`/api/admin/users/${a}`,{credentials:"include"});if(!v.ok)throw new Error("Failed to fetch user details");const O=await v.json();j(O),A({name:O.user.name||"",email:O.user.email||"",admin_notes:O.user.admin_notes||"",newPassword:""})}catch(v){p(v.message)}finally{c(!1)}},P=async()=>{try{u(!0),p(""),y("");const v={name:b.name,email:b.email,admin_notes:b.admin_notes};b.newPassword&&b.newPassword.length>=8&&(v.password=b.newPassword);const O=await fetch(`/api/admin/users/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(v)});if(!O.ok){const M=await O.json();throw new Error(M.error||"Failed to update user")}v.password?y("User updated successfully! Password has been changed."):y("User updated successfully"),await W()}catch(v){p(v.message)}finally{u(!1)}},Y=async()=>{if(confirm(`Are you sure you want to ${x.user.is_suspended?"unsuspend":"suspend"} this user?`))try{u(!0),p(""),y("");const v=x.user.is_suspended?"unsuspend":"suspend",O=await fetch(`/api/admin/users/${a}/${v}`,{method:"POST",credentials:"include"});if(!O.ok){const M=await O.json();throw new Error(M.error||`Failed to ${v} user`)}y(`User ${v}ed successfully`),await W()}catch(v){p(v.message)}finally{u(!1)}},B=async()=>{try{I(!0),p(""),y("");const v=S==="soft"?"soft-delete":"hard-delete",O=S==="soft"?{reason:k}:{confirmation:w},M=await fetch(`/api/admin/users/${a}/${v}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(O)});if(!M.ok){const Q=await M.json();throw new Error(Q.error||"Failed to delete user")}const U=await M.json();y(U.message),D(!1),setTimeout(()=>{l("/admin87476463/dashboard")},2e3)}catch(v){p(v.message)}finally{I(!1)}},le=v=>{R(v),E(""),C(""),D(!0)},Z=v=>v?new Date(v).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";if(i)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Loading user details..."})});if(!x)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ja,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"User not found"}),e.jsx(mt,{onClick:()=>l("/admin87476463/dashboard"),children:"Back to Dashboard"})]})});const{user:$,membership:ee,organisation:N,audit_logs:L}=x;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:ml,alt:"WorkTrackr",className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"WorkTrackr Admin"}),e.jsx("p",{className:"text-xs text-gray-500",children:"User Details"})]})]}),e.jsxs(mt,{variant:"outline",onClick:()=>l("/admin87476463/dashboard"),children:[e.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center",children:[e.jsx(ja,{className:"w-5 h-5 mr-2"}),h]}),g&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg flex items-center",children:[e.jsx(Ze,{className:"w-5 h-5 mr-2"}),g]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Basic Information"}),e.jsx($s,{children:"User account details"})]}),e.jsxs(ns,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"User ID"}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:$.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Created"}),e.jsx("p",{children:Z($.created_at)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Last Login"}),e.jsx("p",{children:Z($.last_login)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Status"}),e.jsx(pa,{variant:$.is_suspended?"destructive":"success",children:$.is_suspended?"Suspended":"Active"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),e.jsx(va,{value:b.name,onChange:v=>A({...b,name:v.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx(va,{type:"email",value:b.email,onChange:v=>A({...b,email:v.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Admin Notes"}),e.jsx(Ov,{value:b.admin_notes,onChange:v=>A({...b,admin_notes:v.target.value}),rows:4,placeholder:"Add internal notes about this user..."})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ja,{className:"w-4 h-4 text-yellow-600"}),e.jsx("label",{className:"block text-sm font-medium",children:"Change Password"})]}),e.jsx(va,{type:"password",value:b.newPassword,onChange:v=>A({...b,newPassword:v.target.value}),placeholder:"Enter new password (min 8 characters, leave empty to keep current)",minLength:8}),e.jsx("p",{className:"text-xs text-gray-600",children:" Leave empty to keep the current password. Minimum 8 characters required for new password."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(mt,{onClick:P,disabled:o,children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),o?"Saving...":"Save Changes"]}),e.jsx(mt,{variant:$.is_suspended?"outline":"destructive",onClick:Y,disabled:o,children:$.is_suspended?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Unsuspend User"]}):e.jsxs(e.Fragment,{children:[e.jsx(Yy,{className:"w-4 h-4 mr-2"}),"Suspend User"]})}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs(mt,{variant:"outline",onClick:()=>le("soft"),disabled:o||q,className:"border-orange-300 text-orange-600 hover:bg-orange-50",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Disable Login"]}),e.jsxs(mt,{variant:"destructive",onClick:()=>le("hard"),disabled:o||q,children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})]})]})]}),N&&e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Organization"}),e.jsx($s,{children:"Subscription and billing details"})]}),e.jsxs(ns,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Organization Name"}),e.jsx("p",{className:"font-medium",children:N.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Role"}),e.jsx(pa,{variant:"outline",children:(ee==null?void 0:ee.role)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Plan"}),e.jsx(pa,{children:N.plan})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Seats"}),e.jsxs("p",{children:[N.active_user_count||0," / ",N.included_seats||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Current Period End"}),e.jsx("p",{children:Z(N.current_period_end)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Stripe Customer"}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:N.stripe_customer_id||"N/A"})]})]}),N.cancelled_at&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("p",{className:"font-semibold text-yellow-800 mb-2",children:"Subscription Cancelled"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Date: ",Z(N.cancelled_at)]}),N.cancellation_reason&&e.jsxs("p",{className:"text-sm text-yellow-700",children:["Reason: ",N.cancellation_reason]}),N.cancellation_comment&&e.jsx("p",{className:"text-sm text-yellow-700 mt-2",children:N.cancellation_comment})]})]})]})]}),e.jsx("div",{children:e.jsxs(ts,{children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Audit Log"}),e.jsx($s,{children:"Recent admin actions"})]}),e.jsx(ns,{children:L&&L.length>0?e.jsx("div",{className:"space-y-3",children:L.map(v=>e.jsxs("div",{className:"text-sm border-l-2 border-gray-300 pl-3 py-2",children:[e.jsx("p",{className:"font-medium",children:v.action}),e.jsxs("p",{className:"text-gray-600 text-xs",children:["by ",v.actor_name||v.actor_email]}),e.jsx("p",{className:"text-gray-500 text-xs",children:Z(v.created_at)})]},v.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No audit logs available"})})]})})]})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:S==="soft"?"Disable User Login":"Permanently Delete User"}),S==="soft"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This will disable the user's login while keeping all their data in the database for records. The user will not be able to log in, but their information will remain accessible."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason (optional)"}),e.jsx(Ov,{value:k,onChange:v=>E(v.target.value),placeholder:"Enter reason for disabling this user...",rows:3})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:" Warning: This action cannot be undone!"}),e.jsx("p",{className:"text-sm text-red-700",children:"This will permanently delete:"}),e.jsxs("ul",{className:"text-sm text-red-700 list-disc list-inside mt-2",children:[e.jsx("li",{children:"User account and login credentials"}),e.jsx("li",{children:"Organization membership"}),e.jsx("li",{children:"All associated data"}),e.jsx("li",{children:"Audit logs for this user"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Type ",e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"DELETE"})," to confirm"]}),e.jsx(va,{value:w,onChange:v=>C(v.target.value),placeholder:"DELETE"})]})]}),h&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded text-sm",children:h}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(mt,{variant:"outline",onClick:()=>D(!1),disabled:q,className:"flex-1",children:"Cancel"}),e.jsx(mt,{variant:"destructive",onClick:B,disabled:q||S==="hard"&&w!=="DELETE",className:"flex-1",children:q?"Processing...":S==="soft"?"Disable Login":"Delete Permanently"})]})]})})]})}function h4({children:a}){const{user:l}=gl(),i=_a();return l===void 0?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):l?a:e.jsx(Ri,{to:`/login?next=${encodeURIComponent(i.pathname)}`,replace:!0})}const f4="modulepreload",x4=function(a){return"/"+a},zv={},m0=function(l,i,c){let o=Promise.resolve();if(i&&i.length>0){let h=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=h(i.map(y=>{if(y=x4(y),y in zv)return;zv[y]=!0;const x=y.endsWith(".css"),j=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${j}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":f4,x||(b.as="script"),b.crossOrigin="",b.href=y,g&&b.setAttribute("nonce",g),document.head.appendChild(b),x)return new Promise((A,T)=>{b.addEventListener("load",A),b.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return o.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return l().catch(u)})},p4=[{id:"1",name:"John Admin",email:"admin@worktrackr.com",role:"admin",isOrgOwner:!0,avatar:null,department:"Management",emailNotifications:!0,status:"active",createdAt:"2024-01-15T10:00:00Z",lastActive:"2024-01-20T14:30:00Z"},{id:"2",name:"Sarah Manager",email:"sarah@worktrackr.com",role:"manager",isOrgOwner:!1,avatar:null,department:"Operations",emailNotifications:!0,status:"active",createdAt:"2024-01-16T09:00:00Z",lastActive:"2024-01-20T13:45:00Z"},{id:"3",name:"Mike Technician",email:"mike@worktrackr.com",role:"staff",isOrgOwner:!1,avatar:null,department:"IT Support",emailNotifications:!0,status:"active",createdAt:"2024-01-17T08:00:00Z",lastActive:"2024-01-20T15:20:00Z"},{id:"4",name:"Lisa Maintenance",email:"lisa@worktrackr.com",role:"staff",isOrgOwner:!1,avatar:null,department:"Maintenance",emailNotifications:!0,status:"active",createdAt:"2024-01-18T07:30:00Z",lastActive:"2024-01-20T12:15:00Z"},{id:"5",name:"David Inspector",email:"david@worktrackr.com",role:"staff",isOrgOwner:!1,avatar:null,department:"Quality Control",emailNotifications:!0,status:"active",createdAt:"2024-01-19T07:00:00Z",lastActive:"2024-01-20T11:30:00Z"}],g4=[{id:"wf-1",name:"Maintenance Request Workflow",description:"Standard workflow for maintenance requests",stages:[{id:"stage-1",name:"New Request",color:"#3b82f6"},{id:"stage-2",name:"Assessment",color:"#f59e0b"},{id:"stage-3",name:"In Progress",color:"#10b981"},{id:"stage-4",name:"Review",color:"#8b5cf6"},{id:"stage-5",name:"Completed",color:"#6b7280"}],isActive:!0,createdAt:"2024-01-15T10:00:00Z"}],v4=[{value:"new",label:"New",color:"bg-blue-100 text-blue-800"},{value:"assigned",label:"Assigned",color:"bg-yellow-100 text-yellow-800"},{value:"in_progress",label:"In Progress",color:"bg-green-100 text-green-800"},{value:"waiting_approval",label:"Waiting Approval",color:"bg-purple-100 text-purple-800"},{value:"parked",label:"Parked",color:"bg-orange-100 text-orange-800"},{value:"completed",label:"Completed",color:"bg-gray-100 text-gray-800"},{value:"billed",label:"Billed",color:"bg-green-100 text-green-800"},{value:"deleted",label:"Deleted",color:"bg-red-100 text-red-800"}],h0=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800"},{value:"critical",label:"Critical",color:"bg-red-100 text-red-800"}],y4={id:"org-1",name:"WorkTrackr Demo Organization",subscription:{plan:"pro",maxUsers:5,currentUsers:1,additionalSeats:0,billingCycle:"monthly",amount:99,status:"active",nextBilling:"2024-12-20",stripeCustomerId:"cus_example123",stripeSubscriptionId:"sub_example456"},createdAt:"2024-01-15T10:00:00Z"},j4=({currentPage:a,onNavigate:l,user:i,isAdmin:c})=>{var j;const[o,u]=f.useState(!1),[h,p]=f.useState({tickets:!0,crm:!0,settings:!0}),g=b=>{p(A=>({...A,[b]:!A[b]}))},y=[{id:"dashboard",label:"Dashboard",icon:jS,view:"tickets"},{id:"tickets",label:"Tickets",icon:mr,view:"tickets",subItems:[{id:"all-tickets",label:"All Tickets",view:"tickets",icon:Zy},{id:"ticket-calendar",label:"Ticket Calendar",view:"calendar",icon:Ht}]},{id:"crm",label:"CRM",icon:hs,view:"crm",subItems:[{id:"contacts",label:"Contacts",view:"contacts",icon:VC},{id:"product-catalog",label:"Product Catalog",view:"crm",icon:BS},{id:"crm-calendar",label:"CRM Calendar",view:"crm-calendar",icon:Ht},{id:"quotes",label:"Quotes",view:"quotes",icon:Ct}]}];c&&y.push({id:"settings",label:"Settings",icon:ba,view:"users",subItems:[{id:"manage-users",label:"Manage Users",view:"users",icon:Nk},{id:"pricing-config",label:"Pricing Configuration",view:"pricing-config",icon:Hi},{id:"billing",label:"Billing",view:"billing",icon:qh},{id:"security",label:"Security",view:"security",icon:ol},{id:"email-intake",label:"Email Intake",view:"email-intake",icon:Ms}]});const x=b=>{l&&l(b)};return e.jsxs("div",{className:`h-screen bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ${o?"w-16":"w-60"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[!o&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",fill:"#1a1a1a"}),e.jsx("rect",{x:"7",y:"7",width:"10",height:"2",fill:"#fbbf24"}),e.jsx("rect",{x:"7",y:"11",width:"10",height:"2",fill:"#fbbf24"}),e.jsx("rect",{x:"7",y:"15",width:"6",height:"2",fill:"#fbbf24"})]}),e.jsxs("span",{className:"font-bold text-lg",children:["Work",e.jsx("span",{className:"text-yellow-500",children:"Trackr"})]})]}),e.jsx("button",{onClick:()=>u(!o),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:o?"Expand sidebar":"Collapse sidebar",children:o?e.jsx(oh,{className:"w-5 h-5 text-gray-600"}):e.jsx(Qy,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:y.map(b=>{const A=b.icon,T=a===b.id,D=h[b.id];return e.jsxs("div",{className:"mb-1",children:[e.jsxs("button",{onClick:()=>{b.subItems?g(b.id):x(b.view)},className:`w-full flex items-center px-4 py-2.5 text-sm font-medium transition-colors ${T?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50"} ${o?"justify-center":"justify-start"}`,title:o?b.label:"",children:[e.jsx(A,{className:`w-5 h-5 ${o?"":"mr-3"}`}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-left",children:b.label}),b.subItems&&e.jsx(oh,{className:`w-4 h-4 transition-transform ${D?"rotate-90":""}`})]})]}),b.subItems&&!o&&D&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:b.subItems.map(S=>{const R=S.icon,k=a===S.id;return e.jsxs("button",{onClick:()=>x(S.view),className:`w-full flex items-center px-4 py-2 text-sm transition-colors rounded-lg ${k?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[R&&e.jsx(R,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:S.label})]},S.id)})})]},b.id)})}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:o?e.jsx("button",{onClick:()=>x("/logout"),className:"w-full flex items-center justify-center p-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:"Logout",children:e.jsx(Pi,{className:"w-5 h-5"})}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:((j=i==null?void 0:i.name)==null?void 0:j.charAt(0))||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(i==null?void 0:i.name)||"User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:(i==null?void 0:i.email)||""})]})]}),e.jsxs("button",{onClick:()=>x("/logout"),className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(Pi,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Logout"})]})]})})]})},Gi=({children:a,user:l,isAdmin:i,onNavigate:c,lastUpdate:o})=>{var x,j;const[u,h]=f.useState(!1),[p,g]=f.useState(!1);f.useEffect(()=>{const b=()=>{g(window.innerWidth<768)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const y=b=>{h(!1),c&&c(b)};return e.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-50",children:[e.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 z-40 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>h(!u),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u?e.jsx(it,{className:"w-6 h-6 text-gray-600"}):e.jsx(OS,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",fill:"#1a1a1a"}),e.jsx("rect",{x:"7",y:"7",width:"10",height:"2",fill:"#fbbf24"}),e.jsx("rect",{x:"7",y:"11",width:"10",height:"2",fill:"#fbbf24"}),e.jsx("rect",{x:"7",y:"15",width:"6",height:"2",fill:"#fbbf24"})]}),e.jsxs("span",{className:"font-bold text-lg",children:["Work",e.jsx("span",{className:"text-yellow-500",children:"Trackr"})]})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:((x=l==null?void 0:l.name)==null?void 0:x.charAt(0))||"U"})]}),u&&e.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>h(!1)}),e.jsx("div",{className:`
          md:relative fixed inset-y-0 left-0 z-50
          ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}
          transition-transform duration-300 ease-in-out
        `,children:e.jsx(j4,{onNavigate:y,user:l,isAdmin:i})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"hidden md:flex bg-white border-b border-gray-200 px-6 py-3 items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Welcome back, ",(l==null?void 0:l.name)||"User"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i?"Manage your organization and workflows":"View and manage your assigned tickets",o&&e.jsxs("span",{className:"ml-2",children:[" Last updated: ",o.toLocaleTimeString()]})]})]}),e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full px-4 py-2 pl-10 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]})}),e.jsxs("div",{className:"flex items-center space-x-4 ml-6",children:[e.jsxs("button",{className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex items-center space-x-3 pl-4 border-l border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:((j=l==null?void 0:l.name)==null?void 0:j.charAt(0))||"U"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:(l==null?void 0:l.name)||"User"}),e.jsx("p",{className:"text-gray-500 text-xs",children:(l==null?void 0:l.role)||"Member"})]}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-100 pt-16 md:pt-0",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:a})})})]})]})},b4=gr("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function He({className:a,variant:l,asChild:i=!1,...c}){const o=i?Ko:"span";return e.jsx(o,{"data-slot":"badge",className:Be(b4({variant:l}),a),...c})}function Gh(a){const l=a+"CollectionProvider",[i,c]=Ta(l),[o,u]=i(l,{collectionRef:{current:null},itemMap:new Map}),h=D=>{const{scope:S,children:R}=D,k=As.useRef(null),E=As.useRef(new Map).current;return e.jsx(o,{scope:S,itemMap:E,collectionRef:k,children:R})};h.displayName=l;const p=a+"CollectionSlot",g=ul(p),y=As.forwardRef((D,S)=>{const{scope:R,children:k}=D,E=u(p,R),w=ft(S,E.collectionRef);return e.jsx(g,{ref:w,children:k})});y.displayName=p;const x=a+"CollectionItemSlot",j="data-radix-collection-item",b=ul(x),A=As.forwardRef((D,S)=>{const{scope:R,children:k,...E}=D,w=As.useRef(null),C=ft(S,w),q=u(x,R);return As.useEffect(()=>(q.itemMap.set(w,{ref:w,...E}),()=>void q.itemMap.delete(w))),e.jsx(b,{[j]:"",ref:C,children:k})});A.displayName=x;function T(D){const S=u(a+"CollectionConsumer",D);return As.useCallback(()=>{const k=S.collectionRef.current;if(!k)return[];const E=Array.from(k.querySelectorAll(`[${j}]`));return Array.from(S.itemMap.values()).sort((q,I)=>E.indexOf(q.ref.current)-E.indexOf(I.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:h,Slot:y,ItemSlot:A},T,c]}var N4=gy[" useId ".trim().toString()]||(()=>{}),w4=0;function Na(a){const[l,i]=f.useState(N4());return ds(()=>{i(c=>c??String(w4++))},[a]),a||(l?`radix-${l}`:"")}function Sa(a){const l=f.useRef(a);return f.useEffect(()=>{l.current=a}),f.useMemo(()=>(...i)=>{var c;return(c=l.current)==null?void 0:c.call(l,...i)},[])}var C4=f.createContext(void 0);function ed(a){const l=f.useContext(C4);return a||l||"ltr"}var Fm="rovingFocusGroup.onEntryFocus",S4={bubbles:!1,cancelable:!0},Yi="RovingFocusGroup",[mh,f0,k4]=Gh(Yi),[_4,td]=Ta(Yi,[k4]),[T4,E4]=_4(Yi),x0=f.forwardRef((a,l)=>e.jsx(mh.Provider,{scope:a.__scopeRovingFocusGroup,children:e.jsx(mh.Slot,{scope:a.__scopeRovingFocusGroup,children:e.jsx(A4,{...a,ref:l})})}));x0.displayName=Yi;var A4=f.forwardRef((a,l)=>{const{__scopeRovingFocusGroup:i,orientation:c,loop:o=!1,dir:u,currentTabStopId:h,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:g,onEntryFocus:y,preventScrollOnEntryFocus:x=!1,...j}=a,b=f.useRef(null),A=ft(l,b),T=ed(u),[D,S]=Rn({prop:h,defaultProp:p??null,onChange:g,caller:Yi}),[R,k]=f.useState(!1),E=Sa(y),w=f0(i),C=f.useRef(!1),[q,I]=f.useState(0);return f.useEffect(()=>{const W=b.current;if(W)return W.addEventListener(Fm,E),()=>W.removeEventListener(Fm,E)},[E]),e.jsx(T4,{scope:i,orientation:c,dir:T,loop:o,currentTabStopId:D,onItemFocus:f.useCallback(W=>S(W),[S]),onItemShiftTab:f.useCallback(()=>k(!0),[]),onFocusableItemAdd:f.useCallback(()=>I(W=>W+1),[]),onFocusableItemRemove:f.useCallback(()=>I(W=>W-1),[]),children:e.jsx(Qe.div,{tabIndex:R||q===0?-1:0,"data-orientation":c,...j,ref:A,style:{outline:"none",...a.style},onMouseDown:Re(a.onMouseDown,()=>{C.current=!0}),onFocus:Re(a.onFocus,W=>{const P=!C.current;if(W.target===W.currentTarget&&P&&!R){const Y=new CustomEvent(Fm,S4);if(W.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const B=w().filter(N=>N.focusable),le=B.find(N=>N.active),Z=B.find(N=>N.id===D),ee=[le,Z,...B].filter(Boolean).map(N=>N.ref.current);v0(ee,x)}}C.current=!1}),onBlur:Re(a.onBlur,()=>k(!1))})})}),p0="RovingFocusGroupItem",g0=f.forwardRef((a,l)=>{const{__scopeRovingFocusGroup:i,focusable:c=!0,active:o=!1,tabStopId:u,children:h,...p}=a,g=Na(),y=u||g,x=E4(p0,i),j=x.currentTabStopId===y,b=f0(i),{onFocusableItemAdd:A,onFocusableItemRemove:T,currentTabStopId:D}=x;return f.useEffect(()=>{if(c)return A(),()=>T()},[c,A,T]),e.jsx(mh.ItemSlot,{scope:i,id:y,focusable:c,active:o,children:e.jsx(Qe.span,{tabIndex:j?0:-1,"data-orientation":x.orientation,...p,ref:l,onMouseDown:Re(a.onMouseDown,S=>{c?x.onItemFocus(y):S.preventDefault()}),onFocus:Re(a.onFocus,()=>x.onItemFocus(y)),onKeyDown:Re(a.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){x.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const R=R4(S,x.orientation,x.dir);if(R!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let E=b().filter(w=>w.focusable).map(w=>w.ref.current);if(R==="last")E.reverse();else if(R==="prev"||R==="next"){R==="prev"&&E.reverse();const w=E.indexOf(S.currentTarget);E=x.loop?O4(E,w+1):E.slice(w+1)}setTimeout(()=>v0(E))}}),children:typeof h=="function"?h({isCurrentTabStop:j,hasTabStop:D!=null}):h})})});g0.displayName=p0;var D4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function M4(a,l){return l!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function R4(a,l,i){const c=M4(a.key,i);if(!(l==="vertical"&&["ArrowLeft","ArrowRight"].includes(c))&&!(l==="horizontal"&&["ArrowUp","ArrowDown"].includes(c)))return D4[c]}function v0(a,l=!1){const i=document.activeElement;for(const c of a)if(c===i||(c.focus({preventScroll:l}),document.activeElement!==i))return}function O4(a,l){return a.map((i,c)=>a[(l+c)%a.length])}var y0=x0,j0=g0,sd="Tabs",[z4,$6]=Ta(sd,[td]),b0=td(),[P4,Yh]=z4(sd),N0=f.forwardRef((a,l)=>{const{__scopeTabs:i,value:c,onValueChange:o,defaultValue:u,orientation:h="horizontal",dir:p,activationMode:g="automatic",...y}=a,x=ed(p),[j,b]=Rn({prop:c,onChange:o,defaultProp:u??"",caller:sd});return e.jsx(P4,{scope:i,baseId:Na(),value:j,onValueChange:b,orientation:h,dir:x,activationMode:g,children:e.jsx(Qe.div,{dir:x,"data-orientation":h,...y,ref:l})})});N0.displayName=sd;var w0="TabsList",C0=f.forwardRef((a,l)=>{const{__scopeTabs:i,loop:c=!0,...o}=a,u=Yh(w0,i),h=b0(i);return e.jsx(y0,{asChild:!0,...h,orientation:u.orientation,dir:u.dir,loop:c,children:e.jsx(Qe.div,{role:"tablist","aria-orientation":u.orientation,...o,ref:l})})});C0.displayName=w0;var S0="TabsTrigger",k0=f.forwardRef((a,l)=>{const{__scopeTabs:i,value:c,disabled:o=!1,...u}=a,h=Yh(S0,i),p=b0(i),g=E0(h.baseId,c),y=A0(h.baseId,c),x=c===h.value;return e.jsx(j0,{asChild:!0,...p,focusable:!o,active:x,children:e.jsx(Qe.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":y,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:g,...u,ref:l,onMouseDown:Re(a.onMouseDown,j=>{!o&&j.button===0&&j.ctrlKey===!1?h.onValueChange(c):j.preventDefault()}),onKeyDown:Re(a.onKeyDown,j=>{[" ","Enter"].includes(j.key)&&h.onValueChange(c)}),onFocus:Re(a.onFocus,()=>{const j=h.activationMode!=="manual";!x&&!o&&j&&h.onValueChange(c)})})})});k0.displayName=S0;var _0="TabsContent",T0=f.forwardRef((a,l)=>{const{__scopeTabs:i,value:c,forceMount:o,children:u,...h}=a,p=Yh(_0,i),g=E0(p.baseId,c),y=A0(p.baseId,c),x=c===p.value,j=f.useRef(x);return f.useEffect(()=>{const b=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(b)},[]),e.jsx(Ea,{present:o||x,children:({present:b})=>e.jsx(Qe.div,{"data-state":x?"active":"inactive","data-orientation":p.orientation,role:"tabpanel","aria-labelledby":g,hidden:!b,id:y,tabIndex:0,...h,ref:l,style:{...a.style,animationDuration:j.current?"0s":void 0},children:b&&u})})});T0.displayName=_0;function E0(a,l){return`${a}-trigger-${l}`}function A0(a,l){return`${a}-content-${l}`}var L4=N0,U4=C0,q4=k0,I4=T0;function Ja({className:a,...l}){return e.jsx(L4,{"data-slot":"tabs",className:Be("flex flex-col gap-2",a),...l})}function en({className:a,...l}){return e.jsx(U4,{"data-slot":"tabs-list",className:Be("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...l})}function ct({className:a,...l}){return e.jsx(q4,{"data-slot":"tabs-trigger",className:Be("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...l})}function ot({className:a,...l}){return e.jsx(I4,{"data-slot":"tabs-content",className:Be("flex-1 outline-none",a),...l})}function Pv(a,[l,i]){return Math.min(i,Math.max(l,a))}function B4(a,l=globalThis==null?void 0:globalThis.document){const i=Sa(a);f.useEffect(()=>{const c=o=>{o.key==="Escape"&&i(o)};return l.addEventListener("keydown",c,{capture:!0}),()=>l.removeEventListener("keydown",c,{capture:!0})},[i,l])}var F4="DismissableLayer",hh="dismissableLayer.update",$4="dismissableLayer.pointerDownOutside",H4="dismissableLayer.focusOutside",Lv,D0=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ad=f.forwardRef((a,l)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:c,onPointerDownOutside:o,onFocusOutside:u,onInteractOutside:h,onDismiss:p,...g}=a,y=f.useContext(D0),[x,j]=f.useState(null),b=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,A]=f.useState({}),T=ft(l,I=>j(I)),D=Array.from(y.layers),[S]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),R=D.indexOf(S),k=x?D.indexOf(x):-1,E=y.layersWithOutsidePointerEventsDisabled.size>0,w=k>=R,C=Y4(I=>{const W=I.target,P=[...y.branches].some(Y=>Y.contains(W));!w||P||(o==null||o(I),h==null||h(I),I.defaultPrevented||p==null||p())},b),q=Q4(I=>{const W=I.target;[...y.branches].some(Y=>Y.contains(W))||(u==null||u(I),h==null||h(I),I.defaultPrevented||p==null||p())},b);return B4(I=>{k===y.layers.size-1&&(c==null||c(I),!I.defaultPrevented&&p&&(I.preventDefault(),p()))},b),f.useEffect(()=>{if(x)return i&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(Lv=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(x)),y.layers.add(x),Uv(),()=>{i&&y.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Lv)}},[x,b,i,y]),f.useEffect(()=>()=>{x&&(y.layers.delete(x),y.layersWithOutsidePointerEventsDisabled.delete(x),Uv())},[x,y]),f.useEffect(()=>{const I=()=>A({});return document.addEventListener(hh,I),()=>document.removeEventListener(hh,I)},[]),e.jsx(Qe.div,{...g,ref:T,style:{pointerEvents:E?w?"auto":"none":void 0,...a.style},onFocusCapture:Re(a.onFocusCapture,q.onFocusCapture),onBlurCapture:Re(a.onBlurCapture,q.onBlurCapture),onPointerDownCapture:Re(a.onPointerDownCapture,C.onPointerDownCapture)})});ad.displayName=F4;var V4="DismissableLayerBranch",G4=f.forwardRef((a,l)=>{const i=f.useContext(D0),c=f.useRef(null),o=ft(l,c);return f.useEffect(()=>{const u=c.current;if(u)return i.branches.add(u),()=>{i.branches.delete(u)}},[i.branches]),e.jsx(Qe.div,{...a,ref:o})});G4.displayName=V4;function Y4(a,l=globalThis==null?void 0:globalThis.document){const i=Sa(a),c=f.useRef(!1),o=f.useRef(()=>{});return f.useEffect(()=>{const u=p=>{if(p.target&&!c.current){let g=function(){M0($4,i,y,{discrete:!0})};const y={originalEvent:p};p.pointerType==="touch"?(l.removeEventListener("click",o.current),o.current=g,l.addEventListener("click",o.current,{once:!0})):g()}else l.removeEventListener("click",o.current);c.current=!1},h=window.setTimeout(()=>{l.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(h),l.removeEventListener("pointerdown",u),l.removeEventListener("click",o.current)}},[l,i]),{onPointerDownCapture:()=>c.current=!0}}function Q4(a,l=globalThis==null?void 0:globalThis.document){const i=Sa(a),c=f.useRef(!1);return f.useEffect(()=>{const o=u=>{u.target&&!c.current&&M0(H4,i,{originalEvent:u},{discrete:!1})};return l.addEventListener("focusin",o),()=>l.removeEventListener("focusin",o)},[l,i]),{onFocusCapture:()=>c.current=!0,onBlurCapture:()=>c.current=!1}}function Uv(){const a=new CustomEvent(hh);document.dispatchEvent(a)}function M0(a,l,i,{discrete:c}){const o=i.originalEvent.target,u=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:i});l&&o.addEventListener(a,l,{once:!0}),c?s0(o,u):o.dispatchEvent(u)}var $m=0;function Qh(){f.useEffect(()=>{const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??qv()),document.body.insertAdjacentElement("beforeend",a[1]??qv()),$m++,()=>{$m===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(l=>l.remove()),$m--}},[])}function qv(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var Hm="focusScope.autoFocusOnMount",Vm="focusScope.autoFocusOnUnmount",Iv={bubbles:!1,cancelable:!0},W4="FocusScope",nd=f.forwardRef((a,l)=>{const{loop:i=!1,trapped:c=!1,onMountAutoFocus:o,onUnmountAutoFocus:u,...h}=a,[p,g]=f.useState(null),y=Sa(o),x=Sa(u),j=f.useRef(null),b=ft(l,D=>g(D)),A=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(c){let D=function(E){if(A.paused||!p)return;const w=E.target;p.contains(w)?j.current=w:En(j.current,{select:!0})},S=function(E){if(A.paused||!p)return;const w=E.relatedTarget;w!==null&&(p.contains(w)||En(j.current,{select:!0}))},R=function(E){if(document.activeElement===document.body)for(const C of E)C.removedNodes.length>0&&En(p)};document.addEventListener("focusin",D),document.addEventListener("focusout",S);const k=new MutationObserver(R);return p&&k.observe(p,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",S),k.disconnect()}}},[c,p,A.paused]),f.useEffect(()=>{if(p){Fv.add(A);const D=document.activeElement;if(!p.contains(D)){const R=new CustomEvent(Hm,Iv);p.addEventListener(Hm,y),p.dispatchEvent(R),R.defaultPrevented||(X4(t_(R0(p)),{select:!0}),document.activeElement===D&&En(p))}return()=>{p.removeEventListener(Hm,y),setTimeout(()=>{const R=new CustomEvent(Vm,Iv);p.addEventListener(Vm,x),p.dispatchEvent(R),R.defaultPrevented||En(D??document.body,{select:!0}),p.removeEventListener(Vm,x),Fv.remove(A)},0)}}},[p,y,x,A]);const T=f.useCallback(D=>{if(!i&&!c||A.paused)return;const S=D.key==="Tab"&&!D.altKey&&!D.ctrlKey&&!D.metaKey,R=document.activeElement;if(S&&R){const k=D.currentTarget,[E,w]=Z4(k);E&&w?!D.shiftKey&&R===w?(D.preventDefault(),i&&En(E,{select:!0})):D.shiftKey&&R===E&&(D.preventDefault(),i&&En(w,{select:!0})):R===k&&D.preventDefault()}},[i,c,A.paused]);return e.jsx(Qe.div,{tabIndex:-1,...h,ref:b,onKeyDown:T})});nd.displayName=W4;function X4(a,{select:l=!1}={}){const i=document.activeElement;for(const c of a)if(En(c,{select:l}),document.activeElement!==i)return}function Z4(a){const l=R0(a),i=Bv(l,a),c=Bv(l.reverse(),a);return[i,c]}function R0(a){const l=[],i=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>{const o=c.tagName==="INPUT"&&c.type==="hidden";return c.disabled||c.hidden||o?NodeFilter.FILTER_SKIP:c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)l.push(i.currentNode);return l}function Bv(a,l){for(const i of a)if(!K4(i,{upTo:l}))return i}function K4(a,{upTo:l}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(l!==void 0&&a===l)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function J4(a){return a instanceof HTMLInputElement&&"select"in a}function En(a,{select:l=!1}={}){if(a&&a.focus){const i=document.activeElement;a.focus({preventScroll:!0}),a!==i&&J4(a)&&l&&a.select()}}var Fv=e_();function e_(){let a=[];return{add(l){const i=a[0];l!==i&&(i==null||i.pause()),a=$v(a,l),a.unshift(l)},remove(l){var i;a=$v(a,l),(i=a[0])==null||i.resume()}}}function $v(a,l){const i=[...a],c=i.indexOf(l);return c!==-1&&i.splice(c,1),i}function t_(a){return a.filter(l=>l.tagName!=="A")}const s_=["top","right","bottom","left"],On=Math.min,Ds=Math.max,Ro=Math.round,ho=Math.floor,wa=a=>({x:a,y:a}),a_={left:"right",right:"left",bottom:"top",top:"bottom"},n_={start:"end",end:"start"};function fh(a,l,i){return Ds(a,On(l,i))}function tn(a,l){return typeof a=="function"?a(l):a}function sn(a){return a.split("-")[0]}function br(a){return a.split("-")[1]}function Wh(a){return a==="x"?"y":"x"}function Xh(a){return a==="y"?"height":"width"}const l_=new Set(["top","bottom"]);function ya(a){return l_.has(sn(a))?"y":"x"}function Zh(a){return Wh(ya(a))}function r_(a,l,i){i===void 0&&(i=!1);const c=br(a),o=Zh(a),u=Xh(o);let h=o==="x"?c===(i?"end":"start")?"right":"left":c==="start"?"bottom":"top";return l.reference[u]>l.floating[u]&&(h=Oo(h)),[h,Oo(h)]}function i_(a){const l=Oo(a);return[xh(a),l,xh(l)]}function xh(a){return a.replace(/start|end/g,l=>n_[l])}const Hv=["left","right"],Vv=["right","left"],c_=["top","bottom"],o_=["bottom","top"];function d_(a,l,i){switch(a){case"top":case"bottom":return i?l?Vv:Hv:l?Hv:Vv;case"left":case"right":return l?c_:o_;default:return[]}}function u_(a,l,i,c){const o=br(a);let u=d_(sn(a),i==="start",c);return o&&(u=u.map(h=>h+"-"+o),l&&(u=u.concat(u.map(xh)))),u}function Oo(a){return a.replace(/left|right|bottom|top/g,l=>a_[l])}function m_(a){return{top:0,right:0,bottom:0,left:0,...a}}function O0(a){return typeof a!="number"?m_(a):{top:a,right:a,bottom:a,left:a}}function zo(a){const{x:l,y:i,width:c,height:o}=a;return{width:c,height:o,top:i,left:l,right:l+c,bottom:i+o,x:l,y:i}}function Gv(a,l,i){let{reference:c,floating:o}=a;const u=ya(l),h=Zh(l),p=Xh(h),g=sn(l),y=u==="y",x=c.x+c.width/2-o.width/2,j=c.y+c.height/2-o.height/2,b=c[p]/2-o[p]/2;let A;switch(g){case"top":A={x,y:c.y-o.height};break;case"bottom":A={x,y:c.y+c.height};break;case"right":A={x:c.x+c.width,y:j};break;case"left":A={x:c.x-o.width,y:j};break;default:A={x:c.x,y:c.y}}switch(br(l)){case"start":A[h]-=b*(i&&y?-1:1);break;case"end":A[h]+=b*(i&&y?-1:1);break}return A}const h_=async(a,l,i)=>{const{placement:c="bottom",strategy:o="absolute",middleware:u=[],platform:h}=i,p=u.filter(Boolean),g=await(h.isRTL==null?void 0:h.isRTL(l));let y=await h.getElementRects({reference:a,floating:l,strategy:o}),{x,y:j}=Gv(y,c,g),b=c,A={},T=0;for(let D=0;D<p.length;D++){const{name:S,fn:R}=p[D],{x:k,y:E,data:w,reset:C}=await R({x,y:j,initialPlacement:c,placement:b,strategy:o,middlewareData:A,rects:y,platform:h,elements:{reference:a,floating:l}});x=k??x,j=E??j,A={...A,[S]:{...A[S],...w}},C&&T<=50&&(T++,typeof C=="object"&&(C.placement&&(b=C.placement),C.rects&&(y=C.rects===!0?await h.getElementRects({reference:a,floating:l,strategy:o}):C.rects),{x,y:j}=Gv(y,b,g)),D=-1)}return{x,y:j,placement:b,strategy:o,middlewareData:A}};async function Li(a,l){var i;l===void 0&&(l={});const{x:c,y:o,platform:u,rects:h,elements:p,strategy:g}=a,{boundary:y="clippingAncestors",rootBoundary:x="viewport",elementContext:j="floating",altBoundary:b=!1,padding:A=0}=tn(l,a),T=O0(A),S=p[b?j==="floating"?"reference":"floating":j],R=zo(await u.getClippingRect({element:(i=await(u.isElement==null?void 0:u.isElement(S)))==null||i?S:S.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(p.floating)),boundary:y,rootBoundary:x,strategy:g})),k=j==="floating"?{x:c,y:o,width:h.floating.width,height:h.floating.height}:h.reference,E=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p.floating)),w=await(u.isElement==null?void 0:u.isElement(E))?await(u.getScale==null?void 0:u.getScale(E))||{x:1,y:1}:{x:1,y:1},C=zo(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:p,rect:k,offsetParent:E,strategy:g}):k);return{top:(R.top-C.top+T.top)/w.y,bottom:(C.bottom-R.bottom+T.bottom)/w.y,left:(R.left-C.left+T.left)/w.x,right:(C.right-R.right+T.right)/w.x}}const f_=a=>({name:"arrow",options:a,async fn(l){const{x:i,y:c,placement:o,rects:u,platform:h,elements:p,middlewareData:g}=l,{element:y,padding:x=0}=tn(a,l)||{};if(y==null)return{};const j=O0(x),b={x:i,y:c},A=Zh(o),T=Xh(A),D=await h.getDimensions(y),S=A==="y",R=S?"top":"left",k=S?"bottom":"right",E=S?"clientHeight":"clientWidth",w=u.reference[T]+u.reference[A]-b[A]-u.floating[T],C=b[A]-u.reference[A],q=await(h.getOffsetParent==null?void 0:h.getOffsetParent(y));let I=q?q[E]:0;(!I||!await(h.isElement==null?void 0:h.isElement(q)))&&(I=p.floating[E]||u.floating[T]);const W=w/2-C/2,P=I/2-D[T]/2-1,Y=On(j[R],P),B=On(j[k],P),le=Y,Z=I-D[T]-B,$=I/2-D[T]/2+W,ee=fh(le,$,Z),N=!g.arrow&&br(o)!=null&&$!==ee&&u.reference[T]/2-($<le?Y:B)-D[T]/2<0,L=N?$<le?$-le:$-Z:0;return{[A]:b[A]+L,data:{[A]:ee,centerOffset:$-ee-L,...N&&{alignmentOffset:L}},reset:N}}}),x_=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(l){var i,c;const{placement:o,middlewareData:u,rects:h,initialPlacement:p,platform:g,elements:y}=l,{mainAxis:x=!0,crossAxis:j=!0,fallbackPlacements:b,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:D=!0,...S}=tn(a,l);if((i=u.arrow)!=null&&i.alignmentOffset)return{};const R=sn(o),k=ya(p),E=sn(p)===p,w=await(g.isRTL==null?void 0:g.isRTL(y.floating)),C=b||(E||!D?[Oo(p)]:i_(p)),q=T!=="none";!b&&q&&C.push(...u_(p,D,T,w));const I=[p,...C],W=await Li(l,S),P=[];let Y=((c=u.flip)==null?void 0:c.overflows)||[];if(x&&P.push(W[R]),j){const $=r_(o,h,w);P.push(W[$[0]],W[$[1]])}if(Y=[...Y,{placement:o,overflows:P}],!P.every($=>$<=0)){var B,le;const $=(((B=u.flip)==null?void 0:B.index)||0)+1,ee=I[$];if(ee&&(!(j==="alignment"?k!==ya(ee):!1)||Y.every(v=>ya(v.placement)===k?v.overflows[0]>0:!0)))return{data:{index:$,overflows:Y},reset:{placement:ee}};let N=(le=Y.filter(L=>L.overflows[0]<=0).sort((L,v)=>L.overflows[1]-v.overflows[1])[0])==null?void 0:le.placement;if(!N)switch(A){case"bestFit":{var Z;const L=(Z=Y.filter(v=>{if(q){const O=ya(v.placement);return O===k||O==="y"}return!0}).map(v=>[v.placement,v.overflows.filter(O=>O>0).reduce((O,M)=>O+M,0)]).sort((v,O)=>v[1]-O[1])[0])==null?void 0:Z[0];L&&(N=L);break}case"initialPlacement":N=p;break}if(o!==N)return{reset:{placement:N}}}return{}}}};function Yv(a,l){return{top:a.top-l.height,right:a.right-l.width,bottom:a.bottom-l.height,left:a.left-l.width}}function Qv(a){return s_.some(l=>a[l]>=0)}const p_=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(l){const{rects:i}=l,{strategy:c="referenceHidden",...o}=tn(a,l);switch(c){case"referenceHidden":{const u=await Li(l,{...o,elementContext:"reference"}),h=Yv(u,i.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:Qv(h)}}}case"escaped":{const u=await Li(l,{...o,altBoundary:!0}),h=Yv(u,i.floating);return{data:{escapedOffsets:h,escaped:Qv(h)}}}default:return{}}}}},z0=new Set(["left","top"]);async function g_(a,l){const{placement:i,platform:c,elements:o}=a,u=await(c.isRTL==null?void 0:c.isRTL(o.floating)),h=sn(i),p=br(i),g=ya(i)==="y",y=z0.has(h)?-1:1,x=u&&g?-1:1,j=tn(l,a);let{mainAxis:b,crossAxis:A,alignmentAxis:T}=typeof j=="number"?{mainAxis:j,crossAxis:0,alignmentAxis:null}:{mainAxis:j.mainAxis||0,crossAxis:j.crossAxis||0,alignmentAxis:j.alignmentAxis};return p&&typeof T=="number"&&(A=p==="end"?T*-1:T),g?{x:A*x,y:b*y}:{x:b*y,y:A*x}}const v_=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(l){var i,c;const{x:o,y:u,placement:h,middlewareData:p}=l,g=await g_(l,a);return h===((i=p.offset)==null?void 0:i.placement)&&(c=p.arrow)!=null&&c.alignmentOffset?{}:{x:o+g.x,y:u+g.y,data:{...g,placement:h}}}}},y_=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(l){const{x:i,y:c,placement:o}=l,{mainAxis:u=!0,crossAxis:h=!1,limiter:p={fn:S=>{let{x:R,y:k}=S;return{x:R,y:k}}},...g}=tn(a,l),y={x:i,y:c},x=await Li(l,g),j=ya(sn(o)),b=Wh(j);let A=y[b],T=y[j];if(u){const S=b==="y"?"top":"left",R=b==="y"?"bottom":"right",k=A+x[S],E=A-x[R];A=fh(k,A,E)}if(h){const S=j==="y"?"top":"left",R=j==="y"?"bottom":"right",k=T+x[S],E=T-x[R];T=fh(k,T,E)}const D=p.fn({...l,[b]:A,[j]:T});return{...D,data:{x:D.x-i,y:D.y-c,enabled:{[b]:u,[j]:h}}}}}},j_=function(a){return a===void 0&&(a={}),{options:a,fn(l){const{x:i,y:c,placement:o,rects:u,middlewareData:h}=l,{offset:p=0,mainAxis:g=!0,crossAxis:y=!0}=tn(a,l),x={x:i,y:c},j=ya(o),b=Wh(j);let A=x[b],T=x[j];const D=tn(p,l),S=typeof D=="number"?{mainAxis:D,crossAxis:0}:{mainAxis:0,crossAxis:0,...D};if(g){const E=b==="y"?"height":"width",w=u.reference[b]-u.floating[E]+S.mainAxis,C=u.reference[b]+u.reference[E]-S.mainAxis;A<w?A=w:A>C&&(A=C)}if(y){var R,k;const E=b==="y"?"width":"height",w=z0.has(sn(o)),C=u.reference[j]-u.floating[E]+(w&&((R=h.offset)==null?void 0:R[j])||0)+(w?0:S.crossAxis),q=u.reference[j]+u.reference[E]+(w?0:((k=h.offset)==null?void 0:k[j])||0)-(w?S.crossAxis:0);T<C?T=C:T>q&&(T=q)}return{[b]:A,[j]:T}}}},b_=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(l){var i,c;const{placement:o,rects:u,platform:h,elements:p}=l,{apply:g=()=>{},...y}=tn(a,l),x=await Li(l,y),j=sn(o),b=br(o),A=ya(o)==="y",{width:T,height:D}=u.floating;let S,R;j==="top"||j==="bottom"?(S=j,R=b===(await(h.isRTL==null?void 0:h.isRTL(p.floating))?"start":"end")?"left":"right"):(R=j,S=b==="end"?"top":"bottom");const k=D-x.top-x.bottom,E=T-x.left-x.right,w=On(D-x[S],k),C=On(T-x[R],E),q=!l.middlewareData.shift;let I=w,W=C;if((i=l.middlewareData.shift)!=null&&i.enabled.x&&(W=E),(c=l.middlewareData.shift)!=null&&c.enabled.y&&(I=k),q&&!b){const Y=Ds(x.left,0),B=Ds(x.right,0),le=Ds(x.top,0),Z=Ds(x.bottom,0);A?W=T-2*(Y!==0||B!==0?Y+B:Ds(x.left,x.right)):I=D-2*(le!==0||Z!==0?le+Z:Ds(x.top,x.bottom))}await g({...l,availableWidth:W,availableHeight:I});const P=await h.getDimensions(p.floating);return T!==P.width||D!==P.height?{reset:{rects:!0}}:{}}}};function ld(){return typeof window<"u"}function Nr(a){return P0(a)?(a.nodeName||"").toLowerCase():"#document"}function Rs(a){var l;return(a==null||(l=a.ownerDocument)==null?void 0:l.defaultView)||window}function Aa(a){var l;return(l=(P0(a)?a.ownerDocument:a.document)||window.document)==null?void 0:l.documentElement}function P0(a){return ld()?a instanceof Node||a instanceof Rs(a).Node:!1}function aa(a){return ld()?a instanceof Element||a instanceof Rs(a).Element:!1}function ka(a){return ld()?a instanceof HTMLElement||a instanceof Rs(a).HTMLElement:!1}function Wv(a){return!ld()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof Rs(a).ShadowRoot}const N_=new Set(["inline","contents"]);function Qi(a){const{overflow:l,overflowX:i,overflowY:c,display:o}=na(a);return/auto|scroll|overlay|hidden|clip/.test(l+c+i)&&!N_.has(o)}const w_=new Set(["table","td","th"]);function C_(a){return w_.has(Nr(a))}const S_=[":popover-open",":modal"];function rd(a){return S_.some(l=>{try{return a.matches(l)}catch{return!1}})}const k_=["transform","translate","scale","rotate","perspective"],__=["transform","translate","scale","rotate","perspective","filter"],T_=["paint","layout","strict","content"];function Kh(a){const l=Jh(),i=aa(a)?na(a):a;return k_.some(c=>i[c]?i[c]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!l&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!l&&(i.filter?i.filter!=="none":!1)||__.some(c=>(i.willChange||"").includes(c))||T_.some(c=>(i.contain||"").includes(c))}function E_(a){let l=zn(a);for(;ka(l)&&!hr(l);){if(Kh(l))return l;if(rd(l))return null;l=zn(l)}return null}function Jh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const A_=new Set(["html","body","#document"]);function hr(a){return A_.has(Nr(a))}function na(a){return Rs(a).getComputedStyle(a)}function id(a){return aa(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function zn(a){if(Nr(a)==="html")return a;const l=a.assignedSlot||a.parentNode||Wv(a)&&a.host||Aa(a);return Wv(l)?l.host:l}function L0(a){const l=zn(a);return hr(l)?a.ownerDocument?a.ownerDocument.body:a.body:ka(l)&&Qi(l)?l:L0(l)}function Ui(a,l,i){var c;l===void 0&&(l=[]),i===void 0&&(i=!0);const o=L0(a),u=o===((c=a.ownerDocument)==null?void 0:c.body),h=Rs(o);if(u){const p=ph(h);return l.concat(h,h.visualViewport||[],Qi(o)?o:[],p&&i?Ui(p):[])}return l.concat(o,Ui(o,[],i))}function ph(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function U0(a){const l=na(a);let i=parseFloat(l.width)||0,c=parseFloat(l.height)||0;const o=ka(a),u=o?a.offsetWidth:i,h=o?a.offsetHeight:c,p=Ro(i)!==u||Ro(c)!==h;return p&&(i=u,c=h),{width:i,height:c,$:p}}function ef(a){return aa(a)?a:a.contextElement}function dr(a){const l=ef(a);if(!ka(l))return wa(1);const i=l.getBoundingClientRect(),{width:c,height:o,$:u}=U0(l);let h=(u?Ro(i.width):i.width)/c,p=(u?Ro(i.height):i.height)/o;return(!h||!Number.isFinite(h))&&(h=1),(!p||!Number.isFinite(p))&&(p=1),{x:h,y:p}}const D_=wa(0);function q0(a){const l=Rs(a);return!Jh()||!l.visualViewport?D_:{x:l.visualViewport.offsetLeft,y:l.visualViewport.offsetTop}}function M_(a,l,i){return l===void 0&&(l=!1),!i||l&&i!==Rs(a)?!1:l}function hl(a,l,i,c){l===void 0&&(l=!1),i===void 0&&(i=!1);const o=a.getBoundingClientRect(),u=ef(a);let h=wa(1);l&&(c?aa(c)&&(h=dr(c)):h=dr(a));const p=M_(u,i,c)?q0(u):wa(0);let g=(o.left+p.x)/h.x,y=(o.top+p.y)/h.y,x=o.width/h.x,j=o.height/h.y;if(u){const b=Rs(u),A=c&&aa(c)?Rs(c):c;let T=b,D=ph(T);for(;D&&c&&A!==T;){const S=dr(D),R=D.getBoundingClientRect(),k=na(D),E=R.left+(D.clientLeft+parseFloat(k.paddingLeft))*S.x,w=R.top+(D.clientTop+parseFloat(k.paddingTop))*S.y;g*=S.x,y*=S.y,x*=S.x,j*=S.y,g+=E,y+=w,T=Rs(D),D=ph(T)}}return zo({width:x,height:j,x:g,y})}function cd(a,l){const i=id(a).scrollLeft;return l?l.left+i:hl(Aa(a)).left+i}function I0(a,l){const i=a.getBoundingClientRect(),c=i.left+l.scrollLeft-cd(a,i),o=i.top+l.scrollTop;return{x:c,y:o}}function R_(a){let{elements:l,rect:i,offsetParent:c,strategy:o}=a;const u=o==="fixed",h=Aa(c),p=l?rd(l.floating):!1;if(c===h||p&&u)return i;let g={scrollLeft:0,scrollTop:0},y=wa(1);const x=wa(0),j=ka(c);if((j||!j&&!u)&&((Nr(c)!=="body"||Qi(h))&&(g=id(c)),ka(c))){const A=hl(c);y=dr(c),x.x=A.x+c.clientLeft,x.y=A.y+c.clientTop}const b=h&&!j&&!u?I0(h,g):wa(0);return{width:i.width*y.x,height:i.height*y.y,x:i.x*y.x-g.scrollLeft*y.x+x.x+b.x,y:i.y*y.y-g.scrollTop*y.y+x.y+b.y}}function O_(a){return Array.from(a.getClientRects())}function z_(a){const l=Aa(a),i=id(a),c=a.ownerDocument.body,o=Ds(l.scrollWidth,l.clientWidth,c.scrollWidth,c.clientWidth),u=Ds(l.scrollHeight,l.clientHeight,c.scrollHeight,c.clientHeight);let h=-i.scrollLeft+cd(a);const p=-i.scrollTop;return na(c).direction==="rtl"&&(h+=Ds(l.clientWidth,c.clientWidth)-o),{width:o,height:u,x:h,y:p}}const Xv=25;function P_(a,l){const i=Rs(a),c=Aa(a),o=i.visualViewport;let u=c.clientWidth,h=c.clientHeight,p=0,g=0;if(o){u=o.width,h=o.height;const x=Jh();(!x||x&&l==="fixed")&&(p=o.offsetLeft,g=o.offsetTop)}const y=cd(c);if(y<=0){const x=c.ownerDocument,j=x.body,b=getComputedStyle(j),A=x.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,T=Math.abs(c.clientWidth-j.clientWidth-A);T<=Xv&&(u-=T)}else y<=Xv&&(u+=y);return{width:u,height:h,x:p,y:g}}const L_=new Set(["absolute","fixed"]);function U_(a,l){const i=hl(a,!0,l==="fixed"),c=i.top+a.clientTop,o=i.left+a.clientLeft,u=ka(a)?dr(a):wa(1),h=a.clientWidth*u.x,p=a.clientHeight*u.y,g=o*u.x,y=c*u.y;return{width:h,height:p,x:g,y}}function Zv(a,l,i){let c;if(l==="viewport")c=P_(a,i);else if(l==="document")c=z_(Aa(a));else if(aa(l))c=U_(l,i);else{const o=q0(a);c={x:l.x-o.x,y:l.y-o.y,width:l.width,height:l.height}}return zo(c)}function B0(a,l){const i=zn(a);return i===l||!aa(i)||hr(i)?!1:na(i).position==="fixed"||B0(i,l)}function q_(a,l){const i=l.get(a);if(i)return i;let c=Ui(a,[],!1).filter(p=>aa(p)&&Nr(p)!=="body"),o=null;const u=na(a).position==="fixed";let h=u?zn(a):a;for(;aa(h)&&!hr(h);){const p=na(h),g=Kh(h);!g&&p.position==="fixed"&&(o=null),(u?!g&&!o:!g&&p.position==="static"&&!!o&&L_.has(o.position)||Qi(h)&&!g&&B0(a,h))?c=c.filter(x=>x!==h):o=p,h=zn(h)}return l.set(a,c),c}function I_(a){let{element:l,boundary:i,rootBoundary:c,strategy:o}=a;const h=[...i==="clippingAncestors"?rd(l)?[]:q_(l,this._c):[].concat(i),c],p=h[0],g=h.reduce((y,x)=>{const j=Zv(l,x,o);return y.top=Ds(j.top,y.top),y.right=On(j.right,y.right),y.bottom=On(j.bottom,y.bottom),y.left=Ds(j.left,y.left),y},Zv(l,p,o));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function B_(a){const{width:l,height:i}=U0(a);return{width:l,height:i}}function F_(a,l,i){const c=ka(l),o=Aa(l),u=i==="fixed",h=hl(a,!0,u,l);let p={scrollLeft:0,scrollTop:0};const g=wa(0);function y(){g.x=cd(o)}if(c||!c&&!u)if((Nr(l)!=="body"||Qi(o))&&(p=id(l)),c){const A=hl(l,!0,u,l);g.x=A.x+l.clientLeft,g.y=A.y+l.clientTop}else o&&y();u&&!c&&o&&y();const x=o&&!c&&!u?I0(o,p):wa(0),j=h.left+p.scrollLeft-g.x-x.x,b=h.top+p.scrollTop-g.y-x.y;return{x:j,y:b,width:h.width,height:h.height}}function Gm(a){return na(a).position==="static"}function Kv(a,l){if(!ka(a)||na(a).position==="fixed")return null;if(l)return l(a);let i=a.offsetParent;return Aa(a)===i&&(i=i.ownerDocument.body),i}function F0(a,l){const i=Rs(a);if(rd(a))return i;if(!ka(a)){let o=zn(a);for(;o&&!hr(o);){if(aa(o)&&!Gm(o))return o;o=zn(o)}return i}let c=Kv(a,l);for(;c&&C_(c)&&Gm(c);)c=Kv(c,l);return c&&hr(c)&&Gm(c)&&!Kh(c)?i:c||E_(a)||i}const $_=async function(a){const l=this.getOffsetParent||F0,i=this.getDimensions,c=await i(a.floating);return{reference:F_(a.reference,await l(a.floating),a.strategy),floating:{x:0,y:0,width:c.width,height:c.height}}};function H_(a){return na(a).direction==="rtl"}const V_={convertOffsetParentRelativeRectToViewportRelativeRect:R_,getDocumentElement:Aa,getClippingRect:I_,getOffsetParent:F0,getElementRects:$_,getClientRects:O_,getDimensions:B_,getScale:dr,isElement:aa,isRTL:H_};function $0(a,l){return a.x===l.x&&a.y===l.y&&a.width===l.width&&a.height===l.height}function G_(a,l){let i=null,c;const o=Aa(a);function u(){var p;clearTimeout(c),(p=i)==null||p.disconnect(),i=null}function h(p,g){p===void 0&&(p=!1),g===void 0&&(g=1),u();const y=a.getBoundingClientRect(),{left:x,top:j,width:b,height:A}=y;if(p||l(),!b||!A)return;const T=ho(j),D=ho(o.clientWidth-(x+b)),S=ho(o.clientHeight-(j+A)),R=ho(x),E={rootMargin:-T+"px "+-D+"px "+-S+"px "+-R+"px",threshold:Ds(0,On(1,g))||1};let w=!0;function C(q){const I=q[0].intersectionRatio;if(I!==g){if(!w)return h();I?h(!1,I):c=setTimeout(()=>{h(!1,1e-7)},1e3)}I===1&&!$0(y,a.getBoundingClientRect())&&h(),w=!1}try{i=new IntersectionObserver(C,{...E,root:o.ownerDocument})}catch{i=new IntersectionObserver(C,E)}i.observe(a)}return h(!0),u}function Y_(a,l,i,c){c===void 0&&(c={});const{ancestorScroll:o=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:p=typeof IntersectionObserver=="function",animationFrame:g=!1}=c,y=ef(a),x=o||u?[...y?Ui(y):[],...Ui(l)]:[];x.forEach(R=>{o&&R.addEventListener("scroll",i,{passive:!0}),u&&R.addEventListener("resize",i)});const j=y&&p?G_(y,i):null;let b=-1,A=null;h&&(A=new ResizeObserver(R=>{let[k]=R;k&&k.target===y&&A&&(A.unobserve(l),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var E;(E=A)==null||E.observe(l)})),i()}),y&&!g&&A.observe(y),A.observe(l));let T,D=g?hl(a):null;g&&S();function S(){const R=hl(a);D&&!$0(D,R)&&i(),D=R,T=requestAnimationFrame(S)}return i(),()=>{var R;x.forEach(k=>{o&&k.removeEventListener("scroll",i),u&&k.removeEventListener("resize",i)}),j==null||j(),(R=A)==null||R.disconnect(),A=null,g&&cancelAnimationFrame(T)}}const Q_=v_,W_=y_,X_=x_,Z_=b_,K_=p_,Jv=f_,J_=j_,eT=(a,l,i)=>{const c=new Map,o={platform:V_,...i},u={...o.platform,_c:c};return h_(a,l,{...o,platform:u})};var tT=typeof document<"u",sT=function(){},So=tT?f.useLayoutEffect:sT;function Po(a,l){if(a===l)return!0;if(typeof a!=typeof l)return!1;if(typeof a=="function"&&a.toString()===l.toString())return!0;let i,c,o;if(a&&l&&typeof a=="object"){if(Array.isArray(a)){if(i=a.length,i!==l.length)return!1;for(c=i;c--!==0;)if(!Po(a[c],l[c]))return!1;return!0}if(o=Object.keys(a),i=o.length,i!==Object.keys(l).length)return!1;for(c=i;c--!==0;)if(!{}.hasOwnProperty.call(l,o[c]))return!1;for(c=i;c--!==0;){const u=o[c];if(!(u==="_owner"&&a.$$typeof)&&!Po(a[u],l[u]))return!1}return!0}return a!==a&&l!==l}function H0(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function ey(a,l){const i=H0(a);return Math.round(l*i)/i}function Ym(a){const l=f.useRef(a);return So(()=>{l.current=a}),l}function aT(a){a===void 0&&(a={});const{placement:l="bottom",strategy:i="absolute",middleware:c=[],platform:o,elements:{reference:u,floating:h}={},transform:p=!0,whileElementsMounted:g,open:y}=a,[x,j]=f.useState({x:0,y:0,strategy:i,placement:l,middlewareData:{},isPositioned:!1}),[b,A]=f.useState(c);Po(b,c)||A(c);const[T,D]=f.useState(null),[S,R]=f.useState(null),k=f.useCallback(v=>{v!==q.current&&(q.current=v,D(v))},[]),E=f.useCallback(v=>{v!==I.current&&(I.current=v,R(v))},[]),w=u||T,C=h||S,q=f.useRef(null),I=f.useRef(null),W=f.useRef(x),P=g!=null,Y=Ym(g),B=Ym(o),le=Ym(y),Z=f.useCallback(()=>{if(!q.current||!I.current)return;const v={placement:l,strategy:i,middleware:b};B.current&&(v.platform=B.current),eT(q.current,I.current,v).then(O=>{const M={...O,isPositioned:le.current!==!1};$.current&&!Po(W.current,M)&&(W.current=M,$i.flushSync(()=>{j(M)}))})},[b,l,i,B,le]);So(()=>{y===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,j(v=>({...v,isPositioned:!1})))},[y]);const $=f.useRef(!1);So(()=>($.current=!0,()=>{$.current=!1}),[]),So(()=>{if(w&&(q.current=w),C&&(I.current=C),w&&C){if(Y.current)return Y.current(w,C,Z);Z()}},[w,C,Z,Y,P]);const ee=f.useMemo(()=>({reference:q,floating:I,setReference:k,setFloating:E}),[k,E]),N=f.useMemo(()=>({reference:w,floating:C}),[w,C]),L=f.useMemo(()=>{const v={position:i,left:0,top:0};if(!N.floating)return v;const O=ey(N.floating,x.x),M=ey(N.floating,x.y);return p?{...v,transform:"translate("+O+"px, "+M+"px)",...H0(N.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:O,top:M}},[i,p,N.floating,x.x,x.y]);return f.useMemo(()=>({...x,update:Z,refs:ee,elements:N,floatingStyles:L}),[x,Z,ee,N,L])}const nT=a=>{function l(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:a,fn(i){const{element:c,padding:o}=typeof a=="function"?a(i):a;return c&&l(c)?c.current!=null?Jv({element:c.current,padding:o}).fn(i):{}:c?Jv({element:c,padding:o}).fn(i):{}}}},lT=(a,l)=>({...Q_(a),options:[a,l]}),rT=(a,l)=>({...W_(a),options:[a,l]}),iT=(a,l)=>({...J_(a),options:[a,l]}),cT=(a,l)=>({...X_(a),options:[a,l]}),oT=(a,l)=>({...Z_(a),options:[a,l]}),dT=(a,l)=>({...K_(a),options:[a,l]}),uT=(a,l)=>({...nT(a),options:[a,l]});var mT="Arrow",V0=f.forwardRef((a,l)=>{const{children:i,width:c=10,height:o=5,...u}=a;return e.jsx(Qe.svg,{...u,ref:l,width:c,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?i:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});V0.displayName=mT;var hT=V0,tf="Popper",[G0,od]=Ta(tf),[fT,Y0]=G0(tf),Q0=a=>{const{__scopePopper:l,children:i}=a,[c,o]=f.useState(null);return e.jsx(fT,{scope:l,anchor:c,onAnchorChange:o,children:i})};Q0.displayName=tf;var W0="PopperAnchor",X0=f.forwardRef((a,l)=>{const{__scopePopper:i,virtualRef:c,...o}=a,u=Y0(W0,i),h=f.useRef(null),p=ft(l,h),g=f.useRef(null);return f.useEffect(()=>{const y=g.current;g.current=(c==null?void 0:c.current)||h.current,y!==g.current&&u.onAnchorChange(g.current)}),c?null:e.jsx(Qe.div,{...o,ref:p})});X0.displayName=W0;var sf="PopperContent",[xT,pT]=G0(sf),Z0=f.forwardRef((a,l)=>{var pe,Ne,Fe,De,Ge,We;const{__scopePopper:i,side:c="bottom",sideOffset:o=0,align:u="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:g=!0,collisionBoundary:y=[],collisionPadding:x=0,sticky:j="partial",hideWhenDetached:b=!1,updatePositionStrategy:A="optimized",onPlaced:T,...D}=a,S=Y0(sf,i),[R,k]=f.useState(null),E=ft(l,xt=>k(xt)),[w,C]=f.useState(null),q=Fh(w),I=(q==null?void 0:q.width)??0,W=(q==null?void 0:q.height)??0,P=c+(u!=="center"?"-"+u:""),Y=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},B=Array.isArray(y)?y:[y],le=B.length>0,Z={padding:Y,boundary:B.filter(vT),altBoundary:le},{refs:$,floatingStyles:ee,placement:N,isPositioned:L,middlewareData:v}=aT({strategy:"fixed",placement:P,whileElementsMounted:(...xt)=>Y_(...xt,{animationFrame:A==="always"}),elements:{reference:S.anchor},middleware:[lT({mainAxis:o+W,alignmentAxis:h}),g&&rT({mainAxis:!0,crossAxis:!1,limiter:j==="partial"?iT():void 0,...Z}),g&&cT({...Z}),oT({...Z,apply:({elements:xt,rects:G,availableWidth:fe,availableHeight:Me})=>{const{width:_e,height:rt}=G.reference,at=xt.floating.style;at.setProperty("--radix-popper-available-width",`${fe}px`),at.setProperty("--radix-popper-available-height",`${Me}px`),at.setProperty("--radix-popper-anchor-width",`${_e}px`),at.setProperty("--radix-popper-anchor-height",`${rt}px`)}}),w&&uT({element:w,padding:p}),yT({arrowWidth:I,arrowHeight:W}),b&&dT({strategy:"referenceHidden",...Z})]}),[O,M]=ej(N),U=Sa(T);ds(()=>{L&&(U==null||U())},[L,U]);const Q=(pe=v.arrow)==null?void 0:pe.x,H=(Ne=v.arrow)==null?void 0:Ne.y,ie=((Fe=v.arrow)==null?void 0:Fe.centerOffset)!==0,[ye,ge]=f.useState();return ds(()=>{R&&ge(window.getComputedStyle(R).zIndex)},[R]),e.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:L?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[(De=v.transformOrigin)==null?void 0:De.x,(Ge=v.transformOrigin)==null?void 0:Ge.y].join(" "),...((We=v.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:e.jsx(xT,{scope:i,placedSide:O,onArrowChange:C,arrowX:Q,arrowY:H,shouldHideArrow:ie,children:e.jsx(Qe.div,{"data-side":O,"data-align":M,...D,ref:E,style:{...D.style,animation:L?void 0:"none"}})})})});Z0.displayName=sf;var K0="PopperArrow",gT={top:"bottom",right:"left",bottom:"top",left:"right"},J0=f.forwardRef(function(l,i){const{__scopePopper:c,...o}=l,u=pT(K0,c),h=gT[u.placedSide];return e.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:e.jsx(hT,{...o,ref:i,style:{...o.style,display:"block"}})})});J0.displayName=K0;function vT(a){return a!==null}var yT=a=>({name:"transformOrigin",options:a,fn(l){var S,R,k;const{placement:i,rects:c,middlewareData:o}=l,h=((S=o.arrow)==null?void 0:S.centerOffset)!==0,p=h?0:a.arrowWidth,g=h?0:a.arrowHeight,[y,x]=ej(i),j={start:"0%",center:"50%",end:"100%"}[x],b=(((R=o.arrow)==null?void 0:R.x)??0)+p/2,A=(((k=o.arrow)==null?void 0:k.y)??0)+g/2;let T="",D="";return y==="bottom"?(T=h?j:`${b}px`,D=`${-g}px`):y==="top"?(T=h?j:`${b}px`,D=`${c.floating.height+g}px`):y==="right"?(T=`${-g}px`,D=h?j:`${A}px`):y==="left"&&(T=`${c.floating.width+g}px`,D=h?j:`${A}px`),{data:{x:T,y:D}}}});function ej(a){const[l,i="center"]=a.split("-");return[l,i]}var tj=Q0,sj=X0,aj=Z0,nj=J0,jT="Portal",dd=f.forwardRef((a,l)=>{var p;const{container:i,...c}=a,[o,u]=f.useState(!1);ds(()=>u(!0),[]);const h=i||o&&((p=globalThis==null?void 0:globalThis.document)==null?void 0:p.body);return h?D2.createPortal(e.jsx(Qe.div,{...c,ref:l}),h):null});dd.displayName=jT;var lj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bT="VisuallyHidden",NT=f.forwardRef((a,l)=>e.jsx(Qe.span,{...a,ref:l,style:{...lj,...a.style}}));NT.displayName=bT;var wT=function(a){if(typeof document>"u")return null;var l=Array.isArray(a)?a[0]:a;return l.ownerDocument.body},rr=new WeakMap,fo=new WeakMap,xo={},Qm=0,rj=function(a){return a&&(a.host||rj(a.parentNode))},CT=function(a,l){return l.map(function(i){if(a.contains(i))return i;var c=rj(i);return c&&a.contains(c)?c:(console.error("aria-hidden",i,"in not contained inside",a,". Doing nothing"),null)}).filter(function(i){return!!i})},ST=function(a,l,i,c){var o=CT(l,Array.isArray(a)?a:[a]);xo[i]||(xo[i]=new WeakMap);var u=xo[i],h=[],p=new Set,g=new Set(o),y=function(j){!j||p.has(j)||(p.add(j),y(j.parentNode))};o.forEach(y);var x=function(j){!j||g.has(j)||Array.prototype.forEach.call(j.children,function(b){if(p.has(b))x(b);else try{var A=b.getAttribute(c),T=A!==null&&A!=="false",D=(rr.get(b)||0)+1,S=(u.get(b)||0)+1;rr.set(b,D),u.set(b,S),h.push(b),D===1&&T&&fo.set(b,!0),S===1&&b.setAttribute(i,"true"),T||b.setAttribute(c,"true")}catch(R){console.error("aria-hidden: cannot operate on ",b,R)}})};return x(l),p.clear(),Qm++,function(){h.forEach(function(j){var b=rr.get(j)-1,A=u.get(j)-1;rr.set(j,b),u.set(j,A),b||(fo.has(j)||j.removeAttribute(c),fo.delete(j)),A||j.removeAttribute(i)}),Qm--,Qm||(rr=new WeakMap,rr=new WeakMap,fo=new WeakMap,xo={})}},af=function(a,l,i){i===void 0&&(i="data-aria-hidden");var c=Array.from(Array.isArray(a)?a:[a]),o=wT(a);return o?(c.push.apply(c,Array.from(o.querySelectorAll("[aria-live], script"))),ST(c,o,i,"aria-hidden")):function(){return null}},ga=function(){return ga=Object.assign||function(l){for(var i,c=1,o=arguments.length;c<o;c++){i=arguments[c];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(l[u]=i[u])}return l},ga.apply(this,arguments)};function ij(a,l){var i={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&l.indexOf(c)<0&&(i[c]=a[c]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,c=Object.getOwnPropertySymbols(a);o<c.length;o++)l.indexOf(c[o])<0&&Object.prototype.propertyIsEnumerable.call(a,c[o])&&(i[c[o]]=a[c[o]]);return i}function kT(a,l,i){if(i||arguments.length===2)for(var c=0,o=l.length,u;c<o;c++)(u||!(c in l))&&(u||(u=Array.prototype.slice.call(l,0,c)),u[c]=l[c]);return a.concat(u||Array.prototype.slice.call(l))}var ko="right-scroll-bar-position",_o="width-before-scroll-bar",_T="with-scroll-bars-hidden",TT="--removed-body-scroll-bar-size";function Wm(a,l){return typeof a=="function"?a(l):a&&(a.current=l),a}function ET(a,l){var i=f.useState(function(){return{value:a,callback:l,facade:{get current(){return i.value},set current(c){var o=i.value;o!==c&&(i.value=c,i.callback(c,o))}}}})[0];return i.callback=l,i.facade}var AT=typeof window<"u"?f.useLayoutEffect:f.useEffect,ty=new WeakMap;function DT(a,l){var i=ET(null,function(c){return a.forEach(function(o){return Wm(o,c)})});return AT(function(){var c=ty.get(i);if(c){var o=new Set(c),u=new Set(a),h=i.current;o.forEach(function(p){u.has(p)||Wm(p,null)}),u.forEach(function(p){o.has(p)||Wm(p,h)})}ty.set(i,a)},[a]),i}function MT(a){return a}function RT(a,l){l===void 0&&(l=MT);var i=[],c=!1,o={read:function(){if(c)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:a},useMedium:function(u){var h=l(u,c);return i.push(h),function(){i=i.filter(function(p){return p!==h})}},assignSyncMedium:function(u){for(c=!0;i.length;){var h=i;i=[],h.forEach(u)}i={push:function(p){return u(p)},filter:function(){return i}}},assignMedium:function(u){c=!0;var h=[];if(i.length){var p=i;i=[],p.forEach(u),h=i}var g=function(){var x=h;h=[],x.forEach(u)},y=function(){return Promise.resolve().then(g)};y(),i={push:function(x){h.push(x),y()},filter:function(x){return h=h.filter(x),i}}}};return o}function OT(a){a===void 0&&(a={});var l=RT(null);return l.options=ga({async:!0,ssr:!1},a),l}var cj=function(a){var l=a.sideCar,i=ij(a,["sideCar"]);if(!l)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var c=l.read();if(!c)throw new Error("Sidecar medium not found");return f.createElement(c,ga({},i))};cj.isSideCarExport=!0;function zT(a,l){return a.useMedium(l),cj}var oj=OT(),Xm=function(){},ud=f.forwardRef(function(a,l){var i=f.useRef(null),c=f.useState({onScrollCapture:Xm,onWheelCapture:Xm,onTouchMoveCapture:Xm}),o=c[0],u=c[1],h=a.forwardProps,p=a.children,g=a.className,y=a.removeScrollBar,x=a.enabled,j=a.shards,b=a.sideCar,A=a.noRelative,T=a.noIsolation,D=a.inert,S=a.allowPinchZoom,R=a.as,k=R===void 0?"div":R,E=a.gapMode,w=ij(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=b,q=DT([i,l]),I=ga(ga({},w),o);return f.createElement(f.Fragment,null,x&&f.createElement(C,{sideCar:oj,removeScrollBar:y,shards:j,noRelative:A,noIsolation:T,inert:D,setCallbacks:u,allowPinchZoom:!!S,lockRef:i,gapMode:E}),h?f.cloneElement(f.Children.only(p),ga(ga({},I),{ref:q})):f.createElement(k,ga({},I,{className:g,ref:q}),p))});ud.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ud.classNames={fullWidth:_o,zeroRight:ko};var PT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LT(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var l=PT();return l&&a.setAttribute("nonce",l),a}function UT(a,l){a.styleSheet?a.styleSheet.cssText=l:a.appendChild(document.createTextNode(l))}function qT(a){var l=document.head||document.getElementsByTagName("head")[0];l.appendChild(a)}var IT=function(){var a=0,l=null;return{add:function(i){a==0&&(l=LT())&&(UT(l,i),qT(l)),a++},remove:function(){a--,!a&&l&&(l.parentNode&&l.parentNode.removeChild(l),l=null)}}},BT=function(){var a=IT();return function(l,i){f.useEffect(function(){return a.add(l),function(){a.remove()}},[l&&i])}},dj=function(){var a=BT(),l=function(i){var c=i.styles,o=i.dynamic;return a(c,o),null};return l},FT={left:0,top:0,right:0,gap:0},Zm=function(a){return parseInt(a||"",10)||0},$T=function(a){var l=window.getComputedStyle(document.body),i=l[a==="padding"?"paddingLeft":"marginLeft"],c=l[a==="padding"?"paddingTop":"marginTop"],o=l[a==="padding"?"paddingRight":"marginRight"];return[Zm(i),Zm(c),Zm(o)]},HT=function(a){if(a===void 0&&(a="margin"),typeof window>"u")return FT;var l=$T(a),i=document.documentElement.clientWidth,c=window.innerWidth;return{left:l[0],top:l[1],right:l[2],gap:Math.max(0,c-i+l[2]-l[0])}},VT=dj(),ur="data-scroll-locked",GT=function(a,l,i,c){var o=a.left,u=a.top,h=a.right,p=a.gap;return i===void 0&&(i="margin"),`
  .`.concat(_T,` {
   overflow: hidden `).concat(c,`;
   padding-right: `).concat(p,"px ").concat(c,`;
  }
  body[`).concat(ur,`] {
    overflow: hidden `).concat(c,`;
    overscroll-behavior: contain;
    `).concat([l&&"position: relative ".concat(c,";"),i==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(p,"px ").concat(c,`;
    `),i==="padding"&&"padding-right: ".concat(p,"px ").concat(c,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ko,` {
    right: `).concat(p,"px ").concat(c,`;
  }
  
  .`).concat(_o,` {
    margin-right: `).concat(p,"px ").concat(c,`;
  }
  
  .`).concat(ko," .").concat(ko,` {
    right: 0 `).concat(c,`;
  }
  
  .`).concat(_o," .").concat(_o,` {
    margin-right: 0 `).concat(c,`;
  }
  
  body[`).concat(ur,`] {
    `).concat(TT,": ").concat(p,`px;
  }
`)},sy=function(){var a=parseInt(document.body.getAttribute(ur)||"0",10);return isFinite(a)?a:0},YT=function(){f.useEffect(function(){return document.body.setAttribute(ur,(sy()+1).toString()),function(){var a=sy()-1;a<=0?document.body.removeAttribute(ur):document.body.setAttribute(ur,a.toString())}},[])},QT=function(a){var l=a.noRelative,i=a.noImportant,c=a.gapMode,o=c===void 0?"margin":c;YT();var u=f.useMemo(function(){return HT(o)},[o]);return f.createElement(VT,{styles:GT(u,!l,o,i?"":"!important")})},gh=!1;if(typeof window<"u")try{var po=Object.defineProperty({},"passive",{get:function(){return gh=!0,!0}});window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{gh=!1}var ir=gh?{passive:!1}:!1,WT=function(a){return a.tagName==="TEXTAREA"},uj=function(a,l){if(!(a instanceof Element))return!1;var i=window.getComputedStyle(a);return i[l]!=="hidden"&&!(i.overflowY===i.overflowX&&!WT(a)&&i[l]==="visible")},XT=function(a){return uj(a,"overflowY")},ZT=function(a){return uj(a,"overflowX")},ay=function(a,l){var i=l.ownerDocument,c=l;do{typeof ShadowRoot<"u"&&c instanceof ShadowRoot&&(c=c.host);var o=mj(a,c);if(o){var u=hj(a,c),h=u[1],p=u[2];if(h>p)return!0}c=c.parentNode}while(c&&c!==i.body);return!1},KT=function(a){var l=a.scrollTop,i=a.scrollHeight,c=a.clientHeight;return[l,i,c]},JT=function(a){var l=a.scrollLeft,i=a.scrollWidth,c=a.clientWidth;return[l,i,c]},mj=function(a,l){return a==="v"?XT(l):ZT(l)},hj=function(a,l){return a==="v"?KT(l):JT(l)},eE=function(a,l){return a==="h"&&l==="rtl"?-1:1},tE=function(a,l,i,c,o){var u=eE(a,window.getComputedStyle(l).direction),h=u*c,p=i.target,g=l.contains(p),y=!1,x=h>0,j=0,b=0;do{if(!p)break;var A=hj(a,p),T=A[0],D=A[1],S=A[2],R=D-S-u*T;(T||R)&&mj(a,p)&&(j+=R,b+=T);var k=p.parentNode;p=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!g&&p!==document.body||g&&(l.contains(p)||l===p));return(x&&Math.abs(j)<1||!x&&Math.abs(b)<1)&&(y=!0),y},go=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},ny=function(a){return[a.deltaX,a.deltaY]},ly=function(a){return a&&"current"in a?a.current:a},sE=function(a,l){return a[0]===l[0]&&a[1]===l[1]},aE=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},nE=0,cr=[];function lE(a){var l=f.useRef([]),i=f.useRef([0,0]),c=f.useRef(),o=f.useState(nE++)[0],u=f.useState(dj)[0],h=f.useRef(a);f.useEffect(function(){h.current=a},[a]),f.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(o));var D=kT([a.lockRef.current],(a.shards||[]).map(ly),!0).filter(Boolean);return D.forEach(function(S){return S.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),D.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(o))})}}},[a.inert,a.lockRef.current,a.shards]);var p=f.useCallback(function(D,S){if("touches"in D&&D.touches.length===2||D.type==="wheel"&&D.ctrlKey)return!h.current.allowPinchZoom;var R=go(D),k=i.current,E="deltaX"in D?D.deltaX:k[0]-R[0],w="deltaY"in D?D.deltaY:k[1]-R[1],C,q=D.target,I=Math.abs(E)>Math.abs(w)?"h":"v";if("touches"in D&&I==="h"&&q.type==="range")return!1;var W=ay(I,q);if(!W)return!0;if(W?C=I:(C=I==="v"?"h":"v",W=ay(I,q)),!W)return!1;if(!c.current&&"changedTouches"in D&&(E||w)&&(c.current=C),!C)return!0;var P=c.current||C;return tE(P,S,D,P==="h"?E:w)},[]),g=f.useCallback(function(D){var S=D;if(!(!cr.length||cr[cr.length-1]!==u)){var R="deltaY"in S?ny(S):go(S),k=l.current.filter(function(C){return C.name===S.type&&(C.target===S.target||S.target===C.shadowParent)&&sE(C.delta,R)})[0];if(k&&k.should){S.cancelable&&S.preventDefault();return}if(!k){var E=(h.current.shards||[]).map(ly).filter(Boolean).filter(function(C){return C.contains(S.target)}),w=E.length>0?p(S,E[0]):!h.current.noIsolation;w&&S.cancelable&&S.preventDefault()}}},[]),y=f.useCallback(function(D,S,R,k){var E={name:D,delta:S,target:R,should:k,shadowParent:rE(R)};l.current.push(E),setTimeout(function(){l.current=l.current.filter(function(w){return w!==E})},1)},[]),x=f.useCallback(function(D){i.current=go(D),c.current=void 0},[]),j=f.useCallback(function(D){y(D.type,ny(D),D.target,p(D,a.lockRef.current))},[]),b=f.useCallback(function(D){y(D.type,go(D),D.target,p(D,a.lockRef.current))},[]);f.useEffect(function(){return cr.push(u),a.setCallbacks({onScrollCapture:j,onWheelCapture:j,onTouchMoveCapture:b}),document.addEventListener("wheel",g,ir),document.addEventListener("touchmove",g,ir),document.addEventListener("touchstart",x,ir),function(){cr=cr.filter(function(D){return D!==u}),document.removeEventListener("wheel",g,ir),document.removeEventListener("touchmove",g,ir),document.removeEventListener("touchstart",x,ir)}},[]);var A=a.removeScrollBar,T=a.inert;return f.createElement(f.Fragment,null,T?f.createElement(u,{styles:aE(o)}):null,A?f.createElement(QT,{noRelative:a.noRelative,gapMode:a.gapMode}):null)}function rE(a){for(var l=null;a!==null;)a instanceof ShadowRoot&&(l=a.host,a=a.host),a=a.parentNode;return l}const iE=zT(oj,lE);var md=f.forwardRef(function(a,l){return f.createElement(ud,ga({},a,{ref:l,sideCar:iE}))});md.classNames=ud.classNames;var cE=[" ","Enter","ArrowUp","ArrowDown"],oE=[" ","Enter"],fl="Select",[hd,fd,dE]=Gh(fl),[wr,H6]=Ta(fl,[dE,od]),xd=od(),[uE,Pn]=wr(fl),[mE,hE]=wr(fl),fj=a=>{const{__scopeSelect:l,children:i,open:c,defaultOpen:o,onOpenChange:u,value:h,defaultValue:p,onValueChange:g,dir:y,name:x,autoComplete:j,disabled:b,required:A,form:T}=a,D=xd(l),[S,R]=f.useState(null),[k,E]=f.useState(null),[w,C]=f.useState(!1),q=ed(y),[I,W]=Rn({prop:c,defaultProp:o??!1,onChange:u,caller:fl}),[P,Y]=Rn({prop:h,defaultProp:p,onChange:g,caller:fl}),B=f.useRef(null),le=S?T||!!S.closest("form"):!0,[Z,$]=f.useState(new Set),ee=Array.from(Z).map(N=>N.props.value).join(";");return e.jsx(tj,{...D,children:e.jsxs(uE,{required:A,scope:l,trigger:S,onTriggerChange:R,valueNode:k,onValueNodeChange:E,valueNodeHasChildren:w,onValueNodeHasChildrenChange:C,contentId:Na(),value:P,onValueChange:Y,open:I,onOpenChange:W,dir:q,triggerPointerDownPosRef:B,disabled:b,children:[e.jsx(hd.Provider,{scope:l,children:e.jsx(mE,{scope:a.__scopeSelect,onNativeOptionAdd:f.useCallback(N=>{$(L=>new Set(L).add(N))},[]),onNativeOptionRemove:f.useCallback(N=>{$(L=>{const v=new Set(L);return v.delete(N),v})},[]),children:i})}),le?e.jsxs(Pj,{"aria-hidden":!0,required:A,tabIndex:-1,name:x,autoComplete:j,value:P,onChange:N=>Y(N.target.value),disabled:b,form:T,children:[P===void 0?e.jsx("option",{value:""}):null,Array.from(Z)]},ee):null]})})};fj.displayName=fl;var xj="SelectTrigger",pj=f.forwardRef((a,l)=>{const{__scopeSelect:i,disabled:c=!1,...o}=a,u=xd(i),h=Pn(xj,i),p=h.disabled||c,g=ft(l,h.onTriggerChange),y=fd(i),x=f.useRef("touch"),[j,b,A]=Uj(D=>{const S=y().filter(E=>!E.disabled),R=S.find(E=>E.value===h.value),k=qj(S,D,R);k!==void 0&&h.onValueChange(k.value)}),T=D=>{p||(h.onOpenChange(!0),A()),D&&(h.triggerPointerDownPosRef.current={x:Math.round(D.pageX),y:Math.round(D.pageY)})};return e.jsx(sj,{asChild:!0,...u,children:e.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:p,"data-disabled":p?"":void 0,"data-placeholder":Lj(h.value)?"":void 0,...o,ref:g,onClick:Re(o.onClick,D=>{D.currentTarget.focus(),x.current!=="mouse"&&T(D)}),onPointerDown:Re(o.onPointerDown,D=>{x.current=D.pointerType;const S=D.target;S.hasPointerCapture(D.pointerId)&&S.releasePointerCapture(D.pointerId),D.button===0&&D.ctrlKey===!1&&D.pointerType==="mouse"&&(T(D),D.preventDefault())}),onKeyDown:Re(o.onKeyDown,D=>{const S=j.current!=="";!(D.ctrlKey||D.altKey||D.metaKey)&&D.key.length===1&&b(D.key),!(S&&D.key===" ")&&cE.includes(D.key)&&(T(),D.preventDefault())})})})});pj.displayName=xj;var gj="SelectValue",vj=f.forwardRef((a,l)=>{const{__scopeSelect:i,className:c,style:o,children:u,placeholder:h="",...p}=a,g=Pn(gj,i),{onValueNodeHasChildrenChange:y}=g,x=u!==void 0,j=ft(l,g.onValueNodeChange);return ds(()=>{y(x)},[y,x]),e.jsx(Qe.span,{...p,ref:j,style:{pointerEvents:"none"},children:Lj(g.value)?e.jsx(e.Fragment,{children:h}):u})});vj.displayName=gj;var fE="SelectIcon",yj=f.forwardRef((a,l)=>{const{__scopeSelect:i,children:c,...o}=a;return e.jsx(Qe.span,{"aria-hidden":!0,...o,ref:l,children:c||""})});yj.displayName=fE;var xE="SelectPortal",jj=a=>e.jsx(dd,{asChild:!0,...a});jj.displayName=xE;var xl="SelectContent",bj=f.forwardRef((a,l)=>{const i=Pn(xl,a.__scopeSelect),[c,o]=f.useState();if(ds(()=>{o(new DocumentFragment)},[]),!i.open){const u=c;return u?$i.createPortal(e.jsx(Nj,{scope:a.__scopeSelect,children:e.jsx(hd.Slot,{scope:a.__scopeSelect,children:e.jsx("div",{children:a.children})})}),u):null}return e.jsx(wj,{...a,ref:l})});bj.displayName=xl;var Ks=10,[Nj,Ln]=wr(xl),pE="SelectContentImpl",gE=ul("SelectContent.RemoveScroll"),wj=f.forwardRef((a,l)=>{const{__scopeSelect:i,position:c="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:u,onPointerDownOutside:h,side:p,sideOffset:g,align:y,alignOffset:x,arrowPadding:j,collisionBoundary:b,collisionPadding:A,sticky:T,hideWhenDetached:D,avoidCollisions:S,...R}=a,k=Pn(xl,i),[E,w]=f.useState(null),[C,q]=f.useState(null),I=ft(l,pe=>w(pe)),[W,P]=f.useState(null),[Y,B]=f.useState(null),le=fd(i),[Z,$]=f.useState(!1),ee=f.useRef(!1);f.useEffect(()=>{if(E)return af(E)},[E]),Qh();const N=f.useCallback(pe=>{const[Ne,...Fe]=le().map(We=>We.ref.current),[De]=Fe.slice(-1),Ge=document.activeElement;for(const We of pe)if(We===Ge||(We==null||We.scrollIntoView({block:"nearest"}),We===Ne&&C&&(C.scrollTop=0),We===De&&C&&(C.scrollTop=C.scrollHeight),We==null||We.focus(),document.activeElement!==Ge))return},[le,C]),L=f.useCallback(()=>N([W,E]),[N,W,E]);f.useEffect(()=>{Z&&L()},[Z,L]);const{onOpenChange:v,triggerPointerDownPosRef:O}=k;f.useEffect(()=>{if(E){let pe={x:0,y:0};const Ne=De=>{var Ge,We;pe={x:Math.abs(Math.round(De.pageX)-(((Ge=O.current)==null?void 0:Ge.x)??0)),y:Math.abs(Math.round(De.pageY)-(((We=O.current)==null?void 0:We.y)??0))}},Fe=De=>{pe.x<=10&&pe.y<=10?De.preventDefault():E.contains(De.target)||v(!1),document.removeEventListener("pointermove",Ne),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",Fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",Fe,{capture:!0})}}},[E,v,O]),f.useEffect(()=>{const pe=()=>v(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[v]);const[M,U]=Uj(pe=>{const Ne=le().filter(Ge=>!Ge.disabled),Fe=Ne.find(Ge=>Ge.ref.current===document.activeElement),De=qj(Ne,pe,Fe);De&&setTimeout(()=>De.ref.current.focus())}),Q=f.useCallback((pe,Ne,Fe)=>{const De=!ee.current&&!Fe;(k.value!==void 0&&k.value===Ne||De)&&(P(pe),De&&(ee.current=!0))},[k.value]),H=f.useCallback(()=>E==null?void 0:E.focus(),[E]),ie=f.useCallback((pe,Ne,Fe)=>{const De=!ee.current&&!Fe;(k.value!==void 0&&k.value===Ne||De)&&B(pe)},[k.value]),ye=c==="popper"?vh:Cj,ge=ye===vh?{side:p,sideOffset:g,align:y,alignOffset:x,arrowPadding:j,collisionBoundary:b,collisionPadding:A,sticky:T,hideWhenDetached:D,avoidCollisions:S}:{};return e.jsx(Nj,{scope:i,content:E,viewport:C,onViewportChange:q,itemRefCallback:Q,selectedItem:W,onItemLeave:H,itemTextRefCallback:ie,focusSelectedItem:L,selectedItemText:Y,position:c,isPositioned:Z,searchRef:M,children:e.jsx(md,{as:gE,allowPinchZoom:!0,children:e.jsx(nd,{asChild:!0,trapped:k.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:Re(o,pe=>{var Ne;(Ne=k.trigger)==null||Ne.focus({preventScroll:!0}),pe.preventDefault()}),children:e.jsx(ad,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:e.jsx(ye,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:pe=>pe.preventDefault(),...R,...ge,onPlaced:()=>$(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...R.style},onKeyDown:Re(R.onKeyDown,pe=>{const Ne=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!Ne&&pe.key.length===1&&U(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let De=le().filter(Ge=>!Ge.disabled).map(Ge=>Ge.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(De=De.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const Ge=pe.target,We=De.indexOf(Ge);De=De.slice(We+1)}setTimeout(()=>N(De)),pe.preventDefault()}})})})})})})});wj.displayName=pE;var vE="SelectItemAlignedPosition",Cj=f.forwardRef((a,l)=>{const{__scopeSelect:i,onPlaced:c,...o}=a,u=Pn(xl,i),h=Ln(xl,i),[p,g]=f.useState(null),[y,x]=f.useState(null),j=ft(l,I=>x(I)),b=fd(i),A=f.useRef(!1),T=f.useRef(!0),{viewport:D,selectedItem:S,selectedItemText:R,focusSelectedItem:k}=h,E=f.useCallback(()=>{if(u.trigger&&u.valueNode&&p&&y&&D&&S&&R){const I=u.trigger.getBoundingClientRect(),W=y.getBoundingClientRect(),P=u.valueNode.getBoundingClientRect(),Y=R.getBoundingClientRect();if(u.dir!=="rtl"){const Ge=Y.left-W.left,We=P.left-Ge,xt=I.left-We,G=I.width+xt,fe=Math.max(G,W.width),Me=window.innerWidth-Ks,_e=Pv(We,[Ks,Math.max(Ks,Me-fe)]);p.style.minWidth=G+"px",p.style.left=_e+"px"}else{const Ge=W.right-Y.right,We=window.innerWidth-P.right-Ge,xt=window.innerWidth-I.right-We,G=I.width+xt,fe=Math.max(G,W.width),Me=window.innerWidth-Ks,_e=Pv(We,[Ks,Math.max(Ks,Me-fe)]);p.style.minWidth=G+"px",p.style.right=_e+"px"}const B=b(),le=window.innerHeight-Ks*2,Z=D.scrollHeight,$=window.getComputedStyle(y),ee=parseInt($.borderTopWidth,10),N=parseInt($.paddingTop,10),L=parseInt($.borderBottomWidth,10),v=parseInt($.paddingBottom,10),O=ee+N+Z+v+L,M=Math.min(S.offsetHeight*5,O),U=window.getComputedStyle(D),Q=parseInt(U.paddingTop,10),H=parseInt(U.paddingBottom,10),ie=I.top+I.height/2-Ks,ye=le-ie,ge=S.offsetHeight/2,pe=S.offsetTop+ge,Ne=ee+N+pe,Fe=O-Ne;if(Ne<=ie){const Ge=B.length>0&&S===B[B.length-1].ref.current;p.style.bottom="0px";const We=y.clientHeight-D.offsetTop-D.offsetHeight,xt=Math.max(ye,ge+(Ge?H:0)+We+L),G=Ne+xt;p.style.height=G+"px"}else{const Ge=B.length>0&&S===B[0].ref.current;p.style.top="0px";const xt=Math.max(ie,ee+D.offsetTop+(Ge?Q:0)+ge)+Fe;p.style.height=xt+"px",D.scrollTop=Ne-ie+D.offsetTop}p.style.margin=`${Ks}px 0`,p.style.minHeight=M+"px",p.style.maxHeight=le+"px",c==null||c(),requestAnimationFrame(()=>A.current=!0)}},[b,u.trigger,u.valueNode,p,y,D,S,R,u.dir,c]);ds(()=>E(),[E]);const[w,C]=f.useState();ds(()=>{y&&C(window.getComputedStyle(y).zIndex)},[y]);const q=f.useCallback(I=>{I&&T.current===!0&&(E(),k==null||k(),T.current=!1)},[E,k]);return e.jsx(jE,{scope:i,contentWrapper:p,shouldExpandOnScrollRef:A,onScrollButtonChange:q,children:e.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:e.jsx(Qe.div,{...o,ref:j,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Cj.displayName=vE;var yE="SelectPopperPosition",vh=f.forwardRef((a,l)=>{const{__scopeSelect:i,align:c="start",collisionPadding:o=Ks,...u}=a,h=xd(i);return e.jsx(aj,{...h,...u,ref:l,align:c,collisionPadding:o,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vh.displayName=yE;var[jE,nf]=wr(xl,{}),yh="SelectViewport",Sj=f.forwardRef((a,l)=>{const{__scopeSelect:i,nonce:c,...o}=a,u=Ln(yh,i),h=nf(yh,i),p=ft(l,u.onViewportChange),g=f.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),e.jsx(hd.Slot,{scope:i,children:e.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:p,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Re(o.onScroll,y=>{const x=y.currentTarget,{contentWrapper:j,shouldExpandOnScrollRef:b}=h;if(b!=null&&b.current&&j){const A=Math.abs(g.current-x.scrollTop);if(A>0){const T=window.innerHeight-Ks*2,D=parseFloat(j.style.minHeight),S=parseFloat(j.style.height),R=Math.max(D,S);if(R<T){const k=R+A,E=Math.min(T,k),w=k-E;j.style.height=E+"px",j.style.bottom==="0px"&&(x.scrollTop=w>0?w:0,j.style.justifyContent="flex-end")}}}g.current=x.scrollTop})})})]})});Sj.displayName=yh;var kj="SelectGroup",[bE,NE]=wr(kj),wE=f.forwardRef((a,l)=>{const{__scopeSelect:i,...c}=a,o=Na();return e.jsx(bE,{scope:i,id:o,children:e.jsx(Qe.div,{role:"group","aria-labelledby":o,...c,ref:l})})});wE.displayName=kj;var _j="SelectLabel",CE=f.forwardRef((a,l)=>{const{__scopeSelect:i,...c}=a,o=NE(_j,i);return e.jsx(Qe.div,{id:o.id,...c,ref:l})});CE.displayName=_j;var Lo="SelectItem",[SE,Tj]=wr(Lo),Ej=f.forwardRef((a,l)=>{const{__scopeSelect:i,value:c,disabled:o=!1,textValue:u,...h}=a,p=Pn(Lo,i),g=Ln(Lo,i),y=p.value===c,[x,j]=f.useState(u??""),[b,A]=f.useState(!1),T=ft(l,k=>{var E;return(E=g.itemRefCallback)==null?void 0:E.call(g,k,c,o)}),D=Na(),S=f.useRef("touch"),R=()=>{o||(p.onValueChange(c),p.onOpenChange(!1))};if(c==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(SE,{scope:i,value:c,disabled:o,textId:D,isSelected:y,onItemTextChange:f.useCallback(k=>{j(E=>E||((k==null?void 0:k.textContent)??"").trim())},[]),children:e.jsx(hd.ItemSlot,{scope:i,value:c,disabled:o,textValue:x,children:e.jsx(Qe.div,{role:"option","aria-labelledby":D,"data-highlighted":b?"":void 0,"aria-selected":y&&b,"data-state":y?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...h,ref:T,onFocus:Re(h.onFocus,()=>A(!0)),onBlur:Re(h.onBlur,()=>A(!1)),onClick:Re(h.onClick,()=>{S.current!=="mouse"&&R()}),onPointerUp:Re(h.onPointerUp,()=>{S.current==="mouse"&&R()}),onPointerDown:Re(h.onPointerDown,k=>{S.current=k.pointerType}),onPointerMove:Re(h.onPointerMove,k=>{var E;S.current=k.pointerType,o?(E=g.onItemLeave)==null||E.call(g):S.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(h.onPointerLeave,k=>{var E;k.currentTarget===document.activeElement&&((E=g.onItemLeave)==null||E.call(g))}),onKeyDown:Re(h.onKeyDown,k=>{var w;((w=g.searchRef)==null?void 0:w.current)!==""&&k.key===" "||(oE.includes(k.key)&&R(),k.key===" "&&k.preventDefault())})})})})});Ej.displayName=Lo;var ki="SelectItemText",Aj=f.forwardRef((a,l)=>{const{__scopeSelect:i,className:c,style:o,...u}=a,h=Pn(ki,i),p=Ln(ki,i),g=Tj(ki,i),y=hE(ki,i),[x,j]=f.useState(null),b=ft(l,R=>j(R),g.onItemTextChange,R=>{var k;return(k=p.itemTextRefCallback)==null?void 0:k.call(p,R,g.value,g.disabled)}),A=x==null?void 0:x.textContent,T=f.useMemo(()=>e.jsx("option",{value:g.value,disabled:g.disabled,children:A},g.value),[g.disabled,g.value,A]),{onNativeOptionAdd:D,onNativeOptionRemove:S}=y;return ds(()=>(D(T),()=>S(T)),[D,S,T]),e.jsxs(e.Fragment,{children:[e.jsx(Qe.span,{id:g.textId,...u,ref:b}),g.isSelected&&h.valueNode&&!h.valueNodeHasChildren?$i.createPortal(u.children,h.valueNode):null]})});Aj.displayName=ki;var Dj="SelectItemIndicator",Mj=f.forwardRef((a,l)=>{const{__scopeSelect:i,...c}=a;return Tj(Dj,i).isSelected?e.jsx(Qe.span,{"aria-hidden":!0,...c,ref:l}):null});Mj.displayName=Dj;var jh="SelectScrollUpButton",Rj=f.forwardRef((a,l)=>{const i=Ln(jh,a.__scopeSelect),c=nf(jh,a.__scopeSelect),[o,u]=f.useState(!1),h=ft(l,c.onScrollButtonChange);return ds(()=>{if(i.viewport&&i.isPositioned){let p=function(){const y=g.scrollTop>0;u(y)};const g=i.viewport;return p(),g.addEventListener("scroll",p),()=>g.removeEventListener("scroll",p)}},[i.viewport,i.isPositioned]),o?e.jsx(zj,{...a,ref:h,onAutoScroll:()=>{const{viewport:p,selectedItem:g}=i;p&&g&&(p.scrollTop=p.scrollTop-g.offsetHeight)}}):null});Rj.displayName=jh;var bh="SelectScrollDownButton",Oj=f.forwardRef((a,l)=>{const i=Ln(bh,a.__scopeSelect),c=nf(bh,a.__scopeSelect),[o,u]=f.useState(!1),h=ft(l,c.onScrollButtonChange);return ds(()=>{if(i.viewport&&i.isPositioned){let p=function(){const y=g.scrollHeight-g.clientHeight,x=Math.ceil(g.scrollTop)<y;u(x)};const g=i.viewport;return p(),g.addEventListener("scroll",p),()=>g.removeEventListener("scroll",p)}},[i.viewport,i.isPositioned]),o?e.jsx(zj,{...a,ref:h,onAutoScroll:()=>{const{viewport:p,selectedItem:g}=i;p&&g&&(p.scrollTop=p.scrollTop+g.offsetHeight)}}):null});Oj.displayName=bh;var zj=f.forwardRef((a,l)=>{const{__scopeSelect:i,onAutoScroll:c,...o}=a,u=Ln("SelectScrollButton",i),h=f.useRef(null),p=fd(i),g=f.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return f.useEffect(()=>()=>g(),[g]),ds(()=>{var x;const y=p().find(j=>j.ref.current===document.activeElement);(x=y==null?void 0:y.ref.current)==null||x.scrollIntoView({block:"nearest"})},[p]),e.jsx(Qe.div,{"aria-hidden":!0,...o,ref:l,style:{flexShrink:0,...o.style},onPointerDown:Re(o.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(c,50))}),onPointerMove:Re(o.onPointerMove,()=>{var y;(y=u.onItemLeave)==null||y.call(u),h.current===null&&(h.current=window.setInterval(c,50))}),onPointerLeave:Re(o.onPointerLeave,()=>{g()})})}),kE="SelectSeparator",_E=f.forwardRef((a,l)=>{const{__scopeSelect:i,...c}=a;return e.jsx(Qe.div,{"aria-hidden":!0,...c,ref:l})});_E.displayName=kE;var Nh="SelectArrow",TE=f.forwardRef((a,l)=>{const{__scopeSelect:i,...c}=a,o=xd(i),u=Pn(Nh,i),h=Ln(Nh,i);return u.open&&h.position==="popper"?e.jsx(nj,{...o,...c,ref:l}):null});TE.displayName=Nh;var EE="SelectBubbleInput",Pj=f.forwardRef(({__scopeSelect:a,value:l,...i},c)=>{const o=f.useRef(null),u=ft(c,o),h=Bh(l);return f.useEffect(()=>{const p=o.current;if(!p)return;const g=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(g,"value").set;if(h!==l&&x){const j=new Event("change",{bubbles:!0});x.call(p,l),p.dispatchEvent(j)}},[h,l]),e.jsx(Qe.select,{...i,style:{...lj,...i.style},ref:u,defaultValue:l})});Pj.displayName=EE;function Lj(a){return a===""||a===void 0}function Uj(a){const l=Sa(a),i=f.useRef(""),c=f.useRef(0),o=f.useCallback(h=>{const p=i.current+h;l(p),(function g(y){i.current=y,window.clearTimeout(c.current),y!==""&&(c.current=window.setTimeout(()=>g(""),1e3))})(p)},[l]),u=f.useCallback(()=>{i.current="",window.clearTimeout(c.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(c.current),[]),[i,o,u]}function qj(a,l,i){const o=l.length>1&&Array.from(l).every(y=>y===l[0])?l[0]:l,u=i?a.indexOf(i):-1;let h=AE(a,Math.max(u,0));o.length===1&&(h=h.filter(y=>y!==i));const g=h.find(y=>y.textValue.toLowerCase().startsWith(o.toLowerCase()));return g!==i?g:void 0}function AE(a,l){return a.map((i,c)=>a[(l+c)%a.length])}var DE=fj,ME=pj,RE=vj,OE=yj,zE=jj,PE=bj,LE=Sj,UE=Ej,qE=Aj,IE=Mj,BE=Rj,FE=Oj;function Le({...a}){return e.jsx(DE,{"data-slot":"select",...a})}function Ue({...a}){return e.jsx(RE,{"data-slot":"select-value",...a})}function qe({className:a,size:l="default",children:i,...c}){return e.jsxs(ME,{"data-slot":"select-trigger","data-size":l,className:Be("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c,children:[i,e.jsx(OE,{asChild:!0,children:e.jsx(Oi,{className:"size-4 opacity-50"})})]})}function Ie({className:a,children:l,position:i="popper",...c}){return e.jsx(zE,{children:e.jsxs(PE,{"data-slot":"select-content",className:Be("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-[300px] min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...c,children:[e.jsx($E,{}),e.jsx(LE,{className:Be("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:l}),e.jsx(HE,{})]})})}function oe({className:a,children:l,...i}){return e.jsxs(UE,{"data-slot":"select-item",className:Be("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...i,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(IE,{children:e.jsx(jr,{className:"size-4"})})}),e.jsx(qE,{children:l})]})}function $E({className:a,...l}){return e.jsx(BE,{"data-slot":"select-scroll-up-button",className:Be("flex cursor-default items-center justify-center py-1",a),...l,children:e.jsx(BC,{className:"size-4"})})}function HE({className:a,...l}){return e.jsx(FE,{"data-slot":"select-scroll-down-button",className:Be("flex cursor-default items-center justify-center py-1",a),...l,children:e.jsx(Oi,{className:"size-4"})})}var wh=["Enter"," "],VE=["ArrowDown","PageUp","Home"],Ij=["ArrowUp","PageDown","End"],GE=[...VE,...Ij],YE={ltr:[...wh,"ArrowRight"],rtl:[...wh,"ArrowLeft"]},QE={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wi="Menu",[qi,WE,XE]=Gh(Wi),[vl,Bj]=Ta(Wi,[XE,od,td]),pd=od(),Fj=td(),[ZE,yl]=vl(Wi),[KE,Xi]=vl(Wi),$j=a=>{const{__scopeMenu:l,open:i=!1,children:c,dir:o,onOpenChange:u,modal:h=!0}=a,p=pd(l),[g,y]=f.useState(null),x=f.useRef(!1),j=Sa(u),b=ed(o);return f.useEffect(()=>{const A=()=>{x.current=!0,document.addEventListener("pointerdown",T,{capture:!0,once:!0}),document.addEventListener("pointermove",T,{capture:!0,once:!0})},T=()=>x.current=!1;return document.addEventListener("keydown",A,{capture:!0}),()=>{document.removeEventListener("keydown",A,{capture:!0}),document.removeEventListener("pointerdown",T,{capture:!0}),document.removeEventListener("pointermove",T,{capture:!0})}},[]),e.jsx(tj,{...p,children:e.jsx(ZE,{scope:l,open:i,onOpenChange:j,content:g,onContentChange:y,children:e.jsx(KE,{scope:l,onClose:f.useCallback(()=>j(!1),[j]),isUsingKeyboardRef:x,dir:b,modal:h,children:c})})})};$j.displayName=Wi;var JE="MenuAnchor",lf=f.forwardRef((a,l)=>{const{__scopeMenu:i,...c}=a,o=pd(i);return e.jsx(sj,{...o,...c,ref:l})});lf.displayName=JE;var rf="MenuPortal",[eA,Hj]=vl(rf,{forceMount:void 0}),Vj=a=>{const{__scopeMenu:l,forceMount:i,children:c,container:o}=a,u=yl(rf,l);return e.jsx(eA,{scope:l,forceMount:i,children:e.jsx(Ea,{present:i||u.open,children:e.jsx(dd,{asChild:!0,container:o,children:c})})})};Vj.displayName=rf;var Vs="MenuContent",[tA,cf]=vl(Vs),Gj=f.forwardRef((a,l)=>{const i=Hj(Vs,a.__scopeMenu),{forceMount:c=i.forceMount,...o}=a,u=yl(Vs,a.__scopeMenu),h=Xi(Vs,a.__scopeMenu);return e.jsx(qi.Provider,{scope:a.__scopeMenu,children:e.jsx(Ea,{present:c||u.open,children:e.jsx(qi.Slot,{scope:a.__scopeMenu,children:h.modal?e.jsx(sA,{...o,ref:l}):e.jsx(aA,{...o,ref:l})})})})}),sA=f.forwardRef((a,l)=>{const i=yl(Vs,a.__scopeMenu),c=f.useRef(null),o=ft(l,c);return f.useEffect(()=>{const u=c.current;if(u)return af(u)},[]),e.jsx(of,{...a,ref:o,trapFocus:i.open,disableOutsidePointerEvents:i.open,disableOutsideScroll:!0,onFocusOutside:Re(a.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>i.onOpenChange(!1)})}),aA=f.forwardRef((a,l)=>{const i=yl(Vs,a.__scopeMenu);return e.jsx(of,{...a,ref:l,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>i.onOpenChange(!1)})}),nA=ul("MenuContent.ScrollLock"),of=f.forwardRef((a,l)=>{const{__scopeMenu:i,loop:c=!1,trapFocus:o,onOpenAutoFocus:u,onCloseAutoFocus:h,disableOutsidePointerEvents:p,onEntryFocus:g,onEscapeKeyDown:y,onPointerDownOutside:x,onFocusOutside:j,onInteractOutside:b,onDismiss:A,disableOutsideScroll:T,...D}=a,S=yl(Vs,i),R=Xi(Vs,i),k=pd(i),E=Fj(i),w=WE(i),[C,q]=f.useState(null),I=f.useRef(null),W=ft(l,I,S.onContentChange),P=f.useRef(0),Y=f.useRef(""),B=f.useRef(0),le=f.useRef(null),Z=f.useRef("right"),$=f.useRef(0),ee=T?md:f.Fragment,N=T?{as:nA,allowPinchZoom:!0}:void 0,L=O=>{var pe,Ne;const M=Y.current+O,U=w().filter(Fe=>!Fe.disabled),Q=document.activeElement,H=(pe=U.find(Fe=>Fe.ref.current===Q))==null?void 0:pe.textValue,ie=U.map(Fe=>Fe.textValue),ye=pA(ie,M,H),ge=(Ne=U.find(Fe=>Fe.textValue===ye))==null?void 0:Ne.ref.current;(function Fe(De){Y.current=De,window.clearTimeout(P.current),De!==""&&(P.current=window.setTimeout(()=>Fe(""),1e3))})(M),ge&&setTimeout(()=>ge.focus())};f.useEffect(()=>()=>window.clearTimeout(P.current),[]),Qh();const v=f.useCallback(O=>{var U,Q;return Z.current===((U=le.current)==null?void 0:U.side)&&vA(O,(Q=le.current)==null?void 0:Q.area)},[]);return e.jsx(tA,{scope:i,searchRef:Y,onItemEnter:f.useCallback(O=>{v(O)&&O.preventDefault()},[v]),onItemLeave:f.useCallback(O=>{var M;v(O)||((M=I.current)==null||M.focus(),q(null))},[v]),onTriggerLeave:f.useCallback(O=>{v(O)&&O.preventDefault()},[v]),pointerGraceTimerRef:B,onPointerGraceIntentChange:f.useCallback(O=>{le.current=O},[]),children:e.jsx(ee,{...N,children:e.jsx(nd,{asChild:!0,trapped:o,onMountAutoFocus:Re(u,O=>{var M;O.preventDefault(),(M=I.current)==null||M.focus({preventScroll:!0})}),onUnmountAutoFocus:h,children:e.jsx(ad,{asChild:!0,disableOutsidePointerEvents:p,onEscapeKeyDown:y,onPointerDownOutside:x,onFocusOutside:j,onInteractOutside:b,onDismiss:A,children:e.jsx(y0,{asChild:!0,...E,dir:R.dir,orientation:"vertical",loop:c,currentTabStopId:C,onCurrentTabStopIdChange:q,onEntryFocus:Re(g,O=>{R.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(aj,{role:"menu","aria-orientation":"vertical","data-state":cb(S.open),"data-radix-menu-content":"",dir:R.dir,...k,...D,ref:W,style:{outline:"none",...D.style},onKeyDown:Re(D.onKeyDown,O=>{const U=O.target.closest("[data-radix-menu-content]")===O.currentTarget,Q=O.ctrlKey||O.altKey||O.metaKey,H=O.key.length===1;U&&(O.key==="Tab"&&O.preventDefault(),!Q&&H&&L(O.key));const ie=I.current;if(O.target!==ie||!GE.includes(O.key))return;O.preventDefault();const ge=w().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);Ij.includes(O.key)&&ge.reverse(),fA(ge)}),onBlur:Re(a.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(P.current),Y.current="")}),onPointerMove:Re(a.onPointerMove,Ii(O=>{const M=O.target,U=$.current!==O.clientX;if(O.currentTarget.contains(M)&&U){const Q=O.clientX>$.current?"right":"left";Z.current=Q,$.current=O.clientX}}))})})})})})})});Gj.displayName=Vs;var lA="MenuGroup",df=f.forwardRef((a,l)=>{const{__scopeMenu:i,...c}=a;return e.jsx(Qe.div,{role:"group",...c,ref:l})});df.displayName=lA;var rA="MenuLabel",Yj=f.forwardRef((a,l)=>{const{__scopeMenu:i,...c}=a;return e.jsx(Qe.div,{...c,ref:l})});Yj.displayName=rA;var Uo="MenuItem",ry="menu.itemSelect",gd=f.forwardRef((a,l)=>{const{disabled:i=!1,onSelect:c,...o}=a,u=f.useRef(null),h=Xi(Uo,a.__scopeMenu),p=cf(Uo,a.__scopeMenu),g=ft(l,u),y=f.useRef(!1),x=()=>{const j=u.current;if(!i&&j){const b=new CustomEvent(ry,{bubbles:!0,cancelable:!0});j.addEventListener(ry,A=>c==null?void 0:c(A),{once:!0}),s0(j,b),b.defaultPrevented?y.current=!1:h.onClose()}};return e.jsx(Qj,{...o,ref:g,disabled:i,onClick:Re(a.onClick,x),onPointerDown:j=>{var b;(b=a.onPointerDown)==null||b.call(a,j),y.current=!0},onPointerUp:Re(a.onPointerUp,j=>{var b;y.current||(b=j.currentTarget)==null||b.click()}),onKeyDown:Re(a.onKeyDown,j=>{const b=p.searchRef.current!=="";i||b&&j.key===" "||wh.includes(j.key)&&(j.currentTarget.click(),j.preventDefault())})})});gd.displayName=Uo;var Qj=f.forwardRef((a,l)=>{const{__scopeMenu:i,disabled:c=!1,textValue:o,...u}=a,h=cf(Uo,i),p=Fj(i),g=f.useRef(null),y=ft(l,g),[x,j]=f.useState(!1),[b,A]=f.useState("");return f.useEffect(()=>{const T=g.current;T&&A((T.textContent??"").trim())},[u.children]),e.jsx(qi.ItemSlot,{scope:i,disabled:c,textValue:o??b,children:e.jsx(j0,{asChild:!0,...p,focusable:!c,children:e.jsx(Qe.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":c||void 0,"data-disabled":c?"":void 0,...u,ref:y,onPointerMove:Re(a.onPointerMove,Ii(T=>{c?h.onItemLeave(T):(h.onItemEnter(T),T.defaultPrevented||T.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Re(a.onPointerLeave,Ii(T=>h.onItemLeave(T))),onFocus:Re(a.onFocus,()=>j(!0)),onBlur:Re(a.onBlur,()=>j(!1))})})})}),iA="MenuCheckboxItem",Wj=f.forwardRef((a,l)=>{const{checked:i=!1,onCheckedChange:c,...o}=a;return e.jsx(eb,{scope:a.__scopeMenu,checked:i,children:e.jsx(gd,{role:"menuitemcheckbox","aria-checked":qo(i)?"mixed":i,...o,ref:l,"data-state":mf(i),onSelect:Re(o.onSelect,()=>c==null?void 0:c(qo(i)?!0:!i),{checkForDefaultPrevented:!1})})})});Wj.displayName=iA;var Xj="MenuRadioGroup",[cA,oA]=vl(Xj,{value:void 0,onValueChange:()=>{}}),Zj=f.forwardRef((a,l)=>{const{value:i,onValueChange:c,...o}=a,u=Sa(c);return e.jsx(cA,{scope:a.__scopeMenu,value:i,onValueChange:u,children:e.jsx(df,{...o,ref:l})})});Zj.displayName=Xj;var Kj="MenuRadioItem",Jj=f.forwardRef((a,l)=>{const{value:i,...c}=a,o=oA(Kj,a.__scopeMenu),u=i===o.value;return e.jsx(eb,{scope:a.__scopeMenu,checked:u,children:e.jsx(gd,{role:"menuitemradio","aria-checked":u,...c,ref:l,"data-state":mf(u),onSelect:Re(c.onSelect,()=>{var h;return(h=o.onValueChange)==null?void 0:h.call(o,i)},{checkForDefaultPrevented:!1})})})});Jj.displayName=Kj;var uf="MenuItemIndicator",[eb,dA]=vl(uf,{checked:!1}),tb=f.forwardRef((a,l)=>{const{__scopeMenu:i,forceMount:c,...o}=a,u=dA(uf,i);return e.jsx(Ea,{present:c||qo(u.checked)||u.checked===!0,children:e.jsx(Qe.span,{...o,ref:l,"data-state":mf(u.checked)})})});tb.displayName=uf;var uA="MenuSeparator",sb=f.forwardRef((a,l)=>{const{__scopeMenu:i,...c}=a;return e.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...c,ref:l})});sb.displayName=uA;var mA="MenuArrow",ab=f.forwardRef((a,l)=>{const{__scopeMenu:i,...c}=a,o=pd(i);return e.jsx(nj,{...o,...c,ref:l})});ab.displayName=mA;var hA="MenuSub",[V6,nb]=vl(hA),_i="MenuSubTrigger",lb=f.forwardRef((a,l)=>{const i=yl(_i,a.__scopeMenu),c=Xi(_i,a.__scopeMenu),o=nb(_i,a.__scopeMenu),u=cf(_i,a.__scopeMenu),h=f.useRef(null),{pointerGraceTimerRef:p,onPointerGraceIntentChange:g}=u,y={__scopeMenu:a.__scopeMenu},x=f.useCallback(()=>{h.current&&window.clearTimeout(h.current),h.current=null},[]);return f.useEffect(()=>x,[x]),f.useEffect(()=>{const j=p.current;return()=>{window.clearTimeout(j),g(null)}},[p,g]),e.jsx(lf,{asChild:!0,...y,children:e.jsx(Qj,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":o.contentId,"data-state":cb(i.open),...a,ref:Zo(l,o.onTriggerChange),onClick:j=>{var b;(b=a.onClick)==null||b.call(a,j),!(a.disabled||j.defaultPrevented)&&(j.currentTarget.focus(),i.open||i.onOpenChange(!0))},onPointerMove:Re(a.onPointerMove,Ii(j=>{u.onItemEnter(j),!j.defaultPrevented&&!a.disabled&&!i.open&&!h.current&&(u.onPointerGraceIntentChange(null),h.current=window.setTimeout(()=>{i.onOpenChange(!0),x()},100))})),onPointerLeave:Re(a.onPointerLeave,Ii(j=>{var A,T;x();const b=(A=i.content)==null?void 0:A.getBoundingClientRect();if(b){const D=(T=i.content)==null?void 0:T.dataset.side,S=D==="right",R=S?-5:5,k=b[S?"left":"right"],E=b[S?"right":"left"];u.onPointerGraceIntentChange({area:[{x:j.clientX+R,y:j.clientY},{x:k,y:b.top},{x:E,y:b.top},{x:E,y:b.bottom},{x:k,y:b.bottom}],side:D}),window.clearTimeout(p.current),p.current=window.setTimeout(()=>u.onPointerGraceIntentChange(null),300)}else{if(u.onTriggerLeave(j),j.defaultPrevented)return;u.onPointerGraceIntentChange(null)}})),onKeyDown:Re(a.onKeyDown,j=>{var A;const b=u.searchRef.current!=="";a.disabled||b&&j.key===" "||YE[c.dir].includes(j.key)&&(i.onOpenChange(!0),(A=i.content)==null||A.focus(),j.preventDefault())})})})});lb.displayName=_i;var rb="MenuSubContent",ib=f.forwardRef((a,l)=>{const i=Hj(Vs,a.__scopeMenu),{forceMount:c=i.forceMount,...o}=a,u=yl(Vs,a.__scopeMenu),h=Xi(Vs,a.__scopeMenu),p=nb(rb,a.__scopeMenu),g=f.useRef(null),y=ft(l,g);return e.jsx(qi.Provider,{scope:a.__scopeMenu,children:e.jsx(Ea,{present:c||u.open,children:e.jsx(qi.Slot,{scope:a.__scopeMenu,children:e.jsx(of,{id:p.contentId,"aria-labelledby":p.triggerId,...o,ref:y,align:"start",side:h.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var j;h.isUsingKeyboardRef.current&&((j=g.current)==null||j.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:Re(a.onFocusOutside,x=>{x.target!==p.trigger&&u.onOpenChange(!1)}),onEscapeKeyDown:Re(a.onEscapeKeyDown,x=>{h.onClose(),x.preventDefault()}),onKeyDown:Re(a.onKeyDown,x=>{var A;const j=x.currentTarget.contains(x.target),b=QE[h.dir].includes(x.key);j&&b&&(u.onOpenChange(!1),(A=p.trigger)==null||A.focus(),x.preventDefault())})})})})})});ib.displayName=rb;function cb(a){return a?"open":"closed"}function qo(a){return a==="indeterminate"}function mf(a){return qo(a)?"indeterminate":a?"checked":"unchecked"}function fA(a){const l=document.activeElement;for(const i of a)if(i===l||(i.focus(),document.activeElement!==l))return}function xA(a,l){return a.map((i,c)=>a[(l+c)%a.length])}function pA(a,l,i){const o=l.length>1&&Array.from(l).every(y=>y===l[0])?l[0]:l,u=i?a.indexOf(i):-1;let h=xA(a,Math.max(u,0));o.length===1&&(h=h.filter(y=>y!==i));const g=h.find(y=>y.toLowerCase().startsWith(o.toLowerCase()));return g!==i?g:void 0}function gA(a,l){const{x:i,y:c}=a;let o=!1;for(let u=0,h=l.length-1;u<l.length;h=u++){const p=l[u],g=l[h],y=p.x,x=p.y,j=g.x,b=g.y;x>c!=b>c&&i<(j-y)*(c-x)/(b-x)+y&&(o=!o)}return o}function vA(a,l){if(!l)return!1;const i={x:a.clientX,y:a.clientY};return gA(i,l)}function Ii(a){return l=>l.pointerType==="mouse"?a(l):void 0}var yA=$j,jA=lf,bA=Vj,NA=Gj,wA=df,CA=Yj,SA=gd,kA=Wj,_A=Zj,TA=Jj,EA=tb,AA=sb,DA=ab,MA=lb,RA=ib,vd="DropdownMenu",[OA,G6]=Ta(vd,[Bj]),xs=Bj(),[zA,ob]=OA(vd),db=a=>{const{__scopeDropdownMenu:l,children:i,dir:c,open:o,defaultOpen:u,onOpenChange:h,modal:p=!0}=a,g=xs(l),y=f.useRef(null),[x,j]=Rn({prop:o,defaultProp:u??!1,onChange:h,caller:vd});return e.jsx(zA,{scope:l,triggerId:Na(),triggerRef:y,contentId:Na(),open:x,onOpenChange:j,onOpenToggle:f.useCallback(()=>j(b=>!b),[j]),modal:p,children:e.jsx(yA,{...g,open:x,onOpenChange:j,dir:c,modal:p,children:i})})};db.displayName=vd;var ub="DropdownMenuTrigger",mb=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,disabled:c=!1,...o}=a,u=ob(ub,i),h=xs(i);return e.jsx(jA,{asChild:!0,...h,children:e.jsx(Qe.button,{type:"button",id:u.triggerId,"aria-haspopup":"menu","aria-expanded":u.open,"aria-controls":u.open?u.contentId:void 0,"data-state":u.open?"open":"closed","data-disabled":c?"":void 0,disabled:c,...o,ref:Zo(l,u.triggerRef),onPointerDown:Re(a.onPointerDown,p=>{!c&&p.button===0&&p.ctrlKey===!1&&(u.onOpenToggle(),u.open||p.preventDefault())}),onKeyDown:Re(a.onKeyDown,p=>{c||(["Enter"," "].includes(p.key)&&u.onOpenToggle(),p.key==="ArrowDown"&&u.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(p.key)&&p.preventDefault())})})})});mb.displayName=ub;var PA="DropdownMenuPortal",hb=a=>{const{__scopeDropdownMenu:l,...i}=a,c=xs(l);return e.jsx(bA,{...c,...i})};hb.displayName=PA;var fb="DropdownMenuContent",xb=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=ob(fb,i),u=xs(i),h=f.useRef(!1);return e.jsx(NA,{id:o.contentId,"aria-labelledby":o.triggerId,...u,...c,ref:l,onCloseAutoFocus:Re(a.onCloseAutoFocus,p=>{var g;h.current||(g=o.triggerRef.current)==null||g.focus(),h.current=!1,p.preventDefault()}),onInteractOutside:Re(a.onInteractOutside,p=>{const g=p.detail.originalEvent,y=g.button===0&&g.ctrlKey===!0,x=g.button===2||y;(!o.modal||x)&&(h.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xb.displayName=fb;var LA="DropdownMenuGroup",UA=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(wA,{...o,...c,ref:l})});UA.displayName=LA;var qA="DropdownMenuLabel",IA=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(CA,{...o,...c,ref:l})});IA.displayName=qA;var BA="DropdownMenuItem",pb=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(SA,{...o,...c,ref:l})});pb.displayName=BA;var FA="DropdownMenuCheckboxItem",$A=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(kA,{...o,...c,ref:l})});$A.displayName=FA;var HA="DropdownMenuRadioGroup",VA=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(_A,{...o,...c,ref:l})});VA.displayName=HA;var GA="DropdownMenuRadioItem",YA=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(TA,{...o,...c,ref:l})});YA.displayName=GA;var QA="DropdownMenuItemIndicator",WA=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(EA,{...o,...c,ref:l})});WA.displayName=QA;var XA="DropdownMenuSeparator",ZA=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(AA,{...o,...c,ref:l})});ZA.displayName=XA;var KA="DropdownMenuArrow",JA=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(DA,{...o,...c,ref:l})});JA.displayName=KA;var e3="DropdownMenuSubTrigger",t3=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(MA,{...o,...c,ref:l})});t3.displayName=e3;var s3="DropdownMenuSubContent",a3=f.forwardRef((a,l)=>{const{__scopeDropdownMenu:i,...c}=a,o=xs(i);return e.jsx(RA,{...o,...c,ref:l,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a3.displayName=s3;var n3=db,l3=mb,r3=hb,i3=xb,c3=pb;function Ch({...a}){return e.jsx(n3,{"data-slot":"dropdown-menu",...a})}function Sh({...a}){return e.jsx(l3,{"data-slot":"dropdown-menu-trigger",...a})}function kh({className:a,sideOffset:l=4,...i}){return e.jsx(r3,{children:e.jsx(i3,{"data-slot":"dropdown-menu-content",sideOffset:l,className:Be("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...i})})}function Wa({className:a,inset:l,variant:i="default",...c}){return e.jsx(c3,{"data-slot":"dropdown-menu-item","data-inset":l,"data-variant":i,className:Be("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}const o3=()=>e.jsxs("div",{className:"text-xs text-gray-400 text-center py-2",children:["Build ","2025-11-08.FIXED"]}),d3=a=>{switch(a){case"new":return e.jsx(Je,{className:"w-4 h-4"});case"assigned":return e.jsx(Pt,{className:"w-4 h-4"});case"in_progress":return e.jsx(an,{className:"w-4 h-4"});case"waiting_approval":return e.jsx(ja,{className:"w-4 h-4"});case"parked":return e.jsx(Ky,{className:"w-4 h-4"});case"completed":return e.jsx(Ze,{className:"w-4 h-4"});case"closed":return e.jsx(it,{className:"w-4 h-4"});default:return e.jsx(ja,{className:"w-4 h-4"})}},u3=a=>{switch(a){case"low":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-red-100 text-red-800 border-red-200";case"critical":return"bg-red-200 text-red-900 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m3=a=>{switch(a){case"new":return"bg-blue-100 text-blue-800 border-blue-200";case"assigned":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in_progress":return"bg-orange-100 text-orange-800 border-orange-200";case"waiting_approval":return"bg-purple-100 text-purple-800 border-purple-200";case"parked":return"bg-gray-100 text-gray-800 border-gray-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-slate-100 text-slate-800 border-slate-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};function h3({ticket:a,users:l,currentUser:i,onClick:c}){var p,g;const o=l.find(y=>y.id===a.assignedTo);l.find(y=>y.id===a.createdBy);const u=a.dueDate&&new Date(a.dueDate)<new Date,h=a.assignedTo===i.id;return e.jsx(de,{className:`cursor-pointer hover:shadow-md transition-all duration-200 ${h?"ring-1 ring-blue-200 bg-blue-50/30":""} ${u?"border-red-300":""}`,onClick:c,children:e.jsx(me,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate text-sm",children:a.title}),e.jsxs("span",{className:"text-xs text-gray-500 flex-shrink-0",children:["#",a.id]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${h?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700"}`,children:o.name}),e.jsx(He,{className:`${u3(a.priority)} border text-xs`,children:((p=h0[a.priority])==null?void 0:p.label)||a.priority}),e.jsxs(He,{className:`${m3(a.status)} border text-xs`,children:[d3(a.status),e.jsx("span",{className:"ml-1",children:((g=v4[a.status])==null?void 0:g.label)||a.status})]})]})]})})})}function Vt({className:a,...l}){return e.jsx("textarea",{"data-slot":"textarea",className:Be("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...l})}const f3=["General","IT","Maintenance","Construction","Manufacturing","Facilities"];function x3({ticketId:a,onClose:l}){const{tickets:i,updateTicket:c}=Da(),[o,u]=f.useState(null),[h,p]=f.useState(!1),[g,y]=f.useState(""),[x,j]=f.useState({title:"",description:"",priority:"medium",sector:"",scheduled_date:"",scheduled_duration_mins:"",method_statement:"",risk_assessment:""});f.useEffect(()=>{const T=i.find(D=>String(D.id)===String(a));T&&(u(T),j({title:T.title||"",description:T.description||"",priority:T.priority||"medium",sector:T.sector||"",scheduled_date:T.scheduled_date?(""+T.scheduled_date).slice(0,10):"",scheduled_duration_mins:T.scheduled_duration_mins??"",method_statement:T.method_statement?JSON.stringify(T.method_statement,null,2):"",risk_assessment:T.risk_assessment?JSON.stringify(T.risk_assessment,null,2):""}))},[i,a]);const b=T=>D=>{const S=D!=null&&D.target?D.target.value:D;j(R=>({...R,[T]:S}))},A=async()=>{p(!0),y("");try{let T=null;x.scheduled_date&&(x.scheduled_date.includes("T")?T=x.scheduled_date:T=new Date(x.scheduled_date+"T09:00:00").toISOString());const D={title:x.title||void 0,description:x.description||void 0,priority:x.priority||void 0,sector:x.sector||null,scheduled_date:T,scheduled_duration_mins:x.scheduled_duration_mins===""?null:Number(x.scheduled_duration_mins),method_statement:iy(x.method_statement),risk_assessment:iy(x.risk_assessment)};await c(a,D),l()}catch(T){console.error("[TicketDetailModal] save failed",T),y((T==null?void 0:T.message)||"Failed to save changes")}finally{p(!1)}};return o?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Ticket: ",o.title]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 grid md:grid-cols-2 gap-4",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Basics"})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"title",children:"Title"}),e.jsx(se,{id:"title",value:x.title,onChange:b("title")})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"description",children:"Description"}),e.jsx(Vt,{id:"description",rows:5,value:x.description,onChange:b("description")})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Priority"}),e.jsxs(Le,{value:x.priority,onValueChange:b("priority"),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select priority"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"low",children:"Low"}),e.jsx(oe,{value:"medium",children:"Medium"}),e.jsx(oe,{value:"high",children:"High"}),e.jsx(oe,{value:"urgent",children:"Urgent"})]})]})]})]})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"RAMS & Scheduling"})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Sector"}),e.jsxs(Le,{value:x.sector||"none",onValueChange:T=>b("sector")(T==="none"?"":T),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select sector"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"none",children:"None"}),f3.map(T=>e.jsx(oe,{value:T,children:T},T))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(J,{htmlFor:"scheduled_date",className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4"})," Scheduled Date"]}),e.jsx(se,{id:"scheduled_date",type:"date",value:x.scheduled_date,onChange:b("scheduled_date")})]}),e.jsxs("div",{children:[e.jsxs(J,{htmlFor:"scheduled_duration_mins",className:"flex items-center gap-2",children:[e.jsx(an,{className:"w-4 h-4"})," Duration (mins)"]}),e.jsx(se,{id:"scheduled_duration_mins",type:"number",min:"0",step:"15",value:x.scheduled_duration_mins,onChange:b("scheduled_duration_mins")})]})]}),e.jsxs("div",{children:[e.jsxs(J,{htmlFor:"method_statement",className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"})," Method Statement (JSON)"]}),e.jsx(Vt,{id:"method_statement",rows:6,value:x.method_statement,onChange:b("method_statement"),placeholder:'{"tasks":[...], "ppe":[...]}'})]}),e.jsxs("div",{children:[e.jsxs(J,{htmlFor:"risk_assessment",className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"})," Risk Assessment (JSON)"]}),e.jsx(Vt,{id:"risk_assessment",rows:6,value:x.risk_assessment,onChange:b("risk_assessment"),placeholder:'{"hazards":[...], "mitigations":[...]}'})]})]})]})]}),g&&e.jsx("div",{className:"px-4 pb-2 text-red-600 text-sm",children:g}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-end gap-3",children:[e.jsx(F,{variant:"outline",onClick:l,children:"Close"}),e.jsx(F,{onClick:A,disabled:h,className:"worktrackr-bg-black hover:bg-gray-800",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Ka,{className:"w-4 h-4 mr-2 animate-spin"})," Saving"]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"})," Save Changes"]})})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 flex items-center gap-3",children:[e.jsx(Ka,{className:"w-5 h-5 animate-spin"}),"Loading ticket"]})})}function iy(a){const l=(a||"").trim();if(!l)return null;try{return JSON.parse(l)}catch{return l}}const Km={COMPANY:"company",INDIVIDUAL:"individual"},cy={ACTIVE:"active",INACTIVE:"inactive"},p3=({selectedContactId:a,onContactSelect:l,onCreateNew:i,placeholder:c="Select or search for a contact...",showCreateButton:o=!0,className:u=""})=>{const[h,p]=f.useState(!1),[g,y]=f.useState(""),[x,j]=f.useState([]),[b,A]=f.useState([]),[T,D]=f.useState(null);f.useEffect(()=>{S()},[]),f.useEffect(()=>{if(a&&x.length>0){const C=x.find(q=>q.id===a);D(C||null)}else D(null)},[a,x]),f.useEffect(()=>{R()},[x,g]);const S=async()=>{try{const C=await fetch("/api/contacts",{credentials:"include"});if(C.ok){const q=await C.json();j(q.contacts||q||[])}else console.error("Failed to load contacts:",C.statusText),j([])}catch(C){console.error("Error loading contacts:",C),j([])}},R=()=>{if(!g){A(x.slice(0,10));return}const C=g.toLowerCase(),q=x.filter(I=>{var W,P,Y,B,le;return((W=I.name)==null?void 0:W.toLowerCase().includes(C))||((P=I.display_name)==null?void 0:P.toLowerCase().includes(C))||((Y=I.company_name)==null?void 0:Y.toLowerCase().includes(C))||((B=I.email)==null?void 0:B.toLowerCase().includes(C))||((le=I.phone)==null?void 0:le.toLowerCase().includes(C))});A(q.slice(0,10))},k=C=>{D(C),l(C),p(!1),y("")},E=()=>{p(!1),i&&i(g)},w=C=>{const q=C.city?`${C.city}${C.postal_code?", "+C.postal_code:""}`:"";return{name:C.display_name||C.name||C.company_name||"Unnamed Contact",subtitle:C.email||C.phone||C.mobile||"",location:q,type:C.type||Km.INDIVIDUAL,status:C.is_active?cy.ACTIVE:cy.INACTIVE}};return e.jsxs("div",{className:`relative ${u}`,children:[e.jsxs("div",{className:`
          flex items-center justify-between p-3 border rounded-lg cursor-pointer
          ${h?"border-blue-500 ring-2 ring-blue-200":"border-gray-300"}
          ${T?"bg-blue-50":"bg-white hover:bg-gray-50"}
        `,onClick:()=>p(!h),children:[T?e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg border",children:T.type===Km.COMPANY?e.jsx(ea,{className:"w-4 h-4 text-gray-600"}):e.jsx(Pt,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:T.display_name||T.name||T.company_name}),(T.email||T.phone)&&e.jsx("p",{className:"text-sm text-gray-500 truncate",children:T.email||T.phone})]})]}):e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(Ca,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-500",children:c})]}),e.jsx(Oi,{className:`w-4 h-4 text-gray-400 transition-transform ${h?"rotate-180":""}`})]}),h&&e.jsxs("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(se,{placeholder:"Search contacts...",value:g,onChange:C=>y(C.target.value),className:"pl-10",autoFocus:!0})]})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:b.length===0?e.jsx("div",{className:"p-4 text-center",children:g?e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600 mb-3",children:['No contacts found for "',g,'"']}),o&&e.jsxs(F,{onClick:E,size:"sm",className:"w-full",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),'Create "',g,'" as new contact']})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"No contacts available"}),o&&e.jsxs(F,{onClick:E,size:"sm",className:"w-full",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create new contact"]})]})}):e.jsxs("div",{className:"py-2",children:[b.map(C=>{const q=w(C),I=(T==null?void 0:T.id)===C.id;return e.jsxs("div",{className:`
                        flex items-center space-x-3 px-4 py-3 cursor-pointer transition-colors
                        ${I?"bg-blue-50":"hover:bg-gray-50"}
                      `,onClick:()=>k(C),children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:C.type===Km.COMPANY?e.jsx(ea,{className:"w-4 h-4 text-gray-600"}):e.jsx(Pt,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:q.name}),q.subtitle&&e.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.subtitle})]}),I&&e.jsx(jr,{className:"w-4 h-4 text-blue-600"})]},C.id)}),o&&g&&!b.some(C=>C.name.toLowerCase()===g.toLowerCase())&&e.jsx("div",{className:"border-t mt-2 pt-2",children:e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 cursor-pointer hover:bg-gray-50 text-blue-600",onClick:E,children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Je,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:['Create "',g,'" as new contact']}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add this as a new contact to your database"})]})]})}),o&&e.jsx("div",{className:"border-t mt-2 pt-2",children:e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 cursor-pointer hover:bg-gray-50 text-blue-600",onClick:E,children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Je,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Create new contact"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add a new contact to your database"})]})]})})]})})]}),h&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)})]})},Zt={COMPANY:"company",INDIVIDUAL:"individual"},Es={BILLING:"billing",SHIPPING:"shipping",SERVICE:"service",OFFICE:"office"},vt={ACTIVE:"active",INACTIVE:"inactive",AT_RISK:"at_risk",PROSPECT:"prospect",ARCHIVED:"archived"},Js={DUE_ON_RECEIPT:"Due on Receipt",NET_7:"Net 7",NET_15:"Net 15",NET_30:"Net 30",NET_60:"Net 60",NET_90:"Net 90"},oy={GBP:{code:"GBP",symbol:"",name:"British Pound"},USD:{code:"USD",symbol:"$",name:"US Dollar"},EUR:{code:"EUR",symbol:"",name:"Euro"},CAD:{code:"CAD",symbol:"C$",name:"Canadian Dollar"},AUD:{code:"AUD",symbol:"A$",name:"Australian Dollar"}};class g3{constructor(){this.contacts=new Map,this.contactPersons=new Map,this.loadFromStorage()}generateId(){return"contact_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}createContact(l){var c,o,u,h,p,g,y,x,j,b,A,T,D,S,R,k,E,w;const i={id:this.generateId(),type:l.type||Zt.COMPANY,name:l.name||"",displayName:l.displayName||l.name||"",primaryContact:l.primaryContact||"",email:l.email||"",phone:l.phone||"",website:l.website||"",addresses:l.addresses||[],accounting:{xeroContactId:((c=l.accounting)==null?void 0:c.xeroContactId)||null,quickbooksContactId:((o=l.accounting)==null?void 0:o.quickbooksContactId)||null,taxNumber:((u=l.accounting)==null?void 0:u.taxNumber)||"",paymentTerms:((h=l.accounting)==null?void 0:h.paymentTerms)||Js.NET_30,currency:((p=l.accounting)==null?void 0:p.currency)||"GBP",accountCode:((g=l.accounting)==null?void 0:g.accountCode)||"",creditLimit:((y=l.accounting)==null?void 0:y.creditLimit)||0,discountRate:((x=l.accounting)==null?void 0:x.discountRate)||0},crm:{status:((j=l.crm)==null?void 0:j.status)||vt.PROSPECT,lastActivity:((b=l.crm)==null?void 0:b.lastActivity)||null,nextCRMEvent:((A=l.crm)==null?void 0:A.nextCRMEvent)||null,renewalsCount:((T=l.crm)==null?void 0:T.renewalsCount)||0,openOppsCount:((D=l.crm)==null?void 0:D.openOppsCount)||0,totalProfit:((S=l.crm)==null?void 0:S.totalProfit)||0,assignedTo:((R=l.crm)==null?void 0:R.assignedTo)||null,source:((k=l.crm)==null?void 0:k.source)||"",industry:((E=l.crm)==null?void 0:E.industry)||"",companySize:((w=l.crm)==null?void 0:w.companySize)||""},contactPersons:l.contactPersons||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:l.createdBy||null,tags:l.tags||[],notes:l.notes||"",customFields:l.customFields||{}};return this.contacts.set(i.id,i),this.saveToStorage(),i}updateContact(l,i){const c=this.contacts.get(l);if(!c)throw new Error(`Contact with ID ${l} not found`);const o={...c,...i,updatedAt:new Date().toISOString()};return this.contacts.set(l,o),this.saveToStorage(),o}getContact(l){return this.contacts.get(l)}getAllContacts(){return Array.from(this.contacts.values())}searchContacts(l){const i=l.toLowerCase();return this.getAllContacts().filter(c=>c.name.toLowerCase().includes(i)||c.email.toLowerCase().includes(i)||c.primaryContact.toLowerCase().includes(i)||c.phone.includes(i)||c.tags.some(o=>o.toLowerCase().includes(i)))}getContactsByStatus(l){return this.getAllContacts().filter(i=>i.crm.status===l)}getContactsByType(l){return this.getAllContacts().filter(i=>i.type===l)}deleteContact(l){const i=this.contacts.delete(l);return i&&this.saveToStorage(),i}addAddress(l,i){const c=this.getContact(l);if(!c)throw new Error(`Contact with ID ${l} not found`);const o={id:this.generateId(),type:i.type||Es.BILLING,line1:i.line1||"",line2:i.line2||"",city:i.city||"",state:i.state||"",postcode:i.postcode||"",country:i.country||"United Kingdom",isPrimary:i.isPrimary||!1};return o.isPrimary&&c.addresses.forEach(u=>{u.type===o.type&&(u.isPrimary=!1)}),c.addresses.push(o),this.updateContact(l,{addresses:c.addresses})}addContactPerson(l,i){const c=this.getContact(l);if(!c)throw new Error(`Contact with ID ${l} not found`);const o={id:this.generateId(),name:i.name||"",title:i.title||"",email:i.email||"",phone:i.phone||"",department:i.department||"",isPrimary:i.isPrimary||!1,notes:i.notes||""};return o.isPrimary&&c.contactPersons.forEach(u=>{u.isPrimary=!1}),c.contactPersons.push(o),this.updateContact(l,{contactPersons:c.contactPersons})}getPrimaryAddress(l,i=Es.BILLING){const c=this.getContact(l);return c?c.addresses.find(o=>o.type===i&&o.isPrimary)||c.addresses.find(o=>o.type===i):null}getPrimaryContactPerson(l){const i=this.getContact(l);return i&&(i.contactPersons.find(c=>c.isPrimary)||i.contactPersons[0])||null}updateCRMData(l,i){const c=this.getContact(l);if(!c)throw new Error(`Contact with ID ${l} not found`);const o={...c.crm,...i};return this.updateContact(l,{crm:o})}updateAccountingData(l,i){const c=this.getContact(l);if(!c)throw new Error(`Contact with ID ${l} not found`);const o={...c.accounting,...i};return this.updateContact(l,{accounting:o})}getContactsForSelector(){return this.getAllContacts().map(l=>({id:l.id,name:l.name,displayName:l.displayName,email:l.email,type:l.type,status:l.crm.status}))}getStatistics(){const l=this.getAllContacts();return{total:l.length,active:l.filter(i=>i.crm.status===vt.ACTIVE).length,prospects:l.filter(i=>i.crm.status===vt.PROSPECT).length,atRisk:l.filter(i=>i.crm.status===vt.AT_RISK).length,companies:l.filter(i=>i.type===Zt.COMPANY).length,individuals:l.filter(i=>i.type===Zt.INDIVIDUAL).length,totalProfit:l.reduce((i,c)=>i+(c.crm.totalProfit||0),0),totalRenewals:l.reduce((i,c)=>i+(c.crm.renewalsCount||0),0),totalOpportunities:l.reduce((i,c)=>i+(c.crm.openOppsCount||0),0)}}saveToStorage(){try{const l={contacts:Array.from(this.contacts.entries()),lastUpdated:new Date().toISOString()};localStorage.setItem("worktrackr_contacts",JSON.stringify(l))}catch(l){console.error("Failed to save contacts to storage:",l)}}loadFromStorage(){try{const l=localStorage.getItem("worktrackr_contacts");if(l){const i=JSON.parse(l);this.contacts=new Map(i.contacts||[])}}catch(l){console.error("Failed to load contacts from storage:",l),this.contacts=new Map}}exportContacts(){return{contacts:Array.from(this.contacts.entries()),exportedAt:new Date().toISOString(),version:"1.0"}}importContacts(l){try{return l.contacts&&Array.isArray(l.contacts)?(this.contacts=new Map(l.contacts),this.saveToStorage(),!0):!1}catch(i){return console.error("Failed to import contacts:",i),!1}}clearAll(){this.contacts.clear(),this.saveToStorage()}}const v3=new g3,y3=({isOpen:a,onClose:l,onContactCreated:i,initialName:c="",initialType:o=Zt.COMPANY})=>{const[u,h]=f.useState({type:o,name:c,displayName:"",primaryContact:"",email:"",phone:"",website:"",addresses:[],accounting:{taxNumber:"",paymentTerms:Js.NET_30,currency:"GBP",accountCode:"",creditLimit:0,discountRate:0},crm:{status:vt.PROSPECT,source:"Manual Entry",industry:"",companySize:"",assignedTo:null,tags:[],notes:"",priority:"medium",lastContact:null,nextFollowUp:null}}),[p,g]=f.useState(!1),[y,x]=f.useState({});f.useEffect(()=>{a&&(h(R=>({...R,name:c,type:o})),x({}))},[a,c,o]);const j=()=>{h({type:Zt.COMPANY,name:"",displayName:"",primaryContact:"",email:"",phone:"",website:"",addresses:[],accounting:{taxNumber:"",paymentTerms:Js.NET_30,currency:"GBP",accountCode:"",creditLimit:0,discountRate:0},crm:{status:vt.PROSPECT,source:"Manual Entry",industry:"",companySize:"",assignedTo:null,tags:[],notes:"",priority:"medium",lastContact:null,nextFollowUp:null}}),x({})},b=()=>{const R={};return console.log("[ContactCreationModal] Validating form with name:",u.name),u.name.trim()||(R.name="Company name is required",console.log("[ContactCreationModal] Validation error: company name is required")),u.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)&&(R.email="Please enter a valid email address",console.log("[ContactCreationModal] Validation error: invalid email")),console.log("[ContactCreationModal] Validation errors:",R),x(R),Object.keys(R).length===0},A=async R=>{if(R.preventDefault(),console.log("[ContactCreationModal] Submit handler called"),console.log("[ContactCreationModal] Form data:",u),!b()){console.log("[ContactCreationModal] Form validation failed");return}console.log("[ContactCreationModal] Form validation passed, creating contact..."),g(!0);try{const k={...u,displayName:u.displayName||u.name,addresses:u.addresses.length>0?u.addresses:[{type:Es.BILLING,street:"",city:"",state:"",zipCode:"",country:"United Kingdom",isPrimary:!0,fullAddress:""}]};console.log("[ContactCreationModal] Adding contact to database:",k);const E=await fetch("/api/contacts",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(k)});if(!E.ok)throw new Error("Failed to create contact");const w=await E.json();console.log("[ContactCreationModal] Contact created successfully:",w),i?(console.log("[ContactCreationModal] Calling onContactCreated callback"),i(w)):console.log("[ContactCreationModal] No onContactCreated callback provided"),console.log("[ContactCreationModal] Closing modal and resetting form"),l(),j()}catch(k){console.error("[ContactCreationModal] Error creating contact:",k),x({submit:"Failed to create contact. Please try again."})}finally{g(!1)}},T=()=>{h(R=>({...R,addresses:[...R.addresses,{type:Es.BILLING,street:"",city:"",state:"",zipCode:"",country:"United Kingdom",isPrimary:R.addresses.length===0,fullAddress:""}]}))},D=(R,k,E)=>{h(w=>({...w,addresses:w.addresses.map((C,q)=>q===R?{...C,[k]:E}:C)}))},S=R=>{h(k=>({...k,addresses:k.addresses.filter((E,w)=>w!==R)}))};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(de,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ke,{className:"flex items-center gap-2",children:[u.type===Zt.COMPANY?e.jsx(ea,{className:"w-5 h-5"}):e.jsx(Pt,{className:"w-5 h-5"}),"Create New Contact"]}),e.jsx(F,{variant:"outline",onClick:()=>{l(),j()},children:e.jsx(it,{className:"w-4 h-4"})})]})}),e.jsx(me,{className:"space-y-6",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs(Ja,{defaultValue:"basic",className:"w-full",children:[e.jsxs(en,{className:"grid w-full grid-cols-4",children:[e.jsx(ct,{value:"basic",children:"Basic Info"}),e.jsx(ct,{value:"addresses",children:"Addresses"}),e.jsx(ct,{value:"accounting",children:"Accounting"}),e.jsx(ct,{value:"crm",children:"CRM & Notes"})]}),e.jsx(ot,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"type",children:"Contact Type"}),e.jsxs(Le,{value:u.type,onValueChange:R=>h(k=>({...k,type:R})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:Zt.COMPANY,children:"Company"}),e.jsx(oe,{value:Zt.INDIVIDUAL,children:"Individual"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"name",children:"Company Name *"}),e.jsx(se,{id:"name",value:u.name,onChange:R=>h(k=>({...k,name:R.target.value})),placeholder:"Enter company name",className:y.name?"border-red-500":"",required:!0}),y.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:y.name})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"primaryContact",children:"Primary Contact"}),e.jsx(se,{id:"primaryContact",value:u.primaryContact,onChange:R=>h(k=>({...k,primaryContact:R.target.value})),placeholder:"Main contact person"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"email",children:"Email"}),e.jsx(se,{id:"email",type:"email",value:u.email,onChange:R=>h(k=>({...k,email:R.target.value})),placeholder:"contact@company.com",className:y.email?"border-red-500":""}),y.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:y.email})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"phone",children:"Phone"}),e.jsx(se,{id:"phone",value:u.phone,onChange:R=>h(k=>({...k,phone:R.target.value})),placeholder:"+44 20 7123 4567"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"website",children:"Website"}),e.jsx(se,{id:"website",value:u.website,onChange:R=>h(k=>({...k,website:R.target.value})),placeholder:"https://company.com"})]})]})}),e.jsxs(ot,{value:"addresses",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Addresses"}),e.jsxs(F,{type:"button",onClick:T,variant:"outline",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Address"]})]}),u.addresses.map((R,k)=>e.jsxs(de,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-medium",children:["Address ",k+1]}),u.addresses.length>1&&e.jsx(F,{type:"button",onClick:()=>S(k),variant:"outline",size:"sm",children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Street Address"}),e.jsx(se,{value:R.street,onChange:E=>D(k,"street",E.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"City"}),e.jsx(se,{value:R.city,onChange:E=>D(k,"city",E.target.value),placeholder:"London"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"State/County"}),e.jsx(se,{value:R.state,onChange:E=>D(k,"state",E.target.value),placeholder:"Greater London"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Postal Code"}),e.jsx(se,{value:R.zipCode,onChange:E=>D(k,"zipCode",E.target.value),placeholder:"SW1A 1AA"})]})]})]},k))]}),e.jsx(ot,{value:"accounting",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"taxNumber",children:"Tax Number"}),e.jsx(se,{id:"taxNumber",value:u.accounting.taxNumber,onChange:R=>h(k=>({...k,accounting:{...k.accounting,taxNumber:R.target.value}})),placeholder:"VAT/Tax registration number"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"paymentTerms",children:"Payment Terms"}),e.jsxs(Le,{value:u.accounting.paymentTerms,onValueChange:R=>h(k=>({...k,accounting:{...k.accounting,paymentTerms:R}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:Js.NET_30,children:"Net 30"}),e.jsx(oe,{value:Js.NET_15,children:"Net 15"}),e.jsx(oe,{value:Js.NET_7,children:"Net 7"}),e.jsx(oe,{value:Js.DUE_ON_RECEIPT,children:"Due on Receipt"})]})]})]})]})}),e.jsxs(ot,{value:"crm",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"status",children:"Status"}),e.jsxs(Le,{value:u.crm.status,onValueChange:R=>h(k=>({...k,crm:{...k.crm,status:R}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:vt.PROSPECT,children:"Prospect"}),e.jsx(oe,{value:vt.ACTIVE,children:"Active"}),e.jsx(oe,{value:vt.AT_RISK,children:"At Risk"}),e.jsx(oe,{value:vt.INACTIVE,children:"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"source",children:"Source"}),e.jsx(se,{id:"source",value:u.crm.source,onChange:R=>h(k=>({...k,crm:{...k.crm,source:R.target.value}})),placeholder:"How did you find this contact?"})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"notes",children:"Notes"}),e.jsx(Vt,{id:"notes",value:u.crm.notes,onChange:R=>h(k=>({...k,crm:{...k.crm,notes:R.target.value}})),placeholder:"Additional notes about this contact...",rows:4})]})]})]}),y.submit&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mt-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:y.submit})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[e.jsx(F,{type:"button",variant:"outline",onClick:()=>{l(),j()},disabled:p,children:"Cancel"}),e.jsx(F,{type:"submit",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Create Contact"]})})]})]})})]})}):null},Io=8,Jm={version:Io,template:{title:!0,description:!0,contact:!0,priority:!0,status:!0,category:!0,assignedUser:!0,scheduled_date:!0,photos:!1,attachments:!1},order:["title","description","contact","priority","status","category","assignedUser","scheduled_date"],configurations:{category:["General","Technical","Maintenance","Support"]}},j3=new Set(["title","description","contact","priority","status","category","equipment_id","work_type","service_category","scheduled_date","photos","attachments"]),Ti="ticketTemplate",Ei=()=>{try{const a=localStorage.getItem(Ti);if(console.log("Loading template, raw data:",a),!a)return console.log("No saved template found, using defaults"),Jm;const l=JSON.parse(a);if(console.log("Parsed template:",l),!l.version||l.version<Io||!Array.isArray(l.order)||typeof l.template!="object"){console.log(`MIGRATING: from version ${l.version||"unknown"} to ${Io}`);const c={...Jm};return localStorage.setItem(Ti,JSON.stringify(c)),c}return console.log("Using existing template version",l.version),l}catch(a){console.error("Error parsing saved template:",a),localStorage.removeItem(Ti);const l={...Jm};return localStorage.setItem(Ti,JSON.stringify(l)),l}},b3=a=>{try{const l={...a,version:Io};return localStorage.setItem(Ti,JSON.stringify(l)),console.log("Saved template:",l),!0}catch(l){return console.error("Error saving template:",l),!1}},N3=(a,l)=>l.filter(i=>a[i]&&j3.has(i)).length;function w3({onClose:a,users:l,currentUser:i}){const{createTicket:c}=Da(),[o,u]=f.useState({}),{template:h,order:p,configurations:g}=Ei(),[y,x]=f.useState({title:"",description:"",priority:"medium",category:"",status:"new",assignedUser:"",assignedTo:null,createdBy:(i==null?void 0:i.name)||"",contact:"",contactDetails:null,equipment_id:"",work_type:"",service_category:"",scheduled_date:"",photos:"",attachments:""}),[j,b]=f.useState(!1),[A,T]=f.useState(!1),[D,S]=f.useState(""),R=(q,I)=>{console.log("[CreateTicket] handleInputChange called:",{field:q,value:I}),x(W=>({...W,[q]:I})),o[q]&&u(W=>({...W,[q]:null}))},k=async q=>{var I,W,P;if((I=q==null?void 0:q.preventDefault)==null||I.call(q),console.log("[CreateTicket] Submit handler called",{formData:y,isSubmitting:j}),console.log("[CreateTicket] Full formData object:",JSON.stringify(y,null,2)),j){console.log("[CreateTicket] Already submitting, ignoring");return}b(!0),u({});try{console.log("[CreateTicket] Creating ticket with data:",y);const Y={};if((W=y.title)!=null&&W.trim()||(Y.title="Title is required"),(P=y.description)!=null&&P.trim()||(Y.description="Description is required"),Object.keys(Y).length>0){console.log("[CreateTicket] Validation errors:",Y),u(Y),b(!1);return}console.log("[CreateTicket] Creating ticket with data:",y);const B={...y,createdBy:(i==null?void 0:i.name)||"Unknown User",createdAt:new Date().toISOString()};!B.scheduled_date||B.scheduled_date===""?delete B.scheduled_date:B.scheduled_date=new Date(B.scheduled_date).toISOString(),(!B.equipment_id||B.equipment_id==="")&&delete B.equipment_id,(!B.work_type||B.work_type==="")&&delete B.work_type,(!B.service_category||B.service_category==="")&&delete B.service_category,(!B.photos||B.photos==="")&&delete B.photos,(!B.attachments||B.attachments==="")&&delete B.attachments;const le=await c(B);if(console.log("[CreateTicket] Ticket created successfully:",le),y.scheduled_date)try{const{updateTicketBooking:Z}=await m0(async()=>{const{updateTicketBooking:$}=await import("./ticketToBookingConverter-CYGCWh5C.js");return{updateTicketBooking:$}},[]);Z({...B,id:le.id}),console.log("[CreateTicket] Synced ticket to booking calendar")}catch(Z){console.error("[CreateTicket] Error syncing to booking calendar:",Z)}a()}catch(Y){console.error("[CreateTicket] Error creating ticket:",Y),u({submit:"Failed to create ticket. Please try again."})}finally{b(!1)}},E=q=>{try{switch(q){case"title":return e.jsxs("div",{children:[e.jsxs(J,{htmlFor:"title",className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Title *"]}),e.jsx(se,{id:"title",value:y.title,onChange:B=>R("title",B.target.value),placeholder:"Brief description of the issue",className:o.title?"border-red-500":""}),o.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.title})]},q);case"description":return e.jsxs("div",{children:[e.jsxs(J,{htmlFor:"description",className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Description *"]}),e.jsx(Vt,{id:"description",value:y.description,onChange:B=>R("description",B.target.value),placeholder:"Describe the issue in detail...",className:o.description?"border-red-500":"",rows:20}),o.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.description})]},q);case"contact":return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Contact"]}),e.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:()=>{S(""),T(!0)},className:"h-8 text-xs",children:[e.jsx(Je,{className:"w-3 h-3 mr-1"}),"New Contact"]})]}),e.jsx(p3,{selectedContactId:y.contact,onContactSelect:B=>{R("contact",B?B.id:""),B&&x(le=>{var Z,$;return{...le,contact:B.id,contactDetails:{companyName:B.name,fullAddress:(($=(Z=B.addresses)==null?void 0:Z[0])==null?void 0:$.fullAddress)||"No address available",email:B.email,phone:B.phone}}})},onCreateNew:B=>{S(B||""),T(!0)},placeholder:"Select or search for a contact..."}),y.contactDetails&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg text-sm mb-4",children:[e.jsx("div",{className:"font-medium",children:y.contactDetails.companyName}),e.jsx("div",{className:"text-gray-600",children:y.contactDetails.fullAddress}),e.jsx("div",{className:"text-gray-600",children:y.contactDetails.email}),e.jsx("div",{className:"text-gray-600",children:y.contactDetails.phone})]})]},q);case"priority":return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Priority"]}),e.jsxs(Le,{value:y.priority,onValueChange:B=>R("priority",B),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select priority"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"low",children:"Low"}),e.jsx(oe,{value:"medium",children:"Medium"}),e.jsx(oe,{value:"high",children:"High"}),e.jsx(oe,{value:"critical",children:"Critical"})]})]})]},q);case"status":return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Ai,{className:"w-4 h-4"}),"Status"]}),e.jsxs(Le,{value:y.status,onValueChange:B=>R("status",B),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select status"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"open",children:"Open"}),e.jsx(oe,{value:"in-progress",children:"In Progress"}),e.jsx(oe,{value:"pending",children:"Pending"})]})]})]},q);case"category":const I=(g==null?void 0:g.category)||["General","Technical","Maintenance","Support"];return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Ai,{className:"w-4 h-4"}),"Category"]}),e.jsxs(Le,{value:y.category,onValueChange:B=>R("category",B),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select category"})}),e.jsx(Ie,{children:I.filter(B=>B&&B.trim()).map((B,le)=>e.jsx(oe,{value:B,children:B},le))})]})]},q);case"assignedUser":return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Assigned User"]}),e.jsxs(Le,{value:y.assignedUser,onValueChange:B=>{R("assignedUser",B);const le=l==null?void 0:l.find(Z=>Z.name===B);le&&R("assignedTo",le.id)},children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select user to assign ticket"})}),e.jsx(Ie,{children:l==null?void 0:l.map(B=>e.jsx(oe,{value:B.name,children:B.name},B.id))})]})]},q);case"equipment_id":const W=(g==null?void 0:g.equipment_id)||["EQ-001","EQ-002","EQ-003"];return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(or,{className:"w-4 h-4"}),"Equipment ID"]}),e.jsxs(Le,{value:y.equipment_id,onValueChange:B=>R("equipment_id",B),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select equipment"})}),e.jsx(Ie,{children:W.filter(B=>B&&B.trim()).map((B,le)=>e.jsx(oe,{value:B,children:B},le))})]})]},q);case"work_type":const P=(g==null?void 0:g.work_type)||["Maintenance","Repair","Installation","Inspection"];return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Co,{className:"w-4 h-4"}),"Work Type"]}),e.jsxs(Le,{value:y.work_type,onValueChange:B=>R("work_type",B),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select work type"})}),e.jsx(Ie,{children:P.filter(B=>B&&B.trim()).map((B,le)=>e.jsx(oe,{value:B,children:B},le))})]})]},q);case"service_category":const Y=(g==null?void 0:g.service_category)||["Standard","Premium","Emergency","Scheduled"];return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(dl,{className:"w-4 h-4"}),"Service Category"]}),e.jsxs(Le,{value:y.service_category,onValueChange:B=>R("service_category",B),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select service category"})}),e.jsx(Ie,{children:Y.filter(B=>B&&B.trim()).map((B,le)=>e.jsx(oe,{value:B,children:B},le))})]})]},q);case"scheduled_date":return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),"Scheduled Date"]}),e.jsx(se,{type:"datetime-local",step:"900",value:y.scheduled_date,onChange:B=>R("scheduled_date",B.target.value),placeholder:"Select date and time"})]},q);case"photos":return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(uh,{className:"w-4 h-4"}),"Photos/Images"]}),e.jsx(se,{type:"file",multiple:!0,accept:"image/*",onChange:B=>R("photos",Array.from(B.target.files||[])),className:"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),y.photos&&y.photos.length>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[y.photos.length," file(s) selected"]})]},q);case"attachments":return e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Eo,{className:"w-4 h-4"}),"File Attachments"]}),e.jsx(se,{type:"file",multiple:!0,onChange:B=>R("attachments",Array.from(B.target.files||[])),className:"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),y.attachments&&y.attachments.length>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[y.attachments.length," file(s) selected"]})]},q);default:return null}}catch(I){return console.error(`Error rendering field ${q}:`,I),e.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded",children:e.jsxs("p",{className:"text-red-600 text-sm",children:["Error rendering field: ",q]})},q)}},w=["contact","title","description"],C=p.filter(q=>!w.includes(q)&&h[q]);return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[e.jsxs(de,{className:"w-full max-w-5xl h-[90vh] flex flex-col",children:[e.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-4 border-b flex-shrink-0",children:[e.jsx("div",{children:e.jsx(ke,{className:"text-xl",children:"Create New Ticket"})}),e.jsx(F,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs("form",{id:"create-ticket-form",onSubmit:k,className:"h-full",children:[o.submit&&e.jsxs(ta,{variant:"destructive",className:"m-4",children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx(sa,{children:o.submit})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-full overflow-hidden",children:[e.jsx("div",{className:"flex-1 lg:w-[70%] p-6 overflow-y-auto",children:e.jsx("div",{className:"space-y-6",children:w.map(q=>h[q]?E(q):null)})}),e.jsx("div",{className:"lg:w-[30%] bg-gray-50 border-t lg:border-t-0 lg:border-l p-6 overflow-y-auto",children:e.jsx("div",{className:"space-y-4",children:C.map(q=>E(q))})})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t flex-shrink-0",children:[e.jsx(F,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(F,{type:"button",onClick:k,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create Ticket"]})})]})]}),e.jsx(y3,{isOpen:A,onClose:()=>{T(!1),S("")},onContactCreated:q=>{console.log("[CreateTicketModal] New contact created:",q),R("contact",q.id),x(I=>{var W,P;return{...I,contact:q.id,contactDetails:{companyName:q.name,fullAddress:((P=(W=q.addresses)==null?void 0:W[0])==null?void 0:P.fullAddress)||"No address available",email:q.email,phone:q.phone}}}),T(!1),S("")},initialName:D})]})}function gb({users:a,ticketIds:l,onAssign:i,onClose:c}){const[o,u]=f.useState(""),[h,p]=f.useState(""),[g,y]=f.useState(!1),x=a.filter(b=>b.name.toLowerCase().includes(h.toLowerCase())||b.email.toLowerCase().includes(h.toLowerCase())),j=async()=>{if(!o){alert("Please select a user");return}y(!0);try{await i(o),c()}catch(b){console.error("Failed to assign tickets:",b),alert("Failed to assign tickets. Please try again.")}finally{y(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Assign ",l.length," ticket",l.length>1?"s":""]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",disabled:g,children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(se,{placeholder:"Search users...",value:h,onChange:b=>p(b.target.value),className:"pl-10"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:x.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found"}):x.map(b=>e.jsxs("button",{onClick:()=>u(b.id),className:`w-full flex items-center gap-3 p-3 rounded-lg border transition-colors ${o===b.id?"bg-blue-50 border-blue-500":"hover:bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(Pt,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:b.name}),e.jsx("div",{className:"text-sm text-gray-500",children:b.email}),b.role&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:b.role.charAt(0).toUpperCase()+b.role.slice(1)})]}),o===b.id&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},b.id))})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t",children:[e.jsx(F,{variant:"outline",onClick:c,disabled:g,children:"Cancel"}),e.jsx(F,{onClick:j,disabled:!o||g,children:g?"Assigning...":"Assign Tickets"})]})]})})}const dy={ticket_created:{label:"Ticket Created",color:"bg-blue-100 text-blue-800",icon:e.jsx(mr,{className:"w-3 h-3"})},ticket_assigned:{label:"Ticket Assigned",color:"bg-green-100 text-green-800",icon:e.jsx(Pt,{className:"w-3 h-3"})},ticket_passed:{label:"Ticket Passed",color:"bg-yellow-100 text-yellow-800",icon:e.jsx(Pt,{className:"w-3 h-3"})},status_changed:{label:"Status Changed",color:"bg-purple-100 text-purple-800",icon:e.jsx(ja,{className:"w-3 h-3"})},approval_request:{label:"Approval Request",color:"bg-orange-100 text-orange-800",icon:e.jsx(ja,{className:"w-3 h-3"})},approval_decision:{label:"Approval Decision",color:"bg-indigo-100 text-indigo-800",icon:e.jsx(Ze,{className:"w-3 h-3"})}};function C3({emailLogs:a,onClose:l}){const[i,c]=f.useState(""),[o,u]=f.useState("all"),h=a.filter(g=>!(i&&!g.to.toLowerCase().includes(i.toLowerCase())&&!g.subject.toLowerCase().includes(i.toLowerCase())||o!=="all"&&g.template!==o)),p=g=>dy[g]||{label:g,color:"bg-gray-100 text-gray-800",icon:e.jsx(Ms,{className:"w-3 h-3"})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs(de,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx(Ce,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ke,{className:"text-xl flex items-center",children:[e.jsx(Ms,{className:"w-5 h-5 mr-2"}),"Email Notifications Log"]}),e.jsxs(Ke,{children:["View all email notifications sent by the system (",a.length," total)"]})]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:l,children:e.jsx(it,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(se,{placeholder:"Search by recipient or subject...",value:i,onChange:g=>c(g.target.value),className:"pl-10"})]}),e.jsxs("select",{value:o,onChange:g=>u(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),Object.entries(dy).map(([g,y])=>e.jsx("option",{value:g,children:y.label},g))]})]}),e.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ms,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No emails found"}),e.jsx("p",{className:"text-gray-600",children:i||o!=="all"?"Try adjusting your search or filter criteria":"Email notifications will appear here when tickets are created or updated"})]}):h.map(g=>{const y=p(g.template);return e.jsx(de,{className:"hover:shadow-md transition-shadow",children:e.jsxs(me,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs(He,{className:`${y.color} border flex items-center space-x-1`,children:[y.icon,e.jsx("span",{children:y.label})]}),e.jsxs(He,{variant:g.status==="sent"?"default":"destructive",className:"flex items-center space-x-1",children:[g.status==="sent"?e.jsx(Ze,{className:"w-3 h-3"}):e.jsx(ja,{className:"w-3 h-3"}),e.jsx("span",{children:g.status})]})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:g.subject}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"To:"})," ",g.to]})]}),g.ticketId&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ticket:"})," ",g.ticketId]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(an,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Sent:"})," ",new Date(g.sentAt).toLocaleString()]})]})]})]}),e.jsx("div",{className:"ml-4 text-right",children:e.jsx("div",{className:"text-xs text-gray-500",children:new Date(g.sentAt).toLocaleTimeString()})})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border-l-4 border-blue-500",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-700 mb-1",children:"Email Preview:"}),e.jsx("div",{className:"text-gray-600",children:S3(g)})]})})]})},g.id)})}),a.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Sent"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(g=>g.status==="sent").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Delivered"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.filter(g=>g.template==="approval_request").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Approvals"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.filter(g=>g.template==="ticket_assigned").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Assignments"})]})]})})]})]})})}function S3(a){switch(a.template){case"ticket_created":return"A new ticket has been created and requires attention. Please review the details and assign it to the appropriate team member.";case"ticket_assigned":return"You have been assigned a new ticket. Please review the details and begin work as soon as possible.";case"ticket_passed":return"A ticket has been passed to you from another team member. Please review the previous comments and continue the work.";case"status_changed":return"The status of your ticket has been updated. Please check the ticket details for the latest information.";case"approval_request":return"A team member is requesting approval for a ticket. Please review the details and provide your decision.";case"approval_decision":return"Your approval request has been processed. Please check the ticket for the decision and any additional comments.";default:return"This is an automated notification from WorkTrackr Cloud regarding your ticket."}}const k3=({isOpen:a,onClose:l})=>{const[i,c]=f.useState(()=>{const Z=Ei();return Object.keys(Z.template).filter($=>Z.template[$])}),[o,u]=f.useState(()=>Ei().order),[h,p]=f.useState([]),[g,y]=f.useState(!1),[x,j]=f.useState(()=>Ei().configurations),[b,A]=f.useState(!1),[T,D]=f.useState(!1),[S,R]=f.useState(!1),[k,E]=f.useState(!1),w={title:{icon:Ct,label:"Title",type:"text",required:!0,category:"basic",description:"Main title/subject of the ticket"},description:{icon:Ct,label:"Description",type:"textarea",required:!0,category:"basic",description:"Detailed description of the issue or request"},priority:{icon:os,label:"Priority Level",type:"select",required:!0,category:"basic",options:["Low","Medium","High","Critical"],description:"Urgency level of the ticket"},status:{icon:Av,label:"Status",type:"select",required:!0,category:"basic",options:["New","Assigned","In Progress","Waiting Approval","Completed","Parked"],description:"Current status of the ticket"},category:{icon:Ai,label:"Category",type:"configurable_select",required:!1,category:"basic",options:["General","Technical","Maintenance","Support"],description:"Ticket category/type",configurable:!0},equipment_id:{icon:or,label:"Equipment ID",type:"configurable_select",required:!1,category:"technical",options:["EQ-001","EQ-002","EQ-003"],description:"Equipment identifier",configurable:!0},work_type:{icon:Co,label:"Work Type",type:"configurable_select",required:!1,category:"technical",options:["Maintenance","Repair","Installation","Inspection"],description:"Type of work to be performed",configurable:!0},service_category:{icon:dl,label:"Service Category",type:"configurable_select",required:!1,category:"technical",options:["Standard","Premium","Emergency","Scheduled"],description:"Service category level",configurable:!0},assignedUser:{icon:Pt,label:"Assigned User",type:"user_select",required:!1,category:"hidden",description:"Team member responsible for this ticket"},contact:{icon:Pt,label:"Contact",type:"contact_select",required:!0,category:"basic",description:"Select customer/contact from database with company name, address, email, and phone"},scheduled_date:{icon:Ht,label:"Scheduled Date",type:"datetime",required:!1,category:"scheduling",description:"When the work is scheduled to start"},photos:{icon:uh,label:"Photos/Images",type:"file_upload",required:!1,category:"media",accept:"image/*",multiple:!0,description:"Upload photos related to the ticket"},attachments:{icon:Eo,label:"File Attachments",type:"file_upload",required:!1,category:"media",multiple:!0,description:"Upload documents, PDFs, or other files"}},C={basic:{label:"Basic Information",icon:Ct,color:"blue"},scheduling:{label:"Dates & Scheduling",icon:Ht,color:"orange"},technical:{label:"Technical Details",icon:or,color:"indigo"},media:{label:"Files & Media",icon:uh,color:"pink"}},q=Z=>{const $=w[Z];if(i.includes(Z)){if($&&$.required&&Z!=="assignedUser"){console.log(`Cannot remove required field: ${Z}`);return}c(i.filter(ee=>ee!==Z)),u(o.filter(ee=>ee!==Z))}else c([...i,Z]),u([...o,Z])},I=(Z,$)=>{const ee=o.indexOf(Z);if($==="up"&&ee>0){const N=[...o];[N[ee],N[ee-1]]=[N[ee-1],N[ee]],u(N)}else if($==="down"&&ee<o.length-1){const N=[...o];[N[ee],N[ee+1]]=[N[ee+1],N[ee]],u(N)}},W=(Z,$)=>{j(ee=>({...ee,[Z]:$}))},P=Z=>{const $=x[Z]||[];W(Z,[...$,""])},Y=(Z,$)=>{const N=(x[Z]||[]).filter((L,v)=>v!==$);W(Z,N)},B=(Z,$,ee)=>{const L=[...x[Z]||[]];L[$]=ee,W(Z,L)},le=()=>{const Z={...x};Z.category&&(Z.category=Z.category.filter(L=>L.trim()!==""),Z.category.length===0&&(Z.category=["General"]));const $=new Set(i),ee={template:i.reduce((L,v)=>(L[v]=!0,L),{}),order:o.filter(L=>$.has(L)),configurations:Z};b3(ee)?console.log("Template saved successfully:",ee):console.error("Failed to save template")};return a?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:[e.jsxs(de,{className:"w-full max-w-6xl max-h-[95vh] overflow-hidden ticket-customizer-modal",children:[e.jsx(Ce,{className:"border-b p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsxs(ke,{className:"text-lg sm:text-2xl flex items-center",children:[e.jsx(ba,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Customize Your Ticket"})]}),e.jsx(Ke,{className:"mt-1 sm:mt-2 text-xs sm:text-sm",children:"Design your ticket template by selecting the elements you need"})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[e.jsxs(F,{variant:"outline",onClick:()=>y(!g),className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3",size:"sm",children:[e.jsx(Vi,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:g?"Edit":"Preview"})]}),e.jsx(F,{onClick:l,variant:"ghost",size:"sm",children:e.jsx(it,{className:"w-4 h-4"})})]})]})}),e.jsx(me,{className:"p-0 overflow-y-auto max-h-[calc(95vh-120px)]",children:g?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6 text-center",children:"Ticket Form Preview"}),e.jsx(de,{children:e.jsx(me,{className:"p-6 space-y-6",children:e.jsx("p",{children:"Preview mode - showing configured fields"})})})]})}):e.jsxs(Ja,{defaultValue:"fields",className:"w-full",children:[e.jsxs(en,{className:"grid w-full grid-cols-3",children:[e.jsx(ct,{value:"fields",children:"Available Fields"}),e.jsx(ct,{value:"configuration",children:"Field Configuration"}),e.jsx(ct,{value:"layout",children:"Field Layout & Order"})]}),e.jsx(ot,{value:"fields",className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select Fields for Your Tickets"}),e.jsxs(He,{variant:"outline",children:[(()=>{const Z=Ei();return N3(Z.template,Z.order)})()," renderable fields selected"]})]}),Object.entries(C).map(([Z,$])=>{const ee=Object.entries(w).filter(([N,L])=>L.category===Z).sort(([N],[L])=>{const v=o.indexOf(N),O=o.indexOf(L);return v!==-1&&O!==-1?v-O:v!==-1?-1:O!==-1?1:0});return ee.length===0?null:e.jsxs(de,{children:[e.jsx(Ce,{className:"pb-3",children:e.jsxs(ke,{className:"text-base flex items-center",children:[e.jsx($.icon,{className:`w-5 h-5 mr-2 text-${$.color}-600`}),$.label]})}),e.jsx(me,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:ee.map(([N,L])=>e.jsx(de,{className:`cursor-pointer transition-all mobile-field-card ${i.includes(N)?"ring-2 ring-blue-500 bg-blue-50":"hover:shadow-md"}`,onClick:()=>{N==="category"?i.includes(N)?(c(i.filter(v=>v!==N)),u(o.filter(v=>v!==N))):(c([...i,N]),u([...o,N]),(!x.category||x.category.length===0)&&j(v=>({...v,category:["General","Technical","Maintenance","Support"]})),A(!0)):N==="equipment_id"?i.includes(N)?(c(i.filter(v=>v!==N)),u(o.filter(v=>v!==N))):(c([...i,N]),u([...o,N]),(!x.equipment_id||x.equipment_id.length===0)&&j(v=>({...v,equipment_id:["EQ-001","EQ-002","EQ-003"]})),D(!0)):N==="work_type"?i.includes(N)?(c(i.filter(v=>v!==N)),u(o.filter(v=>v!==N))):(c([...i,N]),u([...o,N]),(!x.work_type||x.work_type.length===0)&&j(v=>({...v,work_type:["Maintenance","Repair","Installation","Inspection"]})),R(!0)):N==="service_category"?i.includes(N)?(c(i.filter(v=>v!==N)),u(o.filter(v=>v!==N))):(c([...i,N]),u([...o,N]),(!x.service_category||x.service_category.length===0)&&j(v=>({...v,service_category:["Standard","Premium","Emergency","Scheduled"]})),E(!0)):q(N)},children:e.jsx(me,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(L.icon,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-xs sm:text-sm",children:L.label}),L.required&&N!=="assignedUser"&&e.jsx(He,{variant:"destructive",className:"text-xs px-1 py-0 flex-shrink-0",children:"Required"})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:L.description}),e.jsx(He,{variant:"outline",className:"text-xs",children:L.type.replace("_"," ")})]}),e.jsx("div",{className:"ml-2 flex-shrink-0",children:i.includes(N)?e.jsx(Av,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"}):e.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-gray-300 rounded"})})]})})},N))})})]},Z)})]})}),e.jsx(ot,{value:"layout",className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Arrange Field Order"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Drag fields to reorder them in your ticket form"})]}),o.length===0?e.jsxs(de,{className:"p-8 text-center",children:[e.jsx(ba,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No fields selected"}),e.jsx("p",{className:"text-gray-600",children:'Go to the "Available Fields" tab to select fields for your ticket form'})]}):e.jsx("div",{className:"space-y-3",children:o.map((Z,$)=>{const ee=w[Z];return ee?e.jsx(de,{className:"border-l-4 border-l-blue-500",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vS,{className:"w-5 h-5 text-gray-400 cursor-move"}),e.jsx(ee.icon,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:ee.label}),ee.required&&Z!=="assignedUser"&&e.jsx(He,{variant:"destructive",className:"ml-2 text-xs px-1 py-0",children:"Required"}),e.jsx("p",{className:"text-sm text-gray-600",children:ee.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>I(Z,"up"),disabled:$===0,children:""}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>I(Z,"down"),disabled:$===o.length-1,children:""}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>q(Z),children:e.jsx(ls,{className:"w-4 h-4"})})]})]})})},Z):null})})]})}),e.jsx(ot,{value:"configuration",className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Configure Field Options"}),e.jsx(He,{variant:"outline",children:"Configure dropdown options for selected fields"})]}),i.includes("category")&&e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"text-base flex items-center",children:[e.jsx(Ai,{className:"w-5 h-5 mr-2 text-blue-600"}),"Category Options"]}),e.jsx(Ke,{children:"Configure the categories that will appear in the dropdown"})]}),e.jsxs(me,{className:"space-y-3",children:[(x.category||["General","Technical","Maintenance","Support"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("category",$,ee.target.value),placeholder:"Enter category name",className:"flex-1"}),(x.category||["General","Technical","Maintenance","Support"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("category",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$)),e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("category"),className:"w-full",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Category"]})]})]}),i.includes("equipment_id")&&e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"text-base flex items-center",children:[e.jsx(or,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Equipment ID Options"]}),e.jsx(Ke,{children:"Configure the equipment IDs that will appear in the dropdown"})]}),e.jsxs(me,{className:"space-y-3",children:[(x.equipment_id||["EQ-001","EQ-002","EQ-003"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("equipment_id",$,ee.target.value),placeholder:"Enter equipment ID",className:"flex-1"}),(x.equipment_id||["EQ-001","EQ-002","EQ-003"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("equipment_id",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$)),e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("equipment_id"),className:"w-full",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Equipment ID"]})]})]}),i.includes("work_type")&&e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"text-base flex items-center",children:[e.jsx(Co,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Work Type Options"]}),e.jsx(Ke,{children:"Configure the work types that will appear in the dropdown"})]}),e.jsxs(me,{className:"space-y-3",children:[(x.work_type||["Maintenance","Repair","Installation","Inspection"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("work_type",$,ee.target.value),placeholder:"Enter work type",className:"flex-1"}),(x.work_type||["Maintenance","Repair","Installation","Inspection"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("work_type",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$)),e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("work_type"),className:"w-full",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Work Type"]})]})]}),i.includes("service_category")&&e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"text-base flex items-center",children:[e.jsx(dl,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Service Category Options"]}),e.jsx(Ke,{children:"Configure the service categories that will appear in the dropdown"})]}),e.jsxs(me,{className:"space-y-3",children:[(x.service_category||["Standard","Premium","Emergency","Scheduled"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("service_category",$,ee.target.value),placeholder:"Enter service category",className:"flex-1"}),(x.service_category||["Standard","Premium","Emergency","Scheduled"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("service_category",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$)),e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("service_category"),className:"w-full",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Service Category"]})]})]}),i.filter(Z=>["category","equipment_id","work_type","service_category"].includes(Z)).length===0&&e.jsx(de,{children:e.jsxs(me,{className:"p-6 text-center",children:[e.jsx(ba,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Configurable Fields Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select Category, Equipment ID, Work Type, or Service Category fields from the Available Fields tab to configure their options here."})]})})]})})]})}),e.jsxs("div",{className:"border-t p-4 flex items-center justify-between bg-gray-50",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[i.filter(Z=>{var $;return(($=w[Z])==null?void 0:$.category)!=="hidden"}).length," fields selected  Form ready for use"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F,{variant:"outline",onClick:l,children:"Cancel"}),e.jsxs(F,{variant:"outline",onClick:()=>{confirm("Reset all field configurations to defaults? This will clear all customizations.")&&(localStorage.removeItem(STORAGE_KEY),window.location.reload())},className:"text-red-600 border-red-200 hover:bg-red-50",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Reset Fields"]}),e.jsxs(F,{onClick:()=>{le(),l()},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Save Ticket Form"]})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Ai,{className:"w-5 h-5 mr-2 text-blue-600"}),"Configure Categories"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>A(!1),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add your own categories that will appear as dropdown options when creating tickets."}),e.jsx("div",{className:"space-y-3 mb-4",children:(x.category&&x.category.length>0?x.category:["General","Technical","Maintenance","Support"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("category",$,ee.target.value),placeholder:"Enter category name",className:"flex-1"}),(x.category||["General","Technical","Maintenance","Support"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("category",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("category"),className:"flex-1",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Category"]}),e.jsx(F,{onClick:()=>{le(),A(!1)},className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Save Categories"})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(or,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Configure Equipment IDs"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>D(!1),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add your own equipment IDs that will appear as dropdown options when creating tickets."}),e.jsx("div",{className:"space-y-3 mb-4",children:(x.equipment_id&&x.equipment_id.length>0?x.equipment_id:["EQ-001","EQ-002","EQ-003"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("equipment_id",$,ee.target.value),placeholder:"Enter equipment ID",className:"flex-1"}),(x.equipment_id||["EQ-001","EQ-002","EQ-003"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("equipment_id",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("equipment_id"),className:"flex-1",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Equipment ID"]}),e.jsx(F,{onClick:()=>{le(),D(!1)},className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:"Save Equipment IDs"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Co,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Configure Work Types"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>R(!1),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add your own work types that will appear as dropdown options when creating tickets."}),e.jsx("div",{className:"space-y-3 mb-4",children:(x.work_type&&x.work_type.length>0?x.work_type:["Maintenance","Repair","Installation","Inspection"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("work_type",$,ee.target.value),placeholder:"Enter work type",className:"flex-1"}),(x.work_type||["Maintenance","Repair","Installation","Inspection"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("work_type",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("work_type"),className:"flex-1",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Work Type"]}),e.jsx(F,{onClick:()=>{le(),R(!1)},className:"flex-1 bg-indigo-600 hover:bg-indigo-700",children:"Save Work Types"})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(dl,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Configure Service Categories"]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>E(!1),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add your own service categories that will appear as dropdown options when creating tickets."}),e.jsx("div",{className:"space-y-3 mb-4",children:(x.service_category&&x.service_category.length>0?x.service_category:["Standard","Premium","Emergency","Scheduled"]).map((Z,$)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{value:Z,onChange:ee=>B("service_category",$,ee.target.value),placeholder:"Enter service category",className:"flex-1"}),(x.service_category||["Standard","Premium","Emergency","Scheduled"]).length>1&&e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>Y("service_category",$),children:e.jsx(it,{className:"w-4 h-4"})})]},$))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{type:"button",variant:"outline",onClick:()=>P("service_category"),className:"flex-1",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Service Category"]}),e.jsx(F,{onClick:()=>{le(),E(!1)},className:"flex-1 bg-yellow-600 hover:bg-yellow-700",children:"Save Service Categories"})]})]})})]}):null};var yd="Dialog",[vb,Y6]=Ta(yd),[_3,ia]=vb(yd),yb=a=>{const{__scopeDialog:l,children:i,open:c,defaultOpen:o,onOpenChange:u,modal:h=!0}=a,p=f.useRef(null),g=f.useRef(null),[y,x]=Rn({prop:c,defaultProp:o??!1,onChange:u,caller:yd});return e.jsx(_3,{scope:l,triggerRef:p,contentRef:g,contentId:Na(),titleId:Na(),descriptionId:Na(),open:y,onOpenChange:x,onOpenToggle:f.useCallback(()=>x(j=>!j),[x]),modal:h,children:i})};yb.displayName=yd;var jb="DialogTrigger",bb=f.forwardRef((a,l)=>{const{__scopeDialog:i,...c}=a,o=ia(jb,i),u=ft(l,o.triggerRef);return e.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":xf(o.open),...c,ref:u,onClick:Re(a.onClick,o.onOpenToggle)})});bb.displayName=jb;var hf="DialogPortal",[T3,Nb]=vb(hf,{forceMount:void 0}),wb=a=>{const{__scopeDialog:l,forceMount:i,children:c,container:o}=a,u=ia(hf,l);return e.jsx(T3,{scope:l,forceMount:i,children:f.Children.map(c,h=>e.jsx(Ea,{present:i||u.open,children:e.jsx(dd,{asChild:!0,container:o,children:h})}))})};wb.displayName=hf;var Bo="DialogOverlay",Cb=f.forwardRef((a,l)=>{const i=Nb(Bo,a.__scopeDialog),{forceMount:c=i.forceMount,...o}=a,u=ia(Bo,a.__scopeDialog);return u.modal?e.jsx(Ea,{present:c||u.open,children:e.jsx(A3,{...o,ref:l})}):null});Cb.displayName=Bo;var E3=ul("DialogOverlay.RemoveScroll"),A3=f.forwardRef((a,l)=>{const{__scopeDialog:i,...c}=a,o=ia(Bo,i);return e.jsx(md,{as:E3,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(Qe.div,{"data-state":xf(o.open),...c,ref:l,style:{pointerEvents:"auto",...c.style}})})}),pl="DialogContent",Sb=f.forwardRef((a,l)=>{const i=Nb(pl,a.__scopeDialog),{forceMount:c=i.forceMount,...o}=a,u=ia(pl,a.__scopeDialog);return e.jsx(Ea,{present:c||u.open,children:u.modal?e.jsx(D3,{...o,ref:l}):e.jsx(M3,{...o,ref:l})})});Sb.displayName=pl;var D3=f.forwardRef((a,l)=>{const i=ia(pl,a.__scopeDialog),c=f.useRef(null),o=ft(l,i.contentRef,c);return f.useEffect(()=>{const u=c.current;if(u)return af(u)},[]),e.jsx(kb,{...a,ref:o,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(a.onCloseAutoFocus,u=>{var h;u.preventDefault(),(h=i.triggerRef.current)==null||h.focus()}),onPointerDownOutside:Re(a.onPointerDownOutside,u=>{const h=u.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0;(h.button===2||p)&&u.preventDefault()}),onFocusOutside:Re(a.onFocusOutside,u=>u.preventDefault())})}),M3=f.forwardRef((a,l)=>{const i=ia(pl,a.__scopeDialog),c=f.useRef(!1),o=f.useRef(!1);return e.jsx(kb,{...a,ref:l,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var h,p;(h=a.onCloseAutoFocus)==null||h.call(a,u),u.defaultPrevented||(c.current||(p=i.triggerRef.current)==null||p.focus(),u.preventDefault()),c.current=!1,o.current=!1},onInteractOutside:u=>{var g,y;(g=a.onInteractOutside)==null||g.call(a,u),u.defaultPrevented||(c.current=!0,u.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const h=u.target;((y=i.triggerRef.current)==null?void 0:y.contains(h))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.current&&u.preventDefault()}})}),kb=f.forwardRef((a,l)=>{const{__scopeDialog:i,trapFocus:c,onOpenAutoFocus:o,onCloseAutoFocus:u,...h}=a,p=ia(pl,i),g=f.useRef(null),y=ft(l,g);return Qh(),e.jsxs(e.Fragment,{children:[e.jsx(nd,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:o,onUnmountAutoFocus:u,children:e.jsx(ad,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":xf(p.open),...h,ref:y,onDismiss:()=>p.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(R3,{titleId:p.titleId}),e.jsx(z3,{contentRef:g,descriptionId:p.descriptionId})]})]})}),ff="DialogTitle",_b=f.forwardRef((a,l)=>{const{__scopeDialog:i,...c}=a,o=ia(ff,i);return e.jsx(Qe.h2,{id:o.titleId,...c,ref:l})});_b.displayName=ff;var Tb="DialogDescription",Eb=f.forwardRef((a,l)=>{const{__scopeDialog:i,...c}=a,o=ia(Tb,i);return e.jsx(Qe.p,{id:o.descriptionId,...c,ref:l})});Eb.displayName=Tb;var Ab="DialogClose",Db=f.forwardRef((a,l)=>{const{__scopeDialog:i,...c}=a,o=ia(Ab,i);return e.jsx(Qe.button,{type:"button",...c,ref:l,onClick:Re(a.onClick,()=>o.onOpenChange(!1))})});Db.displayName=Ab;function xf(a){return a?"open":"closed"}var Mb="DialogTitleWarning",[Q6,Rb]=Xk(Mb,{contentName:pl,titleName:ff,docsSlug:"dialog"}),R3=({titleId:a})=>{const l=Rb(Mb),i=`\`${l.contentName}\` requires a \`${l.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${l.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${l.docsSlug}`;return f.useEffect(()=>{a&&(document.getElementById(a)||console.error(i))},[i,a]),null},O3="DialogDescriptionWarning",z3=({contentRef:a,descriptionId:l})=>{const c=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Rb(O3).contentName}}.`;return f.useEffect(()=>{var u;const o=(u=a.current)==null?void 0:u.getAttribute("aria-describedby");l&&o&&(document.getElementById(l)||console.warn(c))},[c,a,l]),null},P3=yb,L3=bb,U3=wb,q3=Cb,I3=Sb,B3=_b,F3=Eb,$3=Db;function Fo({...a}){return e.jsx(P3,{"data-slot":"dialog",...a})}function uy({...a}){return e.jsx(L3,{"data-slot":"dialog-trigger",...a})}function H3({...a}){return e.jsx(U3,{"data-slot":"dialog-portal",...a})}function V3({className:a,...l}){return e.jsx(q3,{"data-slot":"dialog-overlay",className:Be("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...l})}function $o({className:a,children:l,...i}){return e.jsxs(H3,{"data-slot":"dialog-portal",children:[e.jsx(V3,{}),e.jsxs(I3,{"data-slot":"dialog-content",className:Be("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...i,children:[l,e.jsxs($3,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(it,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Ho({className:a,...l}){return e.jsx("div",{"data-slot":"dialog-header",className:Be("flex flex-col gap-2 text-center sm:text-left",a),...l})}function Vo({className:a,...l}){return e.jsx("div",{"data-slot":"dialog-footer",className:Be("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...l})}function Go({className:a,...l}){return e.jsx(B3,{"data-slot":"dialog-title",className:Be("text-lg leading-none font-semibold",a),...l})}function Yo({className:a,...l}){return e.jsx(F3,{"data-slot":"dialog-description",className:Be("text-muted-foreground text-sm",a),...l})}const vo={starter:{name:"Starter",price:49,maxUsers:1,features:["Basic ticketing","Email notifications","Up to 1 user"]},pro:{name:"Pro",price:99,maxUsers:5,features:["Workflow builder","Reports & inspections","Approvals","Up to 5 users"]},enterprise:{name:"Enterprise",price:299,maxUsers:1/0,features:["Unlimited users","Custom branding","Partner admin access","Dedicated support"]}},yo=15;function G3({totalUsers:a}){var ee;const[l,i]=f.useState("pro"),[c,o]=f.useState(null),[u,h]=f.useState(0),[p,g]=f.useState(!1),[y,x]=f.useState(!1),[j,b]=f.useState(0),[A,T]=f.useState(!1),[D,S]=f.useState(""),[R,k]=f.useState(!1),[E,w]=f.useState(null),[C,q]=f.useState(null),[I,W]=f.useState(null);f.useEffect(()=>{(async()=>{try{const L=await fetch("/api/billing/subscription",{credentials:"include"});if(L.ok){const v=await L.json();if(v.plan&&i(v.plan),v.includedSeats!==void 0&&o(v.includedSeats),v.additionalSeats!==void 0&&h(v.additionalSeats),v.trialEnd){const O=new Date(v.trialEnd),U=Math.ceil((O-new Date)/(1e3*60*60*24));U>0?(w("active"),q(U),W(O.toLocaleDateString())):(w("expired"),q(0),W(O.toLocaleDateString()))}}}catch(L){console.error("Failed to fetch organization data:",L)}})()},[]);const P=f.useMemo(()=>{var L;const N=c!==null?c:((L=vo[l])==null?void 0:L.maxUsers)||0;return N===1/0?1/0:N+u},[c,l,u]),Y=(N,L)=>{var M;const v=((M=vo[N])==null?void 0:M.price)||0,O=L*yo;return v+O},B=async N=>{g(!0);try{if(console.log(`Changing plan from ${l} to ${N}`),E==="active"&&I){console.log("Trial user detected, using trial upgrade endpoint");const U=await fetch("/api/billing/upgrade-trial-plan",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({plan:N})});if(!U.ok){const H=await U.json();throw new Error(H.error||"Failed to upgrade trial plan")}const Q=await U.json();alert(`Plan upgraded to ${Q.plan}! You now have ${Q.includedSeats} seats. Your trial period remains unchanged.`),window.location.reload();return}const v=await fetch("/api/billing/update-subscription",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({plan:N,additionalSeats:u})});if(v.ok&&(await v.json()).immediate){alert("Plan updated successfully!"),window.location.reload();return}const O=await fetch("/api/billing/checkout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({plan:N,additionalSeats:u})});if(!O.ok)throw new Error("Failed to create checkout session");const M=await O.json();M.immediate?(alert("Plan updated successfully!"),window.location.reload()):window.location.href=M.url}catch(L){console.error("Failed to change plan:",L),alert("Failed to change plan. Please try again.")}finally{g(!1)}},le=async N=>{const L=Math.max(0,u+N);g(!0);try{if(console.log(`Updating seats from ${u} to ${L}`),!(await fetch("/api/billing/update-seats",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({additionalSeats:L})})).ok)throw new Error("Failed to update seats");alert("Seats updated successfully!"),h(L),x(!1),b(0)}catch(v){console.error("Failed to update seats:",v),alert("Failed to update seats. Please try again.")}finally{g(!1)}},Z=async()=>{g(!0);try{console.log("Converting trial to paid subscription");const N=await fetch("/api/billing/convert-trial",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({plan:l,additionalSeats:u})});if(!N.ok){const v=await N.json();throw new Error(v.error||"Failed to convert trial")}const L=await N.json();if(L.checkoutUrl)window.location.href=L.checkoutUrl;else throw new Error("No checkout URL received")}catch(N){console.error("Failed to convert trial:",N),alert("Failed to start checkout. Please try again."),g(!1)}};return e.jsxs(de,{className:"w-full bg-gray-50",children:[e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qh,{className:"w-5 h-5"}),e.jsx(ke,{children:"Plan & Billing"})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>alert("Redirecting to billing portal..."),children:"Manage Billing"})]}),e.jsx(Ke,{children:"Manage your subscription plan and billing details."})]}),e.jsxs(me,{className:"space-y-6",children:[E==="active"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-500 text-white rounded-full p-2",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Free Trial Active"}),e.jsxs("p",{className:"text-sm text-blue-700",children:[C," ",C===1?"day":"days"," remaining  Expires on ",I]})]})]}),e.jsx(F,{onClick:Z,disabled:p,className:"bg-blue-600 hover:bg-blue-700 text-white",children:p?"Processing...":"Add Payment Details"})]})}),E==="expired"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-red-500 text-white rounded-full p-2",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Trial Expired"}),e.jsxs("p",{className:"text-sm text-red-700",children:["Your trial expired on ",I,". Add payment details to continue using WorkTrackr."]})]})]}),e.jsx(F,{onClick:Z,disabled:p,className:"bg-red-600 hover:bg-red-700 text-white",children:p?"Processing...":"Add Payment Now"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(vo).map(([N,L])=>e.jsxs(de,{className:`flex flex-col ${l===N?"border-2 border-blue-500 shadow-lg":""}`,children:[e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(ke,{className:"flex items-center space-x-2",children:[N==="enterprise"&&e.jsx(Xy,{className:"w-5 h-5 text-yellow-500"}),N==="pro"&&e.jsx(Mo,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{children:L.name})]}),l===N&&e.jsx(He,{children:"Current Plan"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["",L.price,e.jsx("span",{className:"text-sm font-normal",children:"/month"})]})]}),e.jsx(me,{className:"flex-grow space-y-4",children:e.jsx("ul",{className:"space-y-2 text-sm text-gray-600",children:L.features.map((v,O)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(jr,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:v})]},O))})}),e.jsx("div",{className:"p-6 pt-0",children:l===N?e.jsx(F,{className:"w-full",disabled:!0,children:"Your Current Plan"}):e.jsx(F,{className:"w-full",onClick:()=>B(N),disabled:p,children:p?"Changing...":"Switch to "+L.name})})]},N))}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"w-5 h-5"}),e.jsx("span",{children:"Additional Seats"})]}),e.jsxs(Ke,{children:["Add more users to your plan for ",yo,"/user/month. Your current plan includes ",c!==null?c:(ee=vo[l])==null?void 0:ee.maxUsers," users."]})]}),e.jsxs(me,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("p",{className:"font-medium",children:["Current additional seats: ",e.jsx(He,{children:u})]}),e.jsxs("p",{className:"font-medium",children:["Total users allowed: ",e.jsx(He,{children:P===1/0?"Unlimited":P})]})]}),e.jsxs(Fo,{open:y,onOpenChange:x,children:[e.jsx(uy,{asChild:!0,children:e.jsx(F,{variant:"outline",children:"Manage Seats"})}),e.jsxs($o,{children:[e.jsxs(Ho,{children:[e.jsx(Go,{children:"Manage Additional Seats"}),e.jsxs(Yo,{children:["Add or remove seats from your subscription. Each additional seat costs ",yo,"/month."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx(F,{variant:"outline",size:"icon",onClick:()=>b(N=>Math.max(N-1,-u)),children:e.jsx(qS,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-2xl font-bold w-20 text-center",children:u+j}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>b(N=>N+1),children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(F,{size:"sm",variant:"secondary",onClick:()=>b(N=>N+1),children:"+1"}),e.jsx(F,{size:"sm",variant:"secondary",onClick:()=>b(N=>N+5),children:"+5"}),e.jsx(F,{size:"sm",variant:"secondary",onClick:()=>b(N=>N+10),children:"+10"})]}),j!==0&&e.jsxs(ta,{variant:j>0?"default":"destructive",children:[e.jsx(os,{className:"h-4 w-4"}),e.jsxs(sa,{children:["You are about to ",j>0?"add":"remove"," ",Math.abs(j)," seat(s). Your new monthly cost for additional seats will be ",(u+j)*yo,". Your total monthly bill will be ",Y(l,u+j),"."]})]})]}),e.jsxs(Vo,{children:[e.jsx(F,{variant:"ghost",onClick:()=>{x(!1),b(0)},children:"Cancel"}),e.jsx(F,{onClick:()=>le(j),disabled:p||j===0,children:p?"Updating...":"Confirm Change"})]})]})]})]})]}),e.jsxs(de,{className:"border-red-200 bg-red-50",children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center space-x-2 text-red-700",children:[e.jsx(os,{className:"w-5 h-5"}),e.jsx("span",{children:"Danger Zone"})]}),e.jsx(Ke,{className:"text-red-600",children:"Permanently delete your account and all associated data. This action cannot be undone."})]}),e.jsx(me,{children:e.jsxs(Fo,{open:A,onOpenChange:T,children:[e.jsx(uy,{asChild:!0,children:e.jsxs(F,{variant:"destructive",className:"bg-red-600 hover:bg-red-700",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Delete Account"]})}),e.jsxs($o,{className:"max-w-md",children:[e.jsxs(Ho,{children:[e.jsxs(Go,{className:"text-red-700 flex items-center space-x-2",children:[e.jsx(os,{className:"w-5 h-5"}),e.jsx("span",{children:"Delete Account Permanently"})]}),e.jsxs(Yo,{className:"space-y-3 pt-4",children:[e.jsxs(ta,{variant:"destructive",children:[e.jsx(os,{className:"h-4 w-4"}),e.jsx(sa,{children:e.jsx("strong",{children:"Warning: This action cannot be undone!"})})]}),e.jsx("p",{className:"text-sm text-gray-700",children:"This will permanently delete:"}),e.jsxs("ul",{className:"text-sm text-gray-600 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Your account and all user data"}),e.jsx("li",{children:"All tickets and workflows"}),e.jsx("li",{children:"Team members and settings"}),e.jsx("li",{children:"Files and attachments"}),e.jsx("li",{children:"Your subscription will be cancelled"})]}),e.jsxs("div",{className:"pt-4",children:[e.jsxs(J,{htmlFor:"delete-confirm",className:"text-sm font-semibold",children:["Type ",e.jsx("span",{className:"font-mono bg-gray-100 px-1",children:"DELETE"})," to confirm:"]}),e.jsx(se,{id:"delete-confirm",value:D,onChange:N=>S(N.target.value),placeholder:"DELETE",className:"mt-2",disabled:R})]})]})]}),e.jsxs(Vo,{className:"flex space-x-2",children:[e.jsx(F,{variant:"ghost",onClick:()=>{T(!1),S("")},disabled:R,children:"Cancel"}),e.jsx(F,{variant:"destructive",onClick:$,disabled:D!=="DELETE"||R,className:"bg-red-600 hover:bg-red-700",children:R?"Deleting...":"Delete Permanently"})]})]})]})})]})]})]});async function $(){k(!0);try{const N=await fetch("/api/billing/delete-account",{method:"DELETE",credentials:"include"});if(!N.ok){const v=await N.json();throw new Error(v.error||"Failed to delete account")}const L=await N.json();alert("Your account has been deleted. You will now be logged out."),window.location.href=L.redirect||"/"}catch(N){console.error("Failed to delete account:",N),alert("Failed to delete account: "+N.message),k(!1)}}}const eh={starter:1,pro:5,enterprise:50},Y3=()=>{const{membership:a}=Zi(),{users:l}=Da(),[i,c]=f.useState(null),[o,u]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const A=await fetch("/api/billing/subscription",{credentials:"include"});if(A.ok){const T=await A.json();console.log(" Subscription data received:",T),c(T)}else console.warn("Failed to fetch subscription data, using defaults"),c({plan:"pro",includedSeats:5,additionalSeats:0,status:"active"})}catch(A){console.error("Error fetching subscription data:",A),c({plan:"pro",includedSeats:5,additionalSeats:0,status:"active"})}finally{u(!1)}})()},[]);const h=(i==null?void 0:i.plan)||(a==null?void 0:a.plan)||"pro",p=(i==null?void 0:i.additionalSeats)||(a==null?void 0:a.additionalSeats)||0,g=f.useMemo(()=>{const b=(i==null?void 0:i.includedSeats)??eh[h]??eh.pro;console.log(" useUserLimits calculation:",{subscriptionData:i,includedSeats:i==null?void 0:i.includedSeats,currentPlan:h,basePlanLimit:b,PLAN_LIMITS:eh,fallbackUsed:!(i!=null&&i.includedSeats)});const A=b===1/0?1/0:b+p,T=(l==null?void 0:l.length)||0,D=A===1/0?1/0:Math.max(0,A-T),S=A===1/0||T<A,R=A!==1/0&&T>=A,k=A!==1/0&&D<=2&&D>0;return{currentPlan:h,additionalSeats:p,basePlanLimit:b,totalAllowedUsers:A,currentUserCount:T,seatsRemaining:D,canAddUsers:S,isAtLimit:R,isNearLimit:k,utilizationPercentage:A===1/0?0:Math.round(T/A*100)}},[h,p,l,i]);return{...g,validateUserAddition:(b=1)=>{if(g.totalAllowedUsers===1/0)return{allowed:!0,message:null};if(g.currentUserCount+b>g.totalAllowedUsers){const T=g.seatsRemaining;return{allowed:!1,message:`Cannot add ${b} user(s). Only ${T} slots remaining. Upgrade your plan or add more seats.`,availableSlots:T}}return{allowed:!0,message:null}},getUpgradeRecommendation:()=>g.currentPlan==="starter"&&g.isNearLimit?{recommended:"pro",reason:"Your team is growing! Upgrade to Pro for up to 10 users and advanced features."}:g.currentPlan==="pro"&&g.isNearLimit?{recommended:"enterprise",reason:"Consider Enterprise for up to 50 users and advanced features."}:null,loading:o,subscriptionData:i,refreshSubscription:async()=>{u(!0);try{const b=await fetch("/api/billing/subscription",{credentials:"include"});if(b.ok){const A=await b.json();c(A)}}catch(b){console.error("Error refreshing subscription data:",b)}finally{u(!1)}}}};var jd="Switch",[Q3,W6]=Ta(jd),[W3,X3]=Q3(jd),Ob=f.forwardRef((a,l)=>{const{__scopeSwitch:i,name:c,checked:o,defaultChecked:u,required:h,disabled:p,value:g="on",onCheckedChange:y,form:x,...j}=a,[b,A]=f.useState(null),T=ft(l,E=>A(E)),D=f.useRef(!1),S=b?x||!!b.closest("form"):!0,[R,k]=Rn({prop:o,defaultProp:u??!1,onChange:y,caller:jd});return e.jsxs(W3,{scope:i,checked:R,disabled:p,children:[e.jsx(Qe.button,{type:"button",role:"switch","aria-checked":R,"aria-required":h,"data-state":Ub(R),"data-disabled":p?"":void 0,disabled:p,value:g,...j,ref:T,onClick:Re(a.onClick,E=>{k(w=>!w),S&&(D.current=E.isPropagationStopped(),D.current||E.stopPropagation())})}),S&&e.jsx(Lb,{control:b,bubbles:!D.current,name:c,value:g,checked:R,required:h,disabled:p,form:x,style:{transform:"translateX(-100%)"}})]})});Ob.displayName=jd;var zb="SwitchThumb",Pb=f.forwardRef((a,l)=>{const{__scopeSwitch:i,...c}=a,o=X3(zb,i);return e.jsx(Qe.span,{"data-state":Ub(o.checked),"data-disabled":o.disabled?"":void 0,...c,ref:l})});Pb.displayName=zb;var Z3="SwitchBubbleInput",Lb=f.forwardRef(({__scopeSwitch:a,control:l,checked:i,bubbles:c=!0,...o},u)=>{const h=f.useRef(null),p=ft(h,u),g=Bh(i),y=Fh(l);return f.useEffect(()=>{const x=h.current;if(!x)return;const j=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(j,"checked").set;if(g!==i&&A){const T=new Event("click",{bubbles:c});A.call(x,i),x.dispatchEvent(T)}},[g,i,c]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...o,tabIndex:-1,ref:p,style:{...o.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Lb.displayName=Z3;function Ub(a){return a?"checked":"unchecked"}var K3=Ob,J3=Pb;function il({className:a,...l}){return e.jsx(K3,{"data-slot":"switch",className:Be("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:e.jsx(J3,{"data-slot":"switch-thumb",className:Be("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function e6({users:a,currentUser:l}){const{setUsers:i,organization:c,updateOrganization:o,emailService:u}=Da(),{validateUserAddition:h,canAddUsers:p,getUpgradeRecommendation:g,refreshSubscription:y,loading:x,isAtLimit:j,isNearLimit:b,seatsRemaining:A,totalAllowedUsers:T}=Y3(),[D,S]=f.useState("users"),[R,k]=f.useState(!1),[E,w]=f.useState(null),[C,q]=f.useState({name:"",email:"",mobile:"",role:"staff",emailNotifications:!0,password:"",sendInvitation:!0}),I=async()=>{if(!C.name||!C.email)return;if(!C.sendInvitation&&(!C.password||C.password.length<8)){alert("Password must be at least 8 characters long");return}const $=h(1);if(!$.allowed){const ee=g();let N=$.message;ee?N+=`

Recommendation: ${ee.reason}`:N+=`

You can add more seats or upgrade your plan in the Plan Management section.`,alert(N);return}try{const ee=await fetch(`/api/organizations/${c.id}/users/invite`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:C.name,email:C.email,mobile:C.mobile,role:C.role,emailNotifications:C.emailNotifications,password:C.sendInvitation?null:C.password,sendInvitation:C.sendInvitation})});if(!ee.ok){const N=await ee.json();alert(N.error||"Failed to add user");return}if(q({name:"",email:"",mobile:"",role:"staff",emailNotifications:!0,password:"",sendInvitation:!0}),k(!1),typeof y=="function")try{await y()}catch(N){console.warn("Failed to refresh subscription data:",N)}try{const N=await fetch(`/api/organizations/${c.id}/users`,{credentials:"include"});if(N.ok){const L=await N.json();i(L)}}catch(N){console.warn("Failed to reload users:",N)}alert("User added successfully!")}catch(ee){console.error("Add user error:",ee),alert("Failed to add user. Please try again.")}},W=$=>{$!==l.id&&i(ee=>ee.filter(N=>N.id!==$))},P=$=>{i(ee=>ee.map(N=>N.id===$?{...N,role:N.role==="admin"?"staff":"admin"}:N))},Y=$=>{i(ee=>ee.map(N=>N.id===$?{...N,emailNotifications:!N.emailNotifications}:N))},B=$=>{w({...$})},le=async()=>{try{const $={name:E.name,email:E.email,mobile:E.mobile,department:E.department,role:E.role};if(E.newPassword&&E.newPassword.length>=8&&($.password=E.newPassword),!(await fetch(`/api/organizations/${c.id}/users/${E.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify($)})).ok)throw new Error("Failed to update user");i(N=>N.map(L=>L.id===E.id?{...E,newPassword:void 0}:L)),w(null),$.password?alert("User updated successfully! Password has been changed."):alert("User updated successfully!")}catch($){console.error("Error updating user:",$),alert("Failed to update user. Please try again.")}},Z=()=>{w(null)};return l==null||l.role,e.jsxs(de,{className:"w-full",children:[e.jsx(Ce,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"w-5 h-5"}),e.jsx(ke,{children:"User Management"})]})}),e.jsxs(me,{className:"space-y-6",children:[e.jsx(G3,{currentPlan:"pro",additionalSeats:0,totalUsers:a.length}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[e.jsxs(F,{variant:D==="users"?"default":"ghost",onClick:()=>S("users"),className:"flex-1",children:[e.jsx(hs,{className:"w-4 h-4 mr-2"}),"Team Members"]}),e.jsxs(F,{variant:D==="notifications"?"default":"ghost",onClick:()=>S("notifications"),className:"flex-1",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Notifications"]})]}),D==="users"&&e.jsxs("div",{className:"space-y-4",children:[!x&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900",children:[a.length," of ",T===1/0?"":T," users"]}),e.jsx("p",{className:"text-sm text-blue-700",children:A===1/0?"Unlimited seats available":`${A} seats remaining`})]})]}),(j||b)&&e.jsxs("div",{className:"text-right",children:[j&&e.jsx(He,{variant:"destructive",className:"mb-1",children:"Limit Reached"}),b&&!j&&e.jsx(He,{variant:"secondary",className:"mb-1",children:"Near Limit"})]})]})}),j&&e.jsxs(ta,{variant:"destructive",children:[e.jsx(os,{className:"h-4 w-4"}),e.jsx(sa,{children:"You've reached your user limit. To add more users, upgrade your plan or add additional seats in the Plan Management section above."})]}),b&&!j&&e.jsxs(ta,{children:[e.jsx(os,{className:"h-4 w-4"}),e.jsxs(sa,{children:["You're approaching your user limit (",A," seats remaining). Consider upgrading your plan or adding more seats."]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Team Members"}),e.jsxs(F,{onClick:()=>k(!0),disabled:!p||x,title:p?"":"User limit reached. Upgrade plan or add more seats.",className:p?"":"opacity-50 cursor-not-allowed",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add User",!p&&e.jsx("span",{className:"ml-2 text-xs",children:"(Limit Reached)"})]})]}),e.jsx("div",{className:"space-y-3",children:a.map($=>e.jsx(de,{className:"p-4 user-management-card",children:E&&E.id===$.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Name"}),e.jsx(se,{value:E.name,onChange:ee=>w(N=>({...N,name:ee.target.value}))})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Email"}),e.jsx(se,{value:E.email,onChange:ee=>w(N=>({...N,email:ee.target.value}))})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Mobile"}),e.jsx(se,{value:E.mobile||"",onChange:ee=>w(N=>({...N,mobile:ee.target.value}))})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Department"}),e.jsx(se,{value:E.department||"",onChange:ee=>w(N=>({...N,department:ee.target.value}))})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{className:"w-4 h-4 text-yellow-600"}),e.jsx(J,{className:"font-medium",children:"Change Password"})]}),e.jsx(se,{type:"password",value:E.newPassword||"",onChange:ee=>w(N=>({...N,newPassword:ee.target.value})),placeholder:"Enter new password (min 8 characters, leave empty to keep current)",minLength:8}),e.jsx("p",{className:"text-xs text-gray-600",children:" Leave empty to keep the current password. Minimum 8 characters required for new password."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(F,{onClick:le,size:"sm",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs(F,{onClick:Z,variant:"outline",size:"sm",children:[e.jsx(it,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:$.isOrgOwner?e.jsx(Xy,{className:"w-5 h-5 text-yellow-600"}):e.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:$.name}),e.jsx("p",{className:"text-sm text-gray-600",children:$.email}),$.mobile&&e.jsx("p",{className:"text-sm text-gray-500",children:$.mobile}),e.jsx("p",{className:"text-xs text-gray-500",children:$.department||"General"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(J,{className:"text-xs text-gray-500",children:"Admin/Staff"}),e.jsx(il,{checked:$.role==="admin",onCheckedChange:()=>P($.id),disabled:$.isOrgOwner||$.id===l.id}),e.jsx("span",{className:"text-xs font-medium",children:$.role==="admin"?"Admin":"Staff"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(J,{className:"text-xs text-gray-500",children:"Email Alerts"}),e.jsx(il,{checked:$.emailNotifications,onCheckedChange:()=>Y($.id)}),e.jsx("span",{className:"text-xs font-medium",children:$.emailNotifications?"On":"Off"})]}),e.jsxs("div",{className:"flex space-x-2 justify-center sm:justify-start",children:[e.jsx(F,{onClick:()=>B($),variant:"outline",size:"sm",className:"mobile-user-button",children:e.jsx(fs,{className:"w-4 h-4"})}),!$.isOrgOwner&&$.id!==l.id&&e.jsx(F,{onClick:()=>W($.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 mobile-user-button",children:e.jsx(ls,{className:"w-4 h-4"})})]}),$.isOrgOwner&&e.jsx(He,{variant:"secondary",className:"self-center sm:self-auto",children:"Owner"})]})]})},$.id))})]}),D==="notifications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Email Notification Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage email notification preferences for each team member."}),e.jsx("div",{className:"space-y-3",children:a.map($=>e.jsx(de,{className:"p-4 user-management-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Pt,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:$.name}),e.jsx("p",{className:"text-sm text-gray-600",children:$.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(il,{checked:$.emailNotifications,onCheckedChange:()=>Y($.id)}),e.jsx("span",{className:"text-sm font-medium",children:$.emailNotifications?"Enabled":"Disabled"})]})]})},$.id))})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(de,{className:"w-full max-w-md",children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center justify-between",children:["Add New User",e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>k(!1),children:e.jsx(it,{className:"w-4 h-4"})})]})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Name *"}),e.jsx(se,{value:C.name,onChange:$=>q(ee=>({...ee,name:$.target.value})),placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Email *"}),e.jsx(se,{type:"email",value:C.email,onChange:$=>q(ee=>({...ee,email:$.target.value})),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Mobile"}),e.jsx(se,{value:C.mobile,onChange:$=>q(ee=>({...ee,mobile:$.target.value})),placeholder:"Enter mobile number"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Role"}),e.jsxs("select",{value:C.role,onChange:$=>q(ee=>({...ee,role:$.target.value})),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{className:"text-sm font-medium",children:"Password Setup"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:C.sendInvitation?"Send invitation email":"Set password now"}),e.jsx(il,{checked:!C.sendInvitation,onCheckedChange:$=>q(ee=>({...ee,sendInvitation:!$,password:""}))})]})]}),C.sendInvitation?e.jsx("p",{className:"text-xs text-gray-600",children:" User will receive an email with a link to set their password"}):e.jsxs("div",{children:[e.jsx(J,{children:"Password *"}),e.jsx(se,{type:"password",value:C.password,onChange:$=>q(ee=>({...ee,password:$.target.value})),placeholder:"Enter password (min 8 characters)",minLength:8}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:" User can log in immediately with this password"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(il,{checked:C.emailNotifications,onCheckedChange:$=>q(ee=>({...ee,emailNotifications:$}))}),e.jsx(J,{children:"Enable email notifications"})]}),e.jsxs("div",{className:"flex space-x-2 pt-4",children:[e.jsx(F,{onClick:I,className:"flex-1",children:"Add User"}),e.jsx(F,{variant:"outline",onClick:()=>k(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})]})}const t6=({currentUser:a,onTicketClick:l,timezone:i="Europe/London"})=>{const{tickets:c,users:o,updateTicket:u}=Da(),[h,p]=f.useState(new Date),[g,y]=f.useState("week"),[x,j]=f.useState(!1),[b,A]=f.useState(!1),[T,D]=f.useState(null),[S,R]=f.useState({date:"",startTime:"",endTime:"",notes:""}),k=(N,L,v=i)=>{const O=`${N}T${L}:00`,M=new Date(O),U=M.getTimezoneOffset(),Q=E(v),H=(U-Q)*6e4;return new Date(M.getTime()+H)},E=N=>{const L=new Date,v=new Date(L.getTime()+L.getTimezoneOffset()*6e4),O=new Date(v.toLocaleString("en-US",{timeZone:N}));return(v.getTime()-O.getTime())/6e4};f.useEffect(()=>{const N=setInterval(()=>{p(L=>new Date(L))},3e4);return()=>clearInterval(N)},[]);const w=()=>(console.log("Getting calendar events for tickets:",c),console.log("Current user:",a),console.log("Show assigned only:",x),c.filter(N=>{if(console.log("Filtering ticket:",N.id,"assignedTo:",N.assignedTo,"currentUser.id:",a.id),x&&N.assignedTo!==a.id)return console.log("Filtering out ticket - not assigned to current user"),!1;const L=N.dueDate||N.scheduled_date||N.scheduledWork&&N.scheduledWork.length>0;return console.log("Ticket has events:",L,"dueDate:",N.dueDate,"scheduled_date:",N.scheduled_date,"scheduledWork:",N.scheduledWork),L}).map(N=>{const L=o.find(O=>O.id===N.assignedTo);console.log("Assigned user for ticket",N.id,":",L);const v=[];if(N.dueDate){console.log("Processing due date for ticket:",N.id,"dueDate:",N.dueDate);let O=N.dueDate;O.includes("T")&&(O=O.split("T")[0]),v.push({id:`due-${N.id}`,ticketId:N.id,title:`${N.title}`,type:"due",date:O,time:N.dueDate.includes("T")?N.dueDate.split("T")[1].substring(0,5):"23:59",ticket:N,assignedUser:L,status:N.status}),console.log("Created due date event:",v[v.length-1])}if(N.scheduled_date){console.log("Processing scheduled date for ticket:",N.id,"scheduled_date:",N.scheduled_date);let O=N.scheduled_date;O.includes("T")&&(O=O.split("T")[0]),v.push({id:`scheduled-${N.id}`,ticketId:N.id,title:`${N.title}`,type:"scheduled",date:O,time:N.scheduled_date.includes("T")?N.scheduled_date.split("T")[1].substring(0,5):"09:00",ticket:N,assignedUser:L,status:N.status}),console.log("Created scheduled date event:",v[v.length-1])}return N.scheduledWork&&Array.isArray(N.scheduledWork)&&N.scheduledWork.forEach((O,M)=>{v.push({id:`work-${N.id}-${M}`,ticketId:N.id,title:`${N.title}`,type:"work",date:O.date,startTime:O.startTime,endTime:O.endTime,notes:O.notes,ticket:N,assignedUser:L,status:N.status})}),v}).flat()),C=()=>{const N=[];for(let L=8;L<18;L++)for(let v=0;v<60;v+=30){const O=`${L.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`;N.push(O)}return N},q=N=>{const L=N.toISOString().split("T")[0];return w().filter(v=>v.date===L)},I=()=>{const N=new Date(h),L=N.getDay(),v=N.getDate()-L+(L===0?-6:1);N.setDate(v);const O=[];for(let M=0;M<7;M++){const U=new Date(N);U.setDate(N.getDate()+M),O.push(U)}return O},W=N=>{D(N),R({date:N.dueDate||"",startTime:"09:00",endTime:"10:00",notes:""}),A(!0)},P=()=>{var M;if(!T||!S.date||!S.startTime||!S.endTime)return;const N=k(S.date,S.startTime),L=k(S.date,S.endTime),v=(M=T.scheduledWork)==null?void 0:M.findIndex(U=>U.date===S.originalDate&&U.startTime===S.originalStartTime&&U.endTime===S.originalEndTime);let O;v!==void 0&&v>=0?(O=[...T.scheduledWork||[]],O[v]={date:S.date,startTime:S.startTime,endTime:S.endTime,startDateTime:N.toISOString(),endDateTime:L.toISOString(),notes:S.notes,scheduledBy:a.id,scheduledAt:new Date().toISOString()}):O=[...T.scheduledWork||[],{date:S.date,startTime:S.startTime,endTime:S.endTime,startDateTime:N.toISOString(),endDateTime:L.toISOString(),notes:S.notes,scheduledBy:a.id,scheduledAt:new Date().toISOString()}],u(T.id,{scheduledWork:O}),A(!1),D(null),R({date:"",startTime:"",endTime:"",notes:""})},Y=(N,L)=>{const v=c.find(O=>O.id===N);v&&u(N,{scheduledWork:v.scheduledWork.filter((O,M)=>M!==L)})},B=(N,L)=>{if(L==="due")switch(N){case"completed":return"bg-green-100 text-green-800 border-green-200";case"parked":return"bg-gray-100 text-gray-600 border-gray-200";case"closed":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-red-100 text-red-800 border-red-200"}else if(L==="scheduled")switch(N){case"completed":return"bg-green-100 text-green-800 border-green-200";case"parked":return"bg-gray-100 text-gray-600 border-gray-200";case"closed":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}else switch(N){case"completed":return"bg-green-100 text-green-800 border-green-200";case"parked":return"bg-gray-100 text-gray-600 border-gray-200";case"closed":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},le=N=>{if(N.type==="due")switch(N.status){case"completed":return"#dcfce7";case"parked":return"#f3f4f6";case"closed":return"#f3f4f6";default:return"#fecaca"}else if(N.type==="scheduled")switch(N.status){case"completed":return"#dcfce7";case"parked":return"#f3f4f6";case"closed":return"#f3f4f6";default:return"#f3e8ff"}else switch(N.status){case"completed":return"#dcfce7";case"parked":return"#f3f4f6";case"closed":return"#f3f4f6";default:return"#dbeafe"}},Z=N=>N.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),$=I(),ee=C();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(de,{children:e.jsxs(Ce,{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col space-y-3 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx(ke,{className:"text-base sm:text-lg",children:"Ticket Calendar"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(il,{checked:x,onCheckedChange:j}),e.jsx(J,{className:"text-xs sm:text-sm",children:x?"Assigned to me only":"Show all"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(F,{variant:g==="day"?"default":"outline",size:"sm",onClick:()=>y("day"),className:"text-xs px-2 py-1",children:"Day"}),e.jsx(F,{variant:g==="week"?"default":"outline",size:"sm",onClick:()=>y("week"),className:"text-xs px-2 py-1",children:"Week"}),e.jsx(F,{variant:g==="month"?"default":"outline",size:"sm",onClick:()=>y("month"),className:"text-xs px-2 py-1 hidden sm:inline-flex",children:"Month"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{variant:"outline",onClick:()=>{const N=new Date(h);N.setDate(N.getDate()-7),p(N)},children:"Previous Week"}),e.jsx("h3",{className:"text-lg font-medium",children:h.toLocaleDateString("en-GB",{month:"long",year:"numeric"})}),e.jsx(F,{variant:"outline",onClick:()=>{const N=new Date(h);N.setDate(N.getDate()+7),p(N)},children:"Next Week"})]})]})}),g==="week"&&e.jsx(de,{children:e.jsxs(me,{className:"p-0",children:[e.jsx("div",{className:"block sm:hidden",children:$.map((N,L)=>e.jsxs("div",{className:"border-b",children:[e.jsx("div",{className:"p-3 bg-gray-50 border-b",children:e.jsx("div",{className:"text-sm font-medium text-center",children:Z(N)})}),e.jsx("div",{className:"space-y-1 p-2",children:q(N).map((v,O)=>e.jsxs("div",{className:"p-2 rounded text-xs cursor-pointer hover:opacity-80",style:{backgroundColor:le(v)},onClick:()=>{(v.type==="due"||v.type==="work")&&l(v.ticket)},children:[e.jsx("div",{className:"font-medium truncate",children:v.title}),v.assignedUser&&e.jsx("div",{className:"text-gray-600 truncate",children:v.assignedUser}),v.time&&e.jsx("div",{className:"text-gray-600",children:v.time})]},O))})]},L))}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsxs("div",{className:"grid grid-cols-8 border-b",children:[e.jsx("div",{className:"p-3 border-r bg-gray-50",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Time"})}),$.map((N,L)=>e.jsx("div",{className:"p-3 border-r bg-gray-50 text-center",children:e.jsx("div",{className:"text-sm font-medium",children:Z(N)})},L))]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:ee.map(N=>e.jsxs("div",{className:"grid grid-cols-8 border-b min-h-[60px]",children:[e.jsx("div",{className:"p-2 border-r bg-gray-50 text-xs text-gray-600",children:N}),$.map((L,v)=>{const O=q(L),M=O.filter(H=>H.type==="work"?H.startTime<=N&&H.endTime>N:!1),U=N==="08:00"?O.filter(H=>H.type==="due"):[],Q=[...M,...U];return e.jsx("div",{className:"p-1 border-r relative cursor-pointer hover:bg-gray-50",onClick:()=>{Q.length===0&&(p(L),y("day"))},children:Q.map(H=>{var ie,ye;return e.jsxs("div",{className:`text-xs p-2 rounded mb-1 border cursor-pointer hover:opacity-80 ${B(H.status,H.type)}`,onClick:ge=>{ge.stopPropagation(),console.log("[IntegratedCalendar] Event clicked:",H),console.log("[IntegratedCalendar] onTicketClick exists:",!!l),console.log("[IntegratedCalendar] event.ticket:",H.ticket),l&&H.ticket?(console.log("[IntegratedCalendar] Calling onTicketClick with ticket:",H.ticket.id),l(H.ticket)):H.type==="work"&&(D(H.ticket),R({date:H.date,startTime:H.startTime,endTime:H.endTime,notes:H.notes||"",originalDate:H.date,originalStartTime:H.startTime,originalEndTime:H.endTime}),A(!0))},children:[e.jsx("div",{className:"font-medium truncate",title:H.title,children:H.title}),e.jsx("div",{className:"text-xs opacity-75",title:((ie=H.assignedUser)==null?void 0:ie.name)||"Unassigned",children:((ye=H.assignedUser)==null?void 0:ye.name)||"Unassigned"}),H.type==="work"&&e.jsxs("div",{className:"text-xs opacity-60",children:[H.startTime," - ",H.endTime]}),H.type==="due"&&e.jsx("div",{className:"text-xs opacity-60",children:"Due Today"})]},H.id)})},v)})]},N))})]})]})}),g==="day"&&e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Day View - ",Z(h)]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const N=new Date(h);N.setDate(N.getDate()-1),p(N)},children:"Previous Day"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const N=new Date(h);N.setDate(N.getDate()+1),p(N)},children:"Next Day"})]})]})}),e.jsx(me,{className:"p-0",children:e.jsx("div",{className:"max-h-96 overflow-y-auto",children:ee.map(N=>{const L=q(h),v=L.filter(U=>U.type==="work"?U.startTime<=N&&U.endTime>N:!1),O=N==="08:00"?L.filter(U=>U.type==="due"):[],M=[...v,...O];return e.jsxs("div",{className:"grid grid-cols-12 border-b min-h-[60px] hover:bg-gray-50",children:[e.jsx("div",{className:"col-span-2 p-3 border-r bg-gray-50 text-sm font-medium text-gray-600",children:N}),e.jsxs("div",{className:"col-span-10 p-2 cursor-pointer",onClick:()=>{const U={id:Date.now(),title:"New Event",dueDate:h.toISOString().split("T")[0],assignedTo:a.id};W(U)},children:[M.map(U=>{var Q;return e.jsxs("div",{className:`p-3 rounded mb-2 border cursor-pointer hover:opacity-80 ${B(U.status,U.type)}`,onClick:H=>{H.stopPropagation(),l&&U.ticket&&l(U.ticket)},children:[e.jsx("div",{className:"font-medium",children:U.title}),e.jsx("div",{className:"text-sm opacity-75",children:((Q=U.assignedUser)==null?void 0:Q.name)||"Unassigned"}),U.type==="work"&&e.jsxs("div",{className:"text-sm opacity-60",children:[U.startTime," - ",U.endTime]}),U.type==="due"&&e.jsxs("div",{className:"text-sm opacity-60",children:["Due: ",U.time]})]},U.id)}),M.length===0&&e.jsx("div",{className:"text-gray-400 text-sm p-2",children:"Click to add event"})]})]},N)})})})]}),g==="month"&&e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Month View - ",h.toLocaleDateString("en-GB",{month:"long",year:"numeric"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const N=new Date(h);N.setMonth(N.getMonth()-1),p(N)},children:"Previous Month"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const N=new Date(h);N.setMonth(N.getMonth()+1),p(N)},children:"Next Month"})]})]})}),e.jsx(me,{className:"p-0",children:e.jsxs("div",{className:"grid grid-cols-7 gap-0 border",children:[["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(N=>e.jsx("div",{className:"p-3 text-center font-medium text-gray-700 border-b bg-gray-50",children:N},N)),(()=>{const N=h.getFullYear(),L=h.getMonth(),v=new Date(N,L,1),O=new Date(v),M=v.getDay(),U=M===0?6:M-1;O.setDate(v.getDate()-U);const Q=[];for(let H=0;H<42;H++){const ie=new Date(O);ie.setDate(O.getDate()+H),Q.push({date:ie,isCurrentMonth:ie.getMonth()===L})}return Q.map((H,ie)=>{const ye=q(H.date),ge=H.date.toDateString()===new Date().toDateString(),pe=H.isCurrentMonth;return e.jsxs("div",{className:`min-h-[120px] p-2 border-b border-r cursor-pointer hover:bg-gray-50 ${pe?"bg-white":"bg-gray-50"} ${ge?"bg-blue-50":""}`,onClick:()=>{p(H.date),y("day")},children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${pe?"text-gray-900":"text-gray-400"} ${ge?"text-blue-600":""}`,children:H.date.getDate()}),e.jsxs("div",{className:"space-y-1",children:[ye.slice(0,3).map(Ne=>{var Fe;return e.jsxs("div",{className:`text-xs p-1 rounded cursor-pointer hover:opacity-80 truncate ${B(Ne.status,Ne.type)}`,title:`${Ne.title} - ${((Fe=Ne.assignedUser)==null?void 0:Fe.name)||"Unassigned"} ${Ne.type==="work"?`(${Ne.startTime})`:""}`,onClick:De=>{De.stopPropagation(),console.log("[IntegratedCalendar Month] Event clicked:",Ne),console.log("[IntegratedCalendar Month] onTicketClick exists:",!!l),console.log("[IntegratedCalendar Month] event.ticket:",Ne.ticket),l&&Ne.ticket&&(console.log("[IntegratedCalendar Month] Calling onTicketClick with ticket:",Ne.ticket.id),l(Ne.ticket))},children:[e.jsx("div",{className:"font-medium truncate",children:Ne.title}),Ne.type==="work"&&e.jsx("div",{className:"truncate",children:Ne.startTime})]},Ne.id)}),ye.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",ye.length-3," more"]})]})]},ie)})})()]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center space-x-2",children:[e.jsx(ja,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:"Upcoming Due Dates"})]})}),e.jsx(me,{children:e.jsx("div",{className:"space-y-3",children:w().filter(N=>N.type==="due"&&N.status!=="completed").sort((N,L)=>new Date(N.date)-new Date(L.date)).slice(0,5).map(N=>{var L;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.ticket.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",new Date(N.date).toLocaleDateString("en-GB")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned to: ",((L=N.assignedUser)==null?void 0:L.name)||"Unassigned"]})]}),e.jsxs(F,{size:"sm",onClick:()=>W(N.ticket),children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"Schedule"]})]},N.id)})})})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center space-x-2",children:[e.jsx(an,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Scheduled Work"})]})}),e.jsx(me,{children:e.jsx("div",{className:"space-y-3",children:w().filter(N=>N.type==="work").sort((N,L)=>new Date(N.date+" "+N.startTime)-new Date(L.date+" "+L.startTime)).slice(0,5).map(N=>{var L;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.ticket.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(N.date).toLocaleDateString("en-GB")," ",N.startTime," - ",N.endTime]}),e.jsx("p",{className:"text-xs text-gray-500",children:((L=N.assignedUser)==null?void 0:L.name)||"Unassigned"})]}),e.jsx(He,{variant:N.status==="completed"?"default":"secondary",children:N.status})]},N.id)})})})]})]}),b&&T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(de,{className:"w-full max-w-md",children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center justify-between",children:["Schedule Work: ",T.title,e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>A(!1),children:e.jsx(ls,{className:"w-4 h-4"})})]})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Date"}),e.jsx(se,{type:"date",value:S.date,onChange:N=>R(L=>({...L,date:N.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Start Time"}),e.jsx(se,{type:"time",step:"900",value:S.startTime,onChange:N=>R(L=>({...L,startTime:N.target.value}))})]}),e.jsxs("div",{children:[e.jsx(J,{children:"End Time"}),e.jsx(se,{type:"time",step:"900",value:S.endTime,onChange:N=>R(L=>({...L,endTime:N.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Notes (Optional)"}),e.jsx(se,{value:S.notes,onChange:N=>R(L=>({...L,notes:N.target.value})),placeholder:"Add any notes about this work session"})]}),e.jsxs("div",{className:"flex space-x-2 pt-4",children:[e.jsx(F,{onClick:P,className:"flex-1",children:S.originalDate?"Update Work":"Schedule Work"}),S.originalDate&&e.jsx(F,{variant:"destructive",onClick:()=>{var L;const N=(L=T.scheduledWork)==null?void 0:L.findIndex(v=>v.date===S.originalDate&&v.startTime===S.originalStartTime&&v.endTime===S.originalEndTime);N!==void 0&&N>=0&&Y(T.id,N),A(!1)},className:"flex-1",children:"Delete"}),e.jsx(F,{variant:"outline",onClick:()=>A(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})},s6=({onManualProcess:a})=>{const{billingQueue:l,setBillingQueue:i}=Da(),[c,o]=f.useState([]),[u,h]=f.useState(""),[p,g]=f.useState(null);f.useEffect(()=>{let b=l;u&&(b=b.filter(A=>A.ticketData.customer.name.toLowerCase().includes(u.toLowerCase())||A.ticketData.service.description.toLowerCase().includes(u.toLowerCase())||A.ticketId.toLowerCase().includes(u.toLowerCase()))),o(b)},[l,u]);const y=b=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(b),x=b=>new Date(b).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),j=b=>{i(A=>A.filter(T=>T.ticketId!==b)),console.log(`Ticket ${b} marked as billed and removed from billing queue`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(de,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:e.jsx(Ce,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(ke,{className:"text-2xl text-gray-900 flex items-center",children:[e.jsx(Ct,{className:"w-8 h-8 mr-3 text-green-600"}),"Billing Queue Manager"]}),e.jsx(Ke,{className:"text-lg mt-2",children:"Manage completed tickets ready for billing and invoicing"})]})})})}),e.jsx(de,{children:e.jsx(Ce,{children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(se,{placeholder:"Search by customer, service, or ticket ID...",value:u,onChange:b=>h(b.target.value),className:"pl-10 w-full md:w-80"})]})})})})}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(ke,{children:["Queue Items (",c.length,")"]})})}),e.jsx(me,{children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ct,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No items in billing queue"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l.length===0?"Completed tickets will appear here automatically when they're ready for billing.":"No items match your current search criteria."}),u?e.jsx(F,{variant:"outline",onClick:()=>{h("")},children:"Clear Search"}):null]}):e.jsx("div",{className:"space-y-4",children:c.map(b=>e.jsx(de,{className:"border-l-4 border-l-blue-500",children:e.jsx(me,{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{className:"flex items-start space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:b.ticketId}),e.jsxs(He,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1",children:"Ready for Billing"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Added ",x(b.addedToQueueAt)]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",b.ticketData.customer.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",b.ticketData.customer.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",b.ticketData.customer.phone]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Service:"})," ",b.ticketData.service.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",b.ticketData.service.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Completed:"})," ",x(b.ticketData.service.dateCompleted)]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Time Spent:"})," ",b.ticketData.service.timeSpent]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rate:"})," ",y(b.ticketData.service.hourlyRate),"/hr"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," ",e.jsx("span",{className:"font-semibold text-green-600",children:y(b.ticketData.billing.totalAmount)})]})]})]}),b.processingNotes&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Notes:"})," ",b.processingNotes]})}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>g(b),children:[e.jsx(Vi,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>a&&a(b.ticketData),children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Manual Process"]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(F,{className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",onClick:()=>j(b.ticketId),children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Mark as Billed"]})})]})]})})})})},b.queueItemId))})})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(de,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ke,{children:["Ticket Details - ",p.ticketId]}),e.jsx(F,{variant:"outline",onClick:()=>g(null),children:"Close"})]})}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",p.ticketData.customer.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",p.ticketData.customer.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",p.ticketData.customer.phone]})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Address:"})}),e.jsx("p",{children:p.ticketData.customer.address.line1}),e.jsxs("p",{children:[p.ticketData.customer.address.city,", ",p.ticketData.customer.address.postcode]}),e.jsx("p",{children:p.ticketData.customer.address.country})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Service Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",p.ticketData.service.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",p.ticketData.service.category]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date Completed:"})," ",x(p.ticketData.service.dateCompleted)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time Spent:"})," ",p.ticketData.service.timeSpent]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hourly Rate:"})," ",y(p.ticketData.service.hourlyRate)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Billing Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Labor Cost:"})," ",y(p.ticketData.billing.laborCost)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Travel Cost:"})," ",y(p.ticketData.billing.travelCost)]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Subtotal:"})," ",y(p.ticketData.billing.totalBeforeTax)]}),e.jsxs("p",{children:[e.jsxs("strong",{children:["Tax (",p.ticketData.billing.taxRate,"%):"]})," ",y(p.ticketData.billing.taxAmount)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," ",e.jsx("span",{className:"font-semibold text-green-600",children:y(p.ticketData.billing.totalAmount)})]})]})]}),p.ticketData.billing.materialCosts&&p.ticketData.billing.materialCosts.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"Materials:"}),e.jsx("ul",{className:"text-sm space-y-1",children:p.ticketData.billing.materialCosts.map((b,A)=>e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:b.item}),e.jsx("span",{children:y(b.cost)})]},A))})]})]})]}),p.ticketData.customFields&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Project Reference:"})," ",p.ticketData.customFields.projectReference]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Purchase Order:"})," ",p.ticketData.customFields.purchaseOrderNumber||"N/A"]})]})]})]})]})})]})},a6=({ticketData:a,onComplete:l,onCancel:i})=>{const[c,o]=f.useState(a),[u,h]=f.useState("formatted_text"),[p,g]=f.useState(""),[y,x]=f.useState("invoice"),j=E=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(E),b=E=>new Date(E).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),A=E=>{const w=c;switch(E){case"formatted_text":return`INVOICE DETAILS
================

Customer Information:
Name: ${w.customer.name}
Email: ${w.customer.email}
Phone: ${w.customer.phone}
Address: ${w.customer.address.line1}
         ${w.customer.address.city}, ${w.customer.address.postcode}
         ${w.customer.address.country}

Service Details:
Description: ${w.service.description}
Category: ${w.service.category}
Date Completed: ${b(w.service.dateCompleted)}
Time Spent: ${w.service.timeSpent}
Hourly Rate: ${j(w.service.hourlyRate)}

Billing Breakdown:
Labor Cost: ${j(w.billing.laborCost)}
${w.billing.materialCosts.map(C=>`${C.item}: ${j(C.cost)}`).join(`
`)}
Travel Cost: ${j(w.billing.travelCost)}
Subtotal: ${j(w.billing.totalBeforeTax)}
Tax (${w.billing.taxRate}%): ${j(w.billing.taxAmount)}
TOTAL: ${j(w.billing.totalAmount)}

Additional Information:
Project Reference: ${w.customFields.projectReference}
Purchase Order: ${w.customFields.purchaseOrderNumber||"N/A"}`;case"csv":return`Field,Value
Customer Name,${w.customer.name}
Customer Email,${w.customer.email}
Customer Phone,${w.customer.phone}
Address Line 1,${w.customer.address.line1}
City,${w.customer.address.city}
Postcode,${w.customer.address.postcode}
Country,${w.customer.address.country}
Service Description,${w.service.description}
Service Category,${w.service.category}
Date Completed,${w.service.dateCompleted}
Time Spent,${w.service.timeSpent}
Hourly Rate,${w.service.hourlyRate}
Labor Cost,${w.billing.laborCost}
${w.billing.materialCosts.map(C=>`${C.item},${C.cost}`).join(`
`)}
Travel Cost,${w.billing.travelCost}
Subtotal,${w.billing.totalBeforeTax}
Tax Rate,${w.billing.taxRate}
Tax Amount,${w.billing.taxAmount}
Total Amount,${w.billing.totalAmount}
Project Reference,${w.customFields.projectReference}
Purchase Order,${w.customFields.purchaseOrderNumber}`;case"json":return JSON.stringify(w,null,2);case"invoice_template":return`INVOICE

Invoice Date: ${b(new Date)}
Due Date: ${b(new Date(Date.now()+720*60*60*1e3))}

Bill To:
${w.customer.name}
${w.customer.address.line1}
${w.customer.address.city}, ${w.customer.address.postcode}
${w.customer.address.country}

Description: ${w.service.description}
Date of Service: ${b(w.service.dateCompleted)}

Line Items:
- Labor (${w.service.timeSpent} @ ${j(w.service.hourlyRate)}/hr): ${j(w.billing.laborCost)}
${w.billing.materialCosts.map(C=>`- ${C.item}: ${j(C.cost)}`).join(`
`)}
${w.billing.travelCost>0?`- Travel: ${j(w.billing.travelCost)}`:""}

Subtotal: ${j(w.billing.totalBeforeTax)}
Tax (${w.billing.taxRate}%): ${j(w.billing.taxAmount)}
Total: ${j(w.billing.totalAmount)}

Payment Terms: Net 30 days
${w.customFields.purchaseOrderNumber?`Purchase Order: ${w.customFields.purchaseOrderNumber}`:""}`;case"quickbooks_format":return`Customer Name: ${w.customer.name}
Customer Email: ${w.customer.email}
Invoice Date: ${b(new Date)}
Due Date: ${b(new Date(Date.now()+720*60*60*1e3))}
Service Date: ${b(w.service.dateCompleted)}

Item,Description,Quantity,Rate,Amount
Labor,${w.service.description},${parseFloat(w.service.timeSpent)},${w.service.hourlyRate},${w.billing.laborCost}
${w.billing.materialCosts.map(C=>`Material,${C.item},1,${C.cost},${C.cost}`).join(`
`)}
${w.billing.travelCost>0?`Travel,Travel expenses,1,${w.billing.travelCost},${w.billing.travelCost}`:""}

Subtotal: ${w.billing.totalBeforeTax}
Tax Rate: ${w.billing.taxRate}%
Tax Amount: ${w.billing.taxAmount}
Total: ${w.billing.totalAmount}`;case"xero_format":return`Contact Name: ${w.customer.name}
Email Address: ${w.customer.email}
Invoice Date: ${b(new Date)}
Due Date: ${b(new Date(Date.now()+720*60*60*1e3))}
Reference: ${w.customFields.projectReference}

Line Items:
Description,Quantity,Unit Amount,Account Code,Tax Type
${w.service.description},${parseFloat(w.service.timeSpent)},${w.service.hourlyRate},200,20% (VAT on Income)
${w.billing.materialCosts.map(C=>`${C.item},1,${C.cost},200,20% (VAT on Income)`).join(`
`)}
${w.billing.travelCost>0?`Travel expenses,1,${w.billing.travelCost},200,20% (VAT on Income)`:""}

Total: ${w.billing.totalAmount}`;default:return A("formatted_text")}},T=async E=>{try{const w=A(E);await navigator.clipboard.writeText(w),g(`Copied ${E.replace("_"," ")} to clipboard!`),setTimeout(()=>g(""),3e3)}catch{g("Failed to copy to clipboard"),setTimeout(()=>g(""),3e3)}},D=E=>{const w=A(E),C=new Blob([w],{type:"text/plain"}),q=URL.createObjectURL(C),I=document.createElement("a");I.href=q,I.download=`invoice-${c.ticketId||"ticket"}-${E}.${E==="csv"?"csv":"txt"}`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(q)},S=(E,w)=>{o(C=>({...C,billing:{...C.billing,[E]:w}}))},R=()=>{const E=c.billing.laborCost,w=c.billing.materialCosts.reduce((P,Y)=>P+Y.cost,0),C=c.billing.travelCost,q=E+w+C,I=q*(c.billing.taxRate/100),W=q+I;o(P=>({...P,billing:{...P.billing,totalBeforeTax:q,taxAmount:I,totalAmount:W}}))},k=[{value:"formatted_text",label:"Formatted Text",icon:Ct},{value:"csv",label:"CSV Spreadsheet",icon:oS},{value:"json",label:"JSON Data",icon:Ct},{value:"invoice_template",label:"Invoice Template",icon:iS},{value:"quickbooks_format",label:"QuickBooks Format",icon:dh},{value:"xero_format",label:"Xero Format",icon:dh}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(de,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ke,{className:"text-2xl text-gray-900 flex items-center",children:[e.jsx(fs,{className:"w-8 h-8 mr-3 text-green-600"}),"Manual Billing Processor"]}),e.jsx(Ke,{className:"text-lg mt-2",children:"Review, edit, and export billing information for manual processing"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(He,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1",children:j(c.billing.totalAmount)})})]})})}),p&&e.jsx(de,{className:"border-green-200 bg-green-50",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-green-800",children:p})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center",children:[e.jsx(fs,{className:"w-5 h-5 mr-2"}),"Review & Edit Data"]}),e.jsx(Ke,{children:"Review and modify the billing information before export"})]}),e.jsx(me,{children:e.jsxs(Ja,{defaultValue:"customer",className:"w-full",children:[e.jsxs(en,{className:"grid w-full grid-cols-3",children:[e.jsx(ct,{value:"customer",children:"Customer"}),e.jsx(ct,{value:"service",children:"Service"}),e.jsx(ct,{value:"billing",children:"Billing"})]}),e.jsx(ot,{value:"customer",className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Customer Name"}),e.jsx(se,{value:c.customer.name,onChange:E=>o(w=>({...w,customer:{...w.customer,name:E.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx(se,{value:c.customer.email,onChange:E=>o(w=>({...w,customer:{...w.customer,email:E.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),e.jsx(se,{value:c.customer.phone,onChange:E=>o(w=>({...w,customer:{...w.customer,phone:E.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),e.jsx(se,{value:c.customer.address.line1,onChange:E=>o(w=>({...w,customer:{...w.customer,address:{...w.customer.address,line1:E.target.value}}})),className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(se,{value:c.customer.address.city,placeholder:"City",onChange:E=>o(w=>({...w,customer:{...w.customer,address:{...w.customer.address,city:E.target.value}}}))}),e.jsx(se,{value:c.customer.address.postcode,placeholder:"Postcode",onChange:E=>o(w=>({...w,customer:{...w.customer,address:{...w.customer.address,postcode:E.target.value}}}))})]})]})]})}),e.jsx(ot,{value:"service",className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Service Description"}),e.jsx(Vt,{value:c.service.description,onChange:E=>o(w=>({...w,service:{...w.service,description:E.target.value}})),rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsx(se,{value:c.service.category,onChange:E=>o(w=>({...w,service:{...w.service,category:E.target.value}}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Time Spent"}),e.jsx(se,{value:c.service.timeSpent,onChange:E=>o(w=>({...w,service:{...w.service,timeSpent:E.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hourly Rate"}),e.jsx(se,{type:"number",value:c.service.hourlyRate,onChange:E=>o(w=>({...w,service:{...w.service,hourlyRate:parseFloat(E.target.value)||0}}))})]})]})]})}),e.jsx(ot,{value:"billing",className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Labor Cost"}),e.jsx(se,{type:"number",value:c.billing.laborCost,onChange:E=>S("laborCost",parseFloat(E.target.value)||0),onBlur:R})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Material Costs"}),c.billing.materialCosts.map((E,w)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsx(se,{value:E.item,placeholder:"Item description",onChange:C=>{const q=[...c.billing.materialCosts];q[w].item=C.target.value,o(I=>({...I,billing:{...I.billing,materialCosts:q}}))}}),e.jsx(se,{type:"number",value:E.cost,placeholder:"Cost",onChange:C=>{const q=[...c.billing.materialCosts];q[w].cost=parseFloat(C.target.value)||0,o(I=>({...I,billing:{...I.billing,materialCosts:q}}))},onBlur:R})]},w))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Travel Cost"}),e.jsx(se,{type:"number",value:c.billing.travelCost,onChange:E=>S("travelCost",parseFloat(E.target.value)||0),onBlur:R})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tax Rate (%)"}),e.jsx(se,{type:"number",value:c.billing.taxRate,onChange:E=>S("taxRate",parseFloat(E.target.value)||0),onBlur:R})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:j(c.billing.totalBeforeTax)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:j(c.billing.taxAmount)})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:j(c.billing.totalAmount)})]})]})})]})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center",children:[e.jsx(zi,{className:"w-5 h-5 mr-2"}),"Export Options"]}),e.jsx(Ke,{children:"Choose the format that works best with your accounting system"})]}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Export Format"}),e.jsxs(Le,{value:u,onValueChange:h,children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select export format"})}),e.jsx(Ie,{children:k.map(E=>e.jsx(oe,{value:E.value,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E.icon,{className:"w-4 h-4 mr-2"}),E.label]})},E.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs(F,{onClick:()=>T(u),className:"w-full justify-start",children:[e.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]}),e.jsxs(F,{variant:"outline",onClick:()=>D(u),className:"w-full justify-start",children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),"Download File"]}),e.jsxs(F,{variant:"outline",onClick:()=>window.print(),className:"w-full justify-start",children:[e.jsx(WS,{className:"w-4 h-4 mr-2"}),"Print"]})]})]})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center",children:[e.jsx(Vi,{className:"w-5 h-5 mr-2"}),"Preview"]}),e.jsx(Ke,{children:"Preview of the exported data"})]}),e.jsx(me,{children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("pre",{className:"text-xs whitespace-pre-wrap font-mono max-h-64 overflow-y-auto",children:A(u)})})})]})]})]}),e.jsx(de,{children:e.jsx(me,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(F,{variant:"outline",onClick:i,children:"Cancel"}),e.jsxs(F,{onClick:R,variant:"outline",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Recalculate"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(F,{onClick:()=>T("invoice_template"),variant:"outline",children:[e.jsx(QC,{className:"w-4 h-4 mr-2"}),"Quick Copy Invoice"]}),e.jsxs(F,{onClick:()=>l(c),children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Mark as Processed"]})]})]})})})]})},n6=({businessType:a="service"})=>{const[l,i]=f.useState(!0),[c,o]=f.useState(!1),[u,h]=f.useState(!1),[p,g]=f.useState(null),[y,x]=f.useState("queue"),[j,b]=f.useState(!0),[A,T]=f.useState({autoCreateInvoices:!0,autoSendInvoices:!1,defaultPaymentTerms:30,taxRate:20}),D=S=>{g(S),h(!0),x("manual")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ja,{value:y,onValueChange:x,className:"w-full",children:[e.jsxs(en,{className:"grid w-full grid-cols-4",children:[e.jsxs(ct,{value:"queue",className:"flex items-center",children:[e.jsx(Zy,{className:"w-4 h-4 mr-2"}),"Billing Queue"]}),e.jsxs(ct,{value:"integrations",className:"flex items-center",children:[e.jsx(Si,{className:"w-4 h-4 mr-2"}),"Integrations"]}),e.jsxs(ct,{value:"invoices",className:"flex items-center",children:[e.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Invoices"]}),e.jsxs(ct,{value:"manual",className:"flex items-center",children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Manual Processing"]})]}),e.jsx(ot,{value:"queue",className:"space-y-6",children:e.jsx(s6,{onManualProcess:D})}),e.jsxs(ot,{value:"integrations",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center",children:[e.jsx(Si,{className:"w-5 h-5 mr-2 text-blue-600"}),"Xero Integration"]}),e.jsx(Ke,{children:"Connect to Xero for seamless accounting integration"})]}),e.jsx(me,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(F,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(Si,{className:"w-4 h-4 mr-2"}),"Connect to Xero"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("p",{children:" Automatic invoice creation and sending"}),e.jsx("p",{children:" Real-time financial data synchronization"}),e.jsx("p",{children:" Customer and contact management"})]})]})})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center",children:[e.jsx(Si,{className:"w-5 h-5 mr-2 text-blue-600"}),"QuickBooks Integration"]}),e.jsx(Ke,{children:"Connect to QuickBooks Online for comprehensive accounting integration"})]}),e.jsx(me,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(F,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(Si,{className:"w-4 h-4 mr-2"}),"Connect to QuickBooks"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("p",{children:" Automatic invoice and payment tracking"}),e.jsx("p",{children:" Customer and vendor synchronization"}),e.jsx("p",{children:" Tax calculation and reporting"})]})]})})]})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center",children:[e.jsx(Mo,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Automation Settings"]}),e.jsx(Ke,{children:"Configure how completed tickets automatically generate invoices"})]}),e.jsx(me,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(J,{className:"text-sm font-medium",children:"Auto-Create Invoices"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Create invoices when tickets are completed"})]}),e.jsx("input",{type:"checkbox",checked:A.autoCreateInvoices,onChange:S=>T({...A,autoCreateInvoices:S.target.checked}),className:"rounded border-gray-300"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(J,{className:"text-sm font-medium",children:"Auto-Send Invoices"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Email invoices to customers automatically"})]}),e.jsx("input",{type:"checkbox",checked:A.autoSendInvoices,onChange:S=>T({...A,autoSendInvoices:S.target.checked}),className:"rounded border-gray-300"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"paymentTerms",children:"Payment Terms (days)"}),e.jsx(se,{id:"paymentTerms",type:"number",value:A.defaultPaymentTerms,onChange:S=>T({...A,defaultPaymentTerms:parseInt(S.target.value)})})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(se,{id:"taxRate",type:"number",value:A.taxRate,onChange:S=>T({...A,taxRate:parseFloat(S.target.value)})})]})]})]})})]})]}),e.jsx(ot,{value:"invoices",className:"space-y-6",children:e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Invoice Management"}),e.jsx(Ke,{children:"View and manage your invoices"})]}),e.jsx(me,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ct,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No invoices yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Process tickets from the billing queue to create invoices"}),e.jsx(F,{onClick:()=>x("queue"),children:"Go to Billing Queue"})]})})]})}),e.jsx(ot,{value:"manual",className:"space-y-6",children:u&&p?e.jsx(a6,{ticketData:p,onClose:()=>{h(!1),g(null),x("queue")}}):e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Manual Processing"}),e.jsx(Ke,{children:"Select a ticket from the billing queue to process manually"})]}),e.jsx(me,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(fs,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No ticket selected"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Go to the billing queue and select a ticket to process manually"}),e.jsx(F,{onClick:()=>x("queue"),children:"Go to Billing Queue"})]})})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(de,{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Create New Invoice"}),e.jsx(Ke,{children:"Generate a new invoice manually"})]}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"customerName",children:"Customer Name"}),e.jsx(se,{id:"customerName",placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"customerEmail",children:"Customer Email"}),e.jsx(se,{id:"customerEmail",type:"email",placeholder:"customer@email.com"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"projectName",children:"Project/Service"}),e.jsx(se,{id:"projectName",placeholder:"Description of work"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"invoiceDate",children:"Invoice Date"}),e.jsx(se,{id:"invoiceDate",type:"date",defaultValue:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Invoice Items"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 text-sm font-medium text-gray-700",children:[e.jsx("div",{className:"col-span-5",children:"Description"}),e.jsx("div",{className:"col-span-2",children:"Quantity"}),e.jsx("div",{className:"col-span-2",children:"Rate"}),e.jsx("div",{className:"col-span-2",children:"Amount"}),e.jsx("div",{className:"col-span-1"})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx(se,{className:"col-span-5",placeholder:"Item description"}),e.jsx(se,{className:"col-span-2",type:"number",defaultValue:"1"}),e.jsx(se,{className:"col-span-2",type:"number",placeholder:"0.00"}),e.jsx(se,{className:"col-span-2",type:"number",placeholder:"0.00",readOnly:!0}),e.jsx(F,{variant:"outline",size:"sm",className:"col-span-1",children:"+"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",className:"w-full p-2 border border-gray-300 rounded-md",rows:"3",placeholder:"Additional notes for the invoice"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:"0.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax (20%):"}),e.jsx("span",{children:"0.00"})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:"0.00"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx(F,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(F,{variant:"outline",children:"Save as Draft"}),e.jsx(F,{onClick:()=>o(!1),children:"Create & Send"})]})]})]})})]})},jo=[{code:"GBP",symbol:"",name:"British Pound"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"CHF",symbol:"Fr",name:"Swiss Franc"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"SEK",symbol:"kr",name:"Swedish Krona"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"MXN",symbol:"$",name:"Mexican Peso"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"NOK",symbol:"kr",name:"Norwegian Krone"},{code:"ZAR",symbol:"R",name:"South African Rand"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"RUB",symbol:"",name:"Russian Ruble"},{code:"KRW",symbol:"",name:"South Korean Won"},{code:"TRY",symbol:"",name:"Turkish Lira"}];function my({defaultTab:a="customers"}){var Ys,In;console.log("[CRMDashboard] Component mounting...");const l=Lt(),[i,c]=f.useState(a);console.log("[CRMDashboard] State initialized");const[o,u]=f.useState(""),[h,p]=f.useState(null),[g,y]=f.useState(!1),[x,j]=f.useState(null),[b,A]=f.useState(null),[T,D]=f.useState({}),[S,R]=f.useState({}),[k,E]=f.useState("GBP"),[w,C]=f.useState([]),[q,I]=f.useState(60),[W,P]=f.useState(!1),[Y,B]=f.useState({name:"",category:"",defaultOurCost:"",defaultClientPrice:"",unit:"",defaultQuantity:0,active:!0}),[le,Z]=f.useState("ALL"),[$,ee]=f.useState({}),[N,L]=f.useState({}),[v,O]=f.useState(null),[M,U]=f.useState(""),[Q,H]=f.useState([]),[ie,ye]=f.useState(!1);f.useEffect(()=>{const X=async()=>{try{const ve=await fetch("/api/customer-services",{credentials:"include"});if(ve.ok){const be=await ve.json(),Pe={};be.forEach(ze=>{Pe[ze.contact_id]||(Pe[ze.contact_id]=[]),Pe[ze.contact_id].push(ze)}),D(Pe),console.log("[CRMDashboard] Customer services loaded:",be.length)}}catch(ve){console.error("[CRMDashboard] Error loading customer services:",ve)}};X();const je=setInterval(X,1e4);return()=>clearInterval(je)},[]),f.useEffect(()=>{const X=async()=>{var ve;try{const be=await fetch("/api/products",{credentials:"include"});if(be.ok){const Pe=await be.json();C(Pe.products||[]),console.log("[CRMDashboard] Products loaded:",((ve=Pe.products)==null?void 0:ve.length)||0)}}catch(be){console.error("[CRMDashboard] Error loading products:",be)}};X();const je=setInterval(X,1e4);return()=>clearInterval(je)},[]);const ge=()=>{var X;return((X=jo.find(je=>je.code===k))==null?void 0:X.symbol)||""},[pe,Ne]=f.useState([]),[Fe,De]=f.useState(!1);f.useEffect(()=>{const X=async()=>{De(!0);try{const ve=await fetch("/api/contacts",{credentials:"include"});if(ve.ok){const be=await ve.json();Ne(be),console.log("[CRMDashboard] Contacts loaded:",be.length)}else console.error("[CRMDashboard] Failed to fetch contacts:",ve.statusText),Ne([])}catch(ve){console.error("[CRMDashboard] Error fetching contacts:",ve),Ne([])}finally{De(!1)}};X();const je=setInterval(X,1e4);return()=>clearInterval(je)},[]),f.useEffect(()=>{console.log("[CRMDashboard] Fetching quotes from API...");const X=async()=>{var ve;ye(!0);try{const be=await fetch("/api/quotes",{credentials:"include"});if(be.ok){const Pe=await be.json();H(Pe.quotes||[]),console.log("[CRMDashboard] Quotes loaded:",((ve=Pe.quotes)==null?void 0:ve.length)||0)}else console.error("[CRMDashboard] Failed to fetch quotes:",be.statusText),H([])}catch(be){console.error("[CRMDashboard] Error fetching quotes:",be),H([])}finally{ye(!1)}};X();const je=setInterval(X,1e4);return()=>clearInterval(je)},[]);const Ge=pe.filter(X=>{const je=o===""||X.name.toLowerCase().startsWith(o.toLowerCase()),ve=le==="ALL"||X.name.charAt(0).toUpperCase()===le;return je&&ve}),We=f.useMemo(()=>{let X=0;return T&&Object.keys(T).length>0?X=pe.reduce((je,ve)=>{const Pe=(T[ve.id]||[]).reduce((ze,us)=>us&&us.quantity>0?ze+(us.clientPrice-us.ourCost)*us.quantity:ze,0);return je+Pe},0):X=pe.reduce((je,ve)=>{var be;return je+(((be=ve.crm)==null?void 0:be.totalProfit)||0)},0),X},[T,pe]),xt=pe.reduce((X,je)=>{var ve;return X+(((ve=je.crm)==null?void 0:ve.renewalsCount)||0)},0),G=pe.reduce((X,je)=>{var ve;return X+(((ve=je.crm)==null?void 0:ve.openOppsCount)||0)},0),fe=X=>{if(!T[X]){const je=w.map(ve=>({id:ve.id,name:ve.name,category:ve.category,ourCost:ve.defaultOurCost,clientPrice:ve.defaultClientPrice,quantity:0,unit:ve.unit,active:!1}));D(ve=>({...ve,[X]:je}))}},Me=X=>{try{if(!X)return[];const je=T[X];return!je||!Array.isArray(je)?(fe(X),[]):w.map(ve=>{try{const be=je.find(Pe=>Pe&&Pe.id===ve.id);if(be)return be;{const Pe={id:ve.id,name:ve.name,category:ve.category,ourCost:ve.defaultOurCost||0,clientPrice:ve.defaultClientPrice||0,quantity:0,unit:ve.unit||"unit",active:!1};return D(ze=>({...ze,[X]:[...ze[X]||[],Pe]})),Pe}}catch(be){return console.warn("Error processing product:",ve.id,be),{id:ve.id,name:ve.name||"Unknown",category:ve.category||"General",ourCost:0,clientPrice:0,quantity:0,unit:"unit",active:!1}}})}catch(je){return console.warn("Error in getCustomerServices mapping:",je),[]}},_e=X=>{try{if(!X)return 0;const je=Me(X);return!je||!Array.isArray(je)?0:je.reduce((ve,be)=>{try{if(be&&typeof be.clientPrice=="number"&&typeof be.ourCost=="number"&&typeof be.quantity=="number"&&be.quantity>0){const Pe=(be.clientPrice-be.ourCost)*be.quantity;return ve+(isNaN(Pe)?0:Pe)}return ve}catch(Pe){return console.warn("Error calculating service profit:",Pe),ve}},0)}catch(je){return console.warn("Error calculating customer total profit for company:",X,je),0}},rt=async(X,je,ve)=>{try{const ze=(await(await fetch("/api/customer-services",{credentials:"include"})).json()).find(Rt=>Rt.contact_id===X&&Rt.product_id===je);if(ze){if(!(await fetch(`/api/customer-services/${ze.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({quantity:ve.quantity,our_cost:ve.ourCost,client_price:ve.clientPrice,active:ve.active})})).ok)throw new Error("Failed to update service")}else if((ve.active||ve.quantity>0)&&!(await fetch("/api/customer-services",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contact_id:X,product_id:je,quantity:ve.quantity||0,our_cost:ve.ourCost||0,client_price:ve.clientPrice||0,active:ve.active||!1})})).ok)throw new Error("Failed to create service");const Bn=await(await fetch("/api/customer-services",{credentials:"include"})).json(),Qs={};Bn.forEach(Rt=>{Qs[Rt.contact_id]||(Qs[Rt.contact_id]=[]),Qs[Rt.contact_id].push(Rt)}),D(Qs)}catch(be){console.error("Error updating customer service:",be),alert("Failed to update service. Please try again.")}},at=X=>{var je;return S[X.id]||{name:X.primaryContact||X.name,email:X.email,phone:X.phone,address:(je=X.addresses)!=null&&je[0]?`${X.addresses[0].street||""} ${X.addresses[0].city||""} ${X.addresses[0].postalCode||""}`.trim():""}},Gt=(X,je,ve)=>{R(be=>({...be,[X]:{...be[X],[je]:ve}}))},Ut=async(X,je)=>{try{if(!(await fetch(`/api/products/${X}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(je)})).ok)throw new Error("Failed to update product");const Pe=await(await fetch("/api/products",{credentials:"include"})).json();C(Pe.products||[])}catch(ve){console.error("Error updating product:",ve),alert("Failed to update product. Please try again.")}},Cr=async()=>{if(!Y.name.trim())return;const X={name:Y.name,type:Y.category,our_cost:parseFloat(Y.defaultOurCost)||0,client_price:parseFloat(Y.defaultClientPrice)||0,unit:Y.unit,default_quantity:parseInt(Y.defaultQuantity)||0,tax_rate:0,active:Y.active};try{if(!(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(X)})).ok)throw new Error("Failed to create product");const be=await(await fetch("/api/products",{credentials:"include"})).json();C(be.products||[]),B({name:"",category:"",defaultOurCost:"",defaultClientPrice:"",unit:"",defaultQuantity:0,active:!0}),P(!1)}catch(je){console.error("Error adding product:",je),alert("Failed to add product. Please try again.")}},Un=()=>{B({name:"",category:"",defaultOurCost:"",defaultClientPrice:"",unit:"",defaultQuantity:0,active:!0}),P(!1)},qn=async X=>{if(confirm("Are you sure you want to delete this product?"))try{if(!(await fetch(`/api/products/${X}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete product");const be=await(await fetch("/api/products",{credentials:"include"})).json();C(be.products||[])}catch(je){console.error("Error deleting product:",je),alert("Failed to delete product. Please try again.")}},ca="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),ps=(X,je)=>{const ve=`${X}-${je}`;U($[ve]||""),O({companyId:X,serviceId:je})},we=()=>{if(v){const X=`${v.companyId}-${v.serviceId}`;ee(ve=>({...ve,[X]:M}));const je=JSON.parse(localStorage.getItem("serviceNotes")||"{}");je[X]=M,localStorage.setItem("serviceNotes",JSON.stringify(je)),O(null),U("")}},St=(X,je,ve)=>{const be=`${X}-${je}`;if(L(Pe=>({...Pe,[be]:ve})),ve){const Pe=pe.find(Rt=>Rt.id===X),ze=Me(X).find(Rt=>Rt.id===je),us={id:`renewal-${be}-${Date.now()}`,title:`${Pe==null?void 0:Pe.name} - ${ze==null?void 0:ze.name} Renewal`,date:ve,time:"09:00",type:"Follow-up",description:`Sell this to the customer! ${ze==null?void 0:ze.name} renewal opportunity for ${Pe==null?void 0:Pe.name}`,company:Pe==null?void 0:Pe.name,service:ze==null?void 0:ze.name},Qs=[...JSON.parse(localStorage.getItem("crmCalendarEvents")||"[]").filter(Rt=>Rt.id!==us.id),us];localStorage.setItem("crmCalendarEvents",JSON.stringify(Qs)),console.log(`Created CRM calendar entry for ${Pe==null?void 0:Pe.name} - ${ze==null?void 0:ze.name} on ${ve}: "Sell this to the customer!"`)}},Mt=()=>{const X=[];X.push(["Company Name","Primary Contact","Email","Phone","Address","Status","Total Profit","Renewals Count","Open Opportunities","Last Activity","Next CRM Event"]),pe.forEach(ze=>{X.push([ze.name,ze.primaryContact,ze.email,ze.phone,ze.address,ze.status,_e(ze.id),ze.renewalsCount,ze.openOppsCount,ze.lastActivity,ze.nextCRMEvent])}),X.push([]),X.push(["PRODUCT CATALOG"]),X.push(["Product Name","Category","Default Our Cost","Default Client Price","Unit","Active"]),w.forEach(ze=>{X.push([ze.name,ze.category,ze.defaultOurCost,ze.defaultClientPrice,ze.unit,ze.active?"Yes":"No"])});const je=X.map(ze=>ze.map(us=>`"${us}"`).join(",")).join(`
`),ve=new Blob([je],{type:"text/csv;charset=utf-8;"}),be=document.createElement("a"),Pe=URL.createObjectURL(ve);be.setAttribute("href",Pe),be.setAttribute("download",`crm_backup_${new Date().toISOString().split("T")[0]}.csv`),be.style.visibility="hidden",document.body.appendChild(be),be.click(),document.body.removeChild(be)};return e.jsxs("div",{className:"w-full p-2 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h1",{className:"text-lg sm:text-2xl font-bold flex items-center space-x-2 responsive-text",children:[e.jsx(ea,{className:"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0"}),e.jsx("span",{className:"break-words",children:"Customer Relationship Management"})]}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Manage customers, track services, and monitor renewals"})]}),e.jsxs(F,{className:"flex items-center space-x-2 w-full sm:w-auto",children:[e.jsx(Je,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Add Customer"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 sm:gap-4 lg:gap-6",children:[e.jsx(de,{className:"w-full h-10 sm:h-auto",children:e.jsx(me,{className:"p-0.5 sm:p-6 h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center text-center w-full",children:[e.jsx(ea,{className:"w-3 h-3 sm:w-8 sm:h-8 text-blue-600 mb-0.5 sm:mb-2"}),e.jsx("p",{className:"text-xs sm:text-2xl font-bold leading-none",children:pe.length})]})})}),e.jsx(de,{className:"w-full h-10 sm:h-auto",children:e.jsx(me,{className:"p-0.5 sm:p-6 h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center text-center w-full",children:[e.jsx(kv,{className:"w-3 h-3 sm:w-8 sm:h-8 text-green-600 mb-0.5 sm:mb-2"}),e.jsxs("p",{className:"text-xs sm:text-2xl font-bold leading-none",children:[ge(),We.toLocaleString()]})]})})}),e.jsx(de,{className:"w-full h-10 sm:h-auto",children:e.jsx(me,{className:"p-0.5 sm:p-6 h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center text-center w-full",children:[e.jsx(os,{className:"w-3 h-3 sm:w-8 sm:h-8 text-orange-600 mb-0.5 sm:mb-2"}),e.jsx("p",{className:"text-xs sm:text-2xl font-bold leading-none",children:xt})]})})}),e.jsx(de,{className:"w-full h-10 sm:h-auto",children:e.jsx(me,{className:"p-0.5 sm:p-6 h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center text-center w-full",children:[e.jsx(Dv,{className:"w-3 h-3 sm:w-8 sm:h-8 text-purple-600 mb-0.5 sm:mb-2"}),e.jsx("p",{className:"text-xs sm:text-2xl font-bold leading-none",children:G})]})})})]}),e.jsxs(Ja,{value:i,onValueChange:c,children:[e.jsxs(en,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-1 text-xs sm:text-sm",children:[e.jsx(ct,{value:"customers",className:"text-xs sm:text-sm",children:"Customers"}),e.jsx(ct,{value:"catalog",className:"text-xs sm:text-sm",children:"Product Catalog"}),e.jsx(ct,{value:"quotes",className:"text-xs sm:text-sm",children:"Quotes"}),e.jsx(ct,{value:"settings",className:"text-xs sm:text-sm col-span-2 sm:col-span-1",children:"CRM Settings"})]}),e.jsx(ot,{value:"customers",className:"space-y-4 sm:space-y-6",children:e.jsxs(de,{className:"w-full",children:[e.jsxs(Ce,{className:"p-3 sm:p-6",children:[e.jsx(ke,{className:"text-lg sm:text-xl",children:"Customer Management"}),e.jsx(Ke,{className:"text-sm",children:"Manage your customer relationships and track profitability"})]}),e.jsx(me,{className:"p-3 sm:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(se,{placeholder:"Search by company name (starts with)...",value:o,onChange:X=>u(X.target.value),className:"pl-10 mobile-input"})]}),e.jsxs(F,{className:"w-full sm:w-auto",children:[e.jsx(Je,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{children:"Add Customer"})]})]}),e.jsxs("div",{className:"hidden lg:block border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex gap-1 justify-center",children:[e.jsx(F,{variant:le==="ALL"?"default":"outline",size:"sm",onClick:()=>Z("ALL"),className:"h-8 w-12 text-xs",children:"ALL"}),ca.map(X=>{const je=pe.some(ve=>ve.name.charAt(0).toUpperCase()===X);return e.jsx(F,{variant:le===X?"default":"outline",size:"sm",onClick:()=>Z(X),disabled:!je,className:"h-8 w-8 text-xs p-0",children:X},X)})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2 text-center",children:["Showing ",Ge.length," of ",pe.length," customers",le!=="ALL"&&` starting with "${le}"`]})]}),e.jsx("div",{className:"customer-list",children:Ge.map(X=>e.jsx(de,{className:"cursor-pointer hover:shadow-md transition-all duration-200",onClick:()=>p(X),children:e.jsx(me,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"font-medium text-gray-900 truncate text-sm",children:X.name})}),e.jsxs("div",{className:"flex items-center flex-wrap gap-1 sm:gap-2 flex-shrink-0",children:[e.jsx(He,{variant:X.status==="Active"?"default":"destructive",className:"text-xs",children:X.status}),X.renewalsCount>0&&e.jsxs(He,{variant:"outline",className:"text-orange-600 border-orange-600 text-xs",children:[X.renewalsCount," Renewals Due"]}),X.openOppsCount>0&&e.jsxs(He,{variant:"outline",className:"text-purple-600 border-purple-600 text-xs",children:[X.openOppsCount," Open Opp",X.openOppsCount>1?"s":""]})]})]})})},X.id))})]})})]})}),e.jsx(ot,{value:"catalog",className:"space-y-6",children:e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Product & Service Catalog"}),e.jsx(Ke,{children:"Manage your master template of products and services"})]}),e.jsxs(me,{children:[e.jsxs("div",{className:"space-y-4",children:[W&&e.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Add New Product/Service"}),e.jsx(F,{variant:"outline",size:"sm",onClick:Un,children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name"}),e.jsx(se,{value:Y.name,onChange:X=>B(je=>({...je,name:X.target.value})),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsx(se,{value:Y.category,onChange:X=>B(je=>({...je,category:X.target.value})),placeholder:"e.g., Maintenance"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Our Cost"}),e.jsx(se,{type:"number",step:"0.01",value:Y.defaultOurCost,onChange:X=>B(je=>({...je,defaultOurCost:X.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client Price"}),e.jsx(se,{type:"number",step:"0.01",value:Y.defaultClientPrice,onChange:X=>B(je=>({...je,defaultClientPrice:X.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit"}),e.jsx(se,{value:Y.unit,onChange:X=>B(je=>({...je,unit:X.target.value})),placeholder:"e.g., service, hour"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:Y.active,onChange:X=>B(je=>({...je,active:X.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Active"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Margin: ",ge(),((parseFloat(Y.defaultClientPrice)||0)-(parseFloat(Y.defaultOurCost)||0)).toFixed(2)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(F,{variant:"outline",onClick:Un,children:"Cancel"}),e.jsx(F,{onClick:Cr,disabled:!Y.name.trim(),children:"Save Product"})]})]})]}),w.map(X=>{const je=b===X.id,ve=X.defaultClientPrice-X.defaultOurCost;return e.jsxs("div",{className:"border rounded-lg p-3 sm:p-4 w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[je?e.jsx(se,{value:X.name,onChange:be=>Ut(X.id,{name:be.target.value}),className:"font-semibold mobile-input"}):e.jsx("h3",{className:"font-semibold text-sm sm:text-base break-words",children:X.name}),je?e.jsx(se,{value:X.category,onChange:be=>Ut(X.id,{category:be.target.value}),className:"mobile-input"}):e.jsx(He,{variant:"outline",className:"text-xs w-fit",children:X.category}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:X.active,onChange:be=>Ut(X.id,{active:be.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Active"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 flex-shrink-0",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>A(je?null:X.id),className:"text-xs px-2 py-1",children:je?"Save":e.jsx(fs,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{window.confirm(`Are you sure you want to delete "${X.name}"? This will remove it from all customer service lists.`)&&qn(X.id)},className:"text-xs px-2 py-1",children:e.jsx(ls,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Our Cost: "}),je?e.jsx(se,{type:"number",step:"0.01",value:X.defaultOurCost,onChange:be=>Ut(X.id,{defaultOurCost:parseFloat(be.target.value)||0}),className:"mt-1"}):e.jsxs("span",{children:[ge(),X.defaultOurCost]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Client Price: "}),je?e.jsx(se,{type:"number",step:"0.01",value:X.defaultClientPrice,onChange:be=>Ut(X.id,{defaultClientPrice:parseFloat(be.target.value)||0}),className:"mt-1"}):e.jsxs("span",{children:[ge(),X.defaultClientPrice]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Margin: "}),e.jsxs("span",{className:"text-green-600",children:[ge(),ve.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Unit: "}),je?e.jsx(se,{value:X.unit,onChange:be=>Ut(X.id,{unit:be.target.value}),className:"mt-1"}):e.jsx("span",{children:X.unit})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Default Qty: "}),je?e.jsx(se,{type:"number",min:"1",value:X.defaultQuantity,onChange:be=>Ut(X.id,{defaultQuantity:parseInt(be.target.value)||1}),className:"mt-1"}):e.jsx("span",{children:X.defaultQuantity})]})]})]},X.id)})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx(F,{variant:"outline",children:"Import CSV"}),e.jsxs(F,{onClick:()=>P(!0),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Product/Service"]})]})]})]})}),e.jsx(ot,{value:"quotes",className:"space-y-6",children:e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Quotes"}),e.jsx(Ke,{children:"View and manage customer quotes"})]}),e.jsxs(me,{children:[ie?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading quotes..."})}):Q.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No quotes found. Create your first quote to get started."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Quote #"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Date"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Status"})]})}),e.jsx("tbody",{children:Q.map(X=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>l(`/app/crm/quotes/${X.id}`),children:[e.jsx("td",{className:"py-3 px-4 font-medium",children:X.quote_number}),e.jsx("td",{className:"py-3 px-4",children:X.customer_name}),e.jsx("td",{className:"py-3 px-4",children:new Date(X.quote_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),e.jsxs("td",{className:"py-3 px-4 text-right font-medium",children:["",parseFloat(X.total_amount).toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${X.status==="draft"?"bg-gray-100 text-gray-800":X.status==="sent"?"bg-blue-100 text-blue-800":X.status==="accepted"?"bg-green-100 text-green-800":X.status==="declined"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:X.status.charAt(0).toUpperCase()+X.status.slice(1)})})]},X.id))})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs(F,{onClick:()=>l("/app/crm/quotes/new"),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create Quote"]})})]})]})}),e.jsx(ot,{value:"settings",className:"space-y-6",children:e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"CRM Settings"}),e.jsx(Ke,{children:"Configure your CRM preferences and renewal alerts"})]}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Renewal Alert Lead Time (Days)"}),e.jsx(se,{type:"number",value:q,onChange:X=>I(parseInt(X.target.value)||60),className:"w-32"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"How many days before renewal to create alerts and calendar events"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Currency"}),e.jsxs(Le,{value:k,onValueChange:E,children:[e.jsx(qe,{className:"w-64",children:e.jsxs(Ue,{children:[(Ys=jo.find(X=>X.code===k))==null?void 0:Ys.symbol," ",k," - ",(In=jo.find(X=>X.code===k))==null?void 0:In.name]})}),e.jsx(Ie,{children:jo.map(X=>e.jsxs(oe,{value:X.code,children:[X.symbol," ",X.code," - ",X.name]},X.code))})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Selected currency will be used throughout the CRM system"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(F,{children:"Save Settings"}),e.jsxs(F,{variant:"outline",onClick:Mt,className:"flex items-center space-x-2",children:[e.jsx(zi,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Data"})]})]})]})]})})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto mobile-modal",children:e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h2",{className:"text-lg sm:text-2xl font-semibold flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[e.jsx("span",{className:"break-words",children:h.name}),e.jsx(He,{variant:h.status==="Active"?"default":"destructive",className:"w-fit",children:h.status})]}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Customer Details & Service Overview"})]}),e.jsx(F,{variant:"ghost",onClick:()=>p(null),className:"self-start sm:self-center",children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 sm:gap-4",children:[e.jsx(de,{className:"w-full",children:e.jsxs(me,{className:"p-2 sm:p-4 text-center",children:[e.jsx(kv,{className:"w-4 h-4 sm:w-8 sm:h-8 mx-auto text-green-600 mb-1 sm:mb-2"}),e.jsxs("p",{className:"text-base sm:text-2xl font-bold text-green-600",children:[ge(),_e(h.id).toLocaleString()]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Company Total Profit"})]})}),e.jsx(de,{className:"w-full",children:e.jsxs(me,{className:"p-2 sm:p-4 text-center",children:[e.jsx(os,{className:"w-4 h-4 sm:w-8 sm:h-8 mx-auto text-orange-600 mb-1 sm:mb-2"}),e.jsx("p",{className:"text-base sm:text-2xl font-bold text-orange-600",children:h.renewalsCount}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Renewals Due"})]})}),e.jsx(de,{className:"w-full",children:e.jsxs(me,{className:"p-2 sm:p-4 text-center",children:[e.jsx(Dv,{className:"w-4 h-4 sm:w-8 sm:h-8 mx-auto text-purple-600 mb-1 sm:mb-2"}),e.jsx("p",{className:"text-base sm:text-2xl font-bold text-purple-600",children:h.openOppsCount}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Open Opportunities"})]})})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Services & Products"}),e.jsx(Ke,{children:"Manage what this customer is purchasing from your catalog"})]}),e.jsx(me,{children:e.jsx("div",{className:"space-y-4",children:Me(h.id).map(X=>{const je=(X.clientPrice-X.ourCost)*X.quantity,ve=x===X.id;return e.jsxs("div",{className:"border rounded-lg p-3 sm:p-4 w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx("h4",{className:"font-medium text-sm sm:text-base break-words",children:X.name}),e.jsx(He,{variant:"outline",className:"text-xs w-fit",children:X.category}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:X.isActive,onChange:be=>rt(h.id,X.id,{isActive:be.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Active"})]})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>j(ve?null:X.id),className:"text-xs px-2 py-1 w-full sm:w-auto",children:ve?"Save":"Edit"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Our Cost"}),ve?e.jsx(se,{type:"number",step:"0.01",value:X.ourCost,onChange:be=>rt(h.id,X.id,{ourCost:parseFloat(be.target.value)||0}),className:"h-8"}):e.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[ge(),X.ourCost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Client Price"}),ve?e.jsx(se,{type:"number",step:"0.01",value:X.clientPrice,onChange:be=>rt(h.id,X.id,{clientPrice:parseFloat(be.target.value)||0}),className:"h-8"}):e.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[ge(),X.clientPrice.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity"}),ve?e.jsx(se,{type:"number",min:"0",step:"1",value:X.quantity,onChange:be=>rt(h.id,X.id,{quantity:parseInt(be.target.value)||0}),onFocus:be=>be.target.select(),className:"h-8"}):e.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[X.quantity," ",X.unit]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Profit"}),e.jsxs("div",{className:"p-2 bg-green-50 rounded text-green-700 font-medium",children:[ge(),(X.clientPrice-X.ourCost).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Service Total Profit"}),e.jsxs("div",{className:"p-2 bg-green-100 rounded text-green-800 font-bold",children:[ge(),je.toFixed(2)]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>ps(h.id,X.id),children:[e.jsx(Ct,{className:"w-4 h-4 mr-1"}),"Notes",$[`${h.id}-${X.id}`]&&e.jsx("span",{className:"ml-1 w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Renewal Date:"}),e.jsx(se,{type:"date",value:N[`${h.id}-${X.id}`]||"",onChange:be=>St(h.id,X.id,be.target.value),className:"w-40 h-8"})]}),N[`${h.id}-${X.id}`]&&e.jsxs("div",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(Ht,{className:"w-3 h-3 mr-1"}),"CRM reminder set"]})]})})]},X.id)})})})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Opportunities"}),e.jsx(Ke,{children:"Sales opportunities in progress"})]}),e.jsx(me,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(e0,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No opportunities yet"}),e.jsx(F,{variant:"outline",children:"Create Opportunity"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center justify-between",children:["Contact Information",e.jsx(F,{variant:"outline",size:"sm",onClick:()=>y(!g),children:g?"Save":"Edit"})]})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Primary Contact"}),g?e.jsx(se,{value:at(h).name,onChange:X=>Gt(h.id,"name",X.target.value),className:"mt-1"}):e.jsx("p",{className:"font-medium",children:at(h).name})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ms,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),g?e.jsx(se,{type:"email",value:at(h).email,onChange:X=>Gt(h.id,"email",X.target.value),className:"mt-1"}):e.jsx("p",{className:"font-medium",children:at(h).email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ao,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),g?e.jsx(se,{type:"tel",value:at(h).phone,onChange:X=>Gt(h.id,"phone",X.target.value),className:"mt-1"}):e.jsx("p",{className:"font-medium",children:at(h).phone})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(MS,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Address"}),g?e.jsx(Vt,{value:at(h).address,onChange:X=>Gt(h.id,"address",X.target.value),className:"mt-1",rows:3}):e.jsx("p",{className:"font-medium",children:at(h).address})]})]})]})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Recent Activity"})}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ht,{className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Activity"}),e.jsx("p",{className:"text-xs text-gray-600",children:h.lastActivity})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(an,{className:"w-4 h-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Next CRM Event"}),e.jsx("p",{className:"text-xs text-gray-600",children:h.nextCRMEvent})]})]})]})})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Quick Actions"})}),e.jsxs(me,{className:"space-y-2",children:[e.jsxs(F,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ao,{className:"w-4 h-4 mr-2"}),"Call Customer"]}),e.jsxs(F,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Send Email"]}),e.jsxs(F,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Schedule Meeting"]}),e.jsxs(F,{variant:"outline",className:"w-full justify-start",children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Edit Customer"]})]})]})]})]})]})})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Service Notes"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>O(null),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),e.jsx(Vt,{value:M,onChange:X=>U(X.target.value),placeholder:"Add notes about this service for this customer...",rows:6,className:"w-full"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(F,{variant:"outline",onClick:()=>O(null),children:"Cancel"}),e.jsx(F,{onClick:we,children:"Save Notes"})]})]})]})})]})}class hy extends As.Component{constructor(l){super(l),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(l){return{hasError:!0}}componentDidCatch(l,i){console.error("Error caught by boundary:",l,i),this.setState({error:l,errorInfo:i})}render(){return this.state.hasError?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(de,{className:"border-red-200 bg-red-50",children:[e.jsx(Ce,{children:e.jsx(ke,{className:"text-red-800",children:"Something went wrong"})}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-red-700",children:"The CRM Dashboard encountered an error and couldn't load properly."}),this.state.error&&e.jsx("div",{className:"bg-white p-4 rounded border border-red-200",children:e.jsx("p",{className:"font-mono text-sm text-red-900",children:this.state.error.toString()})}),this.state.errorInfo&&e.jsxs("details",{className:"bg-white p-4 rounded border border-red-200",children:[e.jsx("summary",{className:"cursor-pointer font-medium text-red-900",children:"Error Details (for developers)"}),e.jsx("pre",{className:"mt-2 text-xs overflow-auto",children:this.state.errorInfo.componentStack})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{onClick:()=>window.location.reload(),variant:"outline",children:"Reload Page"}),e.jsx(F,{onClick:()=>window.location.href="/app/dashboard",variant:"outline",children:"Back to Dashboard"})]})]})})]})}):this.props.children}}const th=[{value:"Call",label:"Call",icon:Ao,color:"bg-blue-100 text-blue-800"},{value:"Meeting",label:"Meeting",icon:hs,color:"bg-green-100 text-green-800"},{value:"FollowUp",label:"Follow Up",icon:e0,color:"bg-purple-100 text-purple-800"},{value:"Renewal",label:"Renewal",icon:os,color:"bg-orange-100 text-orange-800"}];function l6({timezone:a="Europe/London"}){const l=async()=>{try{const G=await fetch("/api/crm-events",{credentials:"include"});if(!G.ok)throw new Error("Failed to fetch events");return await G.json()}catch(G){return console.error("Error loading CRM events:",G),[]}},i=(G,fe,Me=a)=>{const _e=`${G}T${fe}:00`;return new Date(_e)},[c,o]=f.useState([]),[u,h]=f.useState(new Date),[p,g]=f.useState(!1),[y,x]=f.useState(!1),[j,b]=f.useState(!1),[A,T]=f.useState(!1),[D,S]=f.useState(!0),[R,k]=f.useState(!1),[E,w]=f.useState(null),[C,q]=f.useState(null),[I,W]=f.useState("month"),[P,Y]=f.useState({title:"",type:"Call",company:"",contact:"",scheduleTask:"",assignedUser:"",notes:""}),[B,le]=f.useState({title:"",company:"",contact:"",date:"",time:"",assignedUser:"",notes:"",location:""}),[Z,$]=f.useState({title:"",company:"",contact:"",date:"",time:"",assignedUsers:[],location:"",notes:""});f.useEffect(()=>{const G=async()=>{const Me=await l();o(Me)};G();const fe=setInterval(G,1e4);return()=>clearInterval(fe)},[]);const ee=G=>{const fe=G.getFullYear(),Me=String(G.getMonth()+1).padStart(2,"0"),_e=String(G.getDate()).padStart(2,"0"),rt=`${fe}-${Me}-${_e}`;return c.filter(at=>at.startAt?at.startAt.split("T")[0]===rt:at.date===rt)},N=G=>th.find(fe=>fe.value===G)||th[0],L=G=>new Date(G).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),v=()=>{if(!B.title.trim()||!B.date||!B.time)return;const G={id:`meeting-${Date.now()}`,title:B.title,type:"Meeting",company:B.company,contact:B.contact,startAt:`${B.date}T${B.time}:00`,endAt:`${B.date}T${O(B.time)}:00`,assignedUser:B.assignedUser,status:"Planned",notes:B.notes,location:B.location};fetch("/api/crm-events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(G)}).then(fe=>fe.json()).then(async()=>{const fe=await l();o(fe)}).catch(fe=>console.error("Error creating meeting:",fe)),le({title:"",company:"",contact:"",date:"",time:"",assignedUser:"",notes:"",location:""}),x(!1)},O=G=>{const[fe,Me]=G.split(":");return`${(parseInt(fe)+1).toString().padStart(2,"0")}:${Me}`},M=G=>{$({title:`Follow-up meeting for ${G.company}`,company:G.company,contact:G.contact||"",date:"",time:"",assignedUsers:[],location:"",notes:`Follow-up meeting for ${G.service||"service"} renewal`}),b(!0)},U=()=>{if(!Z.title.trim()||!Z.date||!Z.time)return;const G=i(Z.date,Z.time),fe=new Date(G.getTime()+3600*1e3),Me={id:`scheduled-meeting-${Date.now()}`,title:Z.title,type:"Meeting",company:Z.company,contact:Z.contact,startAt:G.toISOString(),endAt:fe.toISOString(),assignedUsers:Z.assignedUsers,status:"Planned",notes:Z.notes,location:Z.location};fetch("/api/crm-events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Me)}).then(_e=>_e.json()).then(async()=>{const _e=await l();o(_e)}).catch(_e=>console.error("Error creating meeting:",_e)),sendMeetingInvitations(Me),$({title:"",company:"",contact:"",date:"",time:"",assignedUsers:[],location:"",notes:""}),b(!1)},Q=()=>{if(C){if(fetch(`/api/crm-events/${C.id}`,{method:"DELETE",credentials:"include"}).then(async()=>{const G=await l();o(G)}).catch(G=>console.error("Error deleting event:",G)),D&&C.assignedUsers&&C.assignedUsers.length>0){const G=ge().filter(fe=>C.assignedUsers.includes(fe));G.length>0&&alert(` Cancellation emails sent to: ${G.join(", ")}

Event "${C.title}" has been cancelled.`)}T(!1),q(null),S(!0)}},H=G=>{w({...G,date:G.startAt?new Date(G.startAt).toISOString().split("T")[0]:"",time:G.startAt?new Date(G.startAt).toTimeString().slice(0,5):"",assignedUsers:G.assignedUsers||[]}),k(!0),q(null)},ie=()=>{if(!E.title||!E.date||!E.time){alert("Please fill in all required fields");return}const G=i(E.date,E.time),fe=new Date(G.getTime()+3600*1e3),Me={...E,startAt:G.toISOString(),endAt:fe.toISOString()};if(fetch(`/api/crm-events/${E.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Me)}).then(async()=>{const _e=await l();o(_e)}).catch(_e=>console.error("Error updating event:",_e)),Me.assignedUsers&&Me.assignedUsers.length>0){const _e=ge(),rt=Me.assignedUsers.filter(at=>_e.includes(at));rt.length>0&&alert(` Event update notifications sent to: ${rt.join(", ")}`)}k(!1),w(null)},ye=()=>["Sarah Manager","Mike Sales","John Tech","Lisa Admin"],ge=()=>["Sarah Manager","Mike Sales","John Tech","Lisa Admin"],pe=G=>{const Me=[{name:"Acme Corp",address:"123 Business St, London, SW1A 1AA"},{name:"TechStart Ltd",address:"456 Corporate Ave, Manchester, M1 1AA"},{name:"Global Industries",address:"789 Enterprise Rd, Birmingham, B1 1AA"},{name:"Innovation Hub",address:"321 Tech Park, Leeds, LS1 1AA"},{name:"Future Systems",address:"654 Digital Way, Bristol, BS1 1AA"}].find(_e=>_e.name===G);return Me?[Me.address]:["Office Location - TBD"]},Ne=G=>new Date(G).toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric"}),Fe=()=>{const G=u.getFullYear(),fe=u.getMonth(),Me=new Date(G,fe,1),_e=new Date(Me);_e.setDate(_e.getDate()-Me.getDay());const rt=[],at=new Date(_e);for(let Gt=0;Gt<42;Gt++)rt.push(new Date(at)),at.setDate(at.getDate()+1);return rt},De=()=>{const G=new Date(u),fe=G.getDay(),Me=G.getDate()-fe;G.setDate(Me);const _e=[];for(let rt=0;rt<7;rt++){const at=new Date(G);at.setDate(G.getDate()+rt),_e.push(at)}return _e},Ge=()=>{const G=De(),fe=G[0],Me=G[6];return fe.getMonth()===Me.getMonth()?`${fe.getDate()}-${Me.getDate()} ${fe.toLocaleDateString("en-GB",{month:"long",year:"numeric"})}`:`${fe.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${Me.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`},We=Fe(),xt=ee(u);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center space-x-2",children:[e.jsx(Ht,{className:"w-6 h-6"}),e.jsx("span",{children:"CRM Calendar"})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Schedule follow-ups, calls, meetings, and renewal reminders"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Le,{value:I,onValueChange:W,children:[e.jsx(qe,{className:"w-32",children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"day",children:"Day"}),e.jsx(oe,{value:"week",children:"Week"}),e.jsx(oe,{value:"month",children:"Month"})]})]}),e.jsxs(F,{onClick:()=>g(!0),className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Activity"})]}),e.jsxs(F,{onClick:()=>x(!0),className:"flex items-center space-x-2",variant:"outline",children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsx("span",{children:"Book Meeting"})]})]})]}),e.jsx(de,{children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const G=new Date(u);I==="day"?G.setDate(G.getDate()-1):I==="week"?G.setDate(G.getDate()-7):G.setMonth(G.getMonth()-1),h(G)},children:e.jsx(Qy,{className:"w-4 h-4"})}),e.jsxs("h2",{className:"text-lg font-semibold",children:[I==="day"&&u.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),I==="week"&&Ge(),I==="month"&&u.toLocaleDateString("en-GB",{month:"long",year:"numeric"})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{const G=new Date(u);I==="day"?G.setDate(G.getDate()+1):I==="week"?G.setDate(G.getDate()+7):G.setMonth(G.getMonth()+1),h(G)},children:e.jsx(oh,{className:"w-4 h-4"})})]}),e.jsx(F,{variant:"outline",onClick:()=>h(new Date),children:"Today"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{children:[I==="day"&&`Day View - ${u.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}`,I==="week"&&`Week View - ${Ge()}`,I==="month"&&"Month View"]})}),e.jsxs(me,{children:[I==="day"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:u.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"})}),e.jsxs("p",{className:"text-blue-700",children:[xt.length," event",xt.length!==1?"s":""," scheduled"]})]}),xt.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ht,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No events scheduled for this day"})]}):e.jsx("div",{className:"space-y-3",children:xt.map(G=>{const fe=N(G.type);return e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>q(G),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(He,{className:fe.color,children:fe.label}),e.jsx("h4",{className:"font-medium",children:G.title})]}),e.jsx("div",{className:"text-sm text-gray-500",children:G.startAt&&L(G.startAt)})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",G.company]}),G.contact&&e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",G.contact]}),G.assignedUser&&e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned to:"})," ",G.assignedUser]})]})]},G.id)})})]}),I==="week"&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-7 gap-2",children:De().map((G,fe)=>{const Me=ee(G),_e=G.toDateString()===new Date().toDateString();return e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:`text-center mb-2 ${_e?"text-blue-600 font-bold":"text-gray-700"}`,children:[e.jsx("div",{className:"text-xs font-medium",children:G.toLocaleDateString("en-GB",{weekday:"short"})}),e.jsx("div",{className:`text-lg ${_e?"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mx-auto":""}`,children:G.getDate()})]}),e.jsxs("div",{className:"space-y-1",children:[Me.slice(0,3).map(rt=>{const at=N(rt.type);return e.jsxs("div",{className:`text-xs p-1 rounded cursor-pointer ${at.color}`,onClick:()=>q(rt),title:`${rt.title} - ${rt.startAt&&L(rt.startAt)}`,children:[e.jsx("div",{className:"truncate",children:rt.title}),rt.startAt&&e.jsx("div",{className:"text-xs opacity-75",children:L(rt.startAt)})]},rt.id)}),Me.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",Me.length-3," more"]})]})]},fe)})})}),I==="month"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(G=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:G},G))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:We.map((G,fe)=>{const Me=G.getMonth()===u.getMonth(),_e=G.toDateString()===new Date().toDateString(),rt=G.toDateString()===u.toDateString(),at=ee(G);return e.jsxs("div",{className:`
                            min-h-[80px] p-1 border rounded cursor-pointer transition-colors
                            ${Me?"bg-white":"bg-gray-50 text-gray-400"}
                            ${_e?"border-blue-500 bg-blue-50":"border-gray-200"}
                            ${rt?"ring-2 ring-blue-500":""}
                            hover:bg-gray-50
                          `,onClick:()=>h(G),children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:G.getDate()}),e.jsxs("div",{className:"space-y-1",children:[at.slice(0,2).map(Gt=>{const Ut=N(Gt.type);return e.jsx("div",{className:`text-xs p-1 rounded truncate ${Ut.color}`,title:Gt.title,children:Gt.title},Gt.id)}),at.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",at.length-2," more"]})]})]},fe)})})]})]})]})}),e.jsxs("div",{children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{children:["Events for ",u.toLocaleDateString("en-GB",{weekday:"long",month:"long",day:"numeric"})]})}),e.jsx(me,{children:e.jsx("div",{className:"space-y-3",children:xt.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No events scheduled"}):xt.map(G=>{const fe=N(G.type),Me=fe.icon;return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>q(G),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:G.title})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:[" ",L(G.startAt)||G.time," ",G.endAt?`- ${L(G.endAt)}`:""]}),e.jsxs("div",{children:[" ",G.company]}),e.jsxs("div",{children:[" ",G.contact]}),G.service&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:[" ",G.service]}),e.jsx(F,{variant:"link",size:"sm",className:"h-auto p-0 text-xs text-blue-600",onClick:_e=>{_e.stopPropagation(),viewServiceNotes(G.company,G.service)},children:"View Notes"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(He,{variant:"outline",className:fe.color,children:G.type}),G.status==="Done"?e.jsx(Ze,{className:"w-4 h-4 text-green-600"}):e.jsx(an,{className:"w-4 h-4 text-orange-600"})]})]})},G.id)})})})]}),e.jsxs(de,{className:"mt-6",children:[e.jsx(Ce,{children:e.jsx(ke,{children:"This Month"})}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Events"}),e.jsx("span",{className:"font-medium",children:c.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("span",{className:"font-medium text-green-600",children:c.filter(G=>G.status==="Done").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("span",{className:"font-medium text-orange-600",children:c.filter(G=>G.status==="Planned").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Renewals"}),e.jsx("span",{className:"font-medium text-red-600",children:c.filter(G=>G.type==="Renewal").length})]})]})})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add CRM Activity"}),e.jsx(F,{variant:"ghost",onClick:()=>g(!1),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"title",children:"Title"}),e.jsx(se,{id:"title",value:P.title,onChange:G=>Y({...P,title:G.target.value}),placeholder:"Activity title"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"type",children:"Type"}),e.jsxs(Le,{value:P.type,onValueChange:G=>Y({...P,type:G}),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsx(Ie,{children:th.map(G=>e.jsx(oe,{value:G.value,children:G.label},G.value))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"company",children:"Company"}),e.jsx(se,{id:"company",value:P.company,onChange:G=>Y({...P,company:G.target.value}),placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"contact",children:"Contact"}),e.jsx(se,{id:"contact",value:P.contact,onChange:G=>Y({...P,contact:G.target.value}),placeholder:"Contact person"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"scheduleTask",children:"Schedule Task"}),e.jsx(se,{id:"scheduleTask",type:"datetime-local",step:"900",value:P.scheduleTask,onChange:G=>Y({...P,scheduleTask:G.target.value})})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"notes",children:"Notes"}),e.jsx(Vt,{id:"notes",value:P.notes,onChange:G=>Y({...P,notes:G.target.value}),placeholder:"Additional notes...",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(F,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(F,{onClick:()=>{if(!P.title.trim()||!P.scheduleTask){alert("Please fill in all required fields (Title, Schedule Task)");return}const G=new Date(P.scheduleTask),fe=new Date(G.getTime()+3600*1e3),Me={id:`activity-${Date.now()}`,title:P.title,type:P.type,company:P.company,contact:P.contact,startAt:G.toISOString(),endAt:fe.toISOString(),scheduleTask:P.scheduleTask,assignedUser:P.assignedUser,status:"Planned",notes:P.notes};fetch("/api/crm-events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Me)}).then(_e=>_e.json()).then(async()=>{const _e=await l();o(_e)}).catch(_e=>console.error("Error creating event:",_e)),g(!1),Y({title:"",type:"Call",company:"",contact:"",scheduleTask:"",assignedUser:"",notes:""})},children:"Create Activity"})]})]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Event Details"}),e.jsx(F,{variant:"ghost",onClick:()=>q(null),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:C.title}),e.jsx(He,{className:N(C.type).color,children:C.type})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Company:"})," ",C.company]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Contact:"})," ",C.contact]}),C.startAt&&C.startAt!=="Invalid Date"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",Ne(C.startAt)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Time:"})," ",L(C.startAt)," - ",L(C.endAt)]})]}),C.assignedUser&&e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned to:"})," ",C.assignedUser]}),C.assignedUsers&&C.assignedUsers.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Assigned to:"})," ",C.assignedUsers.join(", ")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",C.status]}),C.location&&e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",C.location]})]}),C.notes&&e.jsxs("div",{children:[e.jsx("strong",{children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.notes})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-3 mt-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(F,{variant:"outline",onClick:()=>M(C),className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsx("span",{children:"Schedule Meeting"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsxs(F,{variant:"destructive",size:"sm",onClick:()=>T(!0),className:"flex items-center space-x-1",children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>q(null),children:"Close"}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>H(C),className:"flex items-center space-x-1",children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit"})]}),C.status==="Planned"&&e.jsxs(F,{size:"sm",className:"flex items-center space-x-1",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Mark Done"})]})]})]})]})})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Book Customer Meeting"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>x(!1),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-title",children:"Meeting Title"}),e.jsx(se,{id:"meeting-title",value:B.title,onChange:G=>le(fe=>({...fe,title:G.target.value})),placeholder:"e.g., Site visit with Acme Corp"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-company",children:"Company"}),e.jsx(se,{id:"meeting-company",value:B.company,onChange:G=>le(fe=>({...fe,company:G.target.value})),placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-contact",children:"Contact Person"}),e.jsx(se,{id:"meeting-contact",value:B.contact,onChange:G=>le(fe=>({...fe,contact:G.target.value})),placeholder:"Contact name"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-date",children:"Date"}),e.jsx(se,{id:"meeting-date",type:"date",value:B.date,onChange:G=>le(fe=>({...fe,date:G.target.value}))})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-time",children:"Time"}),e.jsx(se,{id:"meeting-time",type:"time",step:"900",value:B.time,onChange:G=>le(fe=>({...fe,time:G.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-user",children:"Assigned User"}),e.jsxs(Le,{value:B.assignedUser,onValueChange:G=>le(fe=>({...fe,assignedUser:G})),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select user"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"Sarah Manager",children:"Sarah Manager"}),e.jsx(oe,{value:"Mike Sales",children:"Mike Sales"}),e.jsx(oe,{value:"John Tech",children:"John Tech"}),e.jsx(oe,{value:"Lisa Admin",children:"Lisa Admin"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-location",children:"Location"}),e.jsx(se,{id:"meeting-location",value:B.location,onChange:G=>le(fe=>({...fe,location:G.target.value})),placeholder:"Meeting location or address"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"meeting-notes",children:"Notes"}),e.jsx(Vt,{id:"meeting-notes",value:B.notes,onChange:G=>le(fe=>({...fe,notes:G.target.value})),placeholder:"Meeting agenda, objectives, etc.",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(F,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(F,{onClick:v,children:"Book Meeting"})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Schedule Customer Meeting"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>b(!1),children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-title",children:"Meeting Title"}),e.jsx(se,{id:"schedule-title",value:Z.title,onChange:G=>$(fe=>({...fe,title:G.target.value})),placeholder:"e.g., Follow-up meeting with customer"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-company",children:"Company"}),e.jsx(se,{id:"schedule-company",value:Z.company,onChange:G=>$(fe=>({...fe,company:G.target.value})),placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-contact",children:"Contact Person"}),e.jsx(se,{id:"schedule-contact",value:Z.contact,onChange:G=>$(fe=>({...fe,contact:G.target.value})),placeholder:"Contact name"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-date",children:"Date"}),e.jsx(se,{id:"schedule-date",type:"date",value:Z.date,onChange:G=>$(fe=>({...fe,date:G.target.value}))})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-time",children:"Time"}),e.jsx(se,{id:"schedule-time",type:"time",step:"900",value:Z.time,onChange:G=>$(fe=>({...fe,time:G.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-users",children:"Assign Users (Multiple Selection)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["Sarah Manager","Mike Sales","John Tech","Lisa Admin"].map(G=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:Z.assignedUsers.includes(G),onChange:fe=>{fe.target.checked?$(Me=>({...Me,assignedUsers:[...Me.assignedUsers,G]})):$(Me=>({...Me,assignedUsers:Me.assignedUsers.filter(_e=>_e!==G)}))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:G})]},G))})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-location",children:"Location"}),e.jsxs(Le,{value:Z.location,onValueChange:G=>$(fe=>({...fe,location:G})),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select location"})}),e.jsx(Ie,{children:pe(Z.company).map((G,fe)=>e.jsx(oe,{value:G,children:G},fe))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"schedule-notes",children:"Meeting Notes"}),e.jsx(Vt,{id:"schedule-notes",value:Z.notes,onChange:G=>$(fe=>({...fe,notes:G.target.value})),placeholder:"Meeting agenda, objectives, preparation notes...",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(F,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(F,{onClick:U,children:"Schedule Meeting"})]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delete Event"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{T(!1),S(!0)},children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this event? This action cannot be undone."}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"font-medium",children:C==null?void 0:C.title}),e.jsx("p",{className:"text-sm text-gray-600",children:C==null?void 0:C.company}),(C==null?void 0:C.assignedUsers)&&C.assignedUsers.length>0&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Assigned to: ",C.assignedUsers.join(", ")]})]}),(C==null?void 0:C.assignedUsers)&&C.assignedUsers.length>0&&e.jsx("div",{className:"border rounded-lg p-4 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Send Cancellation Emails"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Notify assigned users about the event cancellation"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"emailOption",checked:D,onChange:()=>S(!0),className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Yes"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"emailOption",checked:!D,onChange:()=>S(!1),className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"No"})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(F,{variant:"outline",onClick:()=>{T(!1),S(!0)},children:"Cancel"}),e.jsx(F,{variant:"destructive",onClick:Q,children:"Delete Event"})]})]})]})}),R&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Edit Event"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>{k(!1),w(null)},children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"edit-title",children:"Event Title *"}),e.jsx(se,{id:"edit-title",value:E.title,onChange:G=>w(fe=>({...fe,title:G.target.value})),placeholder:"Enter event title"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"edit-company",children:"Company"}),e.jsx(se,{id:"edit-company",value:E.company||"",onChange:G=>w(fe=>({...fe,company:G.target.value})),placeholder:"Company name"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"edit-contact",children:"Contact"}),e.jsx(se,{id:"edit-contact",value:E.contact||"",onChange:G=>w(fe=>({...fe,contact:G.target.value})),placeholder:"Contact person"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"edit-date",children:"Date *"}),e.jsx(se,{id:"edit-date",type:"date",value:E.date,onChange:G=>w(fe=>({...fe,date:G.target.value}))})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"edit-time",children:"Time *"}),e.jsx(se,{id:"edit-time",type:"time",step:"900",value:E.time,onChange:G=>w(fe=>({...fe,time:G.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Assign Users"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:ye().map(G=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.assignedUsers.includes(G),onChange:fe=>{fe.target.checked?w(Me=>({...Me,assignedUsers:[...Me.assignedUsers,G]})):w(Me=>({...Me,assignedUsers:Me.assignedUsers.filter(_e=>_e!==G)}))},className:"rounded"}),e.jsx("span",{className:"text-sm",children:G})]},G))})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"edit-location",children:"Location"}),e.jsx(se,{id:"edit-location",value:E.location||"",onChange:G=>w(fe=>({...fe,location:G.target.value})),placeholder:"Event location"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"edit-notes",children:"Notes"}),e.jsx(Vt,{id:"edit-notes",value:E.notes||"",onChange:G=>w(fe=>({...fe,notes:G.target.value})),placeholder:"Additional notes",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(F,{variant:"outline",onClick:()=>{k(!1),w(null)},children:"Cancel"}),e.jsx(F,{onClick:ie,children:"Save Changes"})]})]})]})})]})}const r6=()=>{const[a,l]=f.useState([]),[i,c]=f.useState([]),[o,u]=f.useState(""),[h,p]=f.useState("all"),[g,y]=f.useState("all"),[x,j]=f.useState(null),[b,A]=f.useState(!1),[T,D]=f.useState(!1),[S,R]=f.useState({}),[k,E]=f.useState("overview"),[w,C]=f.useState({type:Zt.COMPANY,name:"",displayName:"",primaryContact:"",email:"",phone:"",website:"",addresses:[],accounting:{taxNumber:"",paymentTerms:Js.NET_30,currency:"GBP",accountCode:"",creditLimit:0,discountRate:0},crm:{status:vt.PROSPECT,source:"",industry:"",companySize:"",assignedTo:null},contactPersons:[],tags:[],notes:""});f.useEffect(()=>{q();const v=setInterval(()=>{q()},1e4);return()=>clearInterval(v)},[]),f.useEffect(()=>{I()},[a,o,h,g]);const q=async()=>{try{const v=await fetch("/api/contacts",{credentials:"include"});if(!v.ok)throw new Error("Failed to fetch contacts");const O=await v.json(),M=await fetch("/api/contacts/statistics",{credentials:"include"}),U=M.ok?await M.json():{};l(O),R(U)}catch(v){console.error("Error loading contacts:",v)}},I=()=>{let v=a;o&&(v=v3.searchContacts(o)),h!=="all"&&(v=v.filter(O=>O.crm.status===h)),g!=="all"&&(v=v.filter(O=>O.type===g)),c(v)},W=()=>{C({type:Zt.COMPANY,name:"",displayName:"",primaryContact:"",email:"",phone:"",website:"",addresses:[],accounting:{taxNumber:"",paymentTerms:Js.NET_30,currency:"GBP",accountCode:"",creditLimit:0,discountRate:0},crm:{status:vt.PROSPECT,source:"",industry:"",companySize:"",assignedTo:null},contactPersons:[],tags:[],notes:""})},P=async()=>{try{const v=await fetch("/api/contacts",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(w)});if(!v.ok)throw new Error("Failed to create contact");const O=await v.json();await q(),A(!1),W(),j(O)}catch(v){console.error("Error creating contact:",v),alert("Failed to create contact. Please try again.")}},Y=async()=>{try{const v=await fetch(`/api/contacts/${x.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(w)});if(!v.ok)throw new Error("Failed to update contact");const O=await v.json();await q(),D(!1),j(O)}catch(v){console.error("Error updating contact:",v),alert("Failed to update contact. Please try again.")}},B=async v=>{if(window.confirm("Are you sure you want to delete this contact? This action cannot be undone."))try{if(!(await fetch(`/api/contacts/${v}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete contact");await q(),x&&x.id===v&&j(null)}catch(O){console.error("Error deleting contact:",O),alert("Failed to delete contact. Please try again.")}},le=v=>{C({type:v.type,name:v.name,displayName:v.displayName,primaryContact:v.primaryContact,email:v.email,phone:v.phone,website:v.website,addresses:v.addresses,accounting:v.accounting,crm:v.crm,contactPersons:v.contactPersons,tags:v.tags,notes:v.notes}),j(v),D(!0)},Z=()=>{const v={id:Date.now().toString(),type:Es.BILLING,line1:"",line2:"",city:"",state:"",postcode:"",country:"United Kingdom",isPrimary:w.addresses.length===0};C(O=>({...O,addresses:[...O.addresses,v]}))},$=(v,O,M)=>{const U=[...w.addresses];U[v]={...U[v],[O]:M},C(Q=>({...Q,addresses:U}))},ee=v=>{const O=w.addresses.filter((M,U)=>U!==v);C(M=>({...M,addresses:O}))},N=v=>({[vt.ACTIVE]:"bg-green-100 text-green-800 border-green-200",[vt.PROSPECT]:"bg-blue-100 text-blue-800 border-blue-200",[vt.AT_RISK]:"bg-orange-100 text-orange-800 border-orange-200",[vt.INACTIVE]:"bg-gray-100 text-gray-800 border-gray-200",[vt.ARCHIVED]:"bg-red-100 text-red-800 border-red-200"})[v]||"bg-gray-100 text-gray-800 border-gray-200",L=(v,O="GBP")=>new Intl.NumberFormat("en-GB",{style:"currency",currency:O}).format(v);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(de,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ke,{className:"text-2xl text-gray-900 flex items-center",children:[e.jsx(hs,{className:"w-8 h-8 mr-3 text-blue-600"}),"Contact Management"]}),e.jsx(Ke,{className:"text-lg mt-2",children:"Central database for all customer and contact information"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(F,{onClick:()=>A(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Contact"]})})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsx(de,{className:"border-blue-200 bg-blue-50",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Total Contacts"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:S.total||0})]}),e.jsx(hs,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(de,{className:"border-green-200 bg-green-50",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:S.active||0})]}),e.jsx(jr,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(de,{className:"border-purple-200 bg-purple-50",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Prospects"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:S.prospects||0})]}),e.jsx(dl,{className:"w-8 h-8 text-purple-600"})]})})}),e.jsx(de,{className:"border-orange-200 bg-orange-50",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:S.atRisk||0})]}),e.jsx(ja,{className:"w-8 h-8 text-orange-600"})]})})}),e.jsx(de,{className:"border-emerald-200 bg-emerald-50",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-emerald-800",children:"Companies"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-900",children:S.companies||0})]}),e.jsx(ea,{className:"w-8 h-8 text-emerald-600"})]})})}),e.jsx(de,{className:"border-gray-200 bg-gray-50",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Total Value"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:L(S.totalProfit||0)})]}),e.jsx(Hi,{className:"w-8 h-8 text-gray-600"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs(ke,{children:["Contacts (",i.length,")"]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(se,{placeholder:"Search contacts...",value:o,onChange:v=>u(v.target.value),className:"pl-10 w-full md:w-64"})]}),e.jsxs(Le,{value:h,onValueChange:p,children:[e.jsx(qe,{className:"w-full md:w-40",children:e.jsx(Ue,{placeholder:"Status"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"all",children:"All Status"}),e.jsx(oe,{value:vt.ACTIVE,children:"Active"}),e.jsx(oe,{value:vt.PROSPECT,children:"Prospect"}),e.jsx(oe,{value:vt.AT_RISK,children:"At Risk"}),e.jsx(oe,{value:vt.INACTIVE,children:"Inactive"})]})]}),e.jsxs(Le,{value:g,onValueChange:y,children:[e.jsx(qe,{className:"w-full md:w-40",children:e.jsx(Ue,{placeholder:"Type"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"all",children:"All Types"}),e.jsx(oe,{value:Zt.COMPANY,children:"Companies"}),e.jsx(oe,{value:Zt.INDIVIDUAL,children:"Individuals"})]})]})]})]})}),e.jsx(me,{children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(hs,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No contacts found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:a.length===0?"Get started by adding your first contact.":"No contacts match your current search and filter criteria."}),e.jsxs(F,{onClick:()=>A(!0),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Contact"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(v=>e.jsxs("tr",{className:`cursor-pointer transition-colors hover:bg-gray-50 ${(x==null?void 0:x.id)===v.id?"bg-blue-50":""}`,onClick:()=>j(v),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:v.type===Zt.COMPANY?e.jsx(ea,{className:"w-5 h-5 text-gray-400"}):e.jsx(Pt,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name}),v.primaryContact&&e.jsx("div",{className:"text-xs text-gray-500",children:v.primaryContact})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(He,{className:N(v.crm.status),children:v.crm.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[v.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ms,{className:"w-3 h-3 mr-1.5 text-gray-400"}),e.jsx("span",{className:"truncate max-w-[200px]",children:v.email})]}),v.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ao,{className:"w-3 h-3 mr-1.5 text-gray-400"}),e.jsx("span",{children:v.phone})]})]})}),e.jsx("td",{className:"px-4 py-3",children:v.crm.totalProfit>0?e.jsx("span",{className:"text-sm font-medium text-green-600",children:L(v.crm.totalProfit,v.accounting.currency)}):e.jsx("span",{className:"text-sm text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(F,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),le(v)},className:"h-8 w-8 p-0",children:e.jsx(fs,{className:"w-4 h-4"})}),e.jsx(F,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),B(v.id)},className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ls,{className:"w-4 h-4"})})]})})]},v.id))})]})})})]})}),e.jsx("div",{className:"lg:col-span-1",children:x?e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ke,{className:"flex items-center",children:[x.type===Zt.COMPANY?e.jsx(ea,{className:"w-5 h-5 mr-2"}):e.jsx(Pt,{className:"w-5 h-5 mr-2"}),"Contact Details"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>le(x),children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Edit"]})]})}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:x.name}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx(He,{className:N(x.crm.status),children:x.crm.status}),x.primaryContact&&e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",x.primaryContact]}),x.email&&e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",x.email]}),x.phone&&e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",x.phone]}),x.website&&e.jsxs("p",{children:[e.jsx("strong",{children:"Website:"})," ",x.website]})]})]}),x.addresses.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Addresses"}),e.jsx("div",{className:"space-y-2",children:x.addresses.map((v,O)=>e.jsxs("div",{className:"text-sm p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx(He,{variant:"outline",children:v.type}),v.isPrimary&&e.jsx(He,{className:"bg-blue-100 text-blue-800",children:"Primary"})]}),e.jsx("p",{children:v.line1}),v.line2&&e.jsx("p",{children:v.line2}),e.jsxs("p",{children:[v.city,", ",v.state," ",v.postcode]}),e.jsx("p",{children:v.country})]},O))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"CRM Information"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total Profit:"})," ",L(x.crm.totalProfit,x.accounting.currency)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Renewals:"})," ",x.crm.renewalsCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Open Opportunities:"})," ",x.crm.openOppsCount]}),x.crm.industry&&e.jsxs("p",{children:[e.jsx("strong",{children:"Industry:"})," ",x.crm.industry]}),x.crm.source&&e.jsxs("p",{children:[e.jsx("strong",{children:"Source:"})," ",x.crm.source]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Accounting"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Currency:"})," ",x.accounting.currency]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Terms:"})," ",x.accounting.paymentTerms]}),x.accounting.taxNumber&&e.jsxs("p",{children:[e.jsx("strong",{children:"Tax Number:"})," ",x.accounting.taxNumber]}),x.accounting.accountCode&&e.jsxs("p",{children:[e.jsx("strong",{children:"Account Code:"})," ",x.accounting.accountCode]})]})]}),x.notes&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 p-3 bg-gray-50 rounded-lg",children:x.notes})]})]})]}):e.jsx(de,{children:e.jsxs(me,{className:"p-12 text-center",children:[e.jsx(hs,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Contact"}),e.jsx("p",{className:"text-gray-600",children:"Choose a contact from the list to view details"})]})})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(de,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ke,{children:"Create New Contact"}),e.jsx(F,{variant:"outline",onClick:()=>{A(!1),W()},children:e.jsx(it,{className:"w-4 h-4"})})]})}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs(Ja,{defaultValue:"basic",className:"w-full",children:[e.jsxs(en,{className:"grid w-full grid-cols-4",children:[e.jsx(ct,{value:"basic",children:"Basic Info"}),e.jsx(ct,{value:"addresses",children:"Addresses"}),e.jsx(ct,{value:"accounting",children:"Accounting"}),e.jsx(ct,{value:"crm",children:"CRM & Notes"})]}),e.jsx(ot,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"type",children:"Contact Type"}),e.jsxs(Le,{value:w.type,onValueChange:v=>C(O=>({...O,type:v})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:Zt.COMPANY,children:"Company"}),e.jsx(oe,{value:Zt.INDIVIDUAL,children:"Individual"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"name",children:"Company Name *"}),e.jsx(se,{id:"name",value:w.name,onChange:v=>C(O=>({...O,name:v.target.value})),placeholder:"Enter company name",required:!0})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"primaryContact",children:"Primary Contact"}),e.jsx(se,{id:"primaryContact",value:w.primaryContact,onChange:v=>C(O=>({...O,primaryContact:v.target.value})),placeholder:"Main contact person"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"email",children:"Email"}),e.jsx(se,{id:"email",type:"email",value:w.email,onChange:v=>C(O=>({...O,email:v.target.value})),placeholder:"contact@company.com"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"phone",children:"Phone"}),e.jsx(se,{id:"phone",value:w.phone,onChange:v=>C(O=>({...O,phone:v.target.value})),placeholder:"+44 20 7123 4567"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"website",children:"Website"}),e.jsx(se,{id:"website",value:w.website,onChange:v=>C(O=>({...O,website:v.target.value})),placeholder:"https://company.com"})]})]})}),e.jsxs(ot,{value:"addresses",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"Addresses"}),e.jsxs(F,{onClick:Z,size:"sm",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Address"]})]}),w.addresses.map((v,O)=>e.jsxs(de,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(Le,{value:v.type,onValueChange:M=>$(O,"type",M),children:[e.jsx(qe,{className:"w-40",children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:Es.BILLING,children:"Billing"}),e.jsx(oe,{value:Es.SHIPPING,children:"Shipping"}),e.jsx(oe,{value:Es.SERVICE,children:"Service"}),e.jsx(oe,{value:Es.OFFICE,children:"Office"})]})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ee(O),className:"text-red-600",children:e.jsx(ls,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(J,{children:"Address Line 1"}),e.jsx(se,{value:v.line1,onChange:M=>$(O,"line1",M.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(J,{children:"Address Line 2"}),e.jsx(se,{value:v.line2,onChange:M=>$(O,"line2",M.target.value),placeholder:"Suite 100"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"City"}),e.jsx(se,{value:v.city,onChange:M=>$(O,"city",M.target.value),placeholder:"London"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"State/Region"}),e.jsx(se,{value:v.state,onChange:M=>$(O,"state",M.target.value),placeholder:"England"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Postal Code"}),e.jsx(se,{value:v.postcode,onChange:M=>$(O,"postcode",M.target.value),placeholder:"SW1A 1AA"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Country"}),e.jsx(se,{value:v.country,onChange:M=>$(O,"country",M.target.value),placeholder:"United Kingdom"})]})]})]},O))]}),e.jsx(ot,{value:"accounting",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"currency",children:"Currency"}),e.jsxs(Le,{value:w.accounting.currency,onValueChange:v=>C(O=>({...O,accounting:{...O.accounting,currency:v}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsx(Ie,{children:Object.entries(oy).map(([v,O])=>e.jsxs(oe,{value:v,children:[O.symbol," ",O.name," (",v,")"]},v))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"paymentTerms",children:"Payment Terms"}),e.jsxs(Le,{value:w.accounting.paymentTerms,onValueChange:v=>C(O=>({...O,accounting:{...O.accounting,paymentTerms:v}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsx(Ie,{children:Object.entries(Js).map(([v,O])=>e.jsx(oe,{value:O,children:O},v))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"taxNumber",children:"Tax Number/VAT ID"}),e.jsx(se,{id:"taxNumber",value:w.accounting.taxNumber,onChange:v=>C(O=>({...O,accounting:{...O.accounting,taxNumber:v.target.value}})),placeholder:"GB123456789"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"accountCode",children:"Account Code"}),e.jsx(se,{id:"accountCode",value:w.accounting.accountCode,onChange:v=>C(O=>({...O,accounting:{...O.accounting,accountCode:v.target.value}})),placeholder:"4000"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"creditLimit",children:"Credit Limit"}),e.jsx(se,{id:"creditLimit",type:"number",value:w.accounting.creditLimit,onChange:v=>C(O=>({...O,accounting:{...O.accounting,creditLimit:parseFloat(v.target.value)||0}})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"discountRate",children:"Discount Rate (%)"}),e.jsx(se,{id:"discountRate",type:"number",value:w.accounting.discountRate,onChange:v=>C(O=>({...O,accounting:{...O.accounting,discountRate:parseFloat(v.target.value)||0}})),placeholder:"0"})]})]})}),e.jsxs(ot,{value:"crm",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"status",children:"Status"}),e.jsxs(Le,{value:w.crm.status,onValueChange:v=>C(O=>({...O,crm:{...O.crm,status:v}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:vt.PROSPECT,children:"Prospect"}),e.jsx(oe,{value:vt.ACTIVE,children:"Active"}),e.jsx(oe,{value:vt.AT_RISK,children:"At Risk"}),e.jsx(oe,{value:vt.INACTIVE,children:"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"source",children:"Source"}),e.jsx(se,{id:"source",value:w.crm.source,onChange:v=>C(O=>({...O,crm:{...O.crm,source:v.target.value}})),placeholder:"Website, Referral, etc."})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"industry",children:"Industry"}),e.jsx(se,{id:"industry",value:w.crm.industry,onChange:v=>C(O=>({...O,crm:{...O.crm,industry:v.target.value}})),placeholder:"Technology, Healthcare, etc."})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"companySize",children:"Company Size"}),e.jsx(se,{id:"companySize",value:w.crm.companySize,onChange:v=>C(O=>({...O,crm:{...O.crm,companySize:v.target.value}})),placeholder:"1-10, 11-50, 51-200, etc."})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"notes",children:"Notes"}),e.jsx(Vt,{id:"notes",value:w.notes,onChange:v=>C(O=>({...O,notes:v.target.value})),placeholder:"Additional notes about this contact...",rows:4})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx(F,{variant:"outline",onClick:()=>{A(!1),W()},children:"Cancel"}),e.jsx(F,{onClick:P,disabled:!w.name,children:"Create Contact"})]})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(de,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ke,{children:"Edit Contact"}),e.jsx(F,{variant:"outline",onClick:()=>{D(!1),W()},children:e.jsx(it,{className:"w-4 h-4"})})]})}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs(Ja,{defaultValue:"basic",className:"w-full",children:[e.jsxs(en,{className:"grid w-full grid-cols-4",children:[e.jsx(ct,{value:"basic",children:"Basic Info"}),e.jsx(ct,{value:"addresses",children:"Addresses"}),e.jsx(ct,{value:"accounting",children:"Accounting"}),e.jsx(ct,{value:"crm",children:"CRM & Notes"})]}),e.jsx(ot,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"type",children:"Contact Type"}),e.jsxs(Le,{value:w.type,onValueChange:v=>C(O=>({...O,type:v})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:Zt.COMPANY,children:"Company"}),e.jsx(oe,{value:Zt.INDIVIDUAL,children:"Individual"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"name",children:"Company Name *"}),e.jsx(se,{id:"name",value:w.name,onChange:v=>C(O=>({...O,name:v.target.value})),placeholder:"Enter company name",required:!0})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"primaryContact",children:"Primary Contact"}),e.jsx(se,{id:"primaryContact",value:w.primaryContact,onChange:v=>C(O=>({...O,primaryContact:v.target.value})),placeholder:"Main contact person"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"email",children:"Email"}),e.jsx(se,{id:"email",type:"email",value:w.email,onChange:v=>C(O=>({...O,email:v.target.value})),placeholder:"contact@company.com"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"phone",children:"Phone"}),e.jsx(se,{id:"phone",value:w.phone,onChange:v=>C(O=>({...O,phone:v.target.value})),placeholder:"+44 20 7123 4567"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"website",children:"Website"}),e.jsx(se,{id:"website",value:w.website,onChange:v=>C(O=>({...O,website:v.target.value})),placeholder:"https://company.com"})]})]})}),e.jsxs(ot,{value:"addresses",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"Addresses"}),e.jsxs(F,{onClick:Z,size:"sm",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Address"]})]}),w.addresses.map((v,O)=>e.jsxs(de,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(Le,{value:v.type,onValueChange:M=>$(O,"type",M),children:[e.jsx(qe,{className:"w-40",children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:Es.BILLING,children:"Billing"}),e.jsx(oe,{value:Es.SHIPPING,children:"Shipping"}),e.jsx(oe,{value:Es.SERVICE,children:"Service"}),e.jsx(oe,{value:Es.OFFICE,children:"Office"})]})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ee(O),className:"text-red-600",children:e.jsx(ls,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(J,{children:"Address Line 1"}),e.jsx(se,{value:v.line1,onChange:M=>$(O,"line1",M.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(J,{children:"Address Line 2"}),e.jsx(se,{value:v.line2,onChange:M=>$(O,"line2",M.target.value),placeholder:"Suite 100"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"City"}),e.jsx(se,{value:v.city,onChange:M=>$(O,"city",M.target.value),placeholder:"London"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"State/Region"}),e.jsx(se,{value:v.state,onChange:M=>$(O,"state",M.target.value),placeholder:"England"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Postal Code"}),e.jsx(se,{value:v.postcode,onChange:M=>$(O,"postcode",M.target.value),placeholder:"SW1A 1AA"})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Country"}),e.jsx(se,{value:v.country,onChange:M=>$(O,"country",M.target.value),placeholder:"United Kingdom"})]})]})]},O))]}),e.jsx(ot,{value:"accounting",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"currency",children:"Currency"}),e.jsxs(Le,{value:w.accounting.currency,onValueChange:v=>C(O=>({...O,accounting:{...O.accounting,currency:v}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsx(Ie,{children:Object.entries(oy).map(([v,O])=>e.jsxs(oe,{value:v,children:[O.symbol," ",O.name," (",v,")"]},v))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"paymentTerms",children:"Payment Terms"}),e.jsxs(Le,{value:w.accounting.paymentTerms,onValueChange:v=>C(O=>({...O,accounting:{...O.accounting,paymentTerms:v}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsx(Ie,{children:Object.entries(Js).map(([v,O])=>e.jsx(oe,{value:O,children:O},v))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"taxNumber",children:"Tax Number/VAT ID"}),e.jsx(se,{id:"taxNumber",value:w.accounting.taxNumber,onChange:v=>C(O=>({...O,accounting:{...O.accounting,taxNumber:v.target.value}})),placeholder:"GB123456789"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"accountCode",children:"Account Code"}),e.jsx(se,{id:"accountCode",value:w.accounting.accountCode,onChange:v=>C(O=>({...O,accounting:{...O.accounting,accountCode:v.target.value}})),placeholder:"4000"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"creditLimit",children:"Credit Limit"}),e.jsx(se,{id:"creditLimit",type:"number",value:w.accounting.creditLimit,onChange:v=>C(O=>({...O,accounting:{...O.accounting,creditLimit:parseFloat(v.target.value)||0}})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"discountRate",children:"Discount Rate (%)"}),e.jsx(se,{id:"discountRate",type:"number",value:w.accounting.discountRate,onChange:v=>C(O=>({...O,accounting:{...O.accounting,discountRate:parseFloat(v.target.value)||0}})),placeholder:"0"})]})]})}),e.jsxs(ot,{value:"crm",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"status",children:"Status"}),e.jsxs(Le,{value:w.crm.status,onValueChange:v=>C(O=>({...O,crm:{...O.crm,status:v}})),children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:vt.PROSPECT,children:"Prospect"}),e.jsx(oe,{value:vt.ACTIVE,children:"Active"}),e.jsx(oe,{value:vt.AT_RISK,children:"At Risk"}),e.jsx(oe,{value:vt.INACTIVE,children:"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"source",children:"Source"}),e.jsx(se,{id:"source",value:w.crm.source,onChange:v=>C(O=>({...O,crm:{...O.crm,source:v.target.value}})),placeholder:"Website, Referral, etc."})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"industry",children:"Industry"}),e.jsx(se,{id:"industry",value:w.crm.industry,onChange:v=>C(O=>({...O,crm:{...O.crm,industry:v.target.value}})),placeholder:"Technology, Healthcare, etc."})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"companySize",children:"Company Size"}),e.jsx(se,{id:"companySize",value:w.crm.companySize,onChange:v=>C(O=>({...O,crm:{...O.crm,companySize:v.target.value}})),placeholder:"1-10, 11-50, 51-200, etc."})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"notes",children:"Notes"}),e.jsx(Vt,{id:"notes",value:w.notes,onChange:v=>C(O=>({...O,notes:v.target.value})),placeholder:"Additional notes about this contact...",rows:4})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[e.jsx(F,{variant:"outline",onClick:()=>{D(!1),W()},children:"Cancel"}),e.jsx(F,{onClick:Y,disabled:!w.name,children:"Update Contact"})]})]})]})})]})};function i6(){const{user:a}=Zi(),[l,i]=f.useState(!1),[c,o]=f.useState(!0),[u,h]=f.useState(!1),[p,g]=f.useState(!1),[y,x]=f.useState(null),[j,b]=f.useState(""),[A,T]=f.useState(""),[D,S]=f.useState(""),[R,k]=f.useState("");f.useEffect(()=>{E()},[]);const E=async()=>{try{o(!0);const P=await fetch("/api/auth/user/profile",{credentials:"include"});if(P.ok){const Y=await P.json();i(Y.mfa_enabled||!1)}}catch(P){console.error("Failed to load MFA status:",P)}finally{o(!1)}},w=async P=>{P?await C():confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")&&await I(!1)},C=async()=>{try{g(!0),S(""),x(null);const P=await fetch("/api/auth/mfa/start",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({user_id:a.id})}),Y=await P.json();P.ok?(T(Y.challenge_id),x("code_sent"),k("Test code sent to your email address")):(S(Y.error||"Failed to send test code"),g(!1))}catch{S("Network error. Please try again."),g(!1)}},q=async()=>{try{h(!0),S("");const P=await fetch("/api/auth/mfa/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({challenge_id:A,code:j})}),Y=await P.json();P.ok?(await I(!0),x("verified"),k("Two-factor authentication has been enabled successfully!"),g(!1)):S(Y.error||"Invalid verification code")}catch{S("Network error. Please try again.")}finally{h(!1)}},I=async P=>{try{h(!0),S("");const Y=await fetch("/api/auth/user/mfa",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({mfa_enabled:P,mfa_method:"email"})}),B=await Y.json();Y.ok?(i(P),k(P?"Two-factor authentication enabled":"Two-factor authentication disabled"),g(!1),x(null),b("")):S(B.error||"Failed to update MFA settings")}catch{S("Network error. Please try again.")}finally{h(!1)}},W=()=>{g(!1),x(null),b(""),T(""),S(""),k("")};return c?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Ka,{className:"w-6 h-6 animate-spin mr-2"}),"Loading security settings..."]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account security and authentication preferences"})]}),D&&e.jsxs(ta,{className:"border-red-200 bg-red-50",children:[e.jsx(os,{className:"h-4 w-4 text-red-600"}),e.jsx(sa,{className:"text-red-800",children:D})]}),R&&e.jsxs(ta,{className:"border-green-200 bg-green-50",children:[e.jsx(Ze,{className:"h-4 w-4 text-green-600"}),e.jsx(sa,{className:"text-green-800",children:R})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[l?e.jsx(nk,{className:"w-6 h-6 text-green-600"}):e.jsx(sk,{className:"w-6 h-6 text-yellow-600"}),e.jsxs("div",{children:[e.jsx(ke,{children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add an extra layer of security to your account"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(He,{variant:l?"default":"secondary",children:l?"Enabled":"Disabled"}),!p&&e.jsx(il,{checked:l,onCheckedChange:w,disabled:u})]})]})}),e.jsx(me,{children:p?e.jsx("div",{className:"space-y-4",children:y==="code_sent"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_v,{className:"w-5 h-5 text-blue-600"}),e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Test code sent to your email"})]}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Enter the 6-digit code we sent to ",a==null?void 0:a.email," to complete setup."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(J,{htmlFor:"testCode",children:"Verification Code"}),e.jsx(se,{id:"testCode",type:"text",maxLength:"6",value:j,onChange:P=>b(P.target.value.replace(/\D/g,"")),placeholder:"000000",className:"text-center text-2xl tracking-widest"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(F,{onClick:q,disabled:j.length!==6||u,className:"flex-1",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Ka,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify & Enable 2FA"}),e.jsx(F,{variant:"outline",onClick:W,children:"Cancel"})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ms,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email-based verification"}),e.jsx("p",{className:"text-sm text-gray-600",children:"When enabled, you'll receive a 6-digit code via email each time you log in."})]})]}),l&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Two-factor authentication is active"})]}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Your account is protected with email-based 2FA using: ",a==null?void 0:a.email]})]})]})})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_v,{className:"w-6 h-6 text-gray-600"}),e.jsxs("div",{children:[e.jsx(ke,{children:"Password"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your account password"})]})]})}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last updated: Never (or we don't track this yet)"}),e.jsx(F,{variant:"outline",className:"w-full sm:w-auto",children:"Change Password"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("p",{children:"Password requirements:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"At least 8 characters long"}),e.jsx("li",{children:"Mix of letters, numbers, and symbols recommended"})]})]})]})})]})]})}function c6(){const{user:a,organization:l}=Zi(),[i,c]=f.useState(""),[o,u]=f.useState(!1),h=(l==null?void 0:l.name)||"your-company",p=(l==null?void 0:l.id)||"",g=h.toLowerCase().replace(/[^a-z0-9]/g,""),y=p.slice(0,8).replace(/-/g,""),j=`${y?`${g}-${y}`:g}@intake.worktrackr.cloud`,b=A=>{navigator.clipboard.writeText(A),c("Copied to clipboard!"),setTimeout(()=>c(""),2e3)};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Email Intake"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Automatically create tickets and quotes from emails forwarded to WorkTrackr."})]}),i&&e.jsxs(ta,{children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx(sa,{children:i})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(Ih,{className:"w-5 h-5"}),"How It Works"]})}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-semibold",children:"1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Forward emails to WorkTrackr"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set up your email system to forward or BCC customer emails to your WorkTrackr forwarding address"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-semibold",children:"2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"AI analyzes the email"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Our AI reads the email content to determine if it's a support request or quote inquiry"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-semibold",children:"3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Automatically creates tickets or quotes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"WorkTrackr automatically creates a ticket or quote based on the email content"})]})]})]})})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Your Forwarding Email Address"]}),e.jsx(Ke,{children:"Forward customer emails to this address to automatically create tickets and quotes"})]}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(se,{value:j,readOnly:!0,className:"font-mono text-lg"}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>b(j),children:e.jsx(Uh,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Setup Instructions"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"For Microsoft 365:"})}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Go to Exchange Admin Center  Mail flow  Rules"}),e.jsx("li",{children:"Edit your existing support email rule"}),e.jsxs("li",{children:["Add ",e.jsx("span",{className:"font-mono bg-white px-1 rounded",children:j})," as an additional BCC recipient"]}),e.jsx("li",{children:"Save the rule"})]}),e.jsx("p",{className:"mt-3",children:e.jsx("strong",{children:"For Gmail:"})}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Go to Settings  Forwarding and POP/IMAP"}),e.jsxs("li",{children:["Add ",e.jsx("span",{className:"font-mono bg-white px-1 rounded",children:j})," as a forwarding address"]}),e.jsx("li",{children:"Create a filter to forward specific emails"})]}),e.jsx("p",{className:"mt-3",children:e.jsx("strong",{children:"For other email systems:"})}),e.jsxs("p",{className:"ml-2",children:["Set up a forwarding rule or BCC to send copies of customer emails to ",e.jsx("span",{className:"font-mono bg-white px-1 rounded",children:j})]})]})]})]})})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Test Your Setup"}),e.jsx(Ke,{children:"Send a test email to verify everything is working"})]}),e.jsxs(me,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Once you've configured your email forwarding, send a test email to your support address. It should automatically create a ticket in WorkTrackr within a few seconds."}),e.jsxs(F,{onClick:()=>window.location.href="/app/dashboard?view=tickets",variant:"outline",children:["View Tickets",e.jsx(kC,{className:"w-4 h-4 ml-2"})]})]})]})]})}function fy({className:a,...l}){return e.jsx(Hh,{"data-slot":"checkbox",className:Be("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:e.jsx(Vh,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(jr,{className:"size-3.5"})})})}const o6={low:"bg-green-100 text-green-800 border-green-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",high:"bg-orange-100 text-orange-800 border-orange-200",urgent:"bg-red-100 text-red-800 border-red-200"},d6={open:"bg-blue-100 text-blue-800 border-blue-200",in_progress:"bg-purple-100 text-purple-800 border-purple-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",closed:"bg-gray-100 text-gray-800 border-gray-200",resolved:"bg-green-100 text-green-800 border-green-200"};function u6({tickets:a,users:l,onTicketClick:i,selectedTickets:c,setSelectedTickets:o}){const{bulkUpdateTickets:u,bulkDeleteTickets:h}=Da(),[p,g]=f.useState(!1),[y,x]=f.useState(!1),j=f.useRef(new Map),b=f.useRef(new Map),A=a.length>0&&c.size===a.length;c.size>0&&c.size<a.length;const T=()=>{o(A?new Set:new Set(a.map(C=>C.id)))},D=C=>{const q=new Set(c);q.has(C)?q.delete(C):q.add(C),o(q)},S=async C=>{var q,I,W;x(!0),console.log(" Assignment attempt:",{userId:C,userIdType:typeof C,ticketIds:Array.from(c),payload:{assigneeId:C}});try{await u(Array.from(c),{assigneeId:C}),o(new Set),console.log(" Tickets assigned successfully!")}catch(P){throw console.error(" Failed to assign tickets:",P),console.error("Error details:",((q=P.response)==null?void 0:q.data)||P.message),alert(`Failed to assign tickets: ${((W=(I=P.response)==null?void 0:I.data)==null?void 0:W.error)||P.message}`),P}finally{x(!1)}},R=async(C,q)=>{var I,W;if(console.log("=".repeat(80)),console.log(" handleUpdateTicketStatus ENTRY"),console.log("  ticketId:",C),console.log("  newStatus:",q),console.log("  loading:",y),console.log("  bulkUpdateTickets type:",typeof u),console.log("  bulkUpdateTickets:",u),!u){console.error(" bulkUpdateTickets is undefined!");return}console.log(" Setting loading to true..."),x(!0);try{console.log(" About to call bulkUpdateTickets..."),console.log("  Arguments:",[C],{status:q});const P=await u([C],{status:q});console.log(" bulkUpdateTickets returned successfully"),console.log("  Result:",P)}catch(P){console.error(" Exception caught in handleUpdateTicketStatus:",P),console.error("  Error name:",P.name),console.error("  Error message:",P.message),console.error("  Error stack:",P.stack),alert(`Failed to update status: ${((W=(I=P.response)==null?void 0:I.data)==null?void 0:W.error)||P.message}`)}finally{console.log(" Setting loading to false..."),x(!1),console.log("=".repeat(80))}},k=async(C,q)=>{var I,W;x(!0);try{await u([C],{priority:q})}catch(P){console.error("Failed to update priority:",P),alert(`Failed to update priority: ${((W=(I=P.response)==null?void 0:I.data)==null?void 0:W.error)||P.message}`)}finally{x(!1)}},E=C=>{if(!C)return"";const q=new Date(C),W=Math.abs(new Date-q),P=Math.floor(W/(1e3*60*60*24));return P===0?"Today":P===1?"Yesterday":P<7?`${P} days ago`:P<30?`${Math.floor(P/7)} weeks ago`:`${Math.floor(P/30)} months ago`},w=C=>{if(!C)return"Unassigned";const q=l==null?void 0:l.find(I=>I.id===C);return q?q.name:"Unknown"};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 p-3",children:e.jsx(fy,{checked:A,onCheckedChange:T,"aria-label":"Select all tickets"})}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-gray-700",children:"Details"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-gray-700 w-32",children:"SLA"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-gray-700 w-48",children:"Assigned technician"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-gray-700 w-32",children:"Priority"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-gray-700 w-48",children:"Activity status"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-gray-700 w-32",children:"Status"}),e.jsx("th",{className:"w-12 p-3"})]})}),e.jsx("tbody",{className:"divide-y",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-gray-500",children:"No tickets found"})}):a.map(C=>e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${c.has(C.id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"p-3",children:e.jsx(fy,{checked:c.has(C.id),onCheckedChange:()=>D(C.id),"aria-label":`Select ticket ${C.id}`})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"cursor-pointer",onClick:()=>{console.log("[TicketsTableView] Ticket clicked:",C.id),console.log("[TicketsTableView] onTicketClick exists?",!!i),i==null||i(C)},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["#",C.id.slice(0,8)]}),e.jsx("span",{className:"font-medium text-gray-900 hover:text-blue-600",children:C.title})]}),e.jsx("div",{className:"text-xs text-gray-500",children:C.company_name||"No company"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Created ",E(C.created_at),"  Modified ",E(C.updated_at)]})]})}),e.jsx("td",{className:"p-3",children:e.jsx(He,{variant:"outline",className:"text-xs",children:"No SLA"})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs font-medium",children:w(C.assignee_id).charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-700",children:w(C.assignee_id)})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("select",{ref:q=>{q&&j.current.set(C.id,q)},value:C.priority||"medium",onChange:q=>{k(C.id,q.target.value)},disabled:y,className:`w-full px-3 py-1.5 text-sm rounded-md border cursor-pointer ${o6[C.priority||"medium"]} ${y?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C.status==="resolved"?"bg-green-500":C.status==="pending"?"bg-yellow-500":C.status==="closed"?"bg-gray-500":"bg-blue-400"}`}),e.jsx("span",{className:"text-sm text-gray-700",children:C.activity_status||"Awaiting response"})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("select",{ref:q=>{q&&(q.value=C.status||"open",q.onchange=null,q.onchange=I=>{console.log(" DIRECT DOM onChange fired!",C.id,I.target.value),R(C.id,I.target.value)},b.current.set(C.id,q))},disabled:y,className:`w-full px-3 py-1.5 text-sm rounded-md border cursor-pointer ${d6[C.status||"open"]} ${y?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})}),e.jsx("td",{className:"p-3",children:e.jsxs(Ch,{children:[e.jsx(Sh,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(aS,{className:"w-4 h-4"})})}),e.jsxs(kh,{align:"end",children:[e.jsx(Wa,{onClick:()=>i==null?void 0:i(C),children:"View details"}),e.jsx(Wa,{onClick:()=>console.log("Edit ticket"),children:"Edit"}),e.jsx(Wa,{onClick:()=>console.log("Delete ticket"),className:"text-red-600",children:"Delete"})]})]})})]},C.id))})]})}),e.jsxs("div",{className:"p-3 bg-gray-50 border-t text-sm text-gray-600",children:["Displaying ",a.length," of ",a.length," tickets"]})]}),p&&e.jsx(gb,{users:l,ticketIds:Array.from(c),onAssign:S,onClose:()=>g(!1)})]})}const sh=[{value:"health_safety",label:"Health & Safety Compliance"},{value:"construction",label:"Construction/Maintenance Work"},{value:"field_service",label:"Field Service Operations"},{value:"regulated",label:"Regulated Industries"}],xa=a=>a<=4?{level:"Low",color:"bg-green-100 text-green-800"}:a<=9?{level:"Medium",color:"bg-yellow-100 text-yellow-800"}:a<=15?{level:"High",color:"bg-orange-100 text-orange-800"}:{level:"Critical",color:"bg-red-100 text-red-800"};function m6({ticket:a,onUpdate:l}){const[i,c]=f.useState([]),[o,u]=f.useState([]),[h,p]=f.useState(!1),[g,y]=f.useState(!1),[x,j]=f.useState(""),[b,A]=f.useState(""),[T,D]=f.useState(null),[S,R]=f.useState({});f.useEffect(()=>{if(a!=null&&a.method_statement)try{const U=typeof a.method_statement=="string"?JSON.parse(a.method_statement):a.method_statement;c(Array.isArray(U)?U:U.documents||[])}catch{c([])}if(a!=null&&a.risk_assessment)try{const U=typeof a.risk_assessment=="string"?JSON.parse(a.risk_assessment):a.risk_assessment;u(Array.isArray(U)?U:U.documents||[])}catch{u([])}},[a]);const k=U=>{A(U),j(""),D(null),R({}),p(!0)},E=()=>{x&&(p(!1),y(!0),w())},w=()=>{const U={id:(T==null?void 0:T.id)||`doc_${Date.now()}`,sector:x,type:b,created_at:(T==null?void 0:T.created_at)||new Date().toISOString(),updated_at:new Date().toISOString(),status:(T==null?void 0:T.status)||"draft"};R(T||U)},C=()=>{const U={...S,updated_at:new Date().toISOString()};if(b==="method_statement"){const Q=T?i.map(H=>H.id===T.id?U:H):[...i,U];c(Q),l({method_statement:JSON.stringify(Q)})}else{const Q=T?o.map(H=>H.id===T.id?U:H):[...o,U];u(Q),l({risk_assessment:JSON.stringify(Q)})}y(!1),R({})},q=(U,Q)=>{if(confirm("Are you sure you want to delete this document?"))if(Q==="method_statement"){const H=i.filter(ie=>ie.id!==U);c(H),l({method_statement:JSON.stringify(H)})}else{const H=o.filter(ie=>ie.id!==U);u(H),l({risk_assessment:JSON.stringify(H)})}},I=(U,Q)=>{D(U),A(Q),j(U.sector),R(U),y(!0)},W=()=>{var H;const U=((H=sh.find(ie=>ie.value===x))==null?void 0:H.label)||"",Q=b==="method_statement";return e.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[Q?"Method Statement":"Risk Assessment"," - ",U]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Complete all required fields. All information will be saved to the ticket."})]}),x==="health_safety"&&Q&&P(),x==="health_safety"&&!Q&&Y(),x==="construction"&&Q&&B(),x==="construction"&&!Q&&le(),x==="field_service"&&Q&&Z(),x==="field_service"&&!Q&&$(),x==="regulated"&&Q&&ee(),x==="regulated"&&!Q&&N()]})},P=()=>e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Project Details",children:[e.jsx(v,{label:"Project Name *",name:"project_name"}),e.jsx(v,{label:"Location *",name:"location"}),e.jsx(v,{label:"Prepared By *",name:"prepared_by"}),e.jsx(v,{label:"Date",name:"date",type:"date"})]}),e.jsxs(L,{title:"Task Description",children:[e.jsx(v,{label:"Task Summary *",name:"task_summary",type:"textarea",placeholder:"Clear, concise summary of the job from start to finish"}),e.jsx(v,{label:"Scope of Work *",name:"scope_of_work",type:"textarea"})]}),e.jsxs(L,{title:"Hazard Identification",children:[e.jsx(v,{label:"Environmental Hazards",name:"environmental_hazards",type:"textarea",placeholder:"Slippery surfaces, poor lighting, weather conditions"}),e.jsx(v,{label:"Equipment Hazards",name:"equipment_hazards",type:"textarea",placeholder:"Unguarded machinery, damaged cables, tools"}),e.jsx(v,{label:"Substance Hazards",name:"substance_hazards",type:"textarea",placeholder:"Dust, chemicals, fumes, materials"}),e.jsx(v,{label:"People Hazards",name:"people_hazards",type:"textarea",placeholder:"Untrained workers, other trades nearby, public access"})]}),e.jsxs(L,{title:"Control Measures (Hierarchy of Control)",children:[e.jsx(v,{label:"Elimination - Remove hazard entirely",name:"elimination",type:"textarea"}),e.jsx(v,{label:"Substitution - Use safer alternative",name:"substitution",type:"textarea"}),e.jsx(v,{label:"Engineering Controls",name:"engineering_controls",type:"textarea",placeholder:"Guards, barriers, ventilation"}),e.jsx(v,{label:"Administrative Controls",name:"administrative_controls",type:"textarea",placeholder:"Training, supervision, permits"}),e.jsx(v,{label:"PPE Required *",name:"ppe_required",type:"textarea",placeholder:"Hard hat, safety glasses, gloves, high-vis, safety boots"})]}),e.jsxs(L,{title:"Work Method (Step-by-Step)",children:[e.jsx(v,{label:"Work Steps *",name:"work_steps",type:"textarea",placeholder:"Enter each step on a new line"}),e.jsx(v,{label:"Personnel Required",name:"personnel_required",type:"number"}),e.jsx(v,{label:"Supervision Requirements",name:"supervision",type:"textarea"})]}),e.jsxs(L,{title:"Emergency Procedures",children:[e.jsx(v,{label:"First Aid Arrangements *",name:"first_aid",type:"textarea"}),e.jsx(v,{label:"Emergency Contacts *",name:"emergency_contacts",type:"textarea",placeholder:"Enter each contact on a new line"}),e.jsx(v,{label:"Nearest Hospital",name:"nearest_hospital"})]}),e.jsxs(L,{title:"Training & Competence",children:[e.jsx(v,{label:"Required Qualifications",name:"qualifications",type:"textarea",placeholder:"CSCS cards, machine licenses, certifications"}),e.jsx(v,{label:"Training Completed",name:"training_completed",type:"textarea"})]}),e.jsxs(L,{title:"Sign-Off",children:[e.jsx(v,{label:"Prepared By (Name) *",name:"prepared_by_name"}),e.jsx(v,{label:"Position",name:"prepared_by_position"}),e.jsx(v,{label:"Reviewed By",name:"reviewed_by"}),e.jsx(v,{label:"Approved By",name:"approved_by"})]})]}),Y=()=>{var U,Q,H,ie;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Assessment Details",children:[e.jsx(v,{label:"Assessment Title *",name:"assessment_title"}),e.jsx(v,{label:"Assessor Name *",name:"assessor_name"}),e.jsx(v,{label:"Location *",name:"location"}),e.jsx(v,{label:"Assessment Date *",name:"assessment_date",type:"date"}),e.jsx(v,{label:"Review Date *",name:"review_date",type:"date"}),e.jsx(v,{label:"Activity Description *",name:"activity_description",type:"textarea"})]}),e.jsxs(L,{title:"Hazard Identification & Risk Assessment",children:[e.jsx(v,{label:"Identified Hazards *",name:"hazards",type:"textarea",placeholder:"List all identified hazards (one per line)"}),e.jsx(v,{label:"Who Might Be Harmed *",name:"who_harmed",type:"textarea",placeholder:"Workers, visitors, public, contractors"}),e.jsx(v,{label:"Existing Control Measures",name:"existing_controls",type:"textarea"})]}),e.jsxs(L,{title:"Risk Matrix (55)",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Likelihood (1-5) *"}),e.jsxs(Le,{value:((U=S.likelihood)==null?void 0:U.toString())||"",onValueChange:ye=>O("likelihood",parseInt(ye)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select likelihood"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Rare"}),e.jsx(oe,{value:"2",children:"2 - Unlikely"}),e.jsx(oe,{value:"3",children:"3 - Possible"}),e.jsx(oe,{value:"4",children:"4 - Likely"}),e.jsx(oe,{value:"5",children:"5 - Almost Certain"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Severity (1-5) *"}),e.jsxs(Le,{value:((Q=S.severity)==null?void 0:Q.toString())||"",onValueChange:ye=>O("severity",parseInt(ye)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select severity"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Insignificant"}),e.jsx(oe,{value:"2",children:"2 - Minor"}),e.jsx(oe,{value:"3",children:"3 - Moderate"}),e.jsx(oe,{value:"4",children:"4 - Major"}),e.jsx(oe,{value:"5",children:"5 - Catastrophic"})]})]})]})]}),S.likelihood&&S.severity&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Risk Score:"}),e.jsx("span",{className:"text-2xl font-bold",children:S.likelihood*S.severity})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Risk Level:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${xa(S.likelihood*S.severity).color}`,children:xa(S.likelihood*S.severity).level})]})]})]}),e.jsxs(L,{title:"Additional Control Measures Required",children:[e.jsx(v,{label:"Control Measures *",name:"additional_controls",type:"textarea",placeholder:"What additional controls are needed to reduce the risk?"}),e.jsx(v,{label:"Action By (Person)",name:"action_by"}),e.jsx(v,{label:"Action By (Date)",name:"action_date",type:"date"})]}),e.jsxs(L,{title:"Residual Risk (After Controls)",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Residual Likelihood (1-5)"}),e.jsxs(Le,{value:((H=S.residual_likelihood)==null?void 0:H.toString())||"",onValueChange:ye=>O("residual_likelihood",parseInt(ye)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Rare"}),e.jsx(oe,{value:"2",children:"2 - Unlikely"}),e.jsx(oe,{value:"3",children:"3 - Possible"}),e.jsx(oe,{value:"4",children:"4 - Likely"}),e.jsx(oe,{value:"5",children:"5 - Almost Certain"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Residual Severity (1-5)"}),e.jsxs(Le,{value:((ie=S.residual_severity)==null?void 0:ie.toString())||"",onValueChange:ye=>O("residual_severity",parseInt(ye)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Insignificant"}),e.jsx(oe,{value:"2",children:"2 - Minor"}),e.jsx(oe,{value:"3",children:"3 - Moderate"}),e.jsx(oe,{value:"4",children:"4 - Major"}),e.jsx(oe,{value:"5",children:"5 - Catastrophic"})]})]})]})]}),S.residual_likelihood&&S.residual_severity&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Residual Risk Score:"}),e.jsx("span",{className:"text-2xl font-bold",children:S.residual_likelihood*S.residual_severity})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Residual Risk Level:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${xa(S.residual_likelihood*S.residual_severity).color}`,children:xa(S.residual_likelihood*S.residual_severity).level})]})]})]}),e.jsxs(L,{title:"Approval",children:[e.jsx(v,{label:"Assessor Signature *",name:"assessor_signature"}),e.jsx(v,{label:"Manager Approval",name:"manager_approval"})]})]})},B=()=>e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Project Details (CDM 2015 Compliant)",children:[e.jsx(v,{label:"Project Name *",name:"project_name"}),e.jsx(v,{label:"Project Address *",name:"project_address",type:"textarea"}),e.jsx(v,{label:"Principal Contractor *",name:"principal_contractor"}),e.jsx(v,{label:"Contractor Company *",name:"contractor_company"}),e.jsx(v,{label:"CDM Coordinator/Principal Designer",name:"cdm_coordinator"}),e.jsx(v,{label:"F10 Reference Number",name:"f10_reference"})]}),e.jsxs(L,{title:"Scope of Works",children:[e.jsx(v,{label:"Description of Works *",name:"work_description",type:"textarea"}),e.jsx(v,{label:"Work Location on Site",name:"work_location",type:"textarea"}),e.jsx(v,{label:"Estimated Duration",name:"work_duration"}),e.jsx(v,{label:"Gang Size (Number of Operatives)",name:"gang_size",type:"number"})]}),e.jsxs(L,{title:"Site Conditions",children:[e.jsx(v,{label:"Site Access Arrangements",name:"site_access",type:"textarea"}),e.jsx(v,{label:"Welfare Facilities",name:"welfare_facilities",type:"textarea"}),e.jsx(v,{label:"Underground/Overhead Services",name:"services_location",type:"textarea"}),e.jsx(v,{label:"Adjacent Operations/Trades",name:"adjacent_operations",type:"textarea"})]}),e.jsxs(L,{title:"Plant, Equipment and Materials",children:[e.jsx(v,{label:"Plant Required",name:"plant_required",type:"textarea",placeholder:"Excavators, cranes, scaffolding, etc."}),e.jsx(v,{label:"Equipment and Tools",name:"equipment_list",type:"textarea"}),e.jsx(v,{label:"Materials Required",name:"materials_list",type:"textarea"}),e.jsx(v,{label:"Inspection/Certification Requirements",name:"inspection_requirements",type:"textarea",placeholder:"LOLER, PUWER, etc."})]}),e.jsxs(L,{title:"Hazards and Risks",children:[e.jsx(v,{label:"Work at Height",name:"work_at_height",type:"textarea"}),e.jsx(v,{label:"Excavations",name:"excavations",type:"textarea"}),e.jsx(v,{label:"Lifting Operations",name:"lifting_operations",type:"textarea"}),e.jsx(v,{label:"Confined Spaces",name:"confined_spaces",type:"textarea"}),e.jsx(v,{label:"Noise and Vibration",name:"noise_vibration",type:"textarea"}),e.jsx(v,{label:"Manual Handling",name:"manual_handling",type:"textarea"})]}),e.jsxs(L,{title:"Control Measures",children:[e.jsx(v,{label:"General Control Measures *",name:"general_controls",type:"textarea"}),e.jsx(v,{label:"Task-Specific Controls *",name:"specific_controls",type:"textarea"}),e.jsx(v,{label:"PPE Required *",name:"ppe_required",type:"textarea"}),e.jsx(v,{label:"Barriers and Signage",name:"barriers_signage",type:"textarea"})]}),e.jsx(L,{title:"Work Sequence",children:e.jsx(v,{label:"Sequential Work Steps *",name:"sequence_steps",type:"textarea",placeholder:"Enter each step on a new line"})}),e.jsx(L,{title:"Permits and Notifications",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(v,{label:"Permit to Work Required",name:"permit_to_work",type:"radio",options:["Yes","No"]}),e.jsx(v,{label:"Hot Works Permit",name:"hot_works_permit",type:"radio",options:["Yes","No"]}),e.jsx(v,{label:"Confined Space Permit",name:"confined_space_permit",type:"radio",options:["Yes","No"]}),e.jsx(v,{label:"Temporary Works Design",name:"temporary_works",type:"radio",options:["Yes","No"]})]})}),e.jsxs(L,{title:"Training and Competence",children:[e.jsx(v,{label:"CSCS Cards Required",name:"cscs_cards",type:"textarea"}),e.jsx(v,{label:"Plant Operator Tickets",name:"plant_tickets",type:"textarea"}),e.jsx(v,{label:"Specialist Training Required",name:"specialist_training",type:"textarea"})]}),e.jsxs(L,{title:"Emergency Arrangements",children:[e.jsx(v,{label:"First Aiders on Site",name:"first_aiders"}),e.jsx(v,{label:"Emergency Assembly Point",name:"emergency_assembly"}),e.jsx(v,{label:"Emergency Contact Numbers *",name:"emergency_contacts",type:"textarea"})]}),e.jsxs(L,{title:"Sign-Off",children:[e.jsx(v,{label:"Prepared By *",name:"prepared_by_name"}),e.jsx(v,{label:"Site Manager Approval",name:"site_manager_name"}),e.jsx(v,{label:"Principal Contractor Approval",name:"principal_contractor_approval"})]})]}),le=()=>{var U,Q;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Assessment Details",children:[e.jsx(v,{label:"Assessment Title *",name:"assessment_title"}),e.jsx(v,{label:"Project Name *",name:"project_name"}),e.jsx(v,{label:"Assessor Name *",name:"assessor_name"}),e.jsx(v,{label:"Assessment Date *",name:"assessment_date",type:"date"}),e.jsx(v,{label:"Activity Description *",name:"activity_description",type:"textarea"})]}),e.jsxs(L,{title:"Construction-Specific Hazards",children:[e.jsx(v,{label:"Work at Height Hazards",name:"height_hazards",type:"textarea",placeholder:"Falls from scaffolding, ladders, roofs"}),e.jsx(v,{label:"Excavation Hazards",name:"excavation_hazards",type:"textarea",placeholder:"Collapse, buried services, falls into excavation"}),e.jsx(v,{label:"Lifting and Handling Hazards",name:"lifting_hazards",type:"textarea",placeholder:"Crane operations, manual handling, load securing"}),e.jsx(v,{label:"Plant and Equipment Hazards",name:"plant_hazards",type:"textarea",placeholder:"Moving vehicles, unguarded machinery"}),e.jsx(v,{label:"Structural Hazards",name:"structural_hazards",type:"textarea",placeholder:"Unstable structures, demolition risks"})]}),e.jsxs(L,{title:"Risk Assessment",children:[e.jsx(v,{label:"Identified Hazards *",name:"hazards",type:"textarea"}),e.jsx(v,{label:"Who Might Be Harmed *",name:"who_harmed",type:"textarea"}),e.jsx(v,{label:"Existing Controls",name:"existing_controls",type:"textarea"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Likelihood (1-5) *"}),e.jsxs(Le,{value:((U=S.likelihood)==null?void 0:U.toString())||"",onValueChange:H=>O("likelihood",parseInt(H)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Rare"}),e.jsx(oe,{value:"2",children:"2 - Unlikely"}),e.jsx(oe,{value:"3",children:"3 - Possible"}),e.jsx(oe,{value:"4",children:"4 - Likely"}),e.jsx(oe,{value:"5",children:"5 - Almost Certain"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Severity (1-5) *"}),e.jsxs(Le,{value:((Q=S.severity)==null?void 0:Q.toString())||"",onValueChange:H=>O("severity",parseInt(H)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Insignificant"}),e.jsx(oe,{value:"2",children:"2 - Minor"}),e.jsx(oe,{value:"3",children:"3 - Moderate"}),e.jsx(oe,{value:"4",children:"4 - Major"}),e.jsx(oe,{value:"5",children:"5 - Catastrophic"})]})]})]})]}),S.likelihood&&S.severity&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Risk Score:"}),e.jsx("span",{className:"text-2xl font-bold",children:S.likelihood*S.severity})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Risk Level:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${xa(S.likelihood*S.severity).color}`,children:xa(S.likelihood*S.severity).level})]})]})]}),e.jsxs(L,{title:"Control Measures",children:[e.jsx(v,{label:"Additional Controls Required *",name:"additional_controls",type:"textarea"}),e.jsx(v,{label:"CDM-Specific Controls",name:"cdm_controls",type:"textarea",placeholder:"Pre-construction information, construction phase plan requirements"}),e.jsx(v,{label:"Action By",name:"action_by"}),e.jsx(v,{label:"Action Date",name:"action_date",type:"date"})]}),e.jsxs(L,{title:"Approval",children:[e.jsx(v,{label:"Assessor Signature *",name:"assessor_signature"}),e.jsx(v,{label:"Site Manager Approval",name:"site_manager_approval"}),e.jsx(v,{label:"Principal Contractor Approval",name:"principal_contractor_approval"})]})]})},Z=()=>e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Service Call Details",children:[e.jsx(v,{label:"Service Call Reference *",name:"service_reference"}),e.jsx(v,{label:"Customer Name *",name:"customer_name"}),e.jsx(v,{label:"Customer Address *",name:"customer_address",type:"textarea"}),e.jsx(v,{label:"Engineer Name *",name:"engineer_name"}),e.jsx(v,{label:"Service Date *",name:"service_date",type:"date"})]}),e.jsxs(L,{title:"Task Description",children:[e.jsx(v,{label:"Service Task Description *",name:"task_description",type:"textarea",placeholder:"Installation, maintenance, repair, inspection"}),e.jsx(v,{label:"Equipment/System Being Serviced",name:"equipment_serviced",type:"textarea"}),e.jsx(v,{label:"Estimated Duration",name:"estimated_duration"})]}),e.jsxs(L,{title:"Customer Site Hazards",children:[e.jsx(v,{label:"Site Access Hazards",name:"site_access_hazards",type:"textarea",placeholder:"Stairs, narrow passages, security gates"}),e.jsx(v,{label:"Customer Site Conditions",name:"site_conditions",type:"textarea",placeholder:"Occupied premises, children/pets present, restricted areas"}),e.jsx(v,{label:"Environmental Hazards",name:"environmental_hazards",type:"textarea",placeholder:"Weather, lighting, temperature"}),e.jsx(v,{label:"Lone Working Considerations",name:"lone_working",type:"textarea"})]}),e.jsxs(L,{title:"Equipment and Tools",children:[e.jsx(v,{label:"Tools Required",name:"tools_required",type:"textarea"}),e.jsx(v,{label:"Test Equipment",name:"test_equipment",type:"textarea"}),e.jsx(v,{label:"Materials/Parts",name:"materials_parts",type:"textarea"}),e.jsx(v,{label:"Vehicle/Transport",name:"vehicle_transport",type:"textarea"})]}),e.jsxs(L,{title:"Control Measures",children:[e.jsx(v,{label:"General Safety Measures *",name:"general_safety",type:"textarea"}),e.jsx(v,{label:"Customer Liaison",name:"customer_liaison",type:"textarea",placeholder:"Inform customer of work, obtain access permissions"}),e.jsx(v,{label:"PPE Required *",name:"ppe_required",type:"textarea"}),e.jsx(v,{label:"Isolation Procedures",name:"isolation_procedures",type:"textarea",placeholder:"Electrical, mechanical, fluid systems"})]}),e.jsxs(L,{title:"Work Method",children:[e.jsx(v,{label:"Work Steps *",name:"work_steps",type:"textarea",placeholder:"Step-by-step procedure"}),e.jsx(v,{label:"Quality Checks",name:"quality_checks",type:"textarea"}),e.jsx(v,{label:"Testing Requirements",name:"testing_requirements",type:"textarea"})]}),e.jsxs(L,{title:"Emergency Procedures",children:[e.jsx(v,{label:"Emergency Contact (Base)",name:"emergency_contact_base"}),e.jsx(v,{label:"Customer Emergency Contact",name:"customer_emergency_contact"}),e.jsx(v,{label:"Nearest Hospital",name:"nearest_hospital"}),e.jsx(v,{label:"Incident Reporting Procedure",name:"incident_reporting",type:"textarea"})]}),e.jsxs(L,{title:"Communication",children:[e.jsx(v,{label:"Check-in Procedures",name:"checkin_procedures",type:"textarea",placeholder:"Lone worker check-ins, completion notification"}),e.jsx(v,{label:"Customer Sign-Off Requirements",name:"customer_signoff",type:"textarea"})]}),e.jsxs(L,{title:"Sign-Off",children:[e.jsx(v,{label:"Engineer Name *",name:"engineer_signature"}),e.jsx(v,{label:"Supervisor Approval",name:"supervisor_approval"})]})]}),$=()=>{var U,Q;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Assessment Details",children:[e.jsx(v,{label:"Assessment Title *",name:"assessment_title"}),e.jsx(v,{label:"Service Type *",name:"service_type",placeholder:"Installation, Maintenance, Repair, Inspection"}),e.jsx(v,{label:"Assessor Name *",name:"assessor_name"}),e.jsx(v,{label:"Assessment Date *",name:"assessment_date",type:"date"})]}),e.jsxs(L,{title:"Field Service Hazards",children:[e.jsx(v,{label:"Driving Hazards",name:"driving_hazards",type:"textarea",placeholder:"Road accidents, fatigue, weather conditions"}),e.jsx(v,{label:"Lone Working Hazards",name:"lone_working_hazards",type:"textarea",placeholder:"Medical emergency, violence, communication failure"}),e.jsx(v,{label:"Customer Site Hazards",name:"customer_site_hazards",type:"textarea",placeholder:"Unfamiliar premises, dogs, aggressive customers"}),e.jsx(v,{label:"Equipment Hazards",name:"equipment_hazards",type:"textarea",placeholder:"Electrical, mechanical, chemical"}),e.jsx(v,{label:"Manual Handling",name:"manual_handling",type:"textarea",placeholder:"Heavy equipment, awkward access"})]}),e.jsxs(L,{title:"Risk Assessment",children:[e.jsx(v,{label:"Identified Hazards *",name:"hazards",type:"textarea"}),e.jsx(v,{label:"Who Might Be Harmed *",name:"who_harmed",type:"textarea",placeholder:"Engineer, customer, public"}),e.jsx(v,{label:"Existing Controls",name:"existing_controls",type:"textarea"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Likelihood (1-5) *"}),e.jsxs(Le,{value:((U=S.likelihood)==null?void 0:U.toString())||"",onValueChange:H=>O("likelihood",parseInt(H)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Rare"}),e.jsx(oe,{value:"2",children:"2 - Unlikely"}),e.jsx(oe,{value:"3",children:"3 - Possible"}),e.jsx(oe,{value:"4",children:"4 - Likely"}),e.jsx(oe,{value:"5",children:"5 - Almost Certain"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Severity (1-5) *"}),e.jsxs(Le,{value:((Q=S.severity)==null?void 0:Q.toString())||"",onValueChange:H=>O("severity",parseInt(H)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Insignificant"}),e.jsx(oe,{value:"2",children:"2 - Minor"}),e.jsx(oe,{value:"3",children:"3 - Moderate"}),e.jsx(oe,{value:"4",children:"4 - Major"}),e.jsx(oe,{value:"5",children:"5 - Catastrophic"})]})]})]})]}),S.likelihood&&S.severity&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Risk Score:"}),e.jsx("span",{className:"text-2xl font-bold",children:S.likelihood*S.severity})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Risk Level:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${xa(S.likelihood*S.severity).color}`,children:xa(S.likelihood*S.severity).level})]})]})]}),e.jsxs(L,{title:"Control Measures",children:[e.jsx(v,{label:"Additional Controls Required *",name:"additional_controls",type:"textarea"}),e.jsx(v,{label:"Lone Worker Procedures",name:"lone_worker_procedures",type:"textarea",placeholder:"Check-in schedule, buddy system, panic alarm"}),e.jsx(v,{label:"Customer Communication",name:"customer_communication",type:"textarea"})]}),e.jsxs(L,{title:"Approval",children:[e.jsx(v,{label:"Assessor Signature *",name:"assessor_signature"}),e.jsx(v,{label:"Manager Approval",name:"manager_approval"})]})]})},ee=()=>e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Document Control",children:[e.jsx(v,{label:"Document Number *",name:"document_number"}),e.jsx(v,{label:"Version/Revision *",name:"version"}),e.jsx(v,{label:"Effective Date *",name:"effective_date",type:"date"}),e.jsx(v,{label:"Review Date *",name:"review_date",type:"date"})]}),e.jsxs(L,{title:"Process/Activity Description",children:[e.jsx(v,{label:"Process Name *",name:"process_name"}),e.jsx(v,{label:"Scope and Objectives *",name:"scope_objectives",type:"textarea"}),e.jsx(v,{label:"Equipment and Materials",name:"equipment_materials",type:"textarea"}),e.jsx(v,{label:"Personnel Requirements",name:"personnel_requirements",type:"textarea"})]}),e.jsxs(L,{title:"Regulatory Requirements",children:[e.jsx(v,{label:"Applicable Regulations *",name:"applicable_regulations",type:"textarea",placeholder:"FDA, EMA, GMP, HACCP, ISO standards"}),e.jsx(v,{label:"Compliance References",name:"compliance_references",type:"textarea"})]}),e.jsxs(L,{title:"Hazard Analysis",children:[e.jsx(v,{label:"Biological Hazards",name:"biological_hazards",type:"textarea"}),e.jsx(v,{label:"Chemical Hazards",name:"chemical_hazards",type:"textarea"}),e.jsx(v,{label:"Physical Hazards",name:"physical_hazards",type:"textarea"}),e.jsx(v,{label:"Cross-Contamination Risks",name:"cross_contamination",type:"textarea"}),e.jsx(v,{label:"Allergen Controls",name:"allergen_controls",type:"textarea"})]}),e.jsxs(L,{title:"Critical Control Points (HACCP)",children:[e.jsx(v,{label:"CCP Identification",name:"ccp_identification",type:"textarea",placeholder:"Points where control is essential"}),e.jsx(v,{label:"Critical Limits",name:"critical_limits",type:"textarea",placeholder:"Temperature, time, pH, etc."}),e.jsx(v,{label:"Monitoring Procedures",name:"monitoring_procedures",type:"textarea"}),e.jsx(v,{label:"Corrective Actions",name:"corrective_actions",type:"textarea"})]}),e.jsxs(L,{title:"Control Measures",children:[e.jsx(v,{label:"Process Controls *",name:"process_controls",type:"textarea"}),e.jsx(v,{label:"Environmental Controls",name:"environmental_controls",type:"textarea",placeholder:"Temperature, humidity, air quality"}),e.jsx(v,{label:"Personnel Controls",name:"personnel_controls",type:"textarea",placeholder:"Hygiene, gowning, training"}),e.jsx(v,{label:"Equipment Controls",name:"equipment_controls",type:"textarea"})]}),e.jsxs(L,{title:"Standard Operating Procedures",children:[e.jsx(v,{label:"Step-by-Step Instructions *",name:"sop_instructions",type:"textarea"}),e.jsx(v,{label:"Process Parameters",name:"process_parameters",type:"textarea",placeholder:"Critical parameters and acceptable ranges"}),e.jsx(v,{label:"Hold Times",name:"hold_times",type:"textarea"})]}),e.jsxs(L,{title:"Quality Control",children:[e.jsx(v,{label:"In-Process Checks",name:"inprocess_checks",type:"textarea"}),e.jsx(v,{label:"Testing Requirements",name:"testing_requirements",type:"textarea"}),e.jsx(v,{label:"Acceptance Criteria",name:"acceptance_criteria",type:"textarea"}),e.jsx(v,{label:"Sampling Plans",name:"sampling_plans",type:"textarea"})]}),e.jsxs(L,{title:"Training and Competence",children:[e.jsx(v,{label:"Required Qualifications *",name:"required_qualifications",type:"textarea"}),e.jsx(v,{label:"Training Completed",name:"training_completed",type:"textarea"}),e.jsx(v,{label:"Competency Assessment",name:"competency_assessment",type:"textarea"})]}),e.jsxs(L,{title:"Record Keeping",children:[e.jsx(v,{label:"Records to be Maintained *",name:"records_maintained",type:"textarea"}),e.jsx(v,{label:"Retention Period",name:"retention_period"}),e.jsx(v,{label:"Review Requirements",name:"review_requirements",type:"textarea"})]}),e.jsxs(L,{title:"Deviation and CAPA",children:[e.jsx(v,{label:"Deviation Reporting",name:"deviation_reporting",type:"textarea"}),e.jsx(v,{label:"Investigation Procedures",name:"investigation_procedures",type:"textarea"}),e.jsx(v,{label:"Corrective and Preventive Actions",name:"capa",type:"textarea"})]}),e.jsxs(L,{title:"Approval",children:[e.jsx(v,{label:"Prepared By *",name:"prepared_by"}),e.jsx(v,{label:"Quality Assurance Approval *",name:"qa_approval"}),e.jsx(v,{label:"Management Approval *",name:"management_approval"})]})]}),N=()=>{var U,Q;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Risk Assessment Header",children:[e.jsx(v,{label:"Product/Process Name *",name:"product_process"}),e.jsx(v,{label:"Assessment Date *",name:"assessment_date",type:"date"}),e.jsx(v,{label:"Assessment Team *",name:"assessment_team",type:"textarea",placeholder:"Names and roles of team members"}),e.jsx(v,{label:"Regulatory Framework *",name:"regulatory_framework",placeholder:"ICH Q9, FMEA, HACCP, etc."})]}),e.jsxs(L,{title:"Risk Identification",children:[e.jsx(v,{label:"Potential Hazards/Failure Modes *",name:"potential_hazards",type:"textarea"}),e.jsx(v,{label:"Sources of Risk",name:"sources_of_risk",type:"textarea"}),e.jsx(v,{label:"Affected Areas/Processes",name:"affected_areas",type:"textarea"})]}),e.jsxs(L,{title:"Risk Analysis Method",children:[e.jsx(J,{children:"Select Risk Analysis Method *"}),e.jsxs(Le,{value:S.risk_method||"",onValueChange:H=>O("risk_method",H),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select method"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"fmea",children:"FMEA (Failure Mode and Effects Analysis)"}),e.jsx(oe,{value:"haccp",children:"HACCP (Hazard Analysis Critical Control Point)"}),e.jsx(oe,{value:"risk_matrix",children:"Risk Matrix (55)"})]})]})]}),S.risk_method==="fmea"&&e.jsxs(L,{title:"FMEA Analysis",children:[e.jsx(v,{label:"Potential Failure Mode",name:"failure_mode",type:"textarea"}),e.jsx(v,{label:"Potential Effects of Failure",name:"effects_of_failure",type:"textarea"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Severity (1-10) *"}),e.jsx(se,{type:"number",min:"1",max:"10",value:S.fmea_severity||"",onChange:H=>O("fmea_severity",parseInt(H.target.value))})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Occurrence (1-10) *"}),e.jsx(se,{type:"number",min:"1",max:"10",value:S.fmea_occurrence||"",onChange:H=>O("fmea_occurrence",parseInt(H.target.value))})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Detection (1-10) *"}),e.jsx(se,{type:"number",min:"1",max:"10",value:S.fmea_detection||"",onChange:H=>O("fmea_detection",parseInt(H.target.value))})]})]}),S.fmea_severity&&S.fmea_occurrence&&S.fmea_detection&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"RPN (Risk Priority Number):"}),e.jsx("span",{className:"text-2xl font-bold",children:S.fmea_severity*S.fmea_occurrence*S.fmea_detection})]})}),e.jsx(v,{label:"Potential Causes",name:"potential_causes",type:"textarea"}),e.jsx(v,{label:"Current Controls",name:"current_controls",type:"textarea"})]}),S.risk_method==="haccp"&&e.jsxs(L,{title:"HACCP Analysis",children:[e.jsx(v,{label:"Hazard Significance",name:"hazard_significance",type:"textarea"}),e.jsx(v,{label:"Is this a CCP?",name:"is_ccp",type:"radio",options:["Yes","No"]}),e.jsx(v,{label:"Critical Limits",name:"critical_limits_haccp",type:"textarea"}),e.jsx(v,{label:"Monitoring Procedures",name:"monitoring_procedures_haccp",type:"textarea"}),e.jsx(v,{label:"Corrective Actions",name:"corrective_actions_haccp",type:"textarea"}),e.jsx(v,{label:"Verification Procedures",name:"verification_procedures",type:"textarea"})]}),S.risk_method==="risk_matrix"&&e.jsxs(L,{title:"Risk Matrix",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{children:"Probability (1-5) *"}),e.jsxs(Le,{value:((U=S.probability)==null?void 0:U.toString())||"",onValueChange:H=>O("probability",parseInt(H)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Rare"}),e.jsx(oe,{value:"2",children:"2 - Unlikely"}),e.jsx(oe,{value:"3",children:"3 - Possible"}),e.jsx(oe,{value:"4",children:"4 - Likely"}),e.jsx(oe,{value:"5",children:"5 - Almost Certain"})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{children:"Impact (1-5) *"}),e.jsxs(Le,{value:((Q=S.impact)==null?void 0:Q.toString())||"",onValueChange:H=>O("impact",parseInt(H)),children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"1",children:"1 - Insignificant"}),e.jsx(oe,{value:"2",children:"2 - Minor"}),e.jsx(oe,{value:"3",children:"3 - Moderate"}),e.jsx(oe,{value:"4",children:"4 - Major"}),e.jsx(oe,{value:"5",children:"5 - Critical"})]})]})]})]}),S.probability&&S.impact&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Risk Score:"}),e.jsx("span",{className:"text-2xl font-bold",children:S.probability*S.impact})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Risk Level:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${xa(S.probability*S.impact).color}`,children:xa(S.probability*S.impact).level})]})]})]}),e.jsxs(L,{title:"Risk Control Measures",children:[e.jsx(v,{label:"Elimination",name:"elimination_measures",type:"textarea"}),e.jsx(v,{label:"Reduction",name:"reduction_measures",type:"textarea"}),e.jsx(v,{label:"Transfer",name:"transfer_measures",type:"textarea"}),e.jsx(v,{label:"Acceptance",name:"acceptance_measures",type:"textarea"}),e.jsx(v,{label:"Implementation Plan *",name:"implementation_plan",type:"textarea"})]}),e.jsxs(L,{title:"Residual Risk",children:[e.jsx(v,{label:"Risk After Controls",name:"residual_risk",type:"textarea"}),e.jsx(v,{label:"Acceptability Assessment",name:"acceptability_assessment",type:"textarea"}),e.jsx(v,{label:"Further Actions Needed",name:"further_actions",type:"textarea"})]}),e.jsxs(L,{title:"Monitoring and Review",children:[e.jsx(v,{label:"KPIs for Monitoring",name:"kpis",type:"textarea"}),e.jsx(v,{label:"Review Frequency",name:"review_frequency"}),e.jsx(v,{label:"Trigger for Reassessment",name:"reassessment_trigger",type:"textarea"})]}),e.jsxs(L,{title:"Approval",children:[e.jsx(v,{label:"Quality Assurance Approval *",name:"qa_approval"}),e.jsx(v,{label:"Management Approval *",name:"management_approval"}),e.jsx(v,{label:"Regulatory Compliance Confirmation",name:"regulatory_confirmation"})]})]})},L=({title:U,children:Q})=>e.jsxs("div",{className:"border-b pb-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:U}),e.jsx("div",{className:"space-y-4",children:Q})]}),v=({label:U,name:Q,type:H="text",placeholder:ie="",options:ye=[],required:ge=!1})=>{const pe=S[Q]||"";return H==="textarea"?e.jsxs("div",{children:[e.jsx(J,{children:U}),e.jsx(Vt,{value:pe,onChange:Ne=>O(Q,Ne.target.value),placeholder:ie,rows:3,required:ge})]}):H==="radio"?e.jsxs("div",{children:[e.jsx(J,{children:U}),e.jsx("div",{className:"flex gap-4 mt-2",children:ye.map(Ne=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:Q,value:Ne,checked:pe===Ne,onChange:Fe=>O(Q,Fe.target.value)}),Ne]},Ne))})]}):e.jsxs("div",{children:[e.jsx(J,{children:U}),e.jsx(se,{type:H,value:pe,onChange:Ne=>O(Q,Ne.target.value),placeholder:ie,required:ge})]})},O=(U,Q)=>{R(H=>({...H,[U]:Q}))},M=(U,Q)=>{var ye;const H=((ye=sh.find(ge=>ge.value===U.sector))==null?void 0:ye.label)||U.sector,ie=Q==="method_statement";return e.jsx(de,{className:"mb-3",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ie?e.jsx(Ct,{className:"h-5 w-5 text-blue-600"}):e.jsx(ol,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-semibold",children:ie?"Method Statement":"Risk Assessment"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["- ",H]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:U.project_name||U.assessment_title||U.service_reference||U.process_name||"Untitled Document"}),e.jsxs("div",{className:"flex gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Created: ",new Date(U.created_at).toLocaleDateString()]}),e.jsxs("span",{children:["Updated: ",new Date(U.updated_at).toLocaleDateString()]}),e.jsx("span",{className:`px-2 py-0.5 rounded ${U.status==="approved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:U.status||"draft"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>I(U,Q),children:e.jsx(fs,{className:"h-4 w-4"})}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>q(U.id,Q),children:e.jsx(ls,{className:"h-4 w-4"})})]})]})})},U.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Method Statements"]}),e.jsx(Ke,{children:"Detailed procedures for safe work execution"})]}),e.jsxs(F,{onClick:()=>k("method_statement"),children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Add Method Statement"]})]})}),e.jsx(me,{children:i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ct,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No method statements yet"}),e.jsx("p",{className:"text-sm",children:'Click "Add Method Statement" to create one'})]}):i.map(U=>M(U,"method_statement"))})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(ol,{className:"h-5 w-5"}),"Risk Assessments"]}),e.jsx(Ke,{children:"Systematic evaluation of workplace hazards and risks"})]}),e.jsxs(F,{onClick:()=>k("risk_assessment"),children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Add Risk Assessment"]})]})}),e.jsx(me,{children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ol,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No risk assessments yet"}),e.jsx("p",{className:"text-sm",children:'Click "Add Risk Assessment" to create one'})]}):o.map(U=>M(U,"risk_assessment"))})]}),e.jsx(Fo,{open:h,onOpenChange:p,children:e.jsxs($o,{children:[e.jsxs(Ho,{children:[e.jsxs(Go,{children:["Select Sector for ",b==="method_statement"?"Method Statement":"Risk Assessment"]}),e.jsx(Yo,{children:"Choose the industry sector to load the appropriate template"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(J,{children:"Sector *"}),e.jsxs(Le,{value:x,onValueChange:j,children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Choose a sector..."})}),e.jsx(Ie,{children:sh.map(U=>e.jsx(oe,{value:U.value,children:U.label},U.value))})]})]}),e.jsxs(Vo,{children:[e.jsx(F,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsxs(F,{onClick:E,disabled:!x,children:["Create ",b==="method_statement"?"Method Statement":"Risk Assessment"]})]})]})}),e.jsx(Fo,{open:g,onOpenChange:y,children:e.jsxs($o,{className:"max-w-4xl",children:[e.jsxs(Ho,{children:[e.jsxs(Go,{children:[T?"Edit":"Create"," ",b==="method_statement"?"Method Statement":"Risk Assessment"]}),e.jsx(Yo,{children:"Fill out the form below. Fields marked with * are required."})]}),W(),e.jsxs(Vo,{children:[e.jsx(F,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(F,{onClick:C,children:"Save Document"})]})]})})]})}const h6={draft:"bg-gray-100 text-gray-800 border-gray-200",sent:"bg-blue-100 text-blue-800 border-blue-200",viewed:"bg-purple-100 text-purple-800 border-purple-200",accepted:"bg-green-100 text-green-800 border-green-200",declined:"bg-red-100 text-red-800 border-red-200",expired:"bg-orange-100 text-orange-800 border-orange-200",superseded:"bg-gray-100 text-gray-600 border-gray-200"},f6={draft:Ct,sent:Jy,viewed:dh,accepted:Ze,declined:Wy,expired:an,superseded:Ct};function x6({ticketId:a}){const[l,i]=f.useState([]),[c,o]=f.useState(!0),[u,h]=f.useState("");f.useEffect(()=>{p()},[a]);const p=async()=>{o(!0),h("");try{const x=await fetch(`/api/quotes?ticket_id=${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!x.ok)throw new Error("Failed to fetch quotes");const j=await x.json();i(j.quotes||[])}catch(x){console.error("[QuotesTab] Fetch error:",x),h(x.message)}finally{o(!1)}},g=()=>{window.location.href=`/app/crm/quotes/new?ticket_id=${a}`},y=x=>{window.location.href=`/app/crm/quotes/${x}`};return c?e.jsx(de,{children:e.jsx(me,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ka,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Loading quotes..."})]})})}):u?e.jsx(de,{children:e.jsx(me,{className:"py-12",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx(Wy,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:u}),e.jsx(F,{onClick:p,variant:"outline",className:"mt-4",children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quotes"}),e.jsx("p",{className:"text-sm text-gray-500",children:l.length===0?"No quotes yet":`${l.length} quote${l.length!==1?"s":""}`})]}),e.jsxs(F,{onClick:g,className:"gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Create Quote"]})]}),l.length===0?e.jsx(de,{children:e.jsx(me,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Hi,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No quotes created for this ticket yet"}),e.jsxs(F,{onClick:g,variant:"outline",className:"gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Create First Quote"]})]})})}):e.jsx("div",{className:"space-y-3",children:l.map(x=>{const j=f6[x.status]||Ct,b=x.valid_until&&new Date(x.valid_until)>new Date&&new Date(x.valid_until)<new Date(Date.now()+10080*60*1e3);return e.jsx(de,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>y(x.id),children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(j,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:x.quote_number}),e.jsx("div",{className:"text-sm text-gray-600",children:x.title})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsxs("span",{children:["Created ",new Date(x.created_at).toLocaleDateString()]})]}),x.valid_until&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(an,{className:"w-4 h-4"}),e.jsxs("span",{children:["Valid until ",new Date(x.valid_until).toLocaleDateString()]})]})]}),x.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:x.description})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-2",children:["",parseFloat(x.total_amount||0).toFixed(2)]}),e.jsx(He,{className:h6[x.status],children:x.status.toUpperCase()}),b&&e.jsx("div",{className:"mt-2",children:e.jsx(He,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"Expiring Soon"})}),x.version>1&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["v",x.version]})]})]})})},x.id)})})]})}const p6=["Health & Safety Compliance","Construction/Maintenance Work","Field Service Operations","Regulated Industries"],g6=["low","medium","high","urgent"],v6=["new","open","pending","awaiting_info","in_progress","awaiting_quote","quote_sent","quote_accepted","quote_declined","quote_expired","scheduled","resolved","closed","cancelled","invoiced"],y6={low:"bg-green-100 text-green-800 border-green-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",high:"bg-orange-100 text-orange-800 border-orange-200",urgent:"bg-red-100 text-red-800 border-red-200"},j6={new:"bg-blue-100 text-blue-800 border-blue-200",open:"bg-blue-100 text-blue-800 border-blue-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",awaiting_info:"bg-orange-100 text-orange-800 border-orange-200",in_progress:"bg-purple-100 text-purple-800 border-purple-200",awaiting_quote:"bg-amber-100 text-amber-800 border-amber-200",quote_sent:"bg-cyan-100 text-cyan-800 border-cyan-200",quote_accepted:"bg-green-100 text-green-800 border-green-200",quote_declined:"bg-red-100 text-red-800 border-red-200",quote_expired:"bg-orange-100 text-orange-800 border-orange-200",scheduled:"bg-indigo-100 text-indigo-800 border-indigo-200",resolved:"bg-green-100 text-green-800 border-green-200",closed:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-red-100 text-red-800 border-red-200",invoiced:"bg-emerald-100 text-emerald-800 border-emerald-200"};function b6({ticketId:a,onBack:l}){const{tickets:i,users:c,updateTicket:o}=Da(),[u,h]=f.useState(null),[p,g]=f.useState(!1),[y,x]=f.useState(""),[j,b]=f.useState("details"),[A,T]=f.useState({title:"",description:"",priority:"medium",status:"open",sector:"",assignee_id:"",scheduled_date:"",scheduled_duration_mins:"",method_statement:null,risk_assessment:null});f.useEffect(()=>{console.log("[TicketDetailView] useEffect triggered",{ticketId:a,ticketsCount:i.length});const k=i.find(E=>String(E.id)===String(a));console.log("[TicketDetailView] Found ticket:",k?k.id:"NOT FOUND"),k&&(h(k),T({title:k.title||"",description:k.description||"",priority:k.priority||"medium",status:k.status||"open",sector:k.sector||"",assignee_id:k.assignee_id||"",scheduled_date:k.scheduled_date?(""+k.scheduled_date).slice(0,10):"",scheduled_duration_mins:k.scheduled_duration_mins??"",method_statement:k.method_statement||{method_statements:[],risk_assessments:[]},risk_assessment:k.risk_assessment||{method_statements:[],risk_assessments:[]}}))},[i,a]);const D=k=>E=>{const w=E!=null&&E.target?E.target.value:E;T(C=>({...C,[k]:w}))},S=async()=>{g(!0),x("");try{let k=null;A.scheduled_date&&(A.scheduled_date.includes("T")?k=A.scheduled_date:k=new Date(A.scheduled_date+"T09:00:00").toISOString());const E={title:A.title||void 0,description:A.description||void 0,priority:A.priority||void 0,status:A.status||void 0,sector:A.sector||null,assignee_id:A.assignee_id||null,scheduled_date:k,scheduled_duration_mins:A.scheduled_duration_mins===""?null:Number(A.scheduled_duration_mins),method_statement:A.method_statement,risk_assessment:A.risk_assessment};await o(a,E),alert("Ticket updated successfully!"),l&&l()}catch(k){console.error("[TicketDetailView] save failed",k),x((k==null?void 0:k.message)||"Failed to save changes")}finally{g(!1)}};if(!u)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ka,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Loading ticket..."})]})});const R=c==null?void 0:c.find(k=>k.id===u.assignee_id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:l,className:"gap-2",children:[e.jsx(Mn,{className:"w-4 h-4"}),"Back to Tickets"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u.title}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Ticket #",u.id.slice(0,8),"  Created ",new Date(u.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:y6[u.priority||"medium"],children:(u.priority||"medium").toUpperCase()}),e.jsx(He,{className:j6[u.status||"open"],children:(u.status||"open").replace("_"," ").toUpperCase()})]})]}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:y}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Ja,{value:j,onValueChange:b,className:"w-full",children:[e.jsxs(en,{className:"grid w-full grid-cols-6 mb-6",children:[e.jsxs(ct,{value:"details",className:"gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Details"]}),e.jsxs(ct,{value:"scheduling",className:"gap-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),"Scheduling"]}),e.jsxs(ct,{value:"safety",className:"gap-2",children:[e.jsx(ol,{className:"w-4 h-4"}),"Safety"]}),e.jsxs(ct,{value:"quotes",className:"gap-2",children:[e.jsx(Hi,{className:"w-4 h-4"}),"Quotes"]}),e.jsxs(ct,{value:"comments",className:"gap-2",children:[e.jsx(Tv,{className:"w-4 h-4"}),"Comments"]}),e.jsxs(ct,{value:"attachments",className:"gap-2",children:[e.jsx(Eo,{className:"w-4 h-4"}),"Attachments"]})]}),e.jsxs(ot,{value:"details",className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Ticket Information"})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"title",children:"Title *"}),e.jsx(se,{id:"title",value:A.title,onChange:D("title"),placeholder:"Enter ticket title"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"description",children:"Description"}),e.jsx(Vt,{id:"description",value:A.description,onChange:D("description"),placeholder:"Enter ticket description",rows:8})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"priority",children:"Priority"}),e.jsxs(Le,{value:A.priority,onValueChange:D("priority"),children:[e.jsx(qe,{id:"priority",children:e.jsx(Ue,{})}),e.jsx(Ie,{children:g6.map(k=>e.jsx(oe,{value:k,children:k.charAt(0).toUpperCase()+k.slice(1)},k))})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"status",children:"Status"}),e.jsxs(Le,{value:A.status,onValueChange:D("status"),children:[e.jsx(qe,{id:"status",children:e.jsx(Ue,{})}),e.jsx(Ie,{children:v6.map(k=>e.jsx(oe,{value:k,children:k.replace("_"," ").charAt(0).toUpperCase()+k.replace("_"," ").slice(1)},k))})]})]})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"sector",children:"Sector"}),e.jsxs(Le,{value:A.sector||"none",onValueChange:k=>D("sector")(k==="none"?"":k),children:[e.jsx(qe,{id:"sector",children:e.jsx(Ue,{placeholder:"Select sector"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"none",children:"None"}),p6.map(k=>e.jsx(oe,{value:k,children:k},k))]})]})]})]})]}),((u==null?void 0:u.sender_email)||(u==null?void 0:u.contact_id))&&e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"w-5 h-5"}),"Customer Information"]})}),e.jsxs(me,{className:"space-y-3",children:[(u==null?void 0:u.sender_name)&&e.jsxs("div",{children:[e.jsx(J,{className:"text-xs text-gray-500",children:"Name"}),e.jsx("p",{className:"text-sm font-medium",children:u.sender_name})]}),(u==null?void 0:u.sender_email)&&e.jsxs("div",{children:[e.jsx(J,{className:"text-xs text-gray-500",children:"Email"}),e.jsx("p",{className:"text-sm",children:u.sender_email})]}),!(u!=null&&u.contact_id)&&(u==null?void 0:u.sender_email)&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(F,{variant:"outline",size:"sm",className:"w-full",onClick:()=>console.log("Add/Link Contact clicked"),children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Link to Contact"]})})]})]})]}),e.jsx(ot,{value:"scheduling",className:"space-y-6",children:e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5"}),"Schedule Information"]})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"scheduled_date",children:"Scheduled Date"}),e.jsx(se,{id:"scheduled_date",type:"date",value:A.scheduled_date,onChange:D("scheduled_date")})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"scheduled_duration_mins",children:"Duration (minutes)"}),e.jsx(se,{id:"scheduled_duration_mins",type:"number",value:A.scheduled_duration_mins,onChange:D("scheduled_duration_mins"),placeholder:"e.g., 60"})]})]})]})}),e.jsx(ot,{value:"safety",className:"space-y-6",children:e.jsx(m6,{ticket:u,onUpdate:k=>{T(E=>({...E,...k}))}})}),e.jsx(ot,{value:"quotes",className:"space-y-6",children:e.jsx(x6,{ticketId:a})}),e.jsx(ot,{value:"comments",className:"space-y-6",children:e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Comments & Activity"})}),e.jsx(me,{children:e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Tv,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Comments feature coming soon"})]})})]})}),e.jsx(ot,{value:"attachments",className:"space-y-6",children:e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"File Attachments"})}),e.jsx(me,{children:e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Eo,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Attachments feature coming soon"})]})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"w-5 h-5"}),"Assignment"]})}),e.jsxs(me,{children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"assignee_id",children:"Assigned To"}),e.jsxs(Le,{value:A.assignee_id||"unassigned",onValueChange:k=>D("assignee_id")(k==="unassigned"?"":k),children:[e.jsx(qe,{id:"assignee_id",children:e.jsx(Ue,{placeholder:"Unassigned"})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"unassigned",children:"Unassigned"}),c==null?void 0:c.map(k=>e.jsx(oe,{value:k.id,children:k.name},k.id))]})]})]}),R&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(Pt,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:R.name}),e.jsx("div",{className:"text-sm text-gray-500",children:R.email})]})]})})]})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Metadata"})}),e.jsxs(me,{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Ticket ID"}),e.jsx("div",{className:"font-mono text-xs",children:u.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Created"}),e.jsx("div",{children:new Date(u.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Last Updated"}),e.jsx("div",{children:new Date(u.updated_at).toLocaleString()})]})]})]}),e.jsx(de,{children:e.jsx(me,{className:"pt-6",children:e.jsx(F,{onClick:S,disabled:p||!A.title,className:"w-full gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Ka,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-4 h-4"}),"Save Changes"]})})})})]})]})]})}const N6=f.forwardRef((a,l)=>{const{user:i,membership:c,logout:o}=gl(),{tickets:u,users:h,emailLogs:p,bulkUpdateTickets:g,bulkDeleteTickets:y}=Da(),[x,j]=f.useState("all"),[b,A]=f.useState(""),[T,D]=f.useState("all"),[S,R]=f.useState("all"),[k,E]=f.useState(null),[w,C]=f.useState(null),[q,I]=f.useState(!1),[W,P]=f.useState(!1),[Y,B]=f.useState(!1),[le,Z]=f.useState(!1),[$,ee]=f.useState(!1),[N,L]=f.useState(!1),[v,O]=f.useState(!1),[M,U]=f.useState(!1),[Q,H]=f.useState(()=>localStorage.getItem("worktrackr-timezone")||"Europe/London"),[ie,ye]=f.useState("tickets"),[ge,pe]=f.useState(()=>localStorage.getItem("worktrackr-ticket-view-mode")||"table"),[Ne,Fe]=f.useState(new Date),[De,Ge]=f.useState(new Set),[We,xt]=f.useState(!1),[G,fe]=f.useState(!1);if(f.useImperativeHandle(l,()=>({setCurrentView:we=>{ye(we)}})),i===void 0||c===void 0)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})});f.useEffect(()=>{const we=setInterval(()=>{Fe(new Date)},3e4);return()=>clearInterval(we)},[]),f.useEffect(()=>{if(k){const we=u.find(St=>St.id===k.id);we&&JSON.stringify(we)!==JSON.stringify(k)&&E(we)}},[u,k]);const Me=we=>{H(we),localStorage.setItem("worktrackr-timezone",we),Fe(new Date)},_e=()=>[{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Europe/Berlin",label:"Berlin (CET/CEST)"},{value:"America/New_York",label:"New York (EST/EDT)"},{value:"America/Chicago",label:"Chicago (CST/CDT)"},{value:"America/Denver",label:"Denver (MST/MDT)"},{value:"America/Los_Angeles",label:"Los Angeles (PST/PDT)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Asia/Shanghai",label:"Shanghai (CST)"},{value:"Asia/Dubai",label:"Dubai (GST)"},{value:"Australia/Sydney",label:"Sydney (AEST/AEDT)"},{value:"Pacific/Auckland",label:"Auckland (NZST/NZDT)"}],rt=async()=>{if(confirm(`Delete ${De.size} ticket(s)? This action cannot be undone.`)){fe(!0);try{await y(Array.from(De)),Ge(new Set),alert("Tickets deleted successfully!")}catch(we){console.error("Failed to delete tickets:",we),alert("Failed to delete tickets. Please try again.")}finally{fe(!1)}}},at=()=>{xt(!0)},Gt=async we=>{var St,Mt;fe(!0);try{await g(Array.from(De),{assigneeId:we}),Ge(new Set),xt(!1)}catch(Ys){console.error("Failed to assign tickets:",Ys),alert(`Failed to assign tickets: ${((Mt=(St=Ys.response)==null?void 0:St.data)==null?void 0:Mt.error)||Ys.message}`)}finally{fe(!1)}},Ut=async we=>{fe(!0);try{await g(Array.from(De),{status:we}),Ge(new Set)}catch(St){console.error("Failed to update status:",St),alert("Failed to update status. Please try again.")}finally{fe(!1)}},Cr=async we=>{fe(!0);try{await g(Array.from(De),{priority:we}),Ge(new Set)}catch(St){console.error("Failed to update priority:",St),alert("Failed to update priority. Please try again.")}finally{fe(!1)}},Un=()=>{if(De.size<2){alert("Please select at least 2 tickets to merge");return}alert("Merge functionality coming soon!")},qn=u.filter(we=>{var St,Mt,Ys,In,X,je,ve,be;if(b){const Pe=b.toLowerCase(),ze=(St=we.title)==null?void 0:St.toLowerCase().includes(Pe),us=(Mt=we.description)==null?void 0:Mt.toLowerCase().includes(Pe),Bn=(In=(Ys=we.contactDetails)==null?void 0:Ys.contact_name)==null?void 0:In.toLowerCase().includes(Pe),Qs=(je=(X=we.contactDetails)==null?void 0:X.company_name)==null?void 0:je.toLowerCase().includes(Pe),Rt=(be=(ve=we.contactDetails)==null?void 0:ve.display_name)==null?void 0:be.toLowerCase().includes(Pe);return!(!ze&&!us&&!Bn&&!Qs&&!Rt)}return!(x==="open"&&we.status!=="open"||x==="in_progress"&&we.status!=="in_progress"||x==="pending"&&we.status!=="pending"||x==="closed"&&we.status!=="closed"||x==="resolved"&&we.status!=="resolved"||x==="all_open"&&we.status!=="open"&&we.status!=="in_progress"&&we.status!=="pending"||x==="my_tickets"&&we.assignedTo!==(i==null?void 0:i.id)||T!=="all"&&we.priority!==T||S!=="all"&&we.assignedTo!==S)}),ca={all:u.length,open:u.filter(we=>we.status==="open").length,in_progress:u.filter(we=>we.status==="in_progress").length,pending:u.filter(we=>we.status==="pending").length,closed:u.filter(we=>we.status==="closed").length,resolved:u.filter(we=>we.status==="resolved").length,all_open:u.filter(we=>we.status==="open"||we.status==="in_progress"||we.status==="pending").length,my_tickets:u.filter(we=>we.assignedTo===(i==null?void 0:i.id)).length},ps=(c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="owner";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[e.jsx(ea,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 mr-2 sm:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"text-lg sm:text-xl font-bold min-w-0",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Work",e.jsx("span",{className:"text-yellow-500",children:"Trackr"})]}),e.jsx("span",{className:"sm:hidden",children:"WT"})]}),e.jsx(He,{className:"ml-2 sm:ml-3 flex-shrink-0",variant:ps?"default":"secondary",children:ps?"Admin":"Staff"})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsxs(F,{variant:"ghost",size:"sm",className:"relative",children:[e.jsx(Ms,{className:"w-4 h-4"}),p.length>0&&e.jsx(He,{className:"absolute -top-1 -right-1 w-5 h-5 text-xs p-0 flex items-center justify-center",children:p.length})]}),e.jsx(F,{variant:"ghost",size:"sm",children:e.jsx(MC,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-sm font-medium text-gray-700 hidden sm:block max-w-[100px] truncate",children:(i==null?void 0:i.name)||"User"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(Pi,{className:"w-4 h-4"})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{className:"hidden",children:e.jsx(me,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-8 space-y-4 lg:space-y-0",children:[ps&&e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2 uppercase tracking-wide",children:"Settings"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(F,{variant:ie==="users"?"default":"outline",onClick:()=>ye("users"),className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{children:"Manage Users"})]}),e.jsxs(F,{variant:ie==="billing"?"default":"outline",onClick:()=>ye("billing"),className:"flex items-center space-x-2",children:[e.jsx(ba,{className:"w-4 h-4"}),e.jsx("span",{children:"Billing"})]}),e.jsxs(F,{variant:ie==="security"?"default":"outline",onClick:()=>ye("security"),className:"flex items-center space-x-2",children:[e.jsx(ba,{className:"w-4 h-4"}),e.jsx("span",{children:"Security"})]}),e.jsxs(F,{variant:ie==="email-intake"?"default":"outline",onClick:()=>ye("email-intake"),className:"flex items-center space-x-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{children:"Email Intake"})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"TIMEZONE"}),e.jsxs(Le,{value:Q,onValueChange:Me,children:[e.jsx(qe,{className:"w-full max-w-xs",children:e.jsx(Ue,{})}),e.jsx(Ie,{children:_e().map(we=>e.jsx(oe,{value:we.value,children:we.label},we.value))})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2 uppercase tracking-wide",children:"Tickets"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(F,{variant:ie==="tickets"?"default":"outline",onClick:()=>ye("tickets"),className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"w-4 h-4"}),e.jsx("span",{children:"Tickets"})]}),e.jsxs(F,{variant:ie==="calendar"?"default":"outline",onClick:()=>ye("calendar"),className:"flex items-center space-x-2",children:[e.jsx(an,{className:"w-4 h-4"}),e.jsx("span",{children:"Ticket Calendar"})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2 uppercase tracking-wide",children:"CRM"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(F,{variant:ie==="contacts"?"default":"outline",onClick:()=>ye("contacts"),className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{children:"Contacts"})]}),e.jsxs(F,{variant:ie==="crm"?"default":"outline",onClick:()=>ye("crm"),className:"flex items-center space-x-2",children:[e.jsx(ea,{className:"w-4 h-4"}),e.jsx("span",{children:"CRM"})]}),e.jsxs(F,{variant:ie==="crm-calendar"?"default":"outline",onClick:()=>ye("crm-calendar"),className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsx("span",{children:"CRM Calendar"})]})]})]})]})})}),ie==="tickets"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(F,{onClick:()=>P(!0),size:"sm",className:"h-9",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create Ticket"]}),ps&&e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>L(!0),className:"h-9",children:[e.jsx(Do,{className:"w-4 h-4 mr-2"}),"Customize"]}),e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(se,{placeholder:"Search tickets...",value:b,onChange:we=>A(we.target.value),className:"pl-10 h-9"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(He,{className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 cursor-pointer",onClick:()=>{j("all_open"),A(""),C(null)},children:["All Open: ",ca.all_open]}),e.jsxs(He,{className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 cursor-pointer",onClick:()=>{j("my_tickets"),A(""),C(null)},children:["My: ",ca.my_tickets]}),e.jsxs(He,{className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 cursor-pointer",onClick:()=>{j("in_progress"),A(""),C(null)},children:["In Progress: ",ca.in_progress]}),e.jsxs(He,{className:"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1 cursor-pointer",onClick:()=>{j("pending"),A(""),C(null)},children:["Pending: ",ca.pending]}),e.jsxs(He,{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 cursor-pointer",onClick:()=>{j("resolved"),A(""),C(null)},children:["Resolved: ",ca.resolved]}),e.jsxs(He,{className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 cursor-pointer",onClick:()=>{j("closed"),A(""),C(null)},children:["Closed: ",ca.closed]}),e.jsxs(He,{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 cursor-pointer",onClick:()=>{j("all"),A(""),C(null)},children:["All: ",u.length]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(F,{variant:"ghost",size:"sm",className:"h-8 text-gray-600",onClick:rt,disabled:De.size===0||G,children:[e.jsx(ls,{className:"w-4 h-4 mr-1.5"}),"Delete"]}),e.jsxs(F,{variant:"ghost",size:"sm",className:"h-8 text-gray-600",onClick:at,disabled:De.size===0||G,children:[e.jsx(t0,{className:"w-4 h-4 mr-1.5"}),"Assign ticket"]}),e.jsxs(Ch,{children:[e.jsx(Sh,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",className:"h-8 text-gray-600",disabled:De.size===0||G,children:[e.jsx(ba,{className:"w-4 h-4 mr-1.5"}),"Set status",e.jsx(Oi,{className:"w-3 h-3 ml-1"})]})}),e.jsxs(kh,{children:[e.jsx(Wa,{onClick:()=>Ut("open"),children:"Open"}),e.jsx(Wa,{onClick:()=>Ut("in_progress"),children:"In Progress"}),e.jsx(Wa,{onClick:()=>Ut("pending"),children:"Pending"}),e.jsx(Wa,{onClick:()=>Ut("resolved"),children:"Resolved"}),e.jsx(Wa,{onClick:()=>Ut("closed"),children:"Closed"})]})]}),e.jsxs(Ch,{children:[e.jsx(Sh,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",className:"h-8 text-gray-600",disabled:De.size===0||G,children:[e.jsx(mS,{className:"w-4 h-4 mr-1.5"}),"Set priority",e.jsx(Oi,{className:"w-3 h-3 ml-1"})]})}),e.jsx(kh,{children:Object.entries(h0).map(([we,St])=>e.jsx(Wa,{onClick:()=>Cr(we),children:St.label},we))})]}),e.jsxs(F,{variant:"ghost",size:"sm",className:"h-8 text-gray-600",onClick:Un,disabled:De.size<2||G,children:[e.jsx(pS,{className:"w-4 h-4 mr-1.5"}),"Merge tickets"]}),De.size>0&&e.jsxs("span",{className:"ml-auto text-sm text-gray-600",children:[De.size," selected"]})]})]}),e.jsx("div",{className:"mt-6",children:w?e.jsx(b6,{ticketId:w,onBack:()=>{C(null),j("all_open")}}):ge==="table"?e.jsx(u6,{tickets:qn,users:h,selectedTickets:De,setSelectedTickets:Ge,onTicketClick:we=>{console.log("[Dashboard] onTicketClick called with ticket:",we.id),C(we.id),console.log("[Dashboard] viewingTicketId set to:",we.id)}}):qn.length===0?e.jsxs(de,{className:"p-8 text-center",children:[e.jsx(mr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-gray-600",children:b||statusFilter!=="all"||T!=="all"?"Try adjusting your search or filter criteria":"Create your first ticket to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:qn.map(we=>e.jsx(h3,{ticket:we,users:h,currentUser:i,onClick:()=>C(we.id)},we.id))})}),We&&e.jsx(gb,{users:h,ticketIds:Array.from(De),onAssign:Gt,onClose:()=>xt(!1)})]}),ie==="users"&&ps&&e.jsx(e6,{users:h,currentUser:i}),ie==="calendar"&&e.jsx(t6,{currentUser:i,timezone:Q,onTicketClick:we=>{console.log("[Dashboard] Calendar event clicked, ticket:",we.id),C(we.id),ye("tickets")}}),ie==="billing"&&ps&&e.jsx(n6,{}),ie==="contacts"&&e.jsx(r6,{}),ie==="crm"&&e.jsx(hy,{children:e.jsx(my,{timezone:Q})}),ie==="quotes"&&e.jsx(hy,{children:e.jsx(my,{timezone:Q,defaultTab:"quotes"})}),ie==="crm-calendar"&&e.jsx(l6,{timezone:Q}),ie==="security"&&e.jsx(i6,{}),ie==="email-intake"&&e.jsx(c6,{})]})}),W&&e.jsx(w3,{onClose:()=>P(!1),users:h,currentUser:i}),k&&e.jsx(x3,{ticketId:k.id,onClose:()=>E(null)}),Y&&e.jsx(C3,{emailLogs:p,onClose:()=>B(!1)}),e.jsx(k3,{isOpen:N,onClose:()=>L(!1)}),v&&e.jsx(UserManagement,{isOpen:v,onClose:()=>O(!1)}),e.jsx(o3,{})]})});function w6(){const{user:a,membership:l}=gl(),i=f.useRef(null),[c,o]=f.useState(new Date),u=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="owner";f.useEffect(()=>{const p=setInterval(()=>{o(new Date)},1e4);return()=>clearInterval(p)},[]);const h=p=>{i.current&&i.current.setCurrentView&&i.current.setCurrentView(p)};return e.jsx(Gi,{user:a,isAdmin:u,onNavigate:h,lastUpdate:c,children:e.jsx(N6,{ref:i})})}const C6=[{id:"maintenance-request",name:"Maintenance Request Workflow",description:"Standard workflow for property maintenance requests with approval process",category:"Maintenance",icon:e.jsx(or,{className:"w-6 h-6"}),color:"bg-blue-100 text-blue-800",triggers:[{type:"ticket.created",conditions:[{field:"category",operator:"equals",value:"Maintenance"}]}],actions:[{type:"assign.team",target:"maintenance_team",description:"Auto-assign to maintenance team"},{type:"request.approval",target:"manager",threshold:"$500",description:"Request approval for costs over $500"},{type:"send.email",template:"maintenance_created",description:"Notify team of new maintenance request"}],stages:["New Request","Investigation","Authorization","Work in Progress","Completed"]},{id:"it-support",name:"IT Support Ticket Workflow",description:"Automated workflow for IT support requests with escalation",category:"IT Support",icon:e.jsx(ba,{className:"w-6 h-6"}),color:"bg-green-100 text-green-800",triggers:[{type:"ticket.created",conditions:[{field:"category",operator:"equals",value:"IT Support"}]}],actions:[{type:"assign.user",target:"it_specialist",description:"Assign to IT specialist"},{type:"set.sla",hours:4,description:"Set 4-hour response SLA"},{type:"schedule.escalation",hours:8,description:"Escalate if not resolved in 8 hours"}],stages:["New Ticket","Assigned","In Progress","Testing","Resolved"]},{id:"emergency-response",name:"Emergency Response Workflow",description:"High-priority workflow for emergency situations requiring immediate attention",category:"Emergency",icon:e.jsx(os,{className:"w-6 h-6"}),color:"bg-red-100 text-red-800",triggers:[{type:"ticket.created",conditions:[{field:"priority",operator:"equals",value:"critical"}]}],actions:[{type:"assign.user",target:"on_call_manager",description:"Assign to on-call manager"},{type:"send.sms",target:"emergency_contacts",description:"Send SMS to emergency contacts"},{type:"send.email",template:"emergency_alert",description:"Send emergency email alert"}],stages:["Emergency Reported","Response Team Notified","On-Site Response","Situation Controlled","Resolved"]},{id:"security-incident",name:"Security Incident Workflow",description:"Workflow for handling security incidents and breaches",category:"Security",icon:e.jsx(ol,{className:"w-6 h-6"}),color:"bg-purple-100 text-purple-800",triggers:[{type:"ticket.created",conditions:[{field:"category",operator:"equals",value:"Security"}]}],actions:[{type:"assign.team",target:"security_team",description:"Assign to security team"},{type:"notify.authorities",description:"Notify relevant authorities if required"},{type:"create.incident_report",description:"Generate incident report"}],stages:["Incident Reported","Investigation","Containment","Resolution","Post-Incident Review"]},{id:"vendor-coordination",name:"External Vendor Workflow",description:"Workflow for coordinating with external contractors and vendors",category:"Vendor Management",icon:e.jsx(vk,{className:"w-6 h-6"}),color:"bg-orange-100 text-orange-800",triggers:[{type:"ticket.created",conditions:[{field:"customFields.requiresVendor",operator:"equals",value:"Yes"}]}],actions:[{type:"request.quotes",target:"approved_vendors",description:"Request quotes from approved vendors"},{type:"schedule.site_visit",description:"Schedule vendor site visit"},{type:"track.vendor_progress",description:"Monitor vendor work progress"}],stages:["Vendor Required","Quotes Requested","Vendor Selected","Work Scheduled","Work Completed"]}];function S6(){const{user:a,logout:l}=Zi(),{workflows:i,setWorkflows:c}=Da(),[o,u]=f.useState("templates"),[h,p]=f.useState(null),[g,y]=f.useState({name:"",description:"",triggers:[],actions:[],stages:[]}),[x,j]=f.useState(!1),b=()=>{window.history.back()},A=k=>{const E={id:`wf-${Date.now()}`,name:k.name,description:k.description,isActive:!0,createdAt:new Date().toISOString(),triggers:k.triggers,actions:k.actions,stages:k.stages};c(w=>[...w,E]),alert(`Workflow "${k.name}" has been added to your organization!`)},T=k=>{y({name:`${k.name} (Custom)`,description:k.description,triggers:[...k.triggers],actions:[...k.actions],stages:[...k.stages]}),u("builder")},D=()=>{if(!g.name.trim()){alert("Please enter a workflow name");return}const k={id:`wf-${Date.now()}`,...g,isActive:!0,createdAt:new Date().toISOString()};c(E=>[...E,k]),y({name:"",description:"",triggers:[],actions:[],stages:[]}),alert(`Custom workflow "${k.name}" has been created!`),u("templates")},S=()=>{y(k=>({...k,triggers:[...k.triggers,{type:"ticket.created",conditions:[{field:"category",operator:"equals",value:""}]}]}))},R=()=>{y(k=>({...k,actions:[...k.actions,{type:"send.email",template:"notification",description:"Send notification email"}]}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(F,{variant:"ghost",size:"sm",onClick:b,className:"mr-4",children:[e.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsx(ea,{className:"w-8 h-8 text-blue-600 mr-3"}),e.jsxs("div",{className:"text-xl font-bold",children:["Work",e.jsx("span",{className:"text-yellow-500",children:"Trackr"}),e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-2",children:"Workflow Builder"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a.name}),e.jsx(F,{variant:"ghost",size:"sm",onClick:l,children:e.jsx(Pi,{className:"w-4 h-4"})})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Workflow Builder"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Create and customize automated workflows to streamline your ticket management process"})]}),e.jsxs(Ja,{value:o,onValueChange:u,children:[e.jsxs(en,{className:"grid w-full grid-cols-3",children:[e.jsx(ct,{value:"templates",children:"Templates"}),e.jsx(ct,{value:"builder",children:"Custom Builder"}),e.jsx(ct,{value:"active",children:"Active Workflows"})]}),e.jsxs(ot,{value:"templates",className:"mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Workflow Templates"}),e.jsx("p",{className:"text-gray-600",children:"Choose from pre-built workflow templates designed for common use cases"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:C6.map(k=>e.jsxs(de,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Ce,{children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${k.color}`,children:k.icon}),e.jsxs("div",{children:[e.jsx(ke,{className:"text-lg",children:k.name}),e.jsx(He,{variant:"outline",className:"mt-1",children:k.category})]})]})}),e.jsx(Ke,{className:"mt-3",children:k.description})]}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Triggers"}),e.jsx("div",{className:"space-y-2",children:k.triggers.map((E,w)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Mo,{className:"w-4 h-4 mr-2 text-yellow-500"}),"When ",E.type.replace("."," "),E.conditions.length>0&&e.jsxs("span",{className:"ml-1",children:["(",E.conditions[0].field," = ",E.conditions[0].value,")"]})]},w))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Actions"}),e.jsxs("div",{className:"space-y-2",children:[k.actions.slice(0,3).map((E,w)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[E.type.includes("email")?e.jsx(Ms,{className:"w-4 h-4 mr-2 text-blue-500"}):E.type.includes("assign")?e.jsx(Pt,{className:"w-4 h-4 mr-2 text-green-500"}):e.jsx(ba,{className:"w-4 h-4 mr-2 text-purple-500"}),E.description]},w)),k.actions.length>3&&e.jsxs("div",{className:"text-sm text-gray-500",children:["+",k.actions.length-3," more actions"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Workflow Stages"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.stages.map((E,w)=>e.jsx(He,{variant:"secondary",className:"text-xs",children:E},w))})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[e.jsxs(F,{onClick:()=>A(k),className:"flex-1",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Use Template"]}),e.jsxs(F,{variant:"outline",onClick:()=>T(k),className:"flex-1",children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Customize"]})]})]})})]},k.id))})]}),e.jsxs(ot,{value:"builder",className:"mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Custom Workflow Builder"}),e.jsx("p",{className:"text-gray-600",children:"Build your own custom workflow from scratch or modify a template"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Basic Information"})}),e.jsxs(me,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(J,{htmlFor:"workflow-name",children:"Workflow Name"}),e.jsx(se,{id:"workflow-name",value:g.name,onChange:k=>y(E=>({...E,name:k.target.value})),placeholder:"Enter workflow name"})]}),e.jsxs("div",{children:[e.jsx(J,{htmlFor:"workflow-description",children:"Description"}),e.jsx(Vt,{id:"workflow-description",value:g.description,onChange:k=>y(E=>({...E,description:k.target.value})),placeholder:"Describe what this workflow does",rows:3})]})]})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ke,{children:"Triggers"}),e.jsxs(F,{size:"sm",onClick:S,children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Trigger"]})]}),e.jsx(Ke,{children:"Define when this workflow should be activated"})]}),e.jsx(me,{children:g.triggers.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No triggers defined. Add a trigger to get started."}):e.jsx("div",{className:"space-y-4",children:g.triggers.map((k,E)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Mo,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{className:"font-medium",children:["Trigger ",E+1]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(Le,{value:k.type,children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"ticket.created",children:"Ticket Created"}),e.jsx(oe,{value:"ticket.updated",children:"Ticket Updated"}),e.jsx(oe,{value:"ticket.assigned",children:"Ticket Assigned"})]})]}),e.jsx(se,{placeholder:"Field"}),e.jsx(se,{placeholder:"Value"})]})]},E))})})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ke,{children:"Actions"}),e.jsxs(F,{size:"sm",onClick:R,children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Action"]})]}),e.jsx(Ke,{children:"Define what happens when the workflow is triggered"})]}),e.jsx(me,{children:g.actions.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No actions defined. Add an action to specify what should happen."}):e.jsx("div",{className:"space-y-4",children:g.actions.map((k,E)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ba,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"font-medium",children:["Action ",E+1]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Le,{value:k.type,children:[e.jsx(qe,{children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"send.email",children:"Send Email"}),e.jsx(oe,{value:"assign.user",children:"Assign to User"}),e.jsx(oe,{value:"assign.team",children:"Assign to Team"}),e.jsx(oe,{value:"request.approval",children:"Request Approval"}),e.jsx(oe,{value:"set.status",children:"Set Status"})]})]}),e.jsx(se,{placeholder:"Description",value:k.description,onChange:w=>{const C=[...g.actions];C[E].description=w.target.value,y(q=>({...q,actions:C}))}})]})]},E))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Workflow Preview"})}),e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-600",children:g.name||"Untitled Workflow"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Triggers"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[g.triggers.length," trigger(s) defined"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Actions"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[g.actions.length," action(s) defined"]})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(F,{onClick:D,className:"w-full",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Save Workflow"]}),e.jsxs(F,{variant:"outline",className:"w-full",children:[e.jsx(Vi,{className:"w-4 h-4 mr-2"}),"Test Workflow"]})]}),e.jsxs(ta,{children:[e.jsx(os,{className:"h-4 w-4"}),e.jsx(sa,{children:"Workflows will automatically process tickets based on your defined triggers and actions."})]})]})]})]}),e.jsxs(ot,{value:"active",className:"mt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Active Workflows"}),e.jsx("p",{className:"text-gray-600",children:"Manage your currently active workflows"})]}),e.jsxs("div",{className:"space-y-4",children:[i.map(k=>{var E,w;return e.jsx(de,{children:e.jsx(me,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Do,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-medium",children:k.name}),e.jsx(He,{variant:k.isActive?"default":"secondary",children:k.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:k.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Created: ",new Date(k.createdAt).toLocaleDateString()]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[((E=k.triggers)==null?void 0:E.length)||0," triggers"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[((w=k.actions)==null?void 0:w.length)||0," actions"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{variant:"outline",size:"sm",children:e.jsx(fs,{className:"w-4 h-4"})}),e.jsx(F,{variant:"outline",size:"sm",children:e.jsx(Uh,{className:"w-4 h-4"})}),e.jsx(F,{variant:"outline",size:"sm",children:k.isActive?e.jsx(Ky,{className:"w-4 h-4"}):e.jsx(GS,{className:"w-4 h-4"})})]})]})})},k.id)}),i.length===0&&e.jsxs(de,{className:"p-8 text-center",children:[e.jsx(Do,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No active workflows"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first workflow using templates or the custom builder"}),e.jsxs(F,{onClick:()=>u("templates"),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Browse Templates"]})]})]})]})]})]})]})}function k6({quote:a,onClose:l,onSend:i}){const[c,o]=f.useState((a==null?void 0:a.customer_email)||""),[u,h]=f.useState(""),[p,g]=f.useState(`Quote ${a==null?void 0:a.quote_number} from WorkTrackr`),[y,x]=f.useState(""),[j,b]=f.useState(!1),[A,T]=f.useState(null),D=async()=>{if(!c){T("Recipient email is required");return}b(!0),T(null);try{const S=await fetch(`/api/quotes/${a.id}/send`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({recipient_email:c,cc_emails:u||void 0,subject:p,message:y})});if(!S.ok){const k=await S.json();throw new Error(k.error||"Failed to send email")}const R=await S.json();i(R),l()}catch(S){console.error("Error sending quote:",S),T(S.message)}finally{b(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(de,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ce,{className:"flex flex-row items-center justify-between",children:[e.jsx(ke,{children:"Send Quote via Email"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:l,children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs(me,{className:"space-y-4",children:[A&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:A}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["To: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:c,onChange:S=>o(S.target.value),placeholder:"customer@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"CC: (optional)"}),e.jsx("input",{type:"text",value:u,onChange:S=>h(S.target.value),placeholder:"email1@example.com, email2@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple emails with commas"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject:"}),e.jsx("input",{type:"text",value:p,onChange:S=>g(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message: (optional)"}),e.jsx("textarea",{value:y,onChange:S=>x(S.target.value),placeholder:"Add a personal message to include in the email...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 px-4 py-3 rounded",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," The quote will be attached as a PDF file.",(a==null?void 0:a.status)==="draft"&&' The quote status will be automatically changed to "Sent".']})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(F,{variant:"outline",onClick:l,disabled:j,children:"Cancel"}),e.jsx(F,{onClick:D,disabled:j||!c,children:j?"Sending...":"Send Quote"})]})]})]})})}function _6(){const{id:a}=Wo(),l=Lt(),[i,c]=f.useState(null),[o,u]=f.useState(!0),[h,p]=f.useState(null),[g,y]=f.useState(!1),[x,j]=f.useState(!1);f.useEffect(()=>{console.log(" QuoteDetails mounted, ID from params:",a),a&&(async()=>{console.log(" Fetching quote with ID:",a),u(!0),p(null);try{const C=await fetch(`/api/quotes/${a}`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch quote");const q=await C.json();c(q)}catch(C){console.error("Error fetching quote:",C),p(C.message)}finally{u(!1)}})()},[a]);const b=w=>{switch(w){case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=w=>w?new Date(w).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",T=w=>`${parseFloat(w||0).toFixed(2)}`,D=async w=>{try{const C=await fetch(`/api/quotes/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:w})});if(!C.ok)throw new Error("Failed to update quote status");const q=await C.json();c(q),console.log(`Quote status updated to: ${w}`)}catch(C){console.error("Error updating status:",C),alert("Failed to update quote status. Please try again.")}},S=async()=>{if(!x){j(!0);return}try{if(!(await fetch(`/api/quotes/${a}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete quote");l("/app/crm/quotes")}catch(w){console.error("Error deleting quote:",w),alert("Failed to delete quote. Please try again."),j(!1)}},R=()=>{window.open(`/api/quotes/${a}/pdf`,"_blank")},k=async()=>{try{const w=await fetch(`/api/quotes/${a}`,{credentials:"include"});if(!w.ok)throw new Error("Failed to fetch quote");const C=await w.json(),q={customer_id:C.customer_id,title:`${C.title} (Copy)`,description:C.description,valid_until:C.valid_until,terms_conditions:C.terms_conditions,internal_notes:C.internal_notes,status:"draft",line_items:C.line_items.map(P=>({product_id:P.product_id,description:P.description,quantity:P.quantity,unit_price:P.unit_price,discount_percent:P.discount_percent,tax_rate:P.tax_rate}))},I=await fetch("/api/quotes",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(q)});if(!I.ok)throw new Error("Failed to create duplicate quote");const W=await I.json();l(`/app/crm/quotes/${W.id}/edit`)}catch(w){console.error("Error duplicating quote:",w),alert("Failed to duplicate quote. Please try again.")}},E=w=>{console.log("Quote sent successfully:",w),window.location.reload()};return o?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading quote details..."})})}):h||!i?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(de,{children:e.jsxs(me,{className:"pt-6",children:[e.jsx("div",{className:"text-center text-red-600",children:h||"Quote not found"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(F,{onClick:()=>l("/app/crm/quotes"),variant:"outline",children:[e.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Back to Quotes"]})})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>l("/app/crm/quotes"),children:[e.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Back to Quotes"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:i.quote_number}),e.jsx("p",{className:"text-sm text-gray-500",children:i.title})]}),e.jsx(He,{className:b(i.status),children:i.status.charAt(0).toUpperCase()+i.status.slice(1)})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>l(`/app/crm/quotes/${a}/edit`),children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[e.jsx(Jy,{className:"w-4 h-4 mr-2"}),"Send"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:R,children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),"PDF"]}),e.jsxs(F,{variant:"outline",size:"sm",className:x?"bg-red-600 text-white hover:bg-red-700":"text-red-600 hover:text-red-700",onClick:S,children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),x?"Click Again to Confirm":"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Customer Information"})}),e.jsxs(me,{className:"space-y-2",children:[e.jsx("div",{children:e.jsx("span",{className:"font-semibold text-lg",children:i.customer_name})}),i.customer_email&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Email:"})," ",i.customer_email]}),i.customer_phone&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",i.customer_phone]}),i.customer_address&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Address:"})," ",i.customer_address]})]})]}),e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Items"}),e.jsx(Ke,{children:i.description})]}),e.jsx(me,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-2 font-medium text-sm",children:"Item"}),e.jsx("th",{className:"text-left py-3 px-2 font-medium text-sm hidden sm:table-cell",children:"Description"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium text-sm",children:"Qty"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium text-sm",children:"Price"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium text-sm",children:"Total"})]})}),e.jsx("tbody",{children:i.line_items&&i.line_items.length>0?i.line_items.map((w,C)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 px-2 text-sm",children:w.product_name||w.name}),e.jsx("td",{className:"py-3 px-2 text-sm text-gray-600 hidden sm:table-cell",children:w.description}),e.jsx("td",{className:"py-3 px-2 text-sm text-right",children:w.quantity}),e.jsx("td",{className:"py-3 px-2 text-sm text-right",children:T(w.unit_price)}),e.jsx("td",{className:"py-3 px-2 text-sm text-right font-medium",children:T(w.line_total)})]},C)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-4 text-center text-gray-500 text-sm",children:"No items found"})})}),e.jsxs("tfoot",{children:[e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{colSpan:"4",className:"py-3 px-2 text-right font-medium",children:"Subtotal:"}),e.jsx("td",{className:"py-3 px-2 text-right font-medium",children:T(i.subtotal)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"4",className:"py-2 px-2 text-right text-sm text-gray-600",children:"Tax:"}),e.jsx("td",{className:"py-2 px-2 text-right text-sm",children:T(i.tax_amount)})]}),e.jsxs("tr",{className:"border-t-2",children:[e.jsx("td",{colSpan:"4",className:"py-3 px-2 text-right font-bold text-lg",children:"Total:"}),e.jsx("td",{className:"py-3 px-2 text-right font-bold text-lg",children:T(i.total_amount)})]})]})]})})})]}),i.terms_conditions&&e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Terms & Conditions"})}),e.jsx(me,{children:e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.terms_conditions})})]}),i.notes&&e.jsxs(de,{children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Internal Notes"}),e.jsx(Ke,{children:"Only visible to staff"})]}),e.jsx(me,{children:e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.notes})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Quote Details"})}),e.jsxs(me,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Quote Date"}),e.jsx("div",{className:"font-medium",children:A(i.quote_date)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Valid Until"}),e.jsx("div",{className:"font-medium",children:A(i.valid_until)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Created By"}),e.jsx("div",{className:"font-medium",children:i.created_by_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Last Modified"}),e.jsx("div",{className:"font-medium",children:A(i.updated_at)})]})]})]}),e.jsxs(de,{children:[e.jsx(Ce,{children:e.jsx(ke,{children:"Quick Actions"})}),e.jsxs(me,{className:"space-y-2",children:[e.jsx(F,{variant:"outline",className:"w-full justify-start",size:"sm",onClick:()=>D("sent"),disabled:i.status==="sent",children:"Mark as Sent"}),e.jsx(F,{variant:"outline",className:"w-full justify-start",size:"sm",onClick:()=>D("accepted"),disabled:i.status==="accepted",children:"Mark as Accepted"}),e.jsx(F,{variant:"outline",className:"w-full justify-start",size:"sm",onClick:()=>D("declined"),disabled:i.status==="declined",children:"Mark as Declined"}),e.jsx(F,{variant:"outline",className:"w-full justify-start",size:"sm",onClick:k,children:"Duplicate Quote"}),i.status==="accepted"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t my-2 pt-2",children:e.jsx("p",{className:"text-xs text-gray-500 mb-2 font-semibold",children:"Workflow Actions"})}),e.jsxs(F,{variant:"default",className:"w-full justify-start bg-green-600 hover:bg-green-700",size:"sm",onClick:()=>{const w=prompt("Enter assigned user ID:"),C=prompt("Enter scheduled date (YYYY-MM-DD):");w&&C&&fetch(`/api/quotes/${a}/schedule-work`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({assigned_user_id:w,scheduled_date:C})}).then(()=>{alert("Work scheduled successfully!"),window.location.reload()}).catch(q=>alert("Failed to schedule work"))},children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Schedule Work"]}),e.jsxs(F,{variant:"outline",className:"w-full justify-start",size:"sm",onClick:()=>{confirm("Create invoice from this quote?")&&fetch(`/api/quotes/${a}/create-invoice`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})}).then(()=>{alert("Invoice created successfully!"),window.location.reload()}).catch(w=>alert("Failed to create invoice"))},children:[e.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Create Invoice"]})]})]})]})]})]}),g&&e.jsx(k6,{quote:i,onClose:()=>y(!1),onSend:E})]})}function T6({isOpen:a,onClose:l,onSave:i}){if(!a)return null;const c=()=>{window.location.href="/app/crm/contacts"};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Contact"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"To create a new contact, you'll be redirected to the Contacts page where you can add all the necessary details."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:c,className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:"Go to Contacts"})]})]})})}function _h({mode:a="create",initialData:l=null,onClearDraft:i=null}){const c=Lt(),{id:o}=Wo(),u=a==="edit"||o,[h,p]=f.useState(!1),[g,y]=f.useState(!1),[x,j]=f.useState(!1),[b,A]=f.useState([]),[T,D]=f.useState([]),[S,R]=f.useState(""),k=T.filter(M=>{var Q,H,ie;if(!S)return!0;const U=S.toLowerCase();return((Q=M.name)==null?void 0:Q.toLowerCase().includes(U))||((H=M.description)==null?void 0:H.toLowerCase().includes(U))||((ie=M.sku)==null?void 0:ie.toLowerCase().includes(U))}),[E,w]=f.useState(""),[C,q]=f.useState(""),[I,W]=f.useState({contact_id:"",title:"",description:"",valid_until:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],status:"draft",terms_conditions:`Payment due within 30 days of invoice date.
All prices are in GBP ().
Goods remain the property of the company until paid in full.`,notes:"",internal_notes:""}),[P,Y]=f.useState([{product_id:null,description:"",quantity:1,unit_price:0,discount_percent:0,tax_rate:20}]);f.useEffect(()=>{const M=async()=>{try{const Q=await fetch("/api/contacts",{credentials:"include"});if(Q.ok){const ie=(await Q.json()||[]).map(ye=>({id:ye.id,name:ye.name,email:ye.email,phone:ye.phone}));A(ie)}}catch(Q){console.error("Error fetching contacts:",Q)}},U=async()=>{try{const Q=await fetch("/api/products?is_active=true&limit=1000",{credentials:"include"});if(Q.ok){const H=await Q.json();D(H.products||[])}}catch(Q){console.error("Error fetching products:",Q)}};M(),U()},[]),f.useEffect(()=>{l&&!u&&(W(M=>({...M,title:l.title||"",description:l.description||"",terms_conditions:l.terms_conditions||M.terms_conditions,notes:l.notes||""})),l.line_items&&l.line_items.length>0&&Y(l.line_items.map(M=>({product_id:null,description:M.description||"",quantity:M.quantity||1,unit_price:M.unit_price||0,discount_percent:0,tax_rate:M.tax_rate||20,item_type:M.item_type||"parts",hours:M.hours||null,hourly_rate:M.hourly_rate||null,recurrence:M.recurrence||null}))))},[l,u]),f.useEffect(()=>{console.log("=== useEffect triggered ===","isEditMode:",u,"quoteId:",o),u&&o?(async()=>{p(!0);try{const U=await fetch(`/api/quotes/${o}`,{credentials:"include"});if(U.ok){const Q=await U.json(),H=Q;w(H.quote_number),q(H.contact_name),W({contact_id:H.contact_id,title:H.title||"",description:H.description||"",valid_until:H.valid_until?H.valid_until.split("T")[0]:"",status:H.status,terms_conditions:H.terms_conditions||"",notes:H.notes||"",internal_notes:H.internal_notes||""}),Q.line_items&&Q.line_items.length>0&&Y(Q.line_items.map(ie=>({id:ie.id,description:ie.description||"",quantity:ie.quantity,unit_price:ie.unit_price,discount_percent:ie.discount_percent||0,tax_rate:ie.tax_rate||20})))}else alert("Failed to load quote"),c("/app/crm")}catch(U){console.error("Error fetching quote:",U),alert("Failed to load quote"),c("/app/crm")}finally{p(!1)}})():(console.log("=== CREATE MODE: Setting loading to false ==="),p(!1),setTimeout(()=>{console.log("=== CREATE MODE: Loading state after setLoading ===",h)},100))},[u,o,c]);const B=()=>{Y([...P,{product_id:null,description:"",quantity:1,unit_price:0,discount_percent:0,tax_rate:20}])},le=M=>{P.length>1&&Y(P.filter((U,Q)=>Q!==M))},Z=(M,U,Q)=>{const H=[...P],ie=["quantity","unit_price","discount_percent","tax_rate"];H[M]={...H[M],[U]:ie.includes(U)?parseFloat(Q)||0:Q},Y(H)},$=(M,U)=>{if(U==="custom"){Z(M,"product_id",null);return}const Q=T.find(H=>H.id===U);if(Q){const H=[...P];H[M]={...H[M],product_id:Q.id,description:`${Q.name}${Q.description?" - "+Q.description:""}`,quantity:Q.default_quantity||1,unit_price:Q.client_price,tax_rate:Q.tax_rate||20},Y(H)}},ee=M=>(M.quantity||0)*(M.unit_price||0),N=()=>P.reduce((M,U)=>M+ee(U),0),L=()=>P.reduce((M,U)=>{const H=(U.quantity||0)*(U.unit_price||0)*((U.tax_rate||20)/100);return M+H},0),v=()=>N()+L(),O=f.useCallback(async(M=!1)=>{if(console.log(" handleSubmit CALLED!",{sendToContact:M,formData:I,lineItems:P,loading:h,saving:g,timestamp:new Date().toISOString()}),!I.contact_id){alert("Please select a contact");return}if(!I.title){alert("Please enter a quote title");return}if(P.length===0||!P[0].description){alert("Please add at least one line item with a description");return}y(!0);try{const U=P.map(ge=>({product_id:ge.product_id||void 0,description:ge.description,quantity:parseFloat(ge.quantity)||0,unit_price:parseFloat(ge.unit_price)||0,discount_percent:parseFloat(ge.discount_percent)||0,tax_rate:parseFloat(ge.tax_rate)||20,sort_order:ge.sort_order}));console.log("Sanitized line items:",U);const Q=u?`/api/quotes/${o}`:"/api/quotes",H=u?"PUT":"POST",ie=u?{...I,line_items:U,status:M?"sent":I.status}:{contact_id:I.contact_id,title:I.title,description:I.description||void 0,valid_until:I.valid_until||void 0,terms_conditions:I.terms_conditions||void 0,notes:I.notes||void 0,internal_notes:I.internal_notes||void 0,line_items:U};console.log("API payload:",JSON.stringify(ie,null,2));const ye=await fetch(Q,{method:H,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ie)});if(ye.ok){const ge=await ye.json(),pe=u?o:ge.id;c(`/app/crm/quotes/${pe}`)}else{const ge=await ye.json().catch(()=>({message:"Unknown error"}));console.error("API Error Response:",ge),alert(`Error ${u?"updating":"creating"} quote: ${ge.message||ge.error||"Unknown error"}`)}}catch(U){console.error(`Error ${u?"updating":"creating"} quote:`,U),alert(`Failed to ${u?"update":"create"} quote. Please try again. Check console for details.`)}finally{y(!1)}},[I,P,h,g,u,o,c]);return e.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 max-w-6xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>c("/app/crm/quotes"),children:[e.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Back to Quotes"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:u?`Edit Quote ${E}`:"Create New Quote"}),u&&E&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:E})]}),e.jsx("p",{className:"text-muted-foreground",children:u?"Update quote details and line items":"Fill in the details below to create a quote for your contact"})]})]}),e.jsxs(de,{className:"mb-6",children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Quote Information"}),e.jsx(Ke,{children:"Basic quote details and contact selection"})]}),e.jsx(me,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{htmlFor:"contact",children:"Contact *"}),!u&&e.jsxs(F,{type:"button",variant:"link",size:"sm",onClick:()=>j(!0),className:"h-auto p-0 text-blue-600 hover:text-blue-700",children:[e.jsx(t0,{className:"w-4 h-4 mr-1"}),"Create New Contact"]})]}),u?e.jsx(se,{id:"contact",value:C,disabled:!0,className:"bg-gray-50",title:"Cannot change contact after quote creation"}):e.jsxs(Le,{value:I.contact_id,onValueChange:M=>W({...I,contact_id:M}),children:[e.jsx(qe,{id:"contact",children:e.jsx(Ue,{placeholder:"Select a contact"})}),e.jsx(Ie,{children:b.length===0?e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No contacts found. Create one first."}):b.map(M=>e.jsx(oe,{value:M.id,children:M.company_name||M.contact_name||M.name},M.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"title",children:"Quote Title *"}),e.jsx(se,{id:"title",placeholder:"e.g., Website Maintenance - January 2025",value:I.title,onChange:M=>W({...I,title:M.target.value})})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(J,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",className:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Brief description of the quote",value:I.description,onChange:M=>W({...I,description:M.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"valid_until",children:"Valid Until *"}),e.jsx(se,{id:"valid_until",type:"date",value:I.valid_until,onChange:M=>W({...I,valid_until:M.target.value})})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"status",children:"Status"}),e.jsxs(Le,{value:I.status,onValueChange:M=>W({...I,status:M}),children:[e.jsx(qe,{id:"status",children:e.jsx(Ue,{})}),e.jsxs(Ie,{children:[e.jsx(oe,{value:"draft",children:"Draft"}),e.jsx(oe,{value:"sent",children:"Sent"}),e.jsx(oe,{value:"accepted",children:"Accepted"}),e.jsx(oe,{value:"declined",children:"Declined"})]})]})]})]})})]}),e.jsxs(de,{className:"mb-6",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ke,{children:"Line Items"}),e.jsx(Ke,{children:"Add products or services to this quote"})]}),e.jsxs(F,{onClick:B,size:"sm",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})}),e.jsxs(me,{children:[e.jsx("div",{className:"space-y-4",children:P.map((M,U)=>e.jsx(de,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:`product_${U}`,children:"Select Product (Optional)"}),e.jsxs(Le,{value:M.product_id||"custom",onValueChange:Q=>{$(U,Q),R("")},onOpenChange:Q=>{Q||R("")},children:[e.jsx(qe,{children:e.jsx(Ue,{placeholder:"Select a product or enter custom item"})}),e.jsxs(Ie,{children:[e.jsx("div",{className:"p-2 border-b",children:e.jsx("input",{type:"text",placeholder:"Search products...",value:S,onChange:Q=>R(Q.target.value),className:"w-full px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:Q=>Q.stopPropagation()})}),e.jsx(oe,{value:"custom",children:" Custom Item (Enter Manually)"}),k.length>0?k.map(Q=>e.jsxs(oe,{value:Q.id,children:[Q.name," - ",(parseFloat(Q.client_price)||0).toFixed(2),Q.unit&&` (${Q.unit})`]},Q.id)):e.jsxs("div",{className:"px-2 py-4 text-sm text-gray-500 text-center",children:['No products found matching "',S,'"']})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(J,{htmlFor:`description_${U}`,children:["Item Description *",M.product_id&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Auto-filled, editable)"})]}),e.jsx("textarea",{id:`description_${U}`,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"e.g., Website Hosting - Annual Plan",value:M.description,onChange:Q=>Z(U,"description",Q.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:`quantity_${U}`,children:"Quantity *"}),e.jsx(se,{id:`quantity_${U}`,type:"number",min:"1",step:"1",value:M.quantity,onChange:Q=>Z(U,"quantity",Q.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:`unit_price_${U}`,children:"Unit Price () *"}),e.jsx(se,{id:`unit_price_${U}`,type:"number",min:"0",step:"0.01",value:M.unit_price,onChange:Q=>Z(U,"unit_price",Q.target.value)})]}),e.jsxs("div",{className:"space-y-2 flex flex-row sm:flex-col justify-between sm:justify-end items-center",children:[e.jsxs("div",{className:"text-sm font-medium text-right mb-2",children:["",ee(M).toFixed(2)]}),P.length>1&&e.jsx(F,{variant:"destructive",size:"sm",onClick:()=>le(U),children:e.jsx(ls,{className:"w-4 h-4"})})]})]})]})},U))}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("div",{className:"w-full sm:w-2/3 md:w-1/3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",N().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Tax (VAT):"}),e.jsxs("span",{children:["",L().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["",v().toFixed(2)]})]})]})})]})]}),e.jsxs(de,{className:"mb-6",children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Terms & Conditions"}),e.jsx(Ke,{children:"Standard terms that will appear on the quote"})]}),e.jsx(me,{children:e.jsx(Vt,{rows:4,value:I.terms_conditions,onChange:M=>W({...I,terms_conditions:M.target.value}),placeholder:"Enter terms and conditions..."})})]}),e.jsxs(de,{className:"mb-6",children:[e.jsxs(Ce,{children:[e.jsx(ke,{children:"Internal Notes"}),e.jsx(Ke,{children:"Notes for staff only (not visible to contact)"})]}),e.jsx(me,{children:e.jsx(Vt,{rows:3,value:I.internal_notes,onChange:M=>W({...I,internal_notes:M.target.value}),placeholder:"Add any internal notes..."})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-end",children:[console.log("=== RENDER: Button state ===","loading:",h,"saving:",g,"disabled:",g||h),e.jsx(F,{variant:"outline",onClick:()=>c("/app/dashboard"),disabled:h,children:"Cancel"}),u?e.jsxs(F,{onClick:()=>O(!1),disabled:g||h,children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),g?"Updating...":"Update Quote"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:M=>{console.log(" Save & Send button clicked"),M.preventDefault(),M.stopPropagation(),O(!0)},onMouseDown:()=>console.log(" Save & Send mouseDown"),disabled:g,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),g?"Saving...":"Save & Send"]}),e.jsxs("button",{type:"button",onClick:M=>{console.log(" Save as Draft button clicked"),M.preventDefault(),M.stopPropagation(),O(!1)},onMouseDown:()=>console.log(" Save as Draft mouseDown"),disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),g?"Saving...":"Save as Draft"]})]})]}),e.jsx(T6,{isOpen:x,onClose:()=>j(!1),onSave:async M=>{try{const U=await fetch("/api/contacts",{credentials:"include"});if(U.ok){const H=(await U.json()||[]).map(ie=>({id:ie.id,name:ie.name,email:ie.email,phone:ie.phone}));A(H),M&&M.id&&W({...I,contact_id:M.id})}}catch(U){console.error("Error refreshing contacts:",U)}}})]})}function E6(){const a=Lt(),[l,i]=f.useState([]),[c,o]=f.useState(!0),[u,h]=f.useState(null),[p,g]=f.useState(""),[y,x]=f.useState("all"),[j,b]=f.useState("created_at"),[A,T]=f.useState("desc");f.useEffect(()=>{(async()=>{o(!0),h(null);try{const C=await fetch("/api/quotes",{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch quotes");const q=await C.json();i(q.quotes||[])}catch(C){console.error("Error fetching quotes:",C),h(C.message)}finally{o(!1)}})()},[]);const D=w=>{switch(w){case"draft":return"bg-gray-100 text-gray-800 hover:bg-gray-200";case"sent":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"accepted":return"bg-green-100 text-green-800 hover:bg-green-200";case"declined":return"bg-red-100 text-red-800 hover:bg-red-200";case"expired":return"bg-orange-100 text-orange-800 hover:bg-orange-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},S=w=>w?new Date(w).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",R=w=>`${parseFloat(w||0).toFixed(2)}`,k=l.filter(w=>{var C,q,I;if(y!=="all"&&w.status!==y)return!1;if(p){const W=p.toLowerCase();return((C=w.quote_number)==null?void 0:C.toLowerCase().includes(W))||((q=w.title)==null?void 0:q.toLowerCase().includes(W))||((I=w.customer_name)==null?void 0:I.toLowerCase().includes(W))}return!0}).sort((w,C)=>{let q=w[j],I=C[j];return(j==="created_at"||j==="valid_until")&&(q=new Date(q||0).getTime(),I=new Date(I||0).getTime()),j==="total_amount"&&(q=parseFloat(q||0),I=parseFloat(I||0)),A==="asc"?q>I?1:-1:q<I?1:-1}),E=w=>{j===w?T(A==="asc"?"desc":"asc"):(b(w),T("desc"))};return c?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading quotes..."})})}):u?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(de,{className:"border-red-200 bg-red-50",children:e.jsxs(me,{className:"pt-6",children:[e.jsxs("p",{className:"text-red-800",children:["Error: ",u]}),e.jsx(F,{onClick:()=>window.location.reload(),className:"mt-4",variant:"outline",children:"Retry"})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quotes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track customer quotes"})]}),e.jsxs(F,{onClick:()=>a("/app/crm/quotes/new"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create New Quote"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(de,{children:e.jsxs(me,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Quotes"})]})}),e.jsx(de,{children:e.jsxs(me,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.filter(w=>w.status==="sent").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sent"})]})}),e.jsx(de,{children:e.jsxs(me,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(w=>w.status==="accepted").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Accepted"})]})}),e.jsx(de,{children:e.jsxs(me,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:R(l.reduce((w,C)=>w+parseFloat(C.total_amount||0),0))}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Value"})]})})]}),e.jsx(de,{className:"mb-6",children:e.jsx(me,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search by quote number, title, or customer...",value:p,onChange:w=>g(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fS,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:y,onChange:w=>x(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"accepted",children:"Accepted"}),e.jsx("option",{value:"declined",children:"Declined"}),e.jsx("option",{value:"expired",children:"Expired"})]})]})]})})}),e.jsx(de,{children:e.jsx(me,{className:"pt-6",children:k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ct,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l.length===0?"No quotes yet":"No quotes found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:l.length===0?"Create your first quote to get started":"Try adjusting your search or filters"}),l.length===0&&e.jsxs(F,{onClick:()=>a("/app/crm/quotes/new"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Create New Quote"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>E("quote_number"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Quote #",e.jsx(Ci,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>E("customer_name"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Customer",e.jsx(Ci,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Title"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>E("total_amount"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Total",e.jsx(Ci,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>E("valid_until"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Valid Until",e.jsx(Ci,{className:"w-4 h-4"})]})}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>E("created_at"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Created",e.jsx(Ci,{className:"w-4 h-4"})]})})]})}),e.jsx("tbody",{children:k.map(w=>e.jsxs("tr",{onClick:()=>a(`/app/crm/quotes/${w.quote_number}`),className:"border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:w.quote_number}),e.jsx("td",{className:"py-3 px-4 text-gray-900",children:w.customer_name||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.title}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(He,{className:D(w.status),children:w.status?w.status.charAt(0).toUpperCase()+w.status.slice(1):"Draft"})}),e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:R(w.total_amount)}),e.jsx("td",{className:"py-3 px-4 text-gray-700",children:S(w.valid_until)}),e.jsx("td",{className:"py-3 px-4 text-gray-600 text-sm",children:S(w.created_at)})]},w.id))})]})})})}),k.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",k.length," of ",l.length," quotes"]})]})}function A6(){const{user:a,membership:l}=gl(),i=Lt(),c=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="owner",o=u=>{const p={tickets:"/app/tickets",calendar:"/app/calendar",contacts:"/app/contacts",crm:"/app/crm","crm-calendar":"/app/crm/calendar",quotes:"/app/crm/quotes",users:"/app/users",billing:"/app/billing",security:"/app/security","email-intake":"/app/email-intake"}[u];p&&i(p)};return e.jsx(Gi,{user:a,isAdmin:c,onNavigate:o,children:e.jsx(E6,{})})}function D6({ticketId:a,customerId:l,onDraftComplete:i}){const[c,o]=f.useState(""),[u,h]=f.useState([]),[p,g]=f.useState({ticket_description:!0,ticket_updates:!0,customer_info:!0,similar_quotes:!0}),[y,x]=f.useState(!1),[j,b]=f.useState(null),[A,T]=f.useState(null);f.useEffect(()=>{(a||l)&&D()},[a,l]);const D=async()=>{try{const C=new URLSearchParams;a&&C.append("ticket_id",a),l&&C.append("customer_id",l);const q=await fetch(`/api/quotes/ai-context-preview?${C}`,{credentials:"include"});if(q.ok){const I=await q.json();b(I)}}catch(C){console.error("Error fetching context preview:",C)}},S=async C=>{const q=Array.from(C.target.files),I=q.filter(W=>{const P=W.type==="application/pdf",Y=W.type.startsWith("audio/")||W.name.endsWith(".mp3")||W.name.endsWith(".wav")||W.name.endsWith(".mp4");return P||Y});I.length!==q.length&&(T("Only PDF and audio files (MP3, WAV, MP4) are supported"),setTimeout(()=>T(null),3e3)),h(W=>[...W,...I])},R=C=>{h(q=>q.filter((I,W)=>W!==C))},k=C=>{g(q=>({...q,[C]:!q[C]}))},E=async()=>{if(!c.trim()&&u.length===0){T("Please enter a prompt or upload a file");return}x(!0),T(null);try{const C=new FormData;C.append("prompt",c),C.append("context_sources",JSON.stringify(p)),a&&C.append("ticket_id",a),l&&C.append("customer_id",l),u.forEach(W=>{C.append("files",W)});const q=await fetch("/api/quotes/ai-generate-draft",{method:"POST",credentials:"include",body:C});if(!q.ok)throw new Error("Failed to generate draft quote");const I=await q.json();i(I)}catch(C){console.error("Error generating draft:",C),T("Failed to generate draft quote. Please try again.")}finally{x(!1)}},w=C=>C.type==="application/pdf"?e.jsx(Ct,{size:16}):C.type.startsWith("audio/")?e.jsx(LS,{size:16}):e.jsx(Ct,{size:16});return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 flex gap-2 sm:gap-3",children:[e.jsx(Ih,{className:"text-blue-600 flex-shrink-0 mt-0.5",size:18}),e.jsxs("div",{className:"text-xs sm:text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium",children:"AI Quote Generator"}),e.jsx("p",{className:"mt-1",children:"Paste a customer email, type requirements, or upload files. The AI will analyze the information and generate a draft quote for you to review and edit."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Main Prompt"}),e.jsx("textarea",{value:c,onChange:C=>o(C.target.value),placeholder:`Paste customer email, type requirements, or describe what the customer needs...

Example:
- Paste: 'Hi, we need a quote for network upgrade for 21 units...'
- Type: 'Create quote for server installation, 3 days labour, Dell server, migration'
- Notes: 'Customer called about WiFi upgrade, needs completion by end of month'`,className:"w-full h-48 sm:h-64 px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm resize-none"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"This is your primary input. Paste anything here - emails, notes, requirements, instructions to the AI."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 sm:p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx("input",{type:"file",id:"file-upload",multiple:!0,accept:".pdf,.mp3,.wav,.mp4,audio/*",onChange:S,className:"hidden"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(jk,{className:"text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF files or audio recordings (MP3, WAV, MP4)"})]})]}),u.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:u.map((C,q)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[w(C),e.jsx("span",{className:"text-sm text-gray-700",children:C.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(C.size/1024).toFixed(1)," KB)"]})]}),e.jsx("button",{onClick:()=>R(q),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Context to Include"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"ctx-ticket",checked:p.ticket_description,onChange:()=>k("ticket_description"),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"ctx-ticket",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Ticket Description"}),(j==null?void 0:j.ticket_description)&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:j.ticket_description})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"ctx-updates",checked:p.ticket_updates,onChange:()=>k("ticket_updates"),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"ctx-updates",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Ticket Updates & Comments"}),(j==null?void 0:j.ticket_updates_count)>0&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[j.ticket_updates_count," updates available"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"ctx-customer",checked:p.customer_info,onChange:()=>k("customer_info"),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"ctx-customer",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Customer Information"}),(j==null?void 0:j.customer_name)&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[j.customer_name," - ",j.customer_sector||"No sector"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"ctx-similar",checked:p.similar_quotes,onChange:()=>k("similar_quotes"),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"ctx-similar",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Previous Similar Quotes"}),(j==null?void 0:j.similar_quotes_count)>0&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[j.similar_quotes_count," similar quotes found"]})]})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"The AI will use this context along with your prompt to generate a more accurate quote."})]}),A&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-800",children:A}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:E,disabled:y||!c.trim()&&u.length===0,className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm sm:text-base w-full sm:w-auto",children:y?e.jsxs(e.Fragment,{children:[e.jsx(TS,{className:"animate-spin",size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Generating Draft..."}),e.jsx("span",{className:"sm:hidden",children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ik,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Generate Draft Quote"}),e.jsx("span",{className:"sm:hidden",children:"Generate Quote"})]})})})]})}function M6(){Lt();const{id:a}=Wo(),l=!!a,[i,c]=f.useState("manual"),[o,u]=f.useState(null),h=p=>{u(p),c("manual")};return l?e.jsx(_h,{mode:"edit"}):e.jsxs("div",{className:"container mx-auto p-2 sm:p-4 md:p-6 max-w-7xl",children:[e.jsxs("div",{className:"flex border-b mb-4 sm:mb-6 overflow-x-auto",children:[e.jsx("button",{className:`px-3 sm:px-6 py-2 sm:py-3 font-medium text-sm sm:text-base transition-colors whitespace-nowrap ${i==="manual"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>c("manual"),children:"Manual Entry"}),e.jsx("button",{className:`px-3 sm:px-6 py-2 sm:py-3 font-medium text-sm sm:text-base transition-colors whitespace-nowrap ${i==="ai"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>c("ai"),children:"AI Generator"})]}),i==="manual"&&e.jsx(_h,{mode:"create",initialData:o,onClearDraft:()=>u(null)}),i==="ai"&&e.jsx(D6,{onDraftComplete:h})]})}function xy({mode:a="create"}){const{user:l,membership:i}=gl(),c=Lt(),o=(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="owner",u=h=>{const g={tickets:"/app/tickets",calendar:"/app/calendar",contacts:"/app/contacts",crm:"/app/crm","crm-calendar":"/app/crm/calendar",quotes:"/app/crm/quotes",users:"/app/users",billing:"/app/billing",security:"/app/security","email-intake":"/app/email-intake"}[h];g&&c(g)};return e.jsx(Gi,{user:l,isAdmin:o,onNavigate:u,children:a==="create"?e.jsx(M6,{}):e.jsx(_h,{mode:a})})}function R6(){const{user:a,membership:l}=gl(),i=Lt(),c=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="owner",o=u=>{const p={tickets:"/app/tickets",calendar:"/app/calendar",contacts:"/app/contacts",crm:"/app/crm","crm-calendar":"/app/crm/calendar",quotes:"/app/crm/quotes",users:"/app/users",billing:"/app/billing",security:"/app/security","email-intake":"/app/email-intake"}[u];p&&i(p)};return e.jsx(Gi,{user:a,isAdmin:c,onNavigate:o,children:e.jsx(_6,{})})}function O6(){var A,T,D,S;const[a,l]=f.useState(null),[i,c]=f.useState(!0),[o,u]=f.useState(!1),[h,p]=f.useState(null);f.useEffect(()=>{g()},[]);const g=async()=>{try{const R=await fetch("/api/pricing",{credentials:"include"});if(R.ok){const k=await R.json();l(k)}}catch(R){console.error("Error fetching pricing:",R)}finally{c(!1)}},y=async()=>{u(!0),p(null);try{(await fetch("/api/pricing",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)})).ok?(p({type:"success",text:"Pricing configuration saved successfully"}),setTimeout(()=>p(null),3e3)):p({type:"error",text:"Failed to save pricing configuration"})}catch(R){console.error("Error saving pricing:",R),p({type:"error",text:"Failed to save pricing configuration"})}finally{u(!1)}},x=(R,k)=>{l(E=>({...E,[R]:parseFloat(k)||0}))},j=R=>(R/8).toFixed(2),b=(R,k)=>{const E=parseFloat(k)||0,w=R.replace("_day_rate","_hourly_rate");l(C=>({...C,[R]:E,[w]:parseFloat(j(E))}))};return i?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Ev,{className:"animate-spin text-blue-500",size:24}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading pricing configuration..."})]}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hi,{className:"text-blue-600",size:28}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Pricing Configuration"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure day rates and pricing for AI quote generation"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3",children:[e.jsx(Ih,{className:"text-blue-600 flex-shrink-0",size:20}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium",children:"How this works:"}),e.jsx("p",{className:"mt-1",children:"These rates will be used by the AI quote generator to automatically calculate pricing for labour items. Hourly rates are automatically calculated as day rate  8."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Day Rates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Standard Day Rate ()"}),e.jsx("input",{type:"number",step:"0.01",value:(a==null?void 0:a.standard_day_rate)||0,onChange:R=>b("standard_day_rate",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Hourly: ",((A=a==null?void 0:a.standard_hourly_rate)==null?void 0:A.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senior Day Rate ()"}),e.jsx("input",{type:"number",step:"0.01",value:(a==null?void 0:a.senior_day_rate)||0,onChange:R=>b("senior_day_rate",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Hourly: ",((T=a==null?void 0:a.senior_hourly_rate)==null?void 0:T.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Junior Day Rate ()"}),e.jsx("input",{type:"number",step:"0.01",value:(a==null?void 0:a.junior_day_rate)||0,onChange:R=>b("junior_day_rate",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Hourly: ",((D=a==null?void 0:a.junior_hourly_rate)==null?void 0:D.toFixed(2))||"0.00"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Markup & Margin"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Markup (%)"}),e.jsx("input",{type:"number",step:"0.01",value:(a==null?void 0:a.default_markup_percent)||0,onChange:R=>x("default_markup_percent",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Applied to parts and equipment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Margin (%)"}),e.jsx("input",{type:"number",step:"0.01",value:(a==null?void 0:a.default_margin_percent)||0,onChange:R=>x("default_margin_percent",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target profit margin"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[h&&e.jsx("div",{className:`text-sm ${h.type==="success"?"text-green-600":"text-red-600"}`,children:h.text}),e.jsx("div",{className:"ml-auto",children:e.jsx("button",{onClick:y,disabled:o,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ev,{className:"animate-spin",size:18}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{size:18}),"Save Configuration"]})})})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Example Calculation"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Labour (8 hours):"})," 8  ",((S=a==null?void 0:a.standard_hourly_rate)==null?void 0:S.toFixed(2))||"0.00"," = ",(((a==null?void 0:a.standard_hourly_rate)||0)*8).toFixed(2)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Parts (1,000):"})," 1,000  ",(((a==null?void 0:a.default_markup_percent)||0)/100+1).toFixed(2)," = ",(1e3*(((a==null?void 0:a.default_markup_percent)||0)/100+1)).toFixed(2)]}),e.jsxs("p",{className:"pt-2 border-t border-gray-300 font-medium",children:["Total Quote: ",(((a==null?void 0:a.standard_hourly_rate)||0)*8+1e3*(((a==null?void 0:a.default_markup_percent)||0)/100+1)).toFixed(2)]})]})]})]})}function z6(){const{user:a,membership:l}=Zi(),i=Lt(),c=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="owner",o=u=>{const p={tickets:"/app/tickets",calendar:"/app/calendar",contacts:"/app/contacts",crm:"/app/crm","crm-calendar":"/app/crm/calendar",quotes:"/app/crm/quotes",users:"/app/users","pricing-config":"/app/pricing-config",billing:"/app/billing",security:"/app/security","email-intake":"/app/email-intake"}[u];p&&i(p)};return e.jsx(Gi,{user:a,isAdmin:c,onNavigate:o,children:e.jsx(O6,{})})}async function An(a,l){const i=await fetch(a,{credentials:"include",headers:{"Content-Type":"application/json",...(l==null?void 0:l.headers)||{}},...l});if(!i.ok){const c=await i.text();throw new Error(c||`HTTP ${i.status}`)}return i.json()}const P6={list:()=>An("/api/tickets/users/list")},rl={list:a=>An(`/api/tickets${a?`?${new URLSearchParams(a)}`:""}`),get:a=>An(`/api/tickets/${a}`),create:a=>An("/api/tickets",{method:"POST",body:JSON.stringify(a)}),update:(a,l)=>An(`/api/tickets/${a}`,{method:"PUT",body:JSON.stringify(l)}),delete:a=>An(`/api/tickets/${a}`,{method:"DELETE"}),bulkUpdate:(a,l)=>{console.log(" bulkUpdate API call:",{ids:a,patch:l,payload:{ids:a,updates:l}}),console.log(" Patch object keys:",Object.keys(l)),console.log(" Patch object values:",Object.values(l)),console.log(" Patch object entries:",Object.entries(l));const c=JSON.stringify({ids:a,updates:l});return console.log(" JSON stringified body:",c),console.log(" Body length:",c.length),An("/api/tickets/bulk",{method:"PUT",body:c})},bulkDelete:a=>An("/api/tickets/bulk",{method:"DELETE",body:JSON.stringify({ids:a})})};function L6(a){return{title:a.title,description:a.description??"",priority:a.priority??"medium",assigneeId:a.assigneeId??a.assignedTo??null,queueId:a.queueId??null,sector:a.sector??null,scheduled_date:a.scheduledDate??a.scheduled_date??null,scheduled_duration_mins:a.scheduledDuration??a.scheduled_duration_mins??null,method_statement:a.methodStatement??a.method_statement??null,risk_assessment:a.riskAssessment??a.risk_assessment??null}}const qb=As.createContext(),Zi=()=>{const a=As.useContext(qb);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},Ib=As.createContext(),Da=()=>{const a=As.useContext(Ib);if(!a)throw new Error("useSimulation must be used within a SimulationProvider");return a},bo={logs:[],sendEmail(a,l,i,c=null){const o={id:`email-${Date.now()}`,ticketId:c,to:a,subject:l,template:i,status:"sent",sentAt:new Date().toISOString()};return this.logs.unshift(o),console.log(` EMAIL SENT:
To: ${a}
Subject: ${l}
Template: ${i}
Ticket: ${c||"N/A"}
Time: ${new Date().toLocaleString()}`),o},getLogs(){return this.logs}},U6=({children:a})=>{const[l,i]=f.useState([]),[c,o]=f.useState(p4),[u,h]=f.useState(g4),[p,g]=f.useState(y4),[y,x]=f.useState([]),[j,b]=f.useState([]);f.useEffect(()=>{(async()=>{try{const{tickets:P}=await rl.list(),Y=(P||[]).map(B=>({...B,assignedTo:B.assignee_id,assignedUser:B.assignee_name}));i(Y),console.log(" Loaded tickets from API:",Y==null?void 0:Y.length)}catch(P){console.error("[SimulationProvider] Failed to load tickets from API",P)}try{const{users:P}=await P6.list();o(P||[]),console.log(" Loaded users from API:",P==null?void 0:P.length,P)}catch(P){console.error("[SimulationProvider] Failed to load users from API",P),console.log(" Falling back to mock users")}try{const P=await fetch("/api/organizations/current");if(P.ok){const Y=await P.json();g(Y.organization),console.log(" Loaded organization from API:",Y.organization)}else console.error("[SimulationProvider] Failed to load organization:",P.status),console.log(" Falling back to mock organization")}catch(P){console.error("[SimulationProvider] Failed to load organization from API",P),console.log(" Falling back to mock organization")}})()},[]),f.useEffect(()=>{let P=()=>{};return m0(async()=>{const{initializeBookingSync:Y}=await import("./initializeBookingSync-B7FPUOM4.js");return{initializeBookingSync:Y}},__vite__mapDeps([0,1])).then(({initializeBookingSync:Y})=>{P=Y()}).catch(Y=>{console.error("Error initializing booking sync:",Y)}),P},[]);const A=P=>{var N,L,v,O;if(!P.scheduled_date)return;let Y=P.scheduled_date;Y.startsWith("50925-")&&(Y=Y.replace("50925-","2025-09-"));const B=new Date(Y);if(isNaN(B.getTime())){console.error("[createBookingFromTicket] Invalid scheduled_date:",P.scheduled_date,"corrected to:",Y);return}console.log("[createBookingFromTicket] Processing ticket with scheduled date:",Y);const le=c==null?void 0:c.find(M=>M.id===P.assignedTo),Z={id:`BK-${P.id}`,ticketId:P.id,customerName:((N=P.contactDetails)==null?void 0:N.companyName)||((L=P.contactDetails)==null?void 0:L.name)||"Unknown Customer",customerPhone:((v=P.contactDetails)==null?void 0:v.phone)||"",customerEmail:((O=P.contactDetails)==null?void 0:O.email)||"",service:P.title,date:B.toISOString().split("T")[0],time:"09:00",duration:P.scheduled_duration_mins||60,location:P.location||"On-site",priority:P.priority||"medium",status:"scheduled",notes:P.description,assignedTo:(le==null?void 0:le.name)||"Unassigned",metadata:{sector:P.sector||"General",reference:P.id}},ee=[...JSON.parse(localStorage.getItem("ticketBookings")||"[]"),Z];localStorage.setItem("ticketBookings",JSON.stringify(ee)),console.log("[App] Booking created from ticket:",Z)},T=P=>{if(!P.scheduled_date)return;const Y=c==null?void 0:c.find(Z=>Z.id===P.assignedTo),le=JSON.parse(localStorage.getItem("ticketBookings")||"[]").map(Z=>Z.ticketId===P.id?{...Z,date:new Date(P.scheduled_date).toISOString().split("T")[0],duration:P.scheduled_duration_mins||Z.duration,notes:P.description,assignedTo:(Y==null?void 0:Y.name)||"Unassigned",priority:P.priority||Z.priority}:Z);localStorage.setItem("ticketBookings",JSON.stringify(le))},D=async P=>{try{const Y=L6(P),{ticket:B}=await rl.create(Y),le={...B,assignedTo:B.assignee_id,assignedUser:B.assignee_name};return i(Z=>[le,...Z]),B.scheduled_date&&A(B),B}catch(Y){throw console.error("[createTicket] API error",Y),Y}},S=async(P,Y)=>{try{const{ticket:B}=await rl.update(P,Y),le={...B,assignedTo:B.assignee_id,assignedUser:B.assignee_name};i(Z=>Z.map($=>$.id===P?{...$,...le}:$)),B!=null&&B.scheduled_date&&T(B)}catch(B){throw console.error("[updateTicket] API error",B),B}},R=async P=>{try{await rl.delete(P),i(Y=>Y.filter(B=>B.id!==P))}catch(Y){throw console.error("[deleteTicket] API error",Y),Y}},k=async(P,Y)=>{console.log(" bulkUpdateTickets called:",{ticketIds:P,updates:Y,updatesType:typeof Y,updatesKeys:Object.keys(Y)});try{await rl.bulkUpdate(P,Y);const{tickets:B}=await rl.list(),le=(B||[]).map(Z=>({...Z,assignedTo:Z.assignee_id,assignedUser:Z.assignee_name}));i(le)}catch(B){throw console.error("[bulkUpdateTickets] API error",B),B}},E=async P=>{try{await rl.bulkDelete(P),i(Y=>Y.filter(B=>!P.includes(B.id)))}catch(Y){throw console.error("[bulkDeleteTickets] API error",Y),Y}},w=(P,Y,B,le="comment")=>{i(Z=>Z.map($=>{var ee;if($.id===P){const N={id:`CMT-${Date.now()}`,author:Y,authorName:((ee=c.find(L=>L.id===Y))==null?void 0:ee.name)||"Unknown User",content:B,createdAt:new Date().toISOString(),type:le};return{...$,comments:[N,...$.comments||[]],updatedAt:new Date().toISOString()}}return $}))},W={tickets:l,users:c,workflows:u,organization:p,emailLogs:y,billingQueue:j,setUsers:o,setOrganization:g,updateOrganization:g,emailService:bo,createTicket:D,updateTicket:S,deleteTicket:R,bulkUpdateTickets:k,bulkDeleteTickets:E,addComment:w,assignTicket:(P,Y)=>{S(P,{assignedTo:Y,status:"awaiting_assignment"});const B=c.find(le=>le.id===Y);if(B){const le=l.find($=>$.id===P),Z=bo.sendEmail(B.email,`Ticket Assigned: ${(le==null?void 0:le.title)||"Unknown Ticket"}`,"ticket_assigned",P);x($=>[Z,...$])}},requestApproval:(P,Y,B="")=>{const le=l.find(ee=>ee.id===P),Z=c.find(ee=>ee.id===Y),$=c.filter(ee=>ee.role==="admin"||ee.role==="manager");le&&Z&&$.length>0&&(S(P,{status:"waiting_approval",workflowStage:"awaiting_authorization"}),$.forEach(ee=>{const N=bo.sendEmail(ee.email,`Approval Request: ${le.title}`,"approval_request",P);x(L=>[N,...L])}),w(P,Y,`Approval requested${B?`: ${B}`:""}`,"system"))},processApproval:(P,Y,B,le="")=>{var ee;const Z=c.find(N=>N.role==="admin"||N.role==="manager"),$=l.find(N=>N.id===P);if($&&Z){S(P,{status:B==="approve"?"approved":"denied",approverId:Y,approvalDecision:B,approvalReason:le});const L=bo.sendEmail(((ee=$.requester)==null?void 0:ee.email)||"notifications@worktrackr.cloud",`Ticket ${B.toUpperCase()}: ${$.title}`,"approval_result",P);x(v=>[L,...v]),w(P,Y,`Ticket ${B}${le?`: ${le}`:""}`,"system")}}};return e.jsx(Ib.Provider,{value:W,children:a})},q6=({children:a})=>{const[l,i]=f.useState(null),[c,o]=f.useState(null),[u,h]=f.useState(!0),[p,g]=f.useState(null);f.useEffect(()=>{y()},[]);const y=async()=>{try{const T=await fetch("/api/auth/session",{credentials:"include",headers:{"Content-Type":"application/json"}});if(T.ok){const D=await T.json();i(D.user),o(D.membership),D.membership&&await x()}else i(null),o(null),g(null)}catch(T){console.error("Auth check failed:",T),i(null),o(null),g(null)}finally{h(!1)}},x=async()=>{try{const T=await fetch("/api/organizations/current",{credentials:"include",headers:{"Content-Type":"application/json"}});if(T.ok){const D=await T.json();g(D.organization)}}catch(T){console.error("Failed to fetch organization:",T)}},A={user:l,membership:c,organization:p,loading:u,login:async(T,D)=>{try{const S=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:T,password:D})});if(S.ok){const R=await S.json();return i(R.user),o(R.membership),R.membership&&await x(R.membership.orgId),{success:!0,user:R.user}}else return{success:!1,error:(await S.json()).error||"Login failed"}}catch(S){return console.error("Login error:",S),{success:!1,error:"Network error"}}},logout:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(T){console.error("Logout error:",T)}finally{i(null),o(null),g(null)}},checkAuthStatus:y};return e.jsx(qb.Provider,{value:A,children:a})};function I6(){return e.jsx(q6,{children:e.jsx(U6,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs(Ty,{children:[e.jsx(Et,{path:"dashboard",element:e.jsx(w6,{})}),e.jsx(Et,{path:"workflow-builder",element:e.jsx(S6,{})}),e.jsx(Et,{path:"crm/quotes",element:e.jsx(A6,{})}),e.jsx(Et,{path:"crm/quotes/new",element:e.jsx(xy,{mode:"create"})}),e.jsx(Et,{path:"crm/quotes/:id",element:e.jsx(R6,{})}),e.jsx(Et,{path:"crm/quotes/:id/edit",element:e.jsx(xy,{mode:"edit"})}),e.jsx(Et,{path:"settings/pricing-config",element:e.jsx(z6,{})}),e.jsx(Et,{path:"/",element:e.jsx(Ri,{to:"/app/dashboard",replace:!0})}),e.jsx(Et,{path:"*",element:e.jsx(Ri,{to:"/app/dashboard",replace:!0})})]})})})})}function B6(){return e.jsx(I6,{})}c1.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(b2,{children:e.jsx(Bk,{children:e.jsxs(Ty,{children:[e.jsx(Et,{path:"/",element:e.jsx(Ak,{})}),e.jsx(Et,{path:"/pricing",element:e.jsx(Ok,{})}),e.jsx(Et,{path:"/signup",element:e.jsx(Ik,{})}),e.jsx(Et,{path:"/login",element:e.jsx(Vk,{})}),e.jsx(Et,{path:"/forgot-password",element:e.jsx(Yk,{})}),e.jsx(Et,{path:"/reset-password",element:e.jsx(Qk,{})}),e.jsx(Et,{path:"/welcome",element:e.jsx(Gk,{})}),e.jsx(Et,{path:"/admin87476463",element:e.jsx(Wk,{})}),e.jsx(Et,{path:"/admin87476463/dashboard",element:e.jsx(u4,{})}),e.jsx(Et,{path:"/admin87476463/users/:userId",element:e.jsx(m4,{})}),e.jsx(Et,{path:"/app/*",element:e.jsx(h4,{children:e.jsx(B6,{})})}),e.jsx(Et,{path:"/app",element:e.jsx(Ri,{to:"/app/dashboard",replace:!0})}),e.jsx(Et,{path:"*",element:e.jsx(Ri,{to:"/",replace:!0})})]})})})}));
